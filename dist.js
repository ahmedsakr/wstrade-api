!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("source-map-support"),require("node-fetch")):"function"==typeof define&&define.amd?define(["source-map-support","node-fetch"],e):"object"==typeof exports?exports["wstrade-api"]=e(require("source-map-support"),require("node-fetch")):t["wstrade-api"]=e(t._,t._)}(global,(function(t,e){return(()=>{var r={228:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},858:t=>{t.exports=function(t){if(Array.isArray(t))return t}},646:(t,e,r)=>{var n=r(228);t.exports=function(t){if(Array.isArray(t))return n(t)}},926:t=>{function e(t,e,r,n,o,a,s){try{var i=t[a](s),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}t.exports=function(t){return function(){var r=this,n=arguments;return new Promise((function(o,a){var s=t.apply(r,n);function i(t){e(s,o,a,i,c,"next",t)}function c(t){e(s,o,a,i,c,"throw",t)}i(void 0)}))}}},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},913:t=>{function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}},713:t=>{t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},860:t=>{t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},884:t=>{t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,a=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}},521:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},206:t=>{t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},38:(t,e,r)=>{var n=r(858),o=r(884),a=r(379),s=r(521);t.exports=function(t,e){return n(t)||o(t,e)||a(t,e)||s()}},319:(t,e,r)=>{var n=r(646),o=r(860),a=r(379),s=r(206);t.exports=function(t){return n(t)||o(t)||a(t)||s()}},379:(t,e,r)=>{var n=r(228);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}},757:(t,e,r)=>{t.exports=r(666)},391:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(757),o=r.n(n),a=r(926),s=r.n(a),i=r(726),c=r(811);const u={all:(w=s()(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.Z)(i.Z.ACCOUNT_IDS,{});case 2:return e=t.sent,t.abrupt("return",{tfsa:e.find((function(t){return t.startsWith("tfsa")})),rrsp:e.find((function(t){return t.startsWith("rrsp")})),crypto:e.find((function(t){return t.startsWith("non-registered-crypto")})),personal:e.find((function(t){return t.startsWith("non-registered")&&!t.startsWith("non-registered-crypto")}))});case 4:case"end":return t.stop()}}),t)}))),function(){return w.apply(this,arguments)}),data:(m=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.LIST_ACCOUNT,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return m.apply(this,arguments)}),me:(v=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.ME,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return v.apply(this,arguments)}),person:(y=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.PERSON,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return y.apply(this,arguments)}),history:(d=s()(o().mark((function t(e,r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.HISTORY_ACCOUNT,{interval:e,accountId:r}));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return d.apply(this,arguments)}),activities:(h=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.ACTIVITIES,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)}),getBankAccounts:(l=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.BANK_ACCOUNTS,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)}),deposits:(f=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.DEPOSITS,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)}),positions:(p=s()(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.POSITIONS,{accountId:e}));case 1:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)})};var p,f,l,h,d,y,v,m,w},726:(t,e,r)=>{"use strict";r.d(e,{p:()=>x,Z:()=>g});var n,o,a,s,i,c,u,p,f,l,h,d,y=r(757),v=r.n(y),m=r(926),w=r.n(m),x=20,b={onFailure:(o=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.status,t.t1=e.statusText,t.next=4,e.json();case 4:return t.t2=t.sent,t.abrupt("return",{status:t.t0,reason:t.t1,body:t.t2});case 6:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)}),onSuccess:(n=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.json());case 1:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})};const g={LOGIN:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/login",onSuccess:(d=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0={access:e.headers.get("x-access-token"),refresh:e.headers.get("x-refresh-token"),expires:parseInt(e.headers.get("x-access-token-expires"),10)},t.next=3,e.json();case 3:return t.t1=t.sent,t.abrupt("return",{tokens:t.t0,accountInfo:t.t1});case 5:case"end":return t.stop()}}),t)}))),function(t){return d.apply(this,arguments)}),onFailure:b.onFailure},REFRESH:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/refresh",onSuccess:(h=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{tokens:{access:e.headers.get("x-access-token"),refresh:e.headers.get("x-refresh-token"),expires:parseInt(e.headers.get("x-access-token-expires"),10)}});case 1:case"end":return t.stop()}}),t)}))),function(t){return h.apply(this,arguments)}),onFailure:b.onFailure},ACCOUNT_IDS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",onSuccess:(l=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results.map((function(t){return t.id})));case 4:case"end":return t.stop()}}),t)}))),function(t){return l.apply(this,arguments)}),onFailure:b.onFailure},LIST_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",onSuccess:(f=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return f.apply(this,arguments)}),onFailure:b.onFailure},ME:{method:"GET",url:"https://trade-service.wealthsimple.com/me",onSuccess:b.onSuccess,onFailure:b.onFailure},PERSON:{method:"GET",url:"https://trade-service.wealthsimple.com/person",onSuccess:b.onSuccess,onFailure:b.onFailure},HISTORY_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/history/{0}?account_id={1}",parameters:{0:"interval",1:"accountId"},onSuccess:b.onSuccess,onFailure:b.onFailure},ACTIVITIES:{method:"GET",url:"https://trade-service.wealthsimple.com/account/activities",onSuccess:(p=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)}),onFailure:b.onFailure},DEPOSITS:{method:"GET",url:"https://trade-service.wealthsimple.com/deposits",onSuccess:(u=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)}),onFailure:b.onFailure},BANK_ACCOUNTS:{method:"GET",url:"https://trade-service.wealthsimple.com/bank-accounts",onSuccess:(c=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)}),onFailure:b.onFailure},EXCHANGE_RATES:{method:"GET",url:"https://trade-service.wealthsimple.com/forex",onSuccess:b.onSuccess,onFailure:b.onFailure},SECURITY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities?query={0}",parameters:{0:"ticker"},onSuccess:(i=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:if(0!==(r=t.sent).results.length){t.next=5;break}throw new Error("Security does not exist");case 5:return t.abrupt("return",r.results);case 6:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)}),onFailure:b.onFailure},EXTENSIVE_SECURITY_DETAILS:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}",parameters:{0:"id"},onSuccess:b.onSuccess,onFailure:b.onFailure},POSITIONS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/positions?account_id={0}",parameters:{0:"accountId"},onSuccess:(s=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)}),onFailure:b.onFailure},ORDERS_BY_PAGE:{method:"GET",url:"https://trade-service.wealthsimple.com/orders?offset={0}&account_id={1}",parameters:{0:"offset",1:"accountId"},onSuccess:(a=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",{total:r.total,orders:r.results});case 4:case"end":return t.stop()}}),t)}))),function(t){return a.apply(this,arguments)}),onFailure:b.onFailure},CANCEL_ORDER:{method:"DELETE",url:"https://trade-service.wealthsimple.com/orders/{0}",parameters:{0:"orderId"},onSuccess:b.onSuccess,onFailure:b.onFailure},PLACE_ORDER:{method:"POST",url:"https://trade-service.wealthsimple.com/orders",onSuccess:b.onSuccess,onFailure:b.onFailure}}},464:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(757),o=r.n(n),a=r(926),s=r.n(a),i=r(811),c=r(726);const u={tokens:null,otp:null,on:function(t,e){this[t]=e},login:function(t,e){var r=this;return s()(o().mark((function n(){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=null,"function"!=typeof r.otp){n.next=4;break}return n.next=4,(0,i.Z)(c.Z.LOGIN,{email:t,password:e}).catch((function(){}));case 4:if(n.prev=4,n.t0=i.Z,n.t1=c.Z.LOGIN,n.t2=t,n.t3=e,"function"!=typeof r.otp){n.next=15;break}return n.next=12,r.otp();case 12:n.t4=n.sent,n.next=16;break;case 15:n.t4=r.otp;case 16:return n.t5=n.t4,n.t6={email:n.t2,password:n.t3,otp:n.t5},n.next=20,(0,n.t0)(n.t1,n.t6);case 20:a=n.sent,n.next=28;break;case 23:if(n.prev=23,n.t7=n.catch(4),r.otp){n.next=27;break}throw new Error("OTP not provided!");case 27:throw n.t7;case 28:r.tokens=a.tokens;case 29:case"end":return n.stop()}}),n,null,[[4,23]])})))()},refresh:function(){var t=this;return s()(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.tokens.access=null,e.next=3,(0,i.Z)(c.Z.REFRESH,{refresh_token:t.tokens.refresh});case 3:r=e.sent,t.tokens=r.tokens;case 5:case"end":return e.stop()}}),e)})))()}}},500:(t,e,r)=>{"use strict";r.d(e,{e:()=>o,Z:()=>a});var n=["securities_cache"],o=function(t){return!n.includes(t)};function a(t){if(null!=t&&t.startsWith("no_")){var e=t.substring(t.indexOf("_")+1);o(e)&&n.push(e)}else o(t)||n.splice(n.indexOf(t),1)}},657:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(38),o=r.n(n),a=r(575),s=r.n(a),i=r(913),c=r.n(i),u=["NASDAQ","NYSE","TSX","TSX-V","NEO","CC"];const p=function(){function t(e){var r;if(s()(this,t),this.symbol=null,this.exchange=null,this.id=null,this.crypto=!1,"string"==typeof e){if(""===e)throw new Error("Empty ticker");var n=e.split(":"),a=o()(n,2);this.symbol=a[0],this.exchange=a[1]}else{if(!e.symbol&&!e.id)throw new Error("Invalid ticker '".concat(e,"'"));this.symbol=e.symbol||null,this.exchange=e.exchange||null,this.id=e.id||null}if(this.exchange&&!u.includes(this.exchange))throw new Error("Invalid exchange '".concat(this.exchange,"'!"));("CC"===this.exchange||null!==(r=this.id)&&void 0!==r&&r.startsWith("sec-z"))&&(this.crypto=!0),"NEO"===this.exchange&&(this.exchange="AEQUITAS NEO EXCHANGE")}return c()(t,[{key:"format",value:function(){return this.id?this.id:"AEQUITAS NEO EXCHANGE"===this.exchange?"".concat(this.symbol,":NEO"):"".concat(this.symbol).concat(this.exchange?":".concat(this.exchange):"")}},{key:"weakEquals",value:function(t){return!(!this.id||this.id!==t.id)||!(!this.symbol||this.symbol!==t.symbol||this.crypto!==t.crypto)}}]),t}()},752:(t,e,r)=>{"use strict";r.d(e,{Z:()=>x});var n=r(38),o=r.n(n),a=r(757),s=r.n(a),i=r(926),c=r.n(i),u=r(726),p=r(811),f=r(657),l=r(500),h=r(575),d=r.n(h),y=r(913),v=r.n(y),m=new(function(){function t(e){d()(this,t),this.cache=new Map,this.size=e}return v()(t,[{key:"insert",value:function(t,e){this.cache.size>=this.size&&this.cache.delete(this.cache.keys().next().value),this.cache.set(t,e)}},{key:"get",value:function(t){return this.cache.get(t)}}]),t}())(10);const w=function(t){var e=m.get(new f.Z(t).format());return void 0===e?null:e},x={exchangeRates:(g=c()(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.Z)(u.Z.EXCHANGE_RATES,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return g.apply(this,arguments)}),getSecurity:(b=c()(s().mark((function t(e,r){var n,a,i,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,a=new f.Z(e),r||!(0,l.e)("securities_cache")){t.next=6;break}if(!(n=w(a))){t.next=6;break}return t.abrupt("return",n);case 6:if(!a.id){t.next=12;break}return t.next=9,(0,p.Z)(u.Z.EXTENSIVE_SECURITY_DETAILS,{id:a.id});case 9:n=t.sent,t.next=28;break;case 12:return t.next=14,(0,p.Z)(u.Z.SECURITY,{ticker:a.symbol});case 14:if(n=(n=t.sent).filter((function(t){return t.stock.symbol===a.symbol})),a.crypto?n=n.filter((function(t){return"cryptocurrency"===t.security_type})):a.exchange&&(n=n.filter((function(t){return t.stock.primary_exchange===a.exchange}))),!(n.length>1)){t.next=19;break}throw new Error("Multiple securities matched query.");case 19:if(0!==n.length){t.next=21;break}throw new Error("No securities matched query.");case 21:if(i=n,c=o()(i,1),n=c[0],!r){t.next=28;break}return t.next=27,(0,p.Z)(u.Z.EXTENSIVE_SECURITY_DETAILS,{id:n.id});case 27:n=t.sent;case 28:return(0,l.e)("securities_cache")&&null===w(a)&&(s=a,h=n,m.insert(new f.Z(s).format(),h)),t.abrupt("return",n);case 30:case"end":return t.stop()}var s,h}),t)}))),function(t,e){return b.apply(this,arguments)})};var b,g},568:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(319),o=r.n(n),a=new(r(545).Headers);const s={add:function(t,e){return a.append(t,e)},remove:function(t){return a.delete(t)},clear:function(){return o()(a).forEach((function(t){return a.delete(t[0])}))},values:function(){return o()(a)}}},352:(t,e,r)=>{r(949).install();var n=r(464).Z,o=r(568).Z,a=r(391).Z,s=r(826).Z,i=r(752).Z,c=r(889).Z,u=r(500).Z;t.exports={auth:n,headers:o,accounts:a,orders:s,quotes:c,data:i,config:u}},811:(t,e,r)=>{"use strict";r.d(e,{Z:()=>S});var n=r(757),o=r.n(n),a=r(319),s=r.n(a),i=r(926),c=r.n(i),u=r(713),p=r.n(u),f=r(545),l=r.n(f),h=r(568),d=r(464),y=r(500);const v=function(){return parseInt(Date.now()/1e3,10)};function m(){return w.apply(this,arguments)}function w(){return(w=c()(o().mark((function t(){var e,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(v()>=(null===(e=d.Z.tokens)||void 0===e?void 0:e.expires))){t.next=13;break}if(null===(r=d.Z.tokens)||void 0===r||!r.refresh){t.next=12;break}return t.prev=2,t.next=5,d.Z.refresh();case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),new Error("Unable to refresh expired token: ".concat(t.t0));case 10:t.next=13;break;case 12:throw new Error("Access token expired");case 13:case"end":return t.stop()}}),t,null,[[2,7]])})))).apply(this,arguments)}function x(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var b=400,g=201;function k(t,e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?x(Object(r),!0).forEach((function(e){p()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e),n=t.url;if(t.parameters)for(var o=0;o<Object.keys(t.parameters).length;o++){var a=t.parameters[o];if(null===r[a]||void 0===r[a])throw new Error("URL Path parameter '".concat(a,"' missing!"));n=n.replace("{".concat(o,"}"),r[t.parameters[o]]),delete r[t.parameters[o]]}return["GET","HEAD"].includes(t.method)?{url:n,payload:void 0}:{url:n,payload:JSON.stringify(r)}}function E(t,e){return _.apply(this,arguments)}function _(){return(_=c()(o().mark((function t(e,r){var n,a,i,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=new f.Headers).append("Content-Type","application/json"),null===(n=d.Z.tokens)||void 0===n||!n.access){t.next=7;break}if(!(0,y.e)("implicit_token_refresh")){t.next=6;break}return t.next=6,m();case 6:a.append("Authorization",d.Z.tokens.access);case 7:return h.Z.values().forEach((function(t){return a.append.apply(a,s()(t))})),i=k(e,r),c=i.url,u=i.payload,t.abrupt("return",l()(c,{body:u,method:e.method,headers:a}));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t,e){return O.apply(this,arguments)}function O(){return(O=c()(o().mark((function t(e,r){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e,r);case 2:if(n=t.sent,![b,g].includes(n.status)){t.next=5;break}return t.abrupt("return",e.onSuccess(n));case 5:return t.t0=Promise,t.next=8,e.onFailure(n);case 8:return t.t1=t.sent,t.abrupt("return",t.t0.reject.call(t.t0,t.t1));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},826:(t,e,r)=>{"use strict";r.d(e,{Z:()=>R});var n=r(713),o=r.n(n),a=r(319),s=r.n(a),i=r(757),c=r.n(i),u=r(926),p=r.n(u),f=r(726),l=r(811),h=r(657);function d(t,e){return y.apply(this,arguments)}function y(){return(y=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.Z)(f.Z.ORDERS_BY_PAGE,{offset:(r-1)*f.p,accountId:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return m.apply(this,arguments)}function m(){return(m=p()(c().mark((function t(e){var r,n,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e,1);case 2:if(r=t.sent,!((n=Math.ceil(r.total/f.p))>1)){t.next=12;break}for(o=[],a=2;a<=n;a++)o.push(d(e,a).then((function(t){return t.orders})));return t.next=9,Promise.all(o);case 9:t.sent.forEach((function(t){var e;return(e=r.orders).push.apply(e,s()(t))})),r.total=r.orders.length;case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t,e,r){return x.apply(this,arguments)}function x(){return(x=p()(c().mark((function t(e,r,n){var o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:return o=t.sent,a=function(t){if(r){var e=new h.Z({symbol:t.symbol,id:t.security_id});if(!new h.Z(r).weakEquals(e))return!1}return t.status===n},o.orders=o.orders.filter(a),o.total=o.orders.length,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}const b={page:d,all:v,pending:(E=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,r,"submitted"));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return E.apply(this,arguments)}),filled:(k=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,r,"posted"));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return k.apply(this,arguments)}),cancelled:(g=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,r,"cancelled"));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return g.apply(this,arguments)})};var g,k,E,_=r(752),S=r(889),O=function(t){return["TSX","TSX-V"].includes(t)};const Z={cancel:(C=p()(c().mark((function t(e){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,(0,l.Z)(f.Z.CANCEL_ORDER,{orderId:e});case 3:return t.t1=t.sent,t.abrupt("return",{order:t.t0,response:t.t1});case 5:case"end":return t.stop()}}),t)}))),function(t){return C.apply(this,arguments)}),cancelPending:function(t){var e=this;return p()(c().mark((function r(){var n;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.pending(t);case 2:return n=r.sent,r.abrupt("return",Promise.all(n.orders.map(function(){var t=p()(c().mark((function t(r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.cancel(r.order_id));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())));case 4:case"end":return r.stop()}}),r)})))()},marketBuy:(L=p()(c().mark((function t(e,r,n){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Z.getSecurity(r);case 2:if(o=t.sent,t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.t2=o.id,new h.Z(r).crypto){t.next=12;break}return t.next=9,S.Z.get(r);case 9:t.t3=t.sent,t.next=13;break;case 12:t.t3=void 0;case 13:return t.t4=t.t3,t.t5=n,t.t6=e,t.t7={security_id:t.t2,limit_price:t.t4,quantity:t.t5,order_type:"buy_quantity",order_sub_type:"market",time_in_force:"day",account_id:t.t6},t.abrupt("return",(0,t.t0)(t.t1,t.t7));case 18:case"end":return t.stop()}}),t)}))),function(t,e,r){return L.apply(this,arguments)}),limitBuy:(P=p()(c().mark((function t(e,r,n,o){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.next=4,_.Z.getSecurity(r);case 4:return t.t2=t.sent.id,t.t3=n,t.t4=o,t.t5=e,t.t6={security_id:t.t2,limit_price:t.t3,quantity:t.t4,order_type:"buy_quantity",order_sub_type:"limit",time_in_force:"day",account_id:t.t5},t.abrupt("return",(0,t.t0)(t.t1,t.t6));case 10:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return P.apply(this,arguments)}),stopLimitBuy:(A=p()(c().mark((function t(e,r,n,o,a){var s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Z.getSecurity(r);case 2:if(s=t.sent,!O(s.stock.primary_exchange)||n===o){t.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return t.abrupt("return",(0,l.Z)(f.Z.PLACE_ORDER,{security_id:s.id,stop_price:n,limit_price:o,quantity:a,order_type:"buy_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:e}));case 6:case"end":return t.stop()}}),t)}))),function(t,e,r,n,o){return A.apply(this,arguments)}),marketSell:(I=p()(c().mark((function t(e,r,n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.next=4,_.Z.getSecurity(r);case 4:if(t.t2=t.sent.id,new h.Z(r).crypto){t.next=11;break}return t.next=8,S.Z.get(r);case 8:t.t3=t.sent,t.next=12;break;case 11:t.t3=void 0;case 12:return t.t4=t.t3,t.t5=n,t.t6=e,t.t7={security_id:t.t2,market_value:t.t4,quantity:t.t5,order_type:"sell_quantity",order_sub_type:"market",time_in_force:"day",account_id:t.t6},t.abrupt("return",(0,t.t0)(t.t1,t.t7));case 17:case"end":return t.stop()}}),t)}))),function(t,e,r){return I.apply(this,arguments)}),limitSell:(j=p()(c().mark((function t(e,r,n,o){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.next=4,_.Z.getSecurity(r);case 4:return t.t2=t.sent.id,t.t3=n,t.t4=o,t.t5=e,t.t6={security_id:t.t2,limit_price:t.t3,quantity:t.t4,order_type:"sell_quantity",order_sub_type:"limit",time_in_force:"day",account_id:t.t5},t.abrupt("return",(0,t.t0)(t.t1,t.t6));case 10:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return j.apply(this,arguments)}),stopLimitSell:(T=p()(c().mark((function t(e,r,n,o,a){var s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Z.getSecurity(r);case 2:if(s=t.sent,!O(s.stock.primary_exchange)||n===o){t.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return t.abrupt("return",(0,l.Z)(f.Z.PLACE_ORDER,{security_id:s.id,stop_price:n,limit_price:o,quantity:a,order_type:"sell_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:e}));case 6:case"end":return t.stop()}}),t)}))),function(t,e,r,n,o){return T.apply(this,arguments)})};var T,j,I,A,P,L,C;function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const R=N(N({},b),Z)},889:(t,e,r)=>{"use strict";r.d(e,{Z:()=>f});var n=r(757),o=r.n(n),a=r(926),s=r.n(a),i=r(752);const c={quote:(u=s()(o().mark((function t(e){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Z.getSecurity(e,!0);case 2:return r=t.sent,t.abrupt("return",r.quote.amount);case 4:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})};var u,p=r(657);const f={defaultProvider:c,providers:{},use:function(t,e){if("function"!=typeof e.quote)throw new Error("Invalid quote provider for ".concat(t,"!"));this.providers[t]=e},get:function(t){var e=this;return s()(o().mark((function r(){var n,a,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=null,!(a=new p.Z(t)).exchange){r.next=6;break}n=a.exchange,r.next=15;break;case 6:if(!a.crypto||!a.id){r.next=10;break}n="CC",r.next=15;break;case 10:if(!(Object.keys(e.providers).length>0)){r.next=15;break}return r.next=13,i.Z.getSecurity(a,!1);case 13:s=r.sent,n=s.stock.primary_exchange;case 15:if(!(n in e.providers)){r.next=17;break}return r.abrupt("return",e.providers[n].quote(a));case 17:return r.abrupt("return",e.defaultProvider.quote(a));case 18:case"end":return r.stop()}}),r)})))()}}},666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function c(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),s=new Z(n||[]);return a._invoke=function(t,e,r){var n=p;return function(o,a){if(n===l)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw a;return j()}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=_(s,r);if(i){if(i===d)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=l;var c=u(t,e,r);if("normal"===c.type){if(n=r.done?h:f,c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(t,r,s),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",l="executing",h="completed",d={};function y(){}function v(){}function m(){}var w={};w[a]=function(){return this};var x=Object.getPrototypeOf,b=x&&x(x(T([])));b&&b!==r&&n.call(b,a)&&(w=b);var g=m.prototype=y.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t,e){function r(o,a,s,i){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,i)}),(function(t){r("throw",t,s,i)})):e.resolve(f).then((function(t){p.value=t,s(p)}),(function(t){return r("throw",t,s,i)}))}i(c.arg)}var o;this._invoke=function(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}}function _(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,_(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=u(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Z(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:j}}function j(){return{value:e,done:!0}}return v.prototype=g.constructor=m,m.constructor=v,m[i]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,i in t||(t[i]="GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},k(E.prototype),E.prototype[s]=function(){return this},t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var s=new E(c(e,r,n,o),a);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(g),g[i]="Generator",g[a]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=T,Z.prototype={constructor:Z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return i.type="throw",i.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},545:t=>{"use strict";t.exports=e},949:e=>{"use strict";e.exports=t}},n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={exports:{}};return r[t](e,e.exports,o),e.exports}return o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o(352)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheUxpa2VUb0FycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlUmVzdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlU3ByZWFkLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYWNjb3VudHMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYXBpL2VuZHBvaW50cy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9hdXRoLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3RpY2tlci5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcHRpb25hbC9zZWN1cml0aWVzLWNhY2hlLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvcmUvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvZGF0YS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9oZWFkZXJzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2hlbHBlcnMvdGltZS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcHRpb25hbC9pbXBsaWNpdC10b2tlbi1yZWZyZXNoLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL25ldHdvcmsvaHR0cHMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvb3JkZXJzL2hpc3RvcnkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvb3JkZXJzL3N1Ym1pdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcmRlcnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvcXVvdGVzL2RlZmF1bHQuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvcXVvdGVzL2luZGV4LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwibm9kZS1mZXRjaFwiLFwiY29tbW9uanMyXCI6XCJub2RlLWZldGNoXCIsXCJhbWRcIjpcIm5vZGUtZmV0Y2hcIixcInJvb3RcIjpcIl9cIn0iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcInNvdXJjZS1tYXAtc3VwcG9ydFwiLFwiY29tbW9uanMyXCI6XCJzb3VyY2UtbWFwLXN1cHBvcnRcIixcImFtZFwiOlwic291cmNlLW1hcC1zdXBwb3J0XCIsXCJyb290XCI6XCJfXCJ9Iiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwiZ2xvYmFsIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOTQ5X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181NDVfXyIsImFyciIsImxlbiIsImxlbmd0aCIsImkiLCJhcnIyIiwiQXJyYXkiLCJpc0FycmF5IiwiYXJyYXlMaWtlVG9BcnJheSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsImdlbiIsInJlc29sdmUiLCJyZWplY3QiLCJfbmV4dCIsIl90aHJvdyIsImtleSIsImFyZyIsImluZm8iLCJ2YWx1ZSIsImVycm9yIiwiZG9uZSIsIlByb21pc2UiLCJ0aGVuIiwiZm4iLCJzZWxmIiwidGhpcyIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsImVyciIsInVuZGVmaW5lZCIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwib2JqIiwiaXRlciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiZnJvbSIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJfcyIsIl9pIiwibmV4dCIsInB1c2giLCJhcnJheVdpdGhIb2xlcyIsIml0ZXJhYmxlVG9BcnJheUxpbWl0IiwidW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJub25JdGVyYWJsZVJlc3QiLCJhcnJheVdpdGhvdXRIb2xlcyIsIml0ZXJhYmxlVG9BcnJheSIsIm5vbkl0ZXJhYmxlU3ByZWFkIiwibyIsIm1pbkxlbiIsIm4iLCJ0b1N0cmluZyIsImNhbGwiLCJzbGljZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsInRlc3QiLCJhbGwiLCJoYW5kbGVSZXF1ZXN0IiwiZW5kcG9pbnRzIiwiYWNjb3VudHMiLCJ0ZnNhIiwiZmluZCIsImFjY291bnQiLCJzdGFydHNXaXRoIiwicnJzcCIsImNyeXB0byIsInBlcnNvbmFsIiwiZGF0YSIsIm1lIiwicGVyc29uIiwiaGlzdG9yeSIsImludGVydmFsIiwiYWNjb3VudElkIiwiYWN0aXZpdGllcyIsImdldEJhbmtBY2NvdW50cyIsImRlcG9zaXRzIiwicG9zaXRpb25zIiwiT1JERVJTX1BFUl9QQUdFIiwiZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyIiwib25GYWlsdXJlIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwianNvbiIsInJlYXNvbiIsImJvZHkiLCJvblN1Y2Nlc3MiLCJMT0dJTiIsIm1ldGhvZCIsInVybCIsImFjY2VzcyIsImhlYWRlcnMiLCJnZXQiLCJyZWZyZXNoIiwiZXhwaXJlcyIsInBhcnNlSW50IiwidG9rZW5zIiwiYWNjb3VudEluZm8iLCJSRUZSRVNIIiwiQUNDT1VOVF9JRFMiLCJyZXN1bHRzIiwibWFwIiwiaWQiLCJMSVNUX0FDQ09VTlQiLCJNRSIsIlBFUlNPTiIsIkhJU1RPUllfQUNDT1VOVCIsInBhcmFtZXRlcnMiLCIwIiwiMSIsIkFDVElWSVRJRVMiLCJERVBPU0lUUyIsIkJBTktfQUNDT1VOVFMiLCJFWENIQU5HRV9SQVRFUyIsIlNFQ1VSSVRZIiwiRXJyb3IiLCJFWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUyIsIlBPU0lUSU9OUyIsIk9SREVSU19CWV9QQUdFIiwidG90YWwiLCJvcmRlcnMiLCJDQU5DRUxfT1JERVIiLCJQTEFDRV9PUkRFUiIsIm90cCIsIm9uIiwiZXZlbnQiLCJ0aHVuayIsImxvZ2luIiwiZW1haWwiLCJwYXNzd29yZCIsInJlZnJlc2hfdG9rZW4iLCJkaXNhYmxlZCIsImNvbmZpZ0VuYWJsZWQiLCJmZWF0dXJlIiwiaW5jbHVkZXMiLCJjb25maWciLCJjdXQiLCJzdWJzdHJpbmciLCJpbmRleE9mIiwic3BsaWNlIiwiZXhjaGFuZ2VzIiwic3ltYm9sIiwiZXhjaGFuZ2UiLCJzcGxpdCIsIm90aGVyIiwiY2FjaGUiLCJzaXplIiwiTWFwIiwia2V5cyIsInNldCIsInNlY3VyaXR5IiwicmVzdWx0IiwiVGlja2VyIiwiZm9ybWF0IiwiZXhjaGFuZ2VSYXRlcyIsImdldFNlY3VyaXR5IiwidXNlclRpY2tlciIsImV4dGVuc2l2ZSIsInRpY2tlciIsImZpbHRlciIsInN0b2NrIiwic2VjdXJpdHlfdHlwZSIsInByaW1hcnlfZXhjaGFuZ2UiLCJpbnNlcnQiLCJjdXN0b21IZWFkZXJzIiwiSGVhZGVycyIsImFkZCIsImFwcGVuZCIsInJlbW92ZSIsImNsZWFyIiwiZm9yRWFjaCIsImhlYWRlciIsInZhbHVlcyIsImF1dGgiLCJxdW90ZXMiLCJEYXRlIiwibm93IiwiaW1wbGljaXRUb2tlblJlZnJlc2giLCJlcG9jaFNlY29uZHMiLCJIVFRQX09LIiwiSFRUUF9DUkVBVEVEIiwiZmluYWxpemVSZXF1ZXN0IiwiZW5kcG9pbnQiLCJwYXJhbXMiLCJpbmRleCIsInBhcmFtZXRlck5hbWUiLCJyZXBsYWNlIiwicGF5bG9hZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0YWxrIiwiZmV0Y2giLCJwYWdlIiwicGFnZU51bSIsIm9mZnNldCIsInBhZ2VzIiwiTWF0aCIsImNlaWwiLCJ0YXNrcyIsImxpc3QiLCJmaWx0ZXJlZE9yZGVycyIsIm9yZGVyRmlsdGVyIiwib3JkZXIiLCJzZWN1cml0eV9pZCIsIndlYWtFcXVhbHMiLCJwZW5kaW5nIiwiZmlsbGVkIiwiY2FuY2VsbGVkIiwiaXNDYW5hZGlhblNlY3VyaXR5IiwiY2FuY2VsIiwib3JkZXJJZCIsImNhbmNlbFBlbmRpbmciLCJvcmRlcl9pZCIsIm1hcmtldEJ1eSIsInF1YW50aXR5IiwiZGV0YWlscyIsImxpbWl0X3ByaWNlIiwib3JkZXJfdHlwZSIsIm9yZGVyX3N1Yl90eXBlIiwidGltZV9pbl9mb3JjZSIsImFjY291bnRfaWQiLCJsaW1pdEJ1eSIsImxpbWl0Iiwic3RvcExpbWl0QnV5Iiwic3RvcCIsInN0b3BfcHJpY2UiLCJtYXJrZXRTZWxsIiwibWFya2V0X3ZhbHVlIiwibGltaXRTZWxsIiwic3RvcExpbWl0U2VsbCIsInN1Ym1pdCIsInF1b3RlIiwiYW1vdW50IiwiZGVmYXVsdFByb3ZpZGVyIiwidHJhZGUiLCJwcm92aWRlcnMiLCJ1c2UiLCJwcm92aWRlciIsInJ1bnRpbWUiLCJPcCIsImhhc093biIsImhhc093blByb3BlcnR5IiwiJFN5bWJvbCIsIml0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvclN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJ0b1N0cmluZ1RhZ1N5bWJvbCIsInRvU3RyaW5nVGFnIiwid3JhcCIsImlubmVyRm4iLCJvdXRlckZuIiwidHJ5TG9jc0xpc3QiLCJwcm90b0dlbmVyYXRvciIsIkdlbmVyYXRvciIsImdlbmVyYXRvciIsImNyZWF0ZSIsImNvbnRleHQiLCJDb250ZXh0IiwiX2ludm9rZSIsInN0YXRlIiwiR2VuU3RhdGVTdXNwZW5kZWRTdGFydCIsIkdlblN0YXRlRXhlY3V0aW5nIiwiR2VuU3RhdGVDb21wbGV0ZWQiLCJkb25lUmVzdWx0IiwiZGVsZWdhdGUiLCJkZWxlZ2F0ZVJlc3VsdCIsIm1heWJlSW52b2tlRGVsZWdhdGUiLCJDb250aW51ZVNlbnRpbmVsIiwic2VudCIsIl9zZW50IiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJhYnJ1cHQiLCJyZWNvcmQiLCJ0cnlDYXRjaCIsInR5cGUiLCJHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkIiwibWFrZUludm9rZU1ldGhvZCIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJJdGVyYXRvclByb3RvdHlwZSIsImdldFByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJOYXRpdmVJdGVyYXRvclByb3RvdHlwZSIsIkdwIiwiZGVmaW5lSXRlcmF0b3JNZXRob2RzIiwiQXN5bmNJdGVyYXRvciIsIlByb21pc2VJbXBsIiwiaW52b2tlIiwiX19hd2FpdCIsInVud3JhcHBlZCIsInByZXZpb3VzUHJvbWlzZSIsImNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnIiwicmVzdWx0TmFtZSIsIm5leHRMb2MiLCJwdXNoVHJ5RW50cnkiLCJsb2NzIiwiZW50cnkiLCJ0cnlMb2MiLCJjYXRjaExvYyIsImZpbmFsbHlMb2MiLCJhZnRlckxvYyIsInRyeUVudHJpZXMiLCJyZXNldFRyeUVudHJ5IiwiY29tcGxldGlvbiIsInJlc2V0IiwiaXRlcmFibGUiLCJpdGVyYXRvck1ldGhvZCIsImlzTmFOIiwiZGlzcGxheU5hbWUiLCJpc0dlbmVyYXRvckZ1bmN0aW9uIiwiZ2VuRnVuIiwiY3RvciIsIm1hcmsiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImF3cmFwIiwiYXN5bmMiLCJvYmplY3QiLCJyZXZlcnNlIiwicG9wIiwic2tpcFRlbXBSZXNldCIsInByZXYiLCJjaGFyQXQiLCJyb290UmVjb3JkIiwicnZhbCIsImV4Y2VwdGlvbiIsImhhbmRsZSIsImxvYyIsImNhdWdodCIsImhhc0NhdGNoIiwiaGFzRmluYWxseSIsImZpbmFsbHlFbnRyeSIsImNvbXBsZXRlIiwiZmluaXNoIiwidGhyb3duIiwiZGVsZWdhdGVZaWVsZCIsInJlZ2VuZXJhdG9yUnVudGltZSIsImFjY2lkZW50YWxTdHJpY3RNb2RlIiwiRnVuY3Rpb24iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsInByb3AiXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxFQUFRRyxRQUFRLHNCQUF1QkEsUUFBUSxlQUN2QyxtQkFBWEMs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QUFHRixFQUF5QkUsR0FDM0IsT0FBT0YsRUFBeUJFLEdBQVUvVyxRQUczQyxJQUFJQyxFQUFTNFcsRUFBeUJFLEdBQVksQ0FHakQvVyxRQUFTLElBT1YsT0FIQWdYLEVBQW9CRCxHQUFVOVcsRUFBUUEsRUFBT0QsUUFBUzhXLEdBRy9DN1csRUFBT0QsUUNqQmYsT0NGQThXLEVBQW9CblMsRUFBSzFFLElBQ3hCLElBQUlnWCxFQUFTaFgsR0FBVUEsRUFBT2lYLFdBQzdCLElBQU1qWCxFQUFnQixRQUN0QixJQUFNQSxFQUVQLE9BREE2VyxFQUFvQkssRUFBRUYsRUFBUSxDQUFFRyxFQUFHSCxJQUM1QkEsR0NMUkgsRUFBb0JLLEVBQUksQ0FBQ25YLEVBQVNxWCxLQUNqQyxJQUFJLElBQUkvVixLQUFPK1YsRUFDWFAsRUFBb0JyUyxFQUFFNFMsRUFBWS9WLEtBQVN3VixFQUFvQnJTLEVBQUV6RSxFQUFTc0IsSUFDNUUwQixPQUFPQyxlQUFlakQsRUFBU3NCLEVBQUssQ0FBRXVCLFlBQVksRUFBTXlFLElBQUsrUCxFQUFXL1YsTUNKM0V3VixFQUFvQnJTLEVBQUksQ0FBQ3BCLEVBQUtpVSxJQUFTdFUsT0FBT0ksVUFBVXVOLGVBQWU5TCxLQUFLeEIsRUFBS2lVLEdIRzFFUixFQUFvQixNIiwiZmlsZSI6ImRpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJzb3VyY2UtbWFwLXN1cHBvcnRcIiksIHJlcXVpcmUoXCJub2RlLWZldGNoXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInNvdXJjZS1tYXAtc3VwcG9ydFwiLCBcIm5vZGUtZmV0Y2hcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wid3N0cmFkZS1hcGlcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJzb3VyY2UtbWFwLXN1cHBvcnRcIiksIHJlcXVpcmUoXCJub2RlLWZldGNoXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ3c3RyYWRlLWFwaVwiXSA9IGZhY3Rvcnkocm9vdFtcIl9cIl0sIHJvb3RbXCJfXCJdKTtcbn0pKGdsb2JhbCwgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOTQ5X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzU0NV9fKSB7XG5yZXR1cm4gIiwiZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHtcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYXJyMltpXSA9IGFycltpXTtcbiAgfVxuXG4gIHJldHVybiBhcnIyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hcnJheUxpa2VUb0FycmF5OyIsImZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlXaXRoSG9sZXM7IiwidmFyIGFycmF5TGlrZVRvQXJyYXkgPSByZXF1aXJlKFwiLi9hcnJheUxpa2VUb0FycmF5XCIpO1xuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KGFycik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FycmF5V2l0aG91dEhvbGVzOyIsImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcblxuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hc3luY1RvR2VuZXJhdG9yOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NsYXNzQ2FsbENoZWNrOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY3JlYXRlQ2xhc3M7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2RlZmluZVByb3BlcnR5OyIsImZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikge1xuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaXRlcmFibGVUb0FycmF5OyIsImZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47XG4gIHZhciBfYXJyID0gW107XG4gIHZhciBfbiA9IHRydWU7XG4gIHZhciBfZCA9IGZhbHNlO1xuICB2YXIgX2UgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XG4gICAgICBfYXJyLnB1c2goX3MudmFsdWUpO1xuXG4gICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZCA9IHRydWU7XG4gICAgX2UgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kKSB0aHJvdyBfZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gX2Fycjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaXRlcmFibGVUb0FycmF5TGltaXQ7IiwiZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfbm9uSXRlcmFibGVSZXN0OyIsImZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX25vbkl0ZXJhYmxlU3ByZWFkOyIsInZhciBhcnJheVdpdGhIb2xlcyA9IHJlcXVpcmUoXCIuL2FycmF5V2l0aEhvbGVzXCIpO1xuXG52YXIgaXRlcmFibGVUb0FycmF5TGltaXQgPSByZXF1aXJlKFwiLi9pdGVyYWJsZVRvQXJyYXlMaW1pdFwiKTtcblxudmFyIHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5ID0gcmVxdWlyZShcIi4vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXlcIik7XG5cbnZhciBub25JdGVyYWJsZVJlc3QgPSByZXF1aXJlKFwiLi9ub25JdGVyYWJsZVJlc3RcIik7XG5cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkge1xuICByZXR1cm4gYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgbm9uSXRlcmFibGVSZXN0KCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3NsaWNlZFRvQXJyYXk7IiwidmFyIGFycmF5V2l0aG91dEhvbGVzID0gcmVxdWlyZShcIi4vYXJyYXlXaXRob3V0SG9sZXNcIik7XG5cbnZhciBpdGVyYWJsZVRvQXJyYXkgPSByZXF1aXJlKFwiLi9pdGVyYWJsZVRvQXJyYXlcIik7XG5cbnZhciB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSA9IHJlcXVpcmUoXCIuL3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5XCIpO1xuXG52YXIgbm9uSXRlcmFibGVTcHJlYWQgPSByZXF1aXJlKFwiLi9ub25JdGVyYWJsZVNwcmVhZFwiKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikge1xuICByZXR1cm4gYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IG5vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3RvQ29uc3VtYWJsZUFycmF5OyIsInZhciBhcnJheUxpa2VUb0FycmF5ID0gcmVxdWlyZShcIi4vYXJyYXlMaWtlVG9BcnJheVwiKTtcblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikge1xuICBpZiAoIW8pIHJldHVybjtcbiAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXk7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZVwiKTtcbiIsImltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi9hcGkvZW5kcG9pbnRzJztcbmltcG9ydCBoYW5kbGVSZXF1ZXN0IGZyb20gJy4vbmV0d29yay9odHRwcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICogUmV0cmlldmVzIGFsbCBhY2NvdW50IGlkcyBvcGVuIHVuZGVyIHRoaXMgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnQuXG4gICAqL1xuICBhbGw6IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkFDQ09VTlRfSURTLCB7fSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGZzYTogYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5zdGFydHNXaXRoKCd0ZnNhJykpLFxuICAgICAgcnJzcDogYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5zdGFydHNXaXRoKCdycnNwJykpLFxuICAgICAgY3J5cHRvOiBhY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXJ0c1dpdGgoJ25vbi1yZWdpc3RlcmVkLWNyeXB0bycpKSxcbiAgICAgIHBlcnNvbmFsOiBhY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXJ0c1dpdGgoJ25vbi1yZWdpc3RlcmVkJykgJiYgIWFjY291bnQuc3RhcnRzV2l0aCgnbm9uLXJlZ2lzdGVyZWQtY3J5cHRvJykpLFxuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIGRldGFpbHMgYWJvdXQgeW91ciBvcGVuIGFjY291bnRzLCBsaWtlIGFjY291bnQgdHlwZSwgYnV5aW5nIHBvd2VyLFxuICAgKiBjdXJyZW50IGJhbGFuY2UsIGFuZCBtb3JlLlxuICAgKi9cbiAgZGF0YTogYXN5bmMgKCkgPT4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTElTVF9BQ0NPVU5ULCB7fSksXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBzb21lIHN1cmZhY2UgaW5mb3JtYXRpb24gYWJvdXQgeW91IGxpa2UgeW91ciBuYW1lIGFuZCBlbWFpbCwgYWNjb3VudFxuICAgKiBzaWduYXR1cmVzLCBhbmQgb3RoZXIgbWV0YWRhdGEuXG4gICAqL1xuICBtZTogYXN5bmMgKCkgPT4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTUUsIHt9KSxcblxuICAvKipcbiAgICogRGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgeW91IHRoYXQgeW91IHByb3ZpZGVkIG9uIHNpZ251cCwgbGlrZSByZXNpZGVudGlhbCBhbmRcbiAgICogbWFpbGluZyBhZGRyZXNzZXMsIGVtcGxveW1lbnQsIHBob25lIG51bWJlcnMsIGFuZCBzbyBvbi5cbiAgICovXG4gIHBlcnNvbjogYXN5bmMgKCkgPT4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUEVSU09OLCB7fSksXG5cbiAgLyoqXG4gICAqIFF1ZXJ5IHRoZSBoaXN0b3J5IG9mIHRoZSBhY2NvdW50IHdpdGhpbiBhIGNlcnRhaW4gdGltZSBpbnRlcnZhbC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBpbnRlcnZhbCBUaGUgdGltZSBpbnRlcnZhbCBmb3IgdGhlIGhpc3RvcnkgcXVlcnlcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gcXVlcnlcbiAgICovXG4gIGhpc3Rvcnk6IGFzeW5jIChpbnRlcnZhbCwgYWNjb3VudElkKSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5ISVNUT1JZX0FDQ09VTlQsIHtcbiAgICBpbnRlcnZhbCwgYWNjb3VudElkLFxuICB9KSxcblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBtb3N0IHJlY2VudCAyMCBhY3Rpdml0aWVzIG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudC5cbiAgICovXG4gIGFjdGl2aXRpZXM6IGFzeW5jICgpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkFDVElWSVRJRVMsIHt9KSxcblxuICAvKipcbiAgICogUmV0cmlldmVzIGFsbCBiYW5rIGFjY291bnRzIGxpbmtlZCB0byB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnQuXG4gICAqL1xuICBnZXRCYW5rQWNjb3VudHM6IGFzeW5jICgpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkJBTktfQUNDT1VOVFMsIHt9KSxcblxuICAvKipcbiAgICogR3JhYiBhbGwgZGVwb3NpdCByZWNvcmRzIG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIGRlcG9zaXRzOiBhc3luYyAoKSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5ERVBPU0lUUywge30pLFxuXG4gIC8qKlxuICAgKiBMaXN0cyBhbGwgcG9zaXRpb25zIGluIHRoZSBzcGVjaWZpZWQgdHJhZGluZyBhY2NvdW50IHVuZGVyIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqL1xuICBwb3NpdGlvbnM6IGFzeW5jIChhY2NvdW50SWQpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBPU0lUSU9OUywgeyBhY2NvdW50SWQgfSksXG59O1xuIiwiLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIG9yZGVycyByZXRyaWV2ZWQgYnkgdGhlIC9vcmRlcnMgQVBJLlxuZXhwb3J0IGNvbnN0IE9SREVSU19QRVJfUEFHRSA9IDIwO1xuXG5jb25zdCBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIgPSB7XG5cbiAgLy8gRGVmYXVsdCBmYWlsdXJlIG1ldGhvZCBmb3IgYWxsIGVuZHBvaW50IGNhbGxzXG4gIG9uRmFpbHVyZTogYXN5bmMgKHJlc3BvbnNlKSA9PiAoe1xuICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgIHJlYXNvbjogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICBib2R5OiBhd2FpdCByZXNwb25zZS5qc29uKCksXG4gIH0pLFxuXG4gIC8vIERlZmF1bHQgc3VjY2VzcyBtZXRob2QgZm9yIGFsbCBlbmRwb2ludCBjYWxsc1xuICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpLFxufTtcblxuY29uc3QgV2VhbHRoc2ltcGxlVHJhZGVFbmRwb2ludHMgPSB7XG5cbiAgLypcbiAgICogVGhlIExPR0lOIGVuZHBvaW50IGludGlhbGl6ZXMgYSBuZXcgc2Vzc2lvbiBmb3IgdGhlIGdpdmVuIGVtYWlsIGFuZFxuICAgKiBwYXNzd29yZCBzZXQuIElmIHRoZSBsb2dpbiBpcyBzdWNjZXNzZnVsLCBhY2Nlc3MgYW5kIHJlZnJlc2ggdG9rZW5zXG4gICAqIGFyZSByZXR1cm5lZCBpbiB0aGUgaGVhZGVycy4gVGhlIGFjY2VzcyB0b2tlbiBpcyB0aGUga2V5IGZvciBpbnZva2luZ1xuICAgKiBhbGwgb3RoZXIgZW5kIHBvaW50cy5cbiAgICovXG4gIExPR0lOOiB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYXV0aC9sb2dpbicsXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+ICh7XG4gICAgICB0b2tlbnM6IHtcbiAgICAgICAgYWNjZXNzOiByZXNwb25zZS5oZWFkZXJzLmdldCgneC1hY2Nlc3MtdG9rZW4nKSxcbiAgICAgICAgcmVmcmVzaDogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3gtcmVmcmVzaC10b2tlbicpLFxuICAgICAgICBleHBpcmVzOiBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzLmdldCgneC1hY2Nlc3MtdG9rZW4tZXhwaXJlcycpLCAxMCksXG4gICAgICB9LFxuXG4gICAgICBhY2NvdW50SW5mbzogYXdhaXQgcmVzcG9uc2UuanNvbigpLFxuICAgIH0pLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHZW5lcmF0ZXMgYSBuZXcgc2V0IG9mIGFjY2VzcyBhbmQgcmVmcmVzaCB0b2tlbnMuXG4gICAqL1xuICBSRUZSRVNIOiB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYXV0aC9yZWZyZXNoJyxcbiAgICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4gKHtcbiAgICAgIHRva2Vuczoge1xuICAgICAgICBhY2Nlc3M6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LWFjY2Vzcy10b2tlbicpLFxuICAgICAgICByZWZyZXNoOiByZXNwb25zZS5oZWFkZXJzLmdldCgneC1yZWZyZXNoLXRva2VuJyksXG4gICAgICAgIGV4cGlyZXM6IHBhcnNlSW50KHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LWFjY2Vzcy10b2tlbi1leHBpcmVzJyksIDEwKSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEdyYWJzIGFsbCBhY2NvdW50IGlkcyBpbiB0aGlzIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgQUNDT1VOVF9JRFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvbGlzdCcsXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIENvbGxlY3QgYWxsIGFjY291bnQgaWRzIHJlZ2lzdGVyZWQgdW5kZXIgdGhpcyBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudFxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cy5tYXAoKGFjY291bnQpID0+IGFjY291bnQuaWQpO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBMSVNUX0FDQ09VTlQgZW5kcG9pbnQgcmV0cmlldmVzIGdlbmVyYWwgbWV0YWRhdGEgb2YgdGhlXG4gICAqIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LCBpbmNsdWRpbmcgYmFsYW5jZXMsIGFjY291bnQgaWQsIGFuZFxuICAgKiBtb3JlLlxuICAgKi9cbiAgTElTVF9BQ0NPVU5UOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2xpc3QnLFxuICAgIG9uU3VjY2VzczogYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cztcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBUaGUgTUUgZW5kcG9pbnQgcmV0cmlldmVzIHNvbWUgc3VyZmFjZSBpbmZvcm1hdGlvbiBhYm91dCB5b3UgbGlrZVxuICAgKiB5b3VyIG5hbWUgYW5kIGVtYWlsLlxuICAgKi9cbiAgTUU6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL21lJyxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBQRVJTT04gZW5kcG9pbnQgcmV0cmlldmVzIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IHlvdSB0aGF0XG4gICAqIHlvdSBwcm92aWRlZCBvbiBzaWdudXAsIGxpa2UgcmVzaWRlbnRpYWwgYW5kIG1haWxpbmcgYWRkcmVzc2VzLFxuICAgKiBlbXBsb3ltZW50LCBwaG9uZSBudW1iZXJzLCBhbmQgc28gb24uXG4gICAqL1xuICBQRVJTT046IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3BlcnNvbicsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBUaGUgSElTVE9SWV9BQ0NPVU5UIGVuZHBvaW50IHByb3ZpZGVzIGhpc3RvcmljYWwgc25hcHNob3RzIG9mIHRoZVxuICAgKiBXZWFsdGhzaW1wbGUgYWNjb3VudCBmb3IgYSBzcGVjaWZpZWQgdGltZWZyYW1lLlxuICAgKi9cbiAgSElTVE9SWV9BQ0NPVU5UOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2hpc3RvcnkvezB9P2FjY291bnRfaWQ9ezF9JyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnaW50ZXJ2YWwnLFxuICAgICAgMTogJ2FjY291bnRJZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFByb3ZpZGVzIHRoZSBtb3N0IHJlY2VudCAyMCBhY3Rpdml0aWVzIChkZXBvc2l0cywgZGl2aWRlbmRzLCBvcmRlcnMsIGV0Yykgb24gdGhlIFdlYWx0aHNpbXBsZVxuICAgKiBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgQUNUSVZJVElFUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYWNjb3VudC9hY3Rpdml0aWVzJyxcbiAgICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHM7XG4gICAgfSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogQWxsIGRlcG9zaXRzIHVuZGVyIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgREVQT1NJVFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2RlcG9zaXRzJyxcbiAgICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHM7XG4gICAgfSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogQWxsIGxpbmtlZCBiYW5rIGFjY291bnRzIHVuZGVyIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgQkFOS19BQ0NPVU5UUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYmFuay1hY2NvdW50cycsXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gZGF0YS5yZXN1bHRzO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEN1cnJlbnQgV2VhbHRoc2ltcGxlIFRyYWRlIFVTRC9DQUQgZXhjaGFuZ2UgcmF0ZXNcbiAgICovXG4gIEVYQ0hBTkdFX1JBVEVTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9mb3JleCcsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHcmFicyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc2VjdXJpdHkgcmVzZW1ibGVkIGJ5IHRoZSB0aWNrZXIuXG4gICAqL1xuICBTRUNVUklUWToge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vc2VjdXJpdGllcz9xdWVyeT17MH0nLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICd0aWNrZXInLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmIChkYXRhLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU2VjdXJpdHkgZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cztcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBGZXRjaGVzIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IGEgc2VjdXJpdHkgdXNpbmcgaXRzIHVuaXF1ZVxuICAgKiBzZWN1cml0eSBpZGVudGlmaWVyLiBNYXJrZXQgcXVvdGUsIGJpZCBhbmQgYXNrIHNpemUsIGFuZCBvdGhlciBpbmZvcm1hdGlvblxuICAgKiBhcmUgcmV0dXJuZWQuXG4gICAqL1xuICBFWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vc2VjdXJpdGllcy97MH0nLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdpZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIExpc3RzIGFsbCBwb3NpdGlvbnMgdW5kZXIgYSB0cmFkaW5nIGFjY291bnQuXG4gICAqL1xuICBQT1NJVElPTlM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvcG9zaXRpb25zP2FjY291bnRfaWQ9ezB9JyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnYWNjb3VudElkJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cztcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHcmFiIGEgcGFnZSBvZiBvcmRlcnMgKDIwIG9yZGVycykuXG4gICAqL1xuICBPUkRFUlNfQllfUEFHRToge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vb3JkZXJzP29mZnNldD17MH0mYWNjb3VudF9pZD17MX0nLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdvZmZzZXQnLFxuICAgICAgMTogJ2FjY291bnRJZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsOiBkYXRhLnRvdGFsLFxuICAgICAgICBvcmRlcnM6IGRhdGEucmVzdWx0cyxcbiAgICAgIH07XG4gICAgfSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogQ2FuY2VscyBhIHNwZWNpZmljIG9yZGVyIGJ5IGl0cyBpZC5cbiAgICovXG4gIENBTkNFTF9PUkRFUjoge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vb3JkZXJzL3swfScsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ29yZGVySWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQbGFjZXMgYW4gb3JkZXIgZm9yIGEgc2VjdXJpdHkuXG4gICAqL1xuICBQTEFDRV9PUkRFUjoge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycycsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFdlYWx0aHNpbXBsZVRyYWRlRW5kcG9pbnRzO1xuIiwiaW1wb3J0IGhhbmRsZVJlcXVlc3QgZnJvbSAnLi9uZXR3b3JrL2h0dHBzJztcbmltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi9hcGkvZW5kcG9pbnRzJztcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8vIEF1dGhlbnRpY2F0aW9uIHRva2VucyB0byBhY2Nlc3MgcHJpdmlsZWdlZCBlbmRwb2ludHNcbiAgdG9rZW5zOiBudWxsLFxuXG4gIC8vIFRodW5rIGZvciByZXRyaWV2aW5nIHRoZSBvbmUtdGltZSBwYXNzd29yZC5cbiAgb3RwOiBudWxsLFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIHJ1biBvbiBhIGNlcnRhaW4gZXZlbnRcbiAgICogQHBhcmFtIHsqfSBldmVudCBUaGUgdHJpZ2dlciBmb3IgdGhlIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7Kn0gdGh1bmsgVGhlIGZ1bmN0aW9uIGJsb2NrIHRvIGV4ZWN1dGUgb24gZXZlbnQgdHJpZ2dlclxuICAgKi9cbiAgb24oZXZlbnQsIHRodW5rKSB7XG4gICAgdGhpc1tldmVudF0gPSB0aHVuaztcbiAgfSxcblxuICAvKipcbiAgICogQXR0ZW1wdHMgdG8gZXN0YWJsaXNoIGEgc2Vzc2lvbiBmb3IgdGhlIHByb3ZpZGVkIGVtYWlsIGFuZCBwYXNzd29yZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBlbWFpbCBlbWFpbGVkIHJlZ2lzdGVyZWQgYnkgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqIEBwYXJhbSB7Kn0gcGFzc3dvcmQgVGhlIHBhc3N3b3JkIG9mIHRoZSBhY2NvdW50XG4gICAqL1xuICBhc3luYyBsb2dpbihlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICBsZXQgcmVzcG9uc2UgPSBudWxsO1xuXG4gICAgLypcbiAgICAgKiBJZiB3ZSBhcmUgZ2l2ZW4gYSBmdW5jdGlvbiBmb3Igb3RwLCB0aGVuIHdlIG11c3QgZmFpbCBhIGxvZyBpbiB0b1xuICAgICAqIHRyaWdnZXIgYW4gT1RQIGV2ZW50IHdpdGggV2VhbHRoc2ltcGxlIFRyYWRlLiBUaGlzIHdpbGwgYWxsb3cgdGhlIHVzZXJcbiAgICAgKiBvdHAgdGh1bmsgdG8gcmV0cmlldmUgdGhlIGNvZGUuXG4gICAgICpcbiAgICAgKiBJZiBhIGxpdGVyYWwgdmFsdWUgaXMgcHJvdmlkZWQgZm9yIG90cCwgaXQgbWVhbnMgdGhlIHVzZXIgaGFzIG1hbnVhbGx5XG4gICAgICogcHJvdmlkZWQgdXMgd2l0aCB0aGUgb3RwIGNvZGUuIFdlIGNhbiBza2lwIHRoaXMgbG9naW4gYXR0ZW1wdC5cbiAgICAgKi9cbiAgICBpZiAodHlwZW9mICh0aGlzLm90cCkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGF3YWl0IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkxPR0lOLCB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTtcbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gbG9nIGluIGZvciByZWFsIHRoaXMgdGltZS5cbiAgICB0cnkge1xuICAgICAgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5MT0dJTiwge1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgIG90cDogdHlwZW9mICh0aGlzLm90cCkgPT09ICdmdW5jdGlvbicgPyBhd2FpdCB0aGlzLm90cCgpIDogdGhpcy5vdHAsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gd2UgbWlnaHQgaGF2ZSBmYWlsZWQgYmVjYXVzZSBPVFAgd2FzIG5vdCBwcm92aWRlZFxuICAgICAgaWYgKCF0aGlzLm90cCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09UUCBub3QgcHJvdmlkZWQhJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlZW1zIHRvIGJlIGluY29ycmVjdCBjcmVkZW50aWFscyBvciBPVFAuXG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICAvLyBDYXB0dXJlIHRoZSB0b2tlbnMgZm9yIGxhdGVyIHVzYWdlLlxuICAgIHRoaXMudG9rZW5zID0gcmVzcG9uc2UudG9rZW5zO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBuZXcgc2V0IG9mIGFjY2VzcyBhbmQgcmVmcmVzaCB0b2tlbnMuXG4gICAqL1xuICBhc3luYyByZWZyZXNoKCkge1xuICAgIC8vIERpc3Bvc2Ugb2YgdGhlIGV4aXN0aW5nIHRva2VuXG4gICAgdGhpcy50b2tlbnMuYWNjZXNzID0gbnVsbDtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUkVGUkVTSCwge1xuICAgICAgcmVmcmVzaF90b2tlbjogdGhpcy50b2tlbnMucmVmcmVzaCxcbiAgICB9KTtcblxuICAgIHRoaXMudG9rZW5zID0gcmVzcG9uc2UudG9rZW5zO1xuICB9LFxufTtcbiIsIi8vIEhvbGRzIG9wdGlvbmFsIGZlYXR1cmVzIHRoYXQgaGF2ZSBiZWVuIGRpc2FibGVkLlxuY29uc3QgZGlzYWJsZWQgPSBbJ3NlY3VyaXRpZXNfY2FjaGUnXTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZ0VuYWJsZWQgPSAoZmVhdHVyZSkgPT4gIWRpc2FibGVkLmluY2x1ZGVzKGZlYXR1cmUpO1xuXG4vKipcbiAqIEVuYWJsZSBvciBkaXNhYmxlIGEgb3B0aW9uYWwgZmVhdHVyZSB3aXRoaW4gd3N0cmFkZS1hcGkuXG4gKlxuICogRXhhbXBsZXM6XG4gKiAtLS1cbiAqIGNvbmZpZygncGFuY2FrZXMnKVxuICogRW5hYmxlcyB0aGUgZmljdGl0aW91cyBwYW5jYWtlcyBmZWF0dXJlLlxuICpcbiAqIGNvbmZpZygnbm9fcGFuY2FrZXMnKVxuICogRGlzYWJsZXMgdGhlIGZpY3RpdGlvdXMgcGFuY2FrZXMgZmVhdHVyZS5cbiAqXG4gKiBAcGFyYW0geyp9IGZlYXR1cmUgVGhlIHN0cmluZyBpZGVudGlmaWVyIGZvciB0aGUgZmVhdHVyZSwgc3RhcnRpbmcgd2l0aCBcIm5vX1wiIGlmXG4gKiAgICAgICAgICAgICAgICAgICAgeW91IHdpc2ggdG8gZGlzYWJsZSBpdC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29uZmlnKGZlYXR1cmUpIHtcbiAgaWYgKGZlYXR1cmU/LnN0YXJ0c1dpdGgoJ25vXycpKSB7XG4gICAgY29uc3QgY3V0ID0gZmVhdHVyZS5zdWJzdHJpbmcoZmVhdHVyZS5pbmRleE9mKCdfJykgKyAxKTtcblxuICAgIC8vIFdlIHdpbGwgb25seSBhcHBlbmQgdGhpcyBpZiBpdCBpc24ndCBhbHJlYWR5IGluIHRoZXJlLlxuICAgIGlmIChjb25maWdFbmFibGVkKGN1dCkpIHtcbiAgICAgIGRpc2FibGVkLnB1c2goY3V0KTtcbiAgICB9XG5cbiAgLy8gT25seSBkZWxldGUgdGhlIGZlYXR1cmUgaWYgaXQncyBhbHJlYWR5IGRpc2FibGVkLlxuICB9IGVsc2UgaWYgKCFjb25maWdFbmFibGVkKGZlYXR1cmUpKSB7XG4gICAgZGlzYWJsZWQuc3BsaWNlKGRpc2FibGVkLmluZGV4T2YoZmVhdHVyZSksIDEpO1xuICB9XG59XG4iLCIvLyBFeGNoYW5nZXMgc3VwcG9ydGVkIGJ5IFdlYWx0aHNpbXBsZSBUcmFkZVxuLy8gJ0NDJyBpcyBub3QgYW4gZXhjaGFuZ2U7IGl0IHN0YW5kcyBmb3IgQ3J5cHRvIGN1cnJlbmN5IGFuZFxuLy8gaXQgYWxsb3dzIHVzIHRvIGRpc3Rpbmd1aXNoIGl0IGZyb20gY29udmVudGlvbmFsIHNlY3VyaXRpZXMuXG5jb25zdCBleGNoYW5nZXMgPSBbJ05BU0RBUScsICdOWVNFJywgJ1RTWCcsICdUU1gtVicsICdORU8nLCAnQ0MnXTtcblxuLyoqXG4gKiBUaWNrZXIgcHJvdmlkZXMgYSBsb2dpY2FsIGVuY2Fwc3VsYXRpb24gZm9yIHRoZSBhbGxvd2VkIGZvcm1zXG4gKiBvZiBhIHNlY3VyaXR5IHRpY2tlciB3aXRoaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAqXG4gKiBJdCBwcm92aWRlcyB2YWxpZGF0aW9uIG9mIHRoZSBmb3JtYXQgb2YgdGhlIHRpY2tlciwgYW5kIHRoZVxuICogdmFsdWUgb2YgdGhlIGV4Y2hhbmdlLCBpZiBwcm92aWRlZC5cbiAqXG4gKiBUaWNrZXJzIG1heSBiZSBzcGVjaWZpZWQgYXMgdHdvIGRhdGEgdHlwZXM6XG4gKlxuICogLSBzdHJpbmc6IFRoZSB0aWNrZXIgbWF5IGJlIGEgc2ltcGxlIHN0cmluZyBjb250YWluaW5nIHRoZSBzeW1ib2wsIG9yIGEgY29tYmluYXRpb24gb2ZcbiAqIHRoZSBzeW1ib2wgYW5kIGV4Y2hhbmdlIHNlcGFyYXRlZCBieSBhIGNvbG9uLlxuICogLSBvYmplY3Q6IFRoZSB0aWNrZXIgbWF5IGJlIGFuIG9iamVjdCB3aXRoIHN5bWJvbCwgZXhjaGFuZ2UsIG9yIGlkIHByb3BlcnRpZXMuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogXCJBQVBMXCJcbiAqIFwiVUJFUjpOWVNFXCJcbiAqIHsgc3ltYm9sOiBcIkFBUExcIiB9XG4gKiB7IHN5bWJvbDogXCJVQkVSXCIsIGV4Y2hhbmdlOiBcIk5ZU0VcIiB9XG4gKiB7IGlkOiBcInNlYy1zLTc2YTcxNTUyNDJlODQ3Nzg4MGNiYjQzMjY5MjM1Y2I2XCIgfVxuICovXG5jbGFzcyBUaWNrZXIge1xuICAvKipcbiAgICogQ29uc3RydWN0cyB0aGUgdGlja2VyIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgc2VjdXJpdHkgdGlja2VyIHZhbHVlLCBwcm92aWRlZCBhcyBhIHN0cmluZyBvciBhbiBvYmplY3Qgd2l0aCBzeW1ib2wsXG4gICAqIGV4Y2hhbmdlLCBvciBpZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgdGhpcy5zeW1ib2wgPSBudWxsO1xuICAgIHRoaXMuZXhjaGFuZ2UgPSBudWxsO1xuICAgIHRoaXMuaWQgPSBudWxsO1xuICAgIHRoaXMuY3J5cHRvID0gZmFsc2U7XG5cbiAgICBpZiAodHlwZW9mICh2YWx1ZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBFbXB0eSB0aWNrZXJzIGFyZSBub3QgYWxsb3dlZFxuICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IHRpY2tlcicpO1xuICAgICAgfVxuXG4gICAgICBbdGhpcy5zeW1ib2wsIHRoaXMuZXhjaGFuZ2VdID0gdmFsdWUuc3BsaXQoJzonKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gWW91IG5lZWQgYXQgbGVhc3QgYSBzeW1ib2wgb3IgaWQgdG8gZm9ybSBhIHRpY2tlci5cbiAgICAgIGlmICghdmFsdWUuc3ltYm9sICYmICF2YWx1ZS5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGlja2VyICcke3ZhbHVlfSdgKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zeW1ib2wgPSB2YWx1ZS5zeW1ib2wgfHwgbnVsbDtcbiAgICAgIHRoaXMuZXhjaGFuZ2UgPSB2YWx1ZS5leGNoYW5nZSB8fCBudWxsO1xuICAgICAgdGhpcy5pZCA9IHZhbHVlLmlkIHx8IG51bGw7XG4gICAgfVxuXG4gICAgLy8gR3VhcmFudGVlIHRoYXQgdGhlIGV4Y2hhbmdlIGlzIHZhbGlkIGlmIG5vdCBudWxsXG4gICAgaWYgKHRoaXMuZXhjaGFuZ2UgJiYgIWV4Y2hhbmdlcy5pbmNsdWRlcyh0aGlzLmV4Y2hhbmdlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGV4Y2hhbmdlICcke3RoaXMuZXhjaGFuZ2V9JyFgKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGNyeXB0byBwcm9wZXJ0eSB0byB0cnVlIHRvIHRyZWF0IHRoaXMgc2VjdXJpdHkgYXMgY3J5cHRvY3VycmVuY3lcbiAgICBpZiAodGhpcy5leGNoYW5nZSA9PT0gJ0NDJyB8fCB0aGlzLmlkPy5zdGFydHNXaXRoKCdzZWMteicpKSB7XG4gICAgICB0aGlzLmNyeXB0byA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gV2VhbHRoc2ltcGxlIFRyYWRlIGRvZXNuJ3QgaGF2ZSBhIHNob3J0IGV4Y2hhbmdlIGlkICgnTkVPJykgZm9yXG4gICAgLy8gQUVRVUlUQVMgTkVPIEVYQ0hBTkdFIGZvciBzb21lIHJlYXNvbi4uLlxuICAgIC8vIFdlIGhhdmUgdG8gbWFwIGl0IHRvIHRoZSBmdWxsIG5hbWUgZm9yIGNvbXBhcmlzb25zIHRvIHdvcmsuXG4gICAgaWYgKHRoaXMuZXhjaGFuZ2UgPT09ICdORU8nKSB7XG4gICAgICB0aGlzLmV4Y2hhbmdlID0gJ0FFUVVJVEFTIE5FTyBFWENIQU5HRSc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZHVjZXMgdGhlIHRpY2tlciBvYmplY3QgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXG4gICAqL1xuICBmb3JtYXQoKSB7XG4gICAgaWYgKHRoaXMuaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cblxuICAgIC8vIFdlIG11c3QgcmV0cmFuc2xhdGUgdGhlIGZ1bGwgbmFtZSBvZiB0aGUgTkVPIGV4Y2hhbmdlIGJhY2sgdG8gTkVPXG4gICAgaWYgKHRoaXMuZXhjaGFuZ2UgPT09ICdBRVFVSVRBUyBORU8gRVhDSEFOR0UnKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5zeW1ib2x9Ok5FT2A7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMuc3ltYm9sfSR7dGhpcy5leGNoYW5nZSA/IGA6JHt0aGlzLmV4Y2hhbmdlfWAgOiAnJ31gO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXBhcmVzIHN5bWJvbCBvciBpZCB3aXRoIGFub3RoZXIgdGlja2VyLiBUaGlzIGlzIHdlYWsgYmVjYXVzZVxuICAgKiBleGNoYW5nZSBpcyBub3QgY29tcGFyZWQgaGVyZSwgYWxsb3dpbmcgZm9yIGZhbHNlIHBvc2l0aXZlc1xuICAgKiBvZiBzeW1ib2xzIG9uIGRpZmZlcmVudCBleGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGlja2VyIHRvIGNvbXBhcmUgdXMgd2l0aFxuICAgKi9cbiAgd2Vha0VxdWFscyhvdGhlcikge1xuICAgIGlmICh0aGlzLmlkICYmIHRoaXMuaWQgPT09IG90aGVyLmlkKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zeW1ib2wgJiYgdGhpcy5zeW1ib2wgPT09IG90aGVyLnN5bWJvbCAmJiB0aGlzLmNyeXB0byA9PT0gb3RoZXIuY3J5cHRvKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlja2VyO1xuIiwiaW1wb3J0IEFQSUNhY2hlIGZyb20gJy4uL2NvcmUvY2FjaGUnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuLi9jb3JlL3RpY2tlcic7XG5cbmNvbnN0IGNhY2hlID0gbmV3IEFQSUNhY2hlKDEwKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICAgKiBRdWVyeSB0aGUgY2FjaGUgZm9yIHRoZSBzZWN1cml0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gc2VjdXJpdHlcbiAgICAgKi9cbiAgZ2V0KHNlY3VyaXR5KSB7XG4gICAgLy8gTXVzdCBkaWdlc3QgdGhlIHNlY3VyaXR5IGludG8gdGhlIHN0YW5kYXJkIGZvcm1hdFxuICAgIGNvbnN0IHJlc3VsdCA9IGNhY2hlLmdldChuZXcgVGlja2VyKHNlY3VyaXR5KS5mb3JtYXQoKSk7XG5cbiAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG5cbiAgLyoqXG4gICAgICogUmVtZW1iZXIgdGhlIHNlY3VyaXR5IGZvciBhIGZ1dHVyZSBxdWljayByZXRyaWV2YWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IGtleVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICAgKi9cbiAgaW5zZXJ0KGtleSwgdmFsdWUpIHtcbiAgICBjYWNoZS5pbnNlcnQobmV3IFRpY2tlcihrZXkpLmZvcm1hdCgpLCB2YWx1ZSk7XG4gIH0sXG59O1xuIiwiLypcbiAqIEFQSUNhY2hlIGlzIGFuIGludGVybmFsIGVmZm9ydCB0byBtaW5pbWl6ZSB1bm5lY2Vzc2FyeSBBUEkgY2FsbHMgd2hlcmVcbiAqIHBvc3NpYmxlLiBBIHNwZWNpZmljIHVzZWNhc2Ugd2hlcmUgYSBjYWNoZSBpcyB1c2VmdWwgaXMgZmlndXJpbmcgb3V0IHRoZVxuICogZXhjaGFuZ2UgYSBzZWN1cml0eSBiZWxvbmdzIHRvLiBBIGNhY2hlIHdvdWxkIGFsbG93IHVzIHRvIG1lbW9yaXplXG4gKiB0aGlzIHN0YXRpYyBkYXRhIGZvciBhIHBlcmlvZCBvZiB0aW1lIHRvIGF2b2lkIHVubmVjZXNzYXJ5IEFQSSBjYWxscy5cbiAqXG4gKiBUaGUgY2xhc3MgZW5jYXBzdWxhdGVzIHRoZSBmb2xsb3dpbmcgY2FjaGUgYmVoYXZpb3VyOlxuICogLSBBIG1heGltdW0gZW50cmllcyBwcm92aWRlZCBhcyBhIGNvbnN0cnVjdG9yIGFyZ3VtZW50XG4gKiAtIEZpcnN0IGluLCBGaXJzdCBvdXQgKEZJRk8pIG1vZGVsXG4gKlxuICogVGhlIGludGVybmVsIGRhdGEgc3RydWN0dXJlIGlzIGEgSGFzaFNldCwgc28gbG9va3VwIHRpbWUgY29zdCBpcyBmYWlybHlcbiAqIG1pbmltYWwuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFQSUNhY2hlIHtcbiAgY29uc3RydWN0b3Ioc2l6ZSkge1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIFN0b3JlIHRoZSBrZXktdmFsdWUgcGFpciBpbnRvIHRoaXMgY2FjaGUuIFRoZSBvbGRlc3QgZW50cnkgaXMgZXZpY3RlZCBpZlxuICAgICAqIHdlJ3JlIG91dCBvZiBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0ga2V5XG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqL1xuICBpbnNlcnQoa2V5LCB2YWx1ZSkge1xuICAgIGlmICh0aGlzLmNhY2hlLnNpemUgPj0gdGhpcy5zaXplKSB7XG4gICAgICB0aGlzLmNhY2hlLmRlbGV0ZSh0aGlzLmNhY2hlLmtleXMoKS5uZXh0KCkudmFsdWUpO1xuICAgIH1cblxuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAgICogUmV0cmlldmUgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCB0aGUga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBrZXlcbiAgICAgKi9cbiAgZ2V0KGtleSkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChrZXkpO1xuICB9XG59XG4iLCJpbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4vYXBpL2VuZHBvaW50cyc7XG5pbXBvcnQgaGFuZGxlUmVxdWVzdCBmcm9tICcuL25ldHdvcmsvaHR0cHMnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuL2NvcmUvdGlja2VyJztcbmltcG9ydCB7IGNvbmZpZ0VuYWJsZWQgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgY2FjaGUgZnJvbSAnLi9vcHRpb25hbC9zZWN1cml0aWVzLWNhY2hlJztcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8qKlxuICAgKiBBIHNuYXBzaG90IG9mIHRoZSBjdXJyZW50IFVTRC9DQUQgZXhjaGFuZ2UgcmF0ZXMgb24gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZVxuICAgKiBwbGF0Zm9ybS5cbiAgICovXG4gIGV4Y2hhbmdlUmF0ZXM6IGFzeW5jICgpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkVYQ0hBTkdFX1JBVEVTLCB7fSksXG5cbiAgLyoqXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IGEgc2VjdXJpdHkgb24gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBQbGF0Zm9ybS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSB1c2VyVGlja2VyIFRoZSBzZWN1cml0eSBpZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGV4dGVuc2l2ZSBQdWxscyBhIG1vcmUgZGV0YWlsZWQgcmVwb3J0IG9mIHRoZSBzZWN1cml0eSB1c2luZyB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgL3NlY3VyaXRpZXMve2lkfSBBUElcbiAgICovXG4gIGdldFNlY3VyaXR5OiBhc3luYyAodXNlclRpY2tlciwgZXh0ZW5zaXZlKSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XG5cbiAgICAvLyBSdW4gc29tZSB2YWxpZGF0aW9uIG9uIHRoZSB0aWNrZXJcbiAgICBjb25zdCB0aWNrZXIgPSBuZXcgVGlja2VyKHVzZXJUaWNrZXIpO1xuXG4gICAgaWYgKCFleHRlbnNpdmUgJiYgY29uZmlnRW5hYmxlZCgnc2VjdXJpdGllc19jYWNoZScpKSB7XG4gICAgICByZXN1bHQgPSBjYWNoZS5nZXQodGlja2VyKTtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGlja2VyLmlkKSB7XG4gICAgICAvLyBXZSB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGV4dGVuc2l2ZSBkZXRhaWxzIEFQSSBzaW5jZSB3ZSBoYXZlIHRoZSB1bmlxdWUgaWQuXG4gICAgICByZXN1bHQgPSBhd2FpdCBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5FWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUywgeyBpZDogdGlja2VyLmlkIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSBhd2FpdCBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5TRUNVUklUWSwgeyB0aWNrZXI6IHRpY2tlci5zeW1ib2wgfSk7XG4gICAgICByZXN1bHQgPSByZXN1bHQuZmlsdGVyKChzZWN1cml0eSkgPT4gc2VjdXJpdHkuc3RvY2suc3ltYm9sID09PSB0aWNrZXIuc3ltYm9sKTtcblxuICAgICAgaWYgKHRpY2tlci5jcnlwdG8pIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoc2VjdXJpdHkpID0+IHNlY3VyaXR5LnNlY3VyaXR5X3R5cGUgPT09ICdjcnlwdG9jdXJyZW5jeScpO1xuICAgICAgfSBlbHNlIGlmICh0aWNrZXIuZXhjaGFuZ2UpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoc2VjdXJpdHkpID0+IHNlY3VyaXR5LnN0b2NrLnByaW1hcnlfZXhjaGFuZ2UgPT09IHRpY2tlci5leGNoYW5nZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011bHRpcGxlIHNlY3VyaXRpZXMgbWF0Y2hlZCBxdWVyeS4nKTtcbiAgICAgIH0gaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzZWN1cml0aWVzIG1hdGNoZWQgcXVlcnkuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgcmVzdWx0IGZyb20gYSBzaW5nbGV0b24gbGlzdCB0byBpdHMgcmF3IGVudHJ5XG4gICAgICBbcmVzdWx0XSA9IHJlc3VsdDtcblxuICAgICAgaWYgKGV4dGVuc2l2ZSkge1xuICAgICAgICAvLyBUaGUgY2FsbGVyIGhhcyBvcHRlZCB0byByZWNlaXZlIHRoZSBleHRlbnNpdmUgZGV0YWlscyBhYm91dCB0aGUgc2VjdXJpdHkuXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkVYVEVOU0lWRV9TRUNVUklUWV9ERVRBSUxTLCB7IGlkOiByZXN1bHQuaWQgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZ0VuYWJsZWQoJ3NlY3VyaXRpZXNfY2FjaGUnKSAmJiBjYWNoZS5nZXQodGlja2VyKSA9PT0gbnVsbCkge1xuICAgICAgY2FjaGUuaW5zZXJ0KHRpY2tlciwgcmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxufTtcbiIsImltcG9ydCB7IEhlYWRlcnMgfSBmcm9tICdub2RlLWZldGNoJztcblxuY29uc3QgY3VzdG9tSGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICogQXBwZW5kcyBhIGhlYWRlciBuYW1lLXZhbHVlIHBhaXIgdG8gYWxsIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG5hbWUgSGVhZGVyIGtleVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIEhlYWRlciB2YWx1ZVxuICAgKi9cbiAgYWRkOiAobmFtZSwgdmFsdWUpID0+IGN1c3RvbUhlYWRlcnMuYXBwZW5kKG5hbWUsIHZhbHVlKSxcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGN1c3RvbSBoZWFkZXIgZnJvbSBhbGwgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbmFtZSBIZWFkZXIga2V5XG4gICAqL1xuICByZW1vdmU6IChuYW1lKSA9PiBjdXN0b21IZWFkZXJzLmRlbGV0ZShuYW1lKSxcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBjdXN0b20gaGVhZGVycy5cbiAgICovXG4gIGNsZWFyOiAoKSA9PiBbLi4uY3VzdG9tSGVhZGVyc10uZm9yRWFjaCgoaGVhZGVyKSA9PiBjdXN0b21IZWFkZXJzLmRlbGV0ZShoZWFkZXJbMF0pKSxcblxuICAvKipcbiAgICogUHJvZHVjZXMgYSBsaXN0IG9mIGN1c3RvbSBoZWFkZXJzLlxuICAgKi9cbiAgdmFsdWVzOiAoKSA9PiBbLi4uY3VzdG9tSGVhZGVyc10sXG59O1xuIiwicmVxdWlyZSgnc291cmNlLW1hcC1zdXBwb3J0JykuaW5zdGFsbCgpO1xuXG5jb25zdCBhdXRoID0gcmVxdWlyZSgnLi9hdXRoJykuZGVmYXVsdDtcbmNvbnN0IGhlYWRlcnMgPSByZXF1aXJlKCcuL2hlYWRlcnMnKS5kZWZhdWx0O1xuY29uc3QgYWNjb3VudHMgPSByZXF1aXJlKCcuL2FjY291bnRzJykuZGVmYXVsdDtcbmNvbnN0IG9yZGVycyA9IHJlcXVpcmUoJy4vb3JkZXJzJykuZGVmYXVsdDtcbmNvbnN0IGRhdGEgPSByZXF1aXJlKCcuL2RhdGEnKS5kZWZhdWx0O1xuY29uc3QgcXVvdGVzID0gcmVxdWlyZSgnLi9xdW90ZXMnKS5kZWZhdWx0O1xuY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi9jb25maWcnKS5kZWZhdWx0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXV0aCxcbiAgaGVhZGVycyxcbiAgYWNjb3VudHMsXG4gIG9yZGVycyxcbiAgcXVvdGVzLFxuICBkYXRhLFxuICBjb25maWcsXG59O1xuIiwiLyoqXG4gKiBDb21wdXRlcyB0aGUgY3VycmVudCB0aW1lIGluIGVwb2NoIHNlY29uZHMuXG4gKi9cbmNvbnN0IGVwb2NoU2Vjb25kcyA9ICgpID0+IHBhcnNlSW50KERhdGUubm93KCkgLyAxMDAwLCAxMCk7XG5leHBvcnQgZGVmYXVsdCBlcG9jaFNlY29uZHM7XG4iLCJpbXBvcnQgZXBvY2hTZWNvbmRzIGZyb20gJy4uL2hlbHBlcnMvdGltZSc7XG5pbXBvcnQgYXV0aCBmcm9tICcuLi9hdXRoJztcblxuLypcbiAqIFZhbGlkYXRlIHRoZSBhdXRoIHRva2VuIGZvciBleHBpcnksIGF0dGVtcHRpbmcgdG8gcmVmcmVzaCBpdFxuICogaWYgd2UgaGF2ZSB0aGUgcmVmcmVzaCB0b2tlbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaW1wbGljaXRUb2tlblJlZnJlc2goKSB7XG4gIGlmIChlcG9jaFNlY29uZHMoKSA+PSBhdXRoLnRva2Vucz8uZXhwaXJlcykge1xuICAgIGlmIChhdXRoLnRva2Vucz8ucmVmcmVzaCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gTGV0J3MgaW1wbGljaXRseSByZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4gdXNpbmcgdGhlIHJlZnJlc2ggdG9rZW4uXG4gICAgICAgIGF3YWl0IGF1dGgucmVmcmVzaCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gVGhlIHJlZnJlc2ggdG9rZW4gaXMgbm90IHZhbGlkLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byByZWZyZXNoIGV4cGlyZWQgdG9rZW46ICR7ZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdlIGFyZSBmb3JjZWQgdG8gcmVqZWN0IGFzIG91ciBhY2Nlc3MgdG9rZW4gaGFzIGV4cGlyZWQgYW5kIHdlXG4gICAgICAvLyBkbyBub3QgaGF2ZSBhIHJlZnJlc2ggdG9rZW4uXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjY2VzcyB0b2tlbiBleHBpcmVkJyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgZmV0Y2gsIHsgSGVhZGVycyB9IGZyb20gJ25vZGUtZmV0Y2gnO1xuaW1wb3J0IGN1c3RvbUhlYWRlcnMgZnJvbSAnLi4vaGVhZGVycyc7XG5pbXBvcnQgYXV0aCBmcm9tICcuLi9hdXRoJztcbmltcG9ydCB7IGNvbmZpZ0VuYWJsZWQgfSBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IGltcGxpY2l0VG9rZW5SZWZyZXNoIGZyb20gJy4uL29wdGlvbmFsL2ltcGxpY2l0LXRva2VuLXJlZnJlc2gnO1xuXG5jb25zdCBbIEhUVFBfT0ssIEhUVFBfQ1JFQVRFRCBdID0gWzQwMCwgMjAxXTtcblxuLypcbiAqIENvbXBsZXRlIHRoZSBVUkwgYnkgZmlsbGluZyB0aGUgcGFyYW1ldGVyIHBsYWNlaG9sZGVycyB3aXRoIHRoZVxuICogZGF0YSBhcmd1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIGZpbmFsaXplUmVxdWVzdChlbmRwb2ludCwgZGF0YSkge1xuICAvLyBNYWtlIGEgY29weSBzbyB3ZSBkb24ndCBtb2RpZnkgdGhlIG9yaWdpbmFsIG9uZS5cbiAgY29uc3QgcGFyYW1zID0geyAuLi5kYXRhIH07XG4gIGxldCB7IHVybCB9ID0gZW5kcG9pbnQ7XG5cbiAgLy8gTm8gbmVlZCB0byBkbyBhbnl0aGluZyBpZiB0aGUgVVJMIGlzIHN0YXRpYyAobm8gcGFyYW1ldGVycylcbiAgaWYgKGVuZHBvaW50LnBhcmFtZXRlcnMpIHtcbiAgICAvLyBTd2FwIGFsbCB0aGUgcGFyYW1ldGVyIHBsYWNlaG9sZGVycyB3aXRoIHRoZSBhcmd1bWVudHMuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IE9iamVjdC5rZXlzKGVuZHBvaW50LnBhcmFtZXRlcnMpLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgcGFyYW1ldGVyTmFtZSA9IGVuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdO1xuXG4gICAgICAvLyB3ZSBoYXZlIHRvIGV4cGxpY2l0bHkgY2hlY2sgZm9yIG51bGwgYW5kIHVuZGVmaW5lZCBzaW5jZSBwYXJhbWV0ZXJcbiAgICAgIC8vIHZhbHVlcyBtaWdodCBiZSAwLlxuICAgICAgaWYgKHBhcmFtc1twYXJhbWV0ZXJOYW1lXSA9PT0gbnVsbCB8fCBwYXJhbXNbcGFyYW1ldGVyTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVSTCBQYXRoIHBhcmFtZXRlciAnJHtwYXJhbWV0ZXJOYW1lfScgbWlzc2luZyFgKTtcbiAgICAgIH1cblxuICAgICAgdXJsID0gdXJsLnJlcGxhY2UoYHske2luZGV4fX1gLCBwYXJhbXNbZW5kcG9pbnQucGFyYW1ldGVyc1tpbmRleF1dKTtcblxuICAgICAgLy8gTXVzdCByZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgcGF5bG9hZCBhcyBpdCBoYXMgYmVlbiBjb25zdW1lZCBieSB0aGUgVVJMXG4gICAgICBkZWxldGUgcGFyYW1zW2VuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdXTtcbiAgICB9XG4gIH1cblxuICAvLyBObyBwYXlsb2FkIGF0dGFjaGVkIHRvIEdFVC9ERUxFVEUgcmVxdWVzdHNcbiAgaWYgKFsnR0VUJywgJ0hFQUQnXS5pbmNsdWRlcyhlbmRwb2ludC5tZXRob2QpKSB7XG4gICAgcmV0dXJuIHsgdXJsLCBwYXlsb2FkOiB1bmRlZmluZWQgfTtcbiAgfVxuXG4gIHJldHVybiB7IHVybCwgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkocGFyYW1zKSB9O1xufVxuXG4vKlxuICogSW1wbGVtZW50cyB0aGUgbmV0d29yayBsZXZlbCBwcm90b2NvbCBmb3IgdGFsa2luZyB0byB0aGVcbiAqIFdlYWx0aHNpbXBsZSBUcmFkZSBIVFRQUyBBUEkuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHRhbGsoZW5kcG9pbnQsIGRhdGEpIHtcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gIGhlYWRlcnMuYXBwZW5kKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXG4gIGlmIChhdXRoLnRva2Vucz8uYWNjZXNzKSB7XG4gICAgLy8gV2Ugd29uJ3QgYXR0ZW1wdCB0byBpbXBsaWNpdGx5IHJlZnJlc2ggaWYgdGhlIHVzZXIgaGFzIHJlcXVlc3RlZFxuICAgIC8vIHRoaXMuXG4gICAgaWYgKGNvbmZpZ0VuYWJsZWQoJ2ltcGxpY2l0X3Rva2VuX3JlZnJlc2gnKSkge1xuICAgICAgYXdhaXQgaW1wbGljaXRUb2tlblJlZnJlc2goKTtcbiAgICB9XG5cbiAgICBoZWFkZXJzLmFwcGVuZCgnQXV0aG9yaXphdGlvbicsIGF1dGgudG9rZW5zLmFjY2Vzcyk7XG4gIH1cblxuICAvLyBBcHBseSBhbGwgY3VzdG9tIGhlYWRlcnNcbiAgY3VzdG9tSGVhZGVycy52YWx1ZXMoKS5mb3JFYWNoKChoZWFkZXIpID0+IGhlYWRlcnMuYXBwZW5kKC4uLmhlYWRlcikpO1xuXG4gIC8vIGZpbGwgcGF0aCBhbmQgcXVlcnkgcGFyYW1ldGVycyBpbiB0aGUgVVJMXG4gIGNvbnN0IHsgdXJsLCBwYXlsb2FkIH0gPSBmaW5hbGl6ZVJlcXVlc3QoZW5kcG9pbnQsIGRhdGEpO1xuXG4gIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICBib2R5OiBwYXlsb2FkLFxuICAgIG1ldGhvZDogZW5kcG9pbnQubWV0aG9kLFxuICAgIGhlYWRlcnMsXG4gIH0pO1xufVxuXG4vKlxuICogRnVsZmlsbCB0aGUgZW5kcG9pbnQgcmVxdWVzdCBnaXZlbiB0aGUgZW5kcG9pbnQgY29uZmlndXJhdGlvbiwgb3B0aW9uYWxcbiAqIGRhdGEuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3QoZW5kcG9pbnQsIGRhdGEpIHtcbiAgLy8gU3VibWl0IHRoZSBIVFRQIHJlcXVlc3QgdG8gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBTZXJ2ZXJzXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGFsayhlbmRwb2ludCwgZGF0YSk7XG5cbiAgaWYgKFtIVFRQX09LLCBIVFRQX0NSRUFURURdLmluY2x1ZGVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICByZXR1cm4gZW5kcG9pbnQub25TdWNjZXNzKHJlc3BvbnNlKTtcbiAgfVxuXG4gIHJldHVybiBQcm9taXNlLnJlamVjdChhd2FpdCBlbmRwb2ludC5vbkZhaWx1cmUocmVzcG9uc2UpKTtcbn1cbiIsImltcG9ydCBlbmRwb2ludHMsIHsgT1JERVJTX1BFUl9QQUdFIH0gZnJvbSAnLi4vYXBpL2VuZHBvaW50cyc7XG5pbXBvcnQgaGFuZGxlUmVxdWVzdCBmcm9tICcuLi9uZXR3b3JrL2h0dHBzJztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi4vY29yZS90aWNrZXInO1xuXG4vKipcbiAqIENvbGxlY3RzIG9yZGVycyAoZmlsbGVkLCBwZW5kaW5nLCBjYW5jZWxsZWQpIGZvciB0aGUgcHJvdmlkZWQgcGFnZSBhbmRcbiAqIGFjY291bnQgaWQuXG4gKlxuICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gKiBAcGFyYW0geyp9IHBhZ2VOdW0gVGhlIG9yZGVycyBwYWdlIGluZGV4IHRvIHNlZWsgdG9cbiAqL1xuYXN5bmMgZnVuY3Rpb24gcGFnZShhY2NvdW50SWQsIHBhZ2VOdW0pIHtcbiAgcmV0dXJuIGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLk9SREVSU19CWV9QQUdFLCB7XG4gICAgb2Zmc2V0OiAocGFnZU51bSAtIDEpICogT1JERVJTX1BFUl9QQUdFLFxuICAgIGFjY291bnRJZCxcbiAgfSk7XG59XG5cbi8qKlxuICogQ29sbGVjdHMgYWxsIG9yZGVycyAoZmlsbGVkLCBwZW5kaW5nLCBjYW5jZWxsZWQpIGZvciB0aGUgc3BlY2lmaWMgYWNjb3VudC5cbiAqXG4gKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYWxsKGFjY291bnRJZCkge1xuICAvLyBXZSBzdGFydCBieSBjYXB0dXJpbmcgdGhlIGZpcnN0IHBhZ2Ugb2Ygb3JkZXJzIGluIG9yZGVyIHRvXG4gIC8vIGRldGVybWluZSB0aGUgbnVtYmVyIG9mIHBhZ2VzIGF2YWlsYWJsZVxuICBjb25zdCBkYXRhID0gYXdhaXQgcGFnZShhY2NvdW50SWQsIDEpO1xuICBjb25zdCBwYWdlcyA9IE1hdGguY2VpbChkYXRhLnRvdGFsIC8gT1JERVJTX1BFUl9QQUdFKTtcblxuICBpZiAocGFnZXMgPiAxKSB7XG4gICAgY29uc3QgdGFza3MgPSBbXTtcblxuICAgIC8vIEJ1aWxkIHRoZSB0YXNrIHF1ZXVlIHRoYXQgd2lsbCByZXRyaWV2ZSB0aGUgcmVtYWluaW5nIHBhZ2VzIG9mIG9yZGVyc1xuICAgIGZvciAobGV0IHBhZ2VOdW0gPSAyOyBwYWdlTnVtIDw9IHBhZ2VzOyBwYWdlTnVtKyspIHtcbiAgICAgIHRhc2tzLnB1c2gocGFnZShhY2NvdW50SWQsIHBhZ2VOdW0pLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0Lm9yZGVycykpO1xuICAgIH1cblxuICAgIC8vIE91dC1vZi1vcmRlciBpbnZvY2F0aW9uIGlzIGRlc2lyZWQuIFdoYXQgbWF0dGVycyBpcyB0aGF0IFByb21pc2UuYWxsIHdpbGxcbiAgICAvLyBndWFyYW50ZWUgdGhhdCB0aGUgZGF0YSBvcmRlciBpcyBwcmVzZXJ2ZWQuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5hbGwodGFza3MpO1xuICAgIHJlc3VsdC5mb3JFYWNoKChsaXN0KSA9PiBkYXRhLm9yZGVycy5wdXNoKC4uLmxpc3QpKTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgdG90YWwgYXR0cmlidXRlIHRvIHJlZmxlY3QgdGhlIG5ldyBzaXplXG4gICAgZGF0YS50b3RhbCA9IGRhdGEub3JkZXJzLmxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufVxuXG4vKlxuICogUmV0cmlldmUgZmlsdGVyZWQgb3JkZXJzIGJ5IHRpY2tlciBhbmQgc3RhdHVzLlxuICovXG5hc3luYyBmdW5jdGlvbiBmaWx0ZXJlZE9yZGVycyhhY2NvdW50SWQsIHRpY2tlciwgc3RhdHVzKSB7XG4gIC8vIEZldGNoIGFsbCBvcmRlcnNcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWxsKGFjY291bnRJZCk7XG5cbiAgY29uc3Qgb3JkZXJGaWx0ZXIgPSAob3JkZXIpID0+IHtcbiAgICBpZiAodGlja2VyKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgVGlja2VyKHsgc3ltYm9sOiBvcmRlci5zeW1ib2wsIGlkOiBvcmRlci5zZWN1cml0eV9pZCB9KTtcbiAgICAgIC8vIG9yZGVyIG9iamVjdHMgZG9uJ3QgaW5jbHVkZSBleGNoYW5nZXMsIHNvIHdlIGFyZSB1bmFibGUgdG8gbWFrZVxuICAgICAgLy8gYSBzdHJvbmcgY29tcGFyaXNvbiB3aXRob3V0IHJlcXVpcmluZyBhIGxpbmVhciBpbmNyZWFzZSBvZlxuICAgICAgLy8gZW5kcG9pbnQgY2FsbHMgKHdoaWNoIGlzIG5vdCByZWFzb25hYmxlKS5cbiAgICAgIC8vXG4gICAgICAvLyBUaGUgdXNlciBzaG91bGQgcHJvdmlkZSB0aGUgc2VjdXJpdHkgaWQgZm9yIGEgc3Ryb25nIGNvbXBhcmlzb24gaGVyZS5cbiAgICAgIGlmICghbmV3IFRpY2tlcih0aWNrZXIpLndlYWtFcXVhbHModGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9yZGVyLnN0YXR1cyA9PT0gc3RhdHVzO1xuICB9O1xuXG4gIC8vIEFwcGx5IGZpbHRlciB0byB0aGUgcmVzdWx0XG4gIHJlc3VsdC5vcmRlcnMgPSByZXN1bHQub3JkZXJzLmZpbHRlcihvcmRlckZpbHRlcik7XG4gIHJlc3VsdC50b3RhbCA9IHJlc3VsdC5vcmRlcnMubGVuZ3RoO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgcGFnZSxcbiAgYWxsLFxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgcGVuZGluZyBvcmRlcnMgZm9yIHRoZSBzcGVjaWZpZWQgc2VjdXJpdHkgaW4gdGhlIGFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHRpY2tlciAob3B0aW9uYWwpIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICovXG4gIHBlbmRpbmc6IGFzeW5jIChhY2NvdW50SWQsIHRpY2tlcikgPT4gZmlsdGVyZWRPcmRlcnMoYWNjb3VudElkLCB0aWNrZXIsICdzdWJtaXR0ZWQnKSxcblxuICAvKipcbiAgICogUmV0cmlldmVzIGZpbGxlZCBvcmRlcnMgZm9yIHRoZSBzcGVjaWZpZWQgc2VjdXJpdHkgaW4gdGhlIGFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHRpY2tlciAob3B0aW9uYWwpIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICovXG4gIGZpbGxlZDogYXN5bmMgKGFjY291bnRJZCwgdGlja2VyKSA9PiBmaWx0ZXJlZE9yZGVycyhhY2NvdW50SWQsIHRpY2tlciwgJ3Bvc3RlZCcpLFxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgY2FuY2VsbGVkIG9yZGVycyBmb3IgdGhlIHNwZWNpZmllZCBzZWN1cml0eSBpbiB0aGUgYWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIChvcHRpb25hbCkgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKi9cbiAgY2FuY2VsbGVkOiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIpID0+IGZpbHRlcmVkT3JkZXJzKGFjY291bnRJZCwgdGlja2VyLCAnY2FuY2VsbGVkJyksXG59O1xuIiwiaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuLi9hcGkvZW5kcG9pbnRzJztcbmltcG9ydCBoYW5kbGVSZXF1ZXN0IGZyb20gJy4uL25ldHdvcmsvaHR0cHMnO1xuaW1wb3J0IGhpc3RvcnkgZnJvbSAnLi9oaXN0b3J5JztcbmltcG9ydCBkYXRhIGZyb20gJy4uL2RhdGEnO1xuaW1wb3J0IHF1b3RlcyBmcm9tICcuLi9xdW90ZXMnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuLi9jb3JlL3RpY2tlcic7XG5cbmNvbnN0IGlzQ2FuYWRpYW5TZWN1cml0eSA9IChleGNoYW5nZSkgPT4gWydUU1gnLCAnVFNYLVYnXS5pbmNsdWRlcyhleGNoYW5nZSk7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICogQ2FuY2VscyB0aGUgcGVuZGluZyBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIG9yZGVyIGlkLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9yZGVySWQgVGhlIHBlbmRpbmcgb3JkZXIgdG8gY2FuY2VsXG4gICAqL1xuICBjYW5jZWw6IGFzeW5jIChvcmRlcklkKSA9PiAoe1xuICAgIG9yZGVyOiBvcmRlcklkLFxuICAgIHJlc3BvbnNlOiBhd2FpdCBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5DQU5DRUxfT1JERVIsIHsgb3JkZXJJZCB9KSxcbiAgfSksXG5cbiAgLyoqXG4gICAqIENhbmNlbHMgYWxsIHBlbmRpbmcgb3JkZXJzIHVuZGVyIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqL1xuICBhc3luYyBjYW5jZWxQZW5kaW5nKGFjY291bnRJZCkge1xuICAgIGNvbnN0IHBlbmRpbmcgPSBhd2FpdCBoaXN0b3J5LnBlbmRpbmcoYWNjb3VudElkKTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocGVuZGluZy5vcmRlcnMubWFwKGFzeW5jIChvcmRlcikgPT4gdGhpcy5jYW5jZWwob3JkZXIub3JkZXJfaWQpKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1hcmtldCBidXkgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgbWFya2V0QnV5OiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIsIHF1YW50aXR5KSA9PiB7XG4gICAgY29uc3QgZGV0YWlscyA9IGF3YWl0IGRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKTtcblxuICAgIHJldHVybiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IGRldGFpbHMuaWQsXG4gICAgICBsaW1pdF9wcmljZTogIShuZXcgVGlja2VyKHRpY2tlcikuY3J5cHRvKSA/IGF3YWl0IHF1b3Rlcy5nZXQodGlja2VyKSA6IHVuZGVmaW5lZCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ2J1eV9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ21hcmtldCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogTGltaXQgYnV5IGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWF4aW11bSBwcmljZSB0byBwdXJjaGFzZSB0aGUgc2VjdXJpdHkgYXRcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gcHVyY2hhc2VcbiAgICovXG4gIGxpbWl0QnV5OiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIsIGxpbWl0LCBxdWFudGl0eSkgPT4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICBzZWN1cml0eV9pZDogKGF3YWl0IGRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKSkuaWQsXG4gICAgbGltaXRfcHJpY2U6IGxpbWl0LFxuICAgIHF1YW50aXR5LFxuICAgIG9yZGVyX3R5cGU6ICdidXlfcXVhbnRpdHknLFxuICAgIG9yZGVyX3N1Yl90eXBlOiAnbGltaXQnLFxuICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgfSksXG5cbiAgLyoqXG4gICAqIFN0b3AgbGltaXQgYnV5IGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBzdG9wIFRoZSBwcmljZSBhdCB3aGljaCB0aGUgb3JkZXIgY29udmVydHMgdG8gYSBsaW1pdCBvcmRlclxuICAgKiBAcGFyYW0geyp9IGxpbWl0IFRoZSBtYXhpbXVtIHByaWNlIHRvIHB1cmNoYXNlIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgc3RvcExpbWl0QnV5OiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIsIHN0b3AsIGxpbWl0LCBxdWFudGl0eSkgPT4ge1xuICAgIGNvbnN0IHNlY3VyaXR5ID0gYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpO1xuXG4gICAgLy8gVGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBiYWNrZW5kIGRvZXNuJ3QgY2hlY2sgZm9yIHRoaXMsIGV2ZW4gdGhvdWdoIHRoZSBhcHAgZG9lcy4uXG4gICAgaWYgKGlzQ2FuYWRpYW5TZWN1cml0eShzZWN1cml0eS5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlKSAmJiBzdG9wICE9PSBsaW1pdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUU1gvVFNYLVYgc2VjdXJpdGllcyBtdXN0IGhhdmUgYW4gZXF1aXZhbGVudCBzdG9wIGFuZCBsaW1pdCBwcmljZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiBzZWN1cml0eS5pZCxcbiAgICAgIHN0b3BfcHJpY2U6IHN0b3AsXG4gICAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdidXlfcXVhbnRpdHknLFxuICAgICAgb3JkZXJfc3ViX3R5cGU6ICdzdG9wX2xpbWl0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBNYXJrZXQgc2VsbCBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHB1cmNoYXNlXG4gICAqL1xuICBtYXJrZXRTZWxsOiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIsIHF1YW50aXR5KSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgIHNlY3VyaXR5X2lkOiAoYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpKS5pZCxcbiAgICBtYXJrZXRfdmFsdWU6ICEobmV3IFRpY2tlcih0aWNrZXIpLmNyeXB0bykgPyBhd2FpdCBxdW90ZXMuZ2V0KHRpY2tlcikgOiB1bmRlZmluZWQsXG4gICAgcXVhbnRpdHksXG4gICAgb3JkZXJfdHlwZTogJ3NlbGxfcXVhbnRpdHknLFxuICAgIG9yZGVyX3N1Yl90eXBlOiAnbWFya2V0JyxcbiAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gIH0pLFxuXG4gIC8qKlxuICAgKiBMaW1pdCBzZWxsIGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWluaW11bSBwcmljZSB0byBzZWxsIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBzZWxsXG4gICAqL1xuICBsaW1pdFNlbGw6IGFzeW5jIChhY2NvdW50SWQsIHRpY2tlciwgbGltaXQsIHF1YW50aXR5KSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgIHNlY3VyaXR5X2lkOiAoYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpKS5pZCxcbiAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgcXVhbnRpdHksXG4gICAgb3JkZXJfdHlwZTogJ3NlbGxfcXVhbnRpdHknLFxuICAgIG9yZGVyX3N1Yl90eXBlOiAnbGltaXQnLFxuICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgfSksXG5cbiAgLyoqXG4gICAqIFN0b3AgbGltaXQgc2VsbCBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gc3RvcCBUaGUgcHJpY2UgYXQgd2hpY2ggdGhlIG9yZGVyIGNvbnZlcnRzIHRvIGEgbGltaXQgb3JkZXJcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWluaW11bSBwcmljZSB0byBzZWxsIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBzZWxsXG4gICAqL1xuICBzdG9wTGltaXRTZWxsOiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIsIHN0b3AsIGxpbWl0LCBxdWFudGl0eSkgPT4ge1xuICAgIGNvbnN0IHNlY3VyaXR5ID0gYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpO1xuXG4gICAgLy8gVGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBiYWNrZW5kIGRvZXNuJ3QgY2hlY2sgZm9yIHRoaXMsIGV2ZW4gdGhvdWdoIHRoZSBhcHAgZG9lcy4uXG4gICAgaWYgKGlzQ2FuYWRpYW5TZWN1cml0eShzZWN1cml0eS5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlKSAmJiBzdG9wICE9PSBsaW1pdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUU1gvVFNYLVYgc2VjdXJpdGllcyBtdXN0IGhhdmUgYW4gZXF1aXZhbGVudCBzdG9wIGFuZCBsaW1pdCBwcmljZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiBzZWN1cml0eS5pZCxcbiAgICAgIHN0b3BfcHJpY2U6IHN0b3AsXG4gICAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdzZWxsX3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnc3RvcF9saW1pdCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfSxcbn07XG4iLCJpbXBvcnQgaGlzdG9yeSBmcm9tICcuL2hpc3RvcnknO1xuaW1wb3J0IHN1Ym1pdCBmcm9tICcuL3N1Ym1pdCc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLi4uaGlzdG9yeSxcbiAgLi4uc3VibWl0LFxufTtcbiIsIi8qKlxuICogVGhlIGRlZmF1bHQgcHJvdmlkZXIgZm9yIHF1b3RlcyBpcyBXZWFsdGhzaW1wbGUgVHJhZGUuXG4gKi9cblxuaW1wb3J0IGRhdGEgZnJvbSAnLi4vZGF0YSc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICAgKiBRdW90ZSBmb3IgYSB0aWNrZXIgZnJvbSB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGVuZHBvaW50LlxuICAgICAqXG4gICAgICogUmVtZW1iZXIgdGhhdCB0aGlzIHF1b3RlIGlzIE5PVCByZWFsLXRpbWUhXG4gICAgICovXG4gIHF1b3RlOiBhc3luYyAodGlja2VyKSA9PiB7XG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IGRhdGEuZ2V0U2VjdXJpdHkodGlja2VyLCB0cnVlKTtcbiAgICByZXR1cm4gaW5mby5xdW90ZS5hbW91bnQ7XG4gIH0sXG59O1xuIiwiaW1wb3J0IHRyYWRlIGZyb20gJy4vZGVmYXVsdCc7XG5pbXBvcnQgZGF0YSBmcm9tICcuLi9kYXRhJztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi4vY29yZS90aWNrZXInO1xuXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgLy8gV2VhbHRoc2ltcGxlIFRyYWRlIGlzIG91ciBkZWZhdWx0IHNvdXJjZSBmb3IgcXVvdGVzLCBkZXNwaXRlXG4gIC8vIGhhdmluZyBhIDE1IG1pbiBkZWxheVxuICBkZWZhdWx0UHJvdmlkZXI6IHRyYWRlLFxuXG4gIC8vIE1haW50YWlucyBxdW90ZSBwcm92aWRlcnMgb24gYW4gZXhjaGFuZ2UgYmFzaXNcbiAgcHJvdmlkZXJzOiB7fSxcblxuICAvKipcbiAgICAgKiBMb2FkIGEgY3VzdG9tIHByb3ZpZGVyIGZvciB0aGUgZXhjaGFuZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IGV4Y2hhbmdlIFRoZSBleGNoYW5nZSB0aGF0IHRoZSBwcm92aWRlciBmZXRjaGVzIHF1b3RlcyBmb3JcbiAgICAgKiBAcGFyYW0geyp9IHByb3ZpZGVyIFRoZSBwcm92aWRlciBvYmplY3QgY29udGFpbmluZyB0aGUgcXVvdGUoKSBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKi9cbiAgdXNlKGV4Y2hhbmdlLCBwcm92aWRlcikge1xuICAgIGlmICh0eXBlb2YgKHByb3ZpZGVyLnF1b3RlKSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gVGhlIHByb3ZpZGVyIG11c3QgaGF2ZSBhIHF1b3RlKCkgaW1wbGVtZW50YXRpb24gdGhhdCB3ZSBjYW4gY2FsbCBsYXRlciFcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBxdW90ZSBwcm92aWRlciBmb3IgJHtleGNoYW5nZX0hYCk7XG4gICAgfVxuXG4gICAgdGhpcy5wcm92aWRlcnNbZXhjaGFuZ2VdID0gcHJvdmlkZXI7XG4gIH0sXG5cbiAgLyoqXG4gICAgICogT2J0YWlucyBhIHF1b3RlIGZvciB0aGUgdGlja2VyLiBUaGUgc291cmNlIG9mIHRoZSBxdW90ZSBtYXkgYmUgYSBjdXN0b21cbiAgICAgKiBwcm92aWRlciBpZiBhIHZhbGlkIHByb3ZpZGVyIGlzIHJlZ2lzdGVyZWQgZm9yIHRoZSBleGNoYW5nZSB0aGF0IHRoZVxuICAgICAqIHRpY2tlciB0cmFkZXMgb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHNlY3VyaXR5IFRoZSBzZWN1cml0eSB0byBnZXQgYSBxdW90ZSBmb3IuXG4gICAgICovXG4gIGFzeW5jIGdldChzZWN1cml0eSkge1xuICAgIGxldCBleGNoYW5nZSA9IG51bGw7XG4gICAgY29uc3QgdGlja2VyID0gbmV3IFRpY2tlcihzZWN1cml0eSk7XG5cbiAgICBpZiAodGlja2VyLmV4Y2hhbmdlKSB7XG4gICAgICAvLyBXZSBuZWVkIHRoZSBleGNoYW5nZSBpbiB0aGUgbmV4dCBzdGVwIGlmIHRoZSB1c2VyIGhhcyBzcGVjaWZpZWRcbiAgICAgIC8vIGEgY3VzdG9tIHByb3ZpZGVyIGZvciBhbiBleGNoYW5nZS4gU28gaWYgdGhlIHVzZXIgaGFzbid0IHByb3ZpZGVkXG4gICAgICAvLyBpdCwgd2Ugd2lsbCBoYXZlIHRvIHBpbmcgV2VhbHRoc2ltcGxlIHRyYWRlIHRvIGdldCBpdC5cbiAgICAgIGV4Y2hhbmdlID0gdGlja2VyLmV4Y2hhbmdlO1xuICAgIH0gZWxzZSBpZiAodGlja2VyLmNyeXB0byAmJiB0aWNrZXIuaWQpIHtcbiAgICAgIC8vIElmIHRoZSBpZCBpcyBvbmx5IGdpdmVuIGJ1dCB3ZSBrbm93IGl0J3MgYSBjcnlwdG8gaWQsXG4gICAgICAvLyB3ZSB3aWxsIGF1dG9tYXRpY2FsbHkgc2V0IGV4Y2hhbmdlIHRvICdDQycuXG4gICAgICBleGNoYW5nZSA9ICdDQyc7XG4gICAgfSBlbHNlIGlmIChPYmplY3Qua2V5cyh0aGlzLnByb3ZpZGVycykubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IGRhdGEuZ2V0U2VjdXJpdHkodGlja2VyLCBmYWxzZSk7XG4gICAgICBleGNoYW5nZSA9IGluZm8uc3RvY2sucHJpbWFyeV9leGNoYW5nZTtcbiAgICB9XG5cbiAgICAvLyBBIGN1c3RvbSBwcm92aWRlciB3aWxsIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSBkZWZhdWx0IHNvdXJjZVxuICAgIGlmIChleGNoYW5nZSBpbiB0aGlzLnByb3ZpZGVycykge1xuICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzW2V4Y2hhbmdlXS5xdW90ZSh0aWNrZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kZWZhdWx0UHJvdmlkZXIucXVvdGUodGlja2VyKTtcbiAgfSxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbnZhciBydW50aW1lID0gKGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBPcCA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPcC5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLlxuICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yO1xuICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKHByb3RvR2VuZXJhdG9yLnByb3RvdHlwZSk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0cnlMb2NzTGlzdCB8fCBbXSk7XG5cbiAgICAvLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLlxuICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblxuICAgIHJldHVybiBnZW5lcmF0b3I7XG4gIH1cbiAgZXhwb3J0cy53cmFwID0gd3JhcDtcblxuICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb25cbiAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkXG4gIC8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZVxuICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWRcbiAgLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZ1xuICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZVxuICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGVcbiAgLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaFxuICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuXG4gIGZ1bmN0aW9uIHRyeUNhdGNoKGZuLCBvYmosIGFyZykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogZXJyIH07XG4gICAgfVxuICB9XG5cbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkID0gXCJzdXNwZW5kZWRZaWVsZFwiO1xuICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSBcImV4ZWN1dGluZ1wiO1xuICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xuXG4gIC8vIFJldHVybmluZyB0aGlzIG9iamVjdCBmcm9tIHRoZSBpbm5lckZuIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXNcbiAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LlxuICB2YXIgQ29udGludWVTZW50aW5lbCA9IHt9O1xuXG4gIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZFxuICAvLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0cy4gRm9yIGZ1bGwgc3BlYyBjb21wbGlhbmNlLCB5b3UgbWF5IHdpc2ggdG8gY29uZmlndXJlIHlvdXJcbiAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9XG5cbiAgLy8gVGhpcyBpcyBhIHBvbHlmaWxsIGZvciAlSXRlcmF0b3JQcm90b3R5cGUlIGZvciBlbnZpcm9ubWVudHMgdGhhdFxuICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LlxuICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcbiAgSXRlcmF0b3JQcm90b3R5cGVbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgdmFyIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG8gJiYgZ2V0UHJvdG8oZ2V0UHJvdG8odmFsdWVzKFtdKSkpO1xuICBpZiAoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiZcbiAgICAgIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPcCAmJlxuICAgICAgaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sKSkge1xuICAgIC8vIFRoaXMgZW52aXJvbm1lbnQgaGFzIGEgbmF0aXZlICVJdGVyYXRvclByb3RvdHlwZSU7IHVzZSBpdCBpbnN0ZWFkXG4gICAgLy8gb2YgdGhlIHBvbHlmaWxsLlxuICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU7XG4gIH1cblxuICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPVxuICAgIEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR3AuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvbjtcbiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGVbdG9TdHJpbmdUYWdTeW1ib2xdID1cbiAgICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IFwiR2VuZXJhdG9yRnVuY3Rpb25cIjtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBwcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09IFwiZnVuY3Rpb25cIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIGN0b3JcbiAgICAgID8gY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHxcbiAgICAgICAgLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhblxuICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuXG4gICAgICAgIChjdG9yLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZSkgPT09IFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICAgICAgOiBmYWxzZTtcbiAgfTtcblxuICBleHBvcnRzLm1hcmsgPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgICAgIGlmICghKHRvU3RyaW5nVGFnU3ltYm9sIGluIGdlbkZ1bikpIHtcbiAgICAgICAgZ2VuRnVuW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yRnVuY3Rpb25cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcbiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC5cbiAgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yLCBQcm9taXNlSW1wbCkge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAvLyBJZiBhIHJlamVjdGVkIFByb21pc2Ugd2FzIHlpZWxkZWQsIHRocm93IHRoZSByZWplY3Rpb24gYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgaGFuZGxlZCB0aGVyZS5cbiAgICAgICAgICByZXR1cm4gaW52b2tlKFwidGhyb3dcIiwgZXJyb3IsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlSW1wbChmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG4gIEFzeW5jSXRlcmF0b3IucHJvdG90eXBlW2FzeW5jSXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBleHBvcnRzLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yO1xuXG4gIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG4gIC8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLlxuICBleHBvcnRzLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QsIFByb21pc2VJbXBsKSB7XG4gICAgaWYgKFByb21pc2VJbXBsID09PSB2b2lkIDApIFByb21pc2VJbXBsID0gUHJvbWlzZTtcblxuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSxcbiAgICAgIFByb21pc2VJbXBsXG4gICAgKTtcblxuICAgIHJldHVybiBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbilcbiAgICAgID8gaXRlciAvLyBJZiBvdXRlckZuIGlzIGEgZ2VuZXJhdG9yLCByZXR1cm4gdGhlIGZ1bGwgaXRlcmF0b3IuXG4gICAgICA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7XG4gICAgICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkge1xuICAgIHZhciBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlRXhlY3V0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVDb21wbGV0ZWQpIHtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzpcbiAgICAgICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZVxuICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIGNvbnRleHQuYXJnID0gYXJnO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlO1xuICAgICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcbiAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkge1xuICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBjb250ZXh0LmFyZyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZSA9IEdlblN0YXRlRXhlY3V0aW5nO1xuXG4gICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PVxuICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi5cbiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZVxuICAgICAgICAgICAgPyBHZW5TdGF0ZUNvbXBsZXRlZFxuICAgICAgICAgICAgOiBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuXG4gICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcbiAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlXG4gIC8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGVcbiAgLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsXG4gIC8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLlxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtcbiAgICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvd1xuICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAvLyBOb3RlOiBbXCJyZXR1cm5cIl0gbXVzdCBiZSB1c2VkIGZvciBFUzMgcGFyc2luZyBjb21wYXRpYmlsaXR5LlxuICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0pIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG4gICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcblxuICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAvLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbVxuICAgICAgICAgICAgLy8gXCJyZXR1cm5cIiB0byBcInRocm93XCIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuXG4gICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgIFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTtcblxuICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuXG4gICAgaWYgKCEgaW5mbykge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKTtcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnlcbiAgICAgIC8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTtcblxuICAgICAgLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcblxuICAgICAgLy8gSWYgY29udGV4dC5tZXRob2Qgd2FzIFwidGhyb3dcIiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlXG4gICAgICAvLyBleGNlcHRpb24sIGxldCB0aGUgb3V0ZXIgZ2VuZXJhdG9yIHByb2NlZWQgbm9ybWFsbHkuIElmXG4gICAgICAvLyBjb250ZXh0Lm1ldGhvZCB3YXMgXCJuZXh0XCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlblxuICAgICAgLy8gXCJjb25zdW1lZFwiIGJ5IHRoZSBkZWxlZ2F0ZSBpdGVyYXRvci4gSWYgY29udGV4dC5tZXRob2Qgd2FzXG4gICAgICAvLyBcInJldHVyblwiLCBhbGxvdyB0aGUgb3JpZ2luYWwgLnJldHVybiBjYWxsIHRvIGNvbnRpbnVlIGluIHRoZVxuICAgICAgLy8gb3V0ZXIgZ2VuZXJhdG9yLlxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSBcInJldHVyblwiKSB7XG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlLXlpZWxkIHRoZSByZXN1bHQgcmV0dXJuZWQgYnkgdGhlIGRlbGVnYXRlIG1ldGhvZC5cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cblxuICAgIC8vIFRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBpcyBmaW5pc2hlZCwgc28gZm9yZ2V0IGl0IGFuZCBjb250aW51ZSB3aXRoXG4gICAgLy8gdGhlIG91dGVyIGdlbmVyYXRvci5cbiAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgfVxuXG4gIC8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlXG4gIC8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTtcblxuICBHcFt0b1N0cmluZ1RhZ1N5bWJvbF0gPSBcIkdlbmVyYXRvclwiO1xuXG4gIC8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlXG4gIC8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlXG4gIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yXG4gIC8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgR3BbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgR3AudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfTtcblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cbiAgICBpZiAoMSBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG4gICAgfVxuXG4gICAgaWYgKDIgaW4gbG9jcykge1xuICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07XG4gICAgICBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM107XG4gICAgfVxuXG4gICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkge1xuICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuICAgIHJlY29yZC50eXBlID0gXCJub3JtYWxcIjtcbiAgICBkZWxldGUgcmVjb3JkLmFyZztcbiAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuICB9XG5cbiAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaFxuICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb21cbiAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG4gICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiBcInJvb3RcIiB9XTtcbiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7XG4gICAgdGhpcy5yZXNldCh0cnVlKTtcbiAgfVxuXG4gIGV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIGtleXMucmV2ZXJzZSgpO1xuXG4gICAgLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXBcbiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLlxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIG5leHQudmFsdWUgPSBrZXk7XG4gICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlXG4gICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpc1xuICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG4gICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcbiAgICBpZiAoaXRlcmFibGUpIHtcbiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtcbiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmFibGUubmV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHtcbiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLlxuICAgIHJldHVybiB7IG5leHQ6IGRvbmVSZXN1bHQgfTtcbiAgfVxuICBleHBvcnRzLnZhbHVlcyA9IHZhbHVlcztcblxuICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTtcblxuICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6XG4gICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuICAgICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cbiAgICAgICAgaWYgKGNhdWdodCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICEhIGNhdWdodDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcbiAgICAgICAgICAvLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCBcImNhdGNoTG9jXCIpO1xuICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKTtcblxuICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG4gICAgICAgICAgKHR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgICB0eXBlID09PSBcImNvbnRpbnVlXCIpICYmXG4gICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcbiAgICAgICAgICBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYVxuICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG4gICAgICAgIGZpbmFsbHlFbnRyeSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlO1xuICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSkge1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcbiAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG4gICAgfSxcblxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgIHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgIHRoaXMubmV4dCA9IFwiZW5kXCI7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiICYmIGFmdGVyTG9jKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcbiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykge1xuICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvblxuICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG5cbiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsXG4gICAgICAgIG5leHRMb2M6IG5leHRMb2NcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3RcbiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLlxuICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGVcbiAgLy8gb3Igbm90LCByZXR1cm4gdGhlIHJ1bnRpbWUgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGRlY2xhcmUgdGhlIHZhcmlhYmxlXG4gIC8vIHJlZ2VuZXJhdG9yUnVudGltZSBpbiB0aGUgb3V0ZXIgc2NvcGUsIHdoaWNoIGFsbG93cyB0aGlzIG1vZHVsZSB0byBiZVxuICAvLyBpbmplY3RlZCBlYXNpbHkgYnkgYGJpbi9yZWdlbmVyYXRvciAtLWluY2x1ZGUtcnVudGltZSBzY3JpcHQuanNgLlxuICByZXR1cm4gZXhwb3J0cztcblxufShcbiAgLy8gSWYgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlLCB1c2UgbW9kdWxlLmV4cG9ydHNcbiAgLy8gYXMgdGhlIHJlZ2VuZXJhdG9yUnVudGltZSBuYW1lc3BhY2UuIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgZW1wdHlcbiAgLy8gb2JqZWN0LiBFaXRoZXIgd2F5LCB0aGUgcmVzdWx0aW5nIG9iamVjdCB3aWxsIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZVxuICAvLyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIHZhcmlhYmxlIGF0IHRoZSB0b3Agb2YgdGhpcyBmaWxlLlxuICB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiID8gbW9kdWxlLmV4cG9ydHMgOiB7fVxuKSk7XG5cbnRyeSB7XG4gIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG59IGNhdGNoIChhY2NpZGVudGFsU3RyaWN0TW9kZSkge1xuICAvLyBUaGlzIG1vZHVsZSBzaG91bGQgbm90IGJlIHJ1bm5pbmcgaW4gc3RyaWN0IG1vZGUsIHNvIHRoZSBhYm92ZVxuICAvLyBhc3NpZ25tZW50IHNob3VsZCBhbHdheXMgd29yayB1bmxlc3Mgc29tZXRoaW5nIGlzIG1pc2NvbmZpZ3VyZWQuIEp1c3RcbiAgLy8gaW4gY2FzZSBydW50aW1lLmpzIGFjY2lkZW50YWxseSBydW5zIGluIHN0cmljdCBtb2RlLCB3ZSBjYW4gZXNjYXBlXG4gIC8vIHN0cmljdCBtb2RlIHVzaW5nIGEgZ2xvYmFsIEZ1bmN0aW9uIGNhbGwuIFRoaXMgY291bGQgY29uY2VpdmFibHkgZmFpbFxuICAvLyBpZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGZvcmJpZHMgdXNpbmcgRnVuY3Rpb24sIGJ1dCBpbiB0aGF0IGNhc2VcbiAgLy8gdGhlIHByb3BlciBzb2x1dGlvbiBpcyB0byBmaXggdGhlIGFjY2lkZW50YWwgc3RyaWN0IG1vZGUgcHJvYmxlbS4gSWZcbiAgLy8geW91J3ZlIG1pc2NvbmZpZ3VyZWQgeW91ciBidW5kbGVyIHRvIGZvcmNlIHN0cmljdCBtb2RlIGFuZCBhcHBsaWVkIGFcbiAgLy8gQ1NQIHRvIGZvcmJpZCBGdW5jdGlvbiwgYW5kIHlvdSdyZSBub3Qgd2lsbGluZyB0byBmaXggZWl0aGVyIG9mIHRob3NlXG4gIC8vIHByb2JsZW1zLCBwbGVhc2UgZGV0YWlsIHlvdXIgdW5pcXVlIHByZWRpY2FtZW50IGluIGEgR2l0SHViIGlzc3VlLlxuICBGdW5jdGlvbihcInJcIiwgXCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByXCIpKHJ1bnRpbWUpO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181NDVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzk0OV9fOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gbW9kdWxlIGV4cG9ydHMgbXVzdCBiZSByZXR1cm5lZCBmcm9tIHJ1bnRpbWUgc28gZW50cnkgaW5saW5pbmcgaXMgZGlzYWJsZWRcbi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xucmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMzUyKTtcbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IG1vZHVsZVsnZGVmYXVsdCddIDpcblx0XHQoKSA9PiBtb2R1bGU7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSJdLCJzb3VyY2VSb290IjoiIn0=