!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("source-map-support"),require("node-fetch"),require("http-status")):"function"==typeof define&&define.amd?define(["source-map-support","node-fetch","http-status"],e):"object"==typeof exports?exports["wstrade-api"]=e(require("source-map-support"),require("node-fetch"),require("http-status")):t["wstrade-api"]=e(t._,t._,t._)}(global,(function(t,e,r){return(()=>{var n={228:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},858:t=>{t.exports=function(t){if(Array.isArray(t))return t}},646:(t,e,r)=>{var n=r(228);t.exports=function(t){if(Array.isArray(t))return n(t)}},926:t=>{function e(t,e,r,n,o,a,s){try{var i=t[a](s),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}t.exports=function(t){return function(){var r=this,n=arguments;return new Promise((function(o,a){var s=t.apply(r,n);function i(t){e(s,o,a,i,c,"next",t)}function c(t){e(s,o,a,i,c,"throw",t)}i(void 0)}))}}},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},913:t=>{function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}},713:t=>{t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},860:t=>{t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},884:t=>{t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,a=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}},521:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},206:t=>{t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},38:(t,e,r)=>{var n=r(858),o=r(884),a=r(379),s=r(521);t.exports=function(t,e){return n(t)||o(t,e)||a(t,e)||s()}},319:(t,e,r)=>{var n=r(646),o=r(860),a=r(379),s=r(206);t.exports=function(t){return n(t)||o(t)||a(t)||s()}},379:(t,e,r)=>{var n=r(228);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}},757:(t,e,r)=>{t.exports=r(666)},391:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(757),o=r.n(n),a=r(926),s=r.n(a),i=r(726),c=r(811);const u={all:(w=s()(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.Z)(i.Z.ACCOUNT_IDS,{});case 2:return e=t.sent,t.abrupt("return",{tfsa:e.find((function(t){return t.startsWith("tfsa")})),rrsp:e.find((function(t){return t.startsWith("rrsp")})),crypto:e.find((function(t){return t.startsWith("non-registered-crypto")})),personal:e.find((function(t){return t.startsWith("non-registered")&&!t.startsWith("non-registered-crypto")}))});case 4:case"end":return t.stop()}}),t)}))),function(){return w.apply(this,arguments)}),data:(m=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.LIST_ACCOUNT,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return m.apply(this,arguments)}),me:(v=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.ME,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return v.apply(this,arguments)}),person:(y=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.PERSON,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return y.apply(this,arguments)}),history:(d=s()(o().mark((function t(e,r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.HISTORY_ACCOUNT,{interval:e,accountId:r}));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return d.apply(this,arguments)}),activities:(h=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.ACTIVITIES,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)}),getBankAccounts:(l=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.BANK_ACCOUNTS,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)}),deposits:(f=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.DEPOSITS,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)}),positions:(p=s()(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.POSITIONS,{accountId:e}));case 1:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)})};var p,f,l,h,d,y,v,m,w},726:(t,e,r)=>{"use strict";r.d(e,{p:()=>x,Z:()=>g});var n,o,a,s,i,c,u,p,f,l,h,d,y=r(757),v=r.n(y),m=r(926),w=r.n(m),x=20,b={onFailure:(o=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.status,t.t1=e.statusText,t.next=4,e.json();case 4:return t.t2=t.sent,t.abrupt("return",{status:t.t0,reason:t.t1,body:t.t2});case 6:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)}),onSuccess:(n=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.json());case 1:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})};const g={LOGIN:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/login",onSuccess:(d=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0={access:e.headers.get("x-access-token"),refresh:e.headers.get("x-refresh-token"),expires:parseInt(e.headers.get("x-access-token-expires"),10)},t.next=3,e.json();case 3:return t.t1=t.sent,t.abrupt("return",{tokens:t.t0,accountInfo:t.t1});case 5:case"end":return t.stop()}}),t)}))),function(t){return d.apply(this,arguments)}),onFailure:b.onFailure},REFRESH:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/refresh",onSuccess:(h=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{tokens:{access:e.headers.get("x-access-token"),refresh:e.headers.get("x-refresh-token"),expires:parseInt(e.headers.get("x-access-token-expires"),10)}});case 1:case"end":return t.stop()}}),t)}))),function(t){return h.apply(this,arguments)}),onFailure:b.onFailure},ACCOUNT_IDS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",onSuccess:(l=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results.map((function(t){return t.id})));case 4:case"end":return t.stop()}}),t)}))),function(t){return l.apply(this,arguments)}),onFailure:b.onFailure},LIST_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",onSuccess:(f=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return f.apply(this,arguments)}),onFailure:b.onFailure},ME:{method:"GET",url:"https://trade-service.wealthsimple.com/me",onSuccess:b.onSuccess,onFailure:b.onFailure},PERSON:{method:"GET",url:"https://trade-service.wealthsimple.com/person",onSuccess:b.onSuccess,onFailure:b.onFailure},HISTORY_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/history/{0}?account_id={1}",parameters:{0:"interval",1:"accountId"},onSuccess:b.onSuccess,onFailure:b.onFailure},ACTIVITIES:{method:"GET",url:"https://trade-service.wealthsimple.com/account/activities",onSuccess:(p=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)}),onFailure:b.onFailure},DEPOSITS:{method:"GET",url:"https://trade-service.wealthsimple.com/deposits",onSuccess:(u=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)}),onFailure:b.onFailure},BANK_ACCOUNTS:{method:"GET",url:"https://trade-service.wealthsimple.com/bank-accounts",onSuccess:(c=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)}),onFailure:b.onFailure},EXCHANGE_RATES:{method:"GET",url:"https://trade-service.wealthsimple.com/forex",onSuccess:b.onSuccess,onFailure:b.onFailure},SECURITY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities?query={0}",parameters:{0:"ticker"},onSuccess:(i=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:if(0!==(r=t.sent).results.length){t.next=5;break}throw new Error("Security does not exist");case 5:return t.abrupt("return",r.results);case 6:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)}),onFailure:b.onFailure},EXTENSIVE_SECURITY_DETAILS:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}",parameters:{0:"id"},onSuccess:b.onSuccess,onFailure:b.onFailure},POSITIONS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/positions?account_id={0}",parameters:{0:"accountId"},onSuccess:(s=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)}),onFailure:b.onFailure},ORDERS_BY_PAGE:{method:"GET",url:"https://trade-service.wealthsimple.com/orders?offset={0}&account_id={1}",parameters:{0:"offset",1:"accountId"},onSuccess:(a=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",{total:r.total,orders:r.results});case 4:case"end":return t.stop()}}),t)}))),function(t){return a.apply(this,arguments)}),onFailure:b.onFailure},CANCEL_ORDER:{method:"DELETE",url:"https://trade-service.wealthsimple.com/orders/{0}",parameters:{0:"orderId"},onSuccess:b.onSuccess,onFailure:b.onFailure},PLACE_ORDER:{method:"POST",url:"https://trade-service.wealthsimple.com/orders",onSuccess:b.onSuccess,onFailure:b.onFailure}}},464:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(757),o=r.n(n),a=r(926),s=r.n(a),i=r(811),c=r(726);const u={tokens:null,otp:null,on:function(t,e){this[t]=e},login:function(t,e){var r=this;return s()(o().mark((function n(){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=null,"function"!=typeof r.otp){n.next=4;break}return n.next=4,(0,i.Z)(c.Z.LOGIN,{email:t,password:e}).catch((function(){}));case 4:if(n.prev=4,n.t0=i.Z,n.t1=c.Z.LOGIN,n.t2=t,n.t3=e,"function"!=typeof r.otp){n.next=15;break}return n.next=12,r.otp();case 12:n.t4=n.sent,n.next=16;break;case 15:n.t4=r.otp;case 16:return n.t5=n.t4,n.t6={email:n.t2,password:n.t3,otp:n.t5},n.next=20,(0,n.t0)(n.t1,n.t6);case 20:a=n.sent,n.next=28;break;case 23:if(n.prev=23,n.t7=n.catch(4),r.otp){n.next=27;break}throw new Error("OTP not provided!");case 27:throw n.t7;case 28:r.tokens=a.tokens;case 29:case"end":return n.stop()}}),n,null,[[4,23]])})))()},refresh:function(){var t=this;return s()(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.tokens.access=null,e.next=3,(0,i.Z)(c.Z.REFRESH,{refresh_token:t.tokens.refresh});case 3:r=e.sent,t.tokens=r.tokens;case 5:case"end":return e.stop()}}),e)})))()}}},500:(t,e,r)=>{"use strict";r.d(e,{e:()=>o,Z:()=>a});var n=["securities_cache"],o=function(t){return!n.includes(t)};function a(t){if(null!=t&&t.startsWith("no_")){var e=t.substring(t.indexOf("_")+1);o(e)&&n.push(e)}else o(t)||n.splice(n.indexOf(t),1)}},657:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(38),o=r.n(n),a=r(575),s=r.n(a),i=r(913),c=r.n(i),u=["NASDAQ","NYSE","TSX","TSX-V","NEO","CC"];const p=function(){function t(e){var r;if(s()(this,t),this.symbol=null,this.exchange=null,this.id=null,this.crypto=!1,"string"==typeof e){if(""===e)throw new Error("Empty ticker");var n=e.split(":"),a=o()(n,2);this.symbol=a[0],this.exchange=a[1]}else{if(!e.symbol&&!e.id)throw new Error("Invalid ticker '".concat(e,"'"));this.symbol=e.symbol,this.exchange=e.exchange,this.id=e.id}if(this.exchange&&!u.includes(this.exchange))throw new Error("Invalid exchange '".concat(this.exchange,"'!"));("CC"===this.exchange||null!==(r=this.id)&&void 0!==r&&r.startsWith("sec-z"))&&(this.crypto=!0,this.exchange=null),"NEO"===this.exchange&&(this.exchange="AEQUITAS NEO EXCHANGE")}return c()(t,[{key:"format",value:function(){return this.id?this.id:"AEQUITAS NEO EXCHANGE"===this.exchange?"".concat(this.symbol,":NEO"):this.crypto?"".concat(this.symbol,":CC"):"".concat(this.symbol).concat(this.exchange?":".concat(this.exchange):"")}},{key:"weakEquals",value:function(t){return!(!this.id||this.id!==t.id)||!(!this.symbol||this.symbol!==t.symbol||this.crypto!=t.crypto)}}]),t}()},752:(t,e,r)=>{"use strict";r.d(e,{Z:()=>x});var n=r(38),o=r.n(n),a=r(757),s=r.n(a),i=r(926),c=r.n(i),u=r(726),p=r(811),f=r(657),l=r(500),h=r(575),d=r.n(h),y=r(913),v=r.n(y),m=new(function(){function t(e){d()(this,t),this.cache=new Map,this.size=e}return v()(t,[{key:"insert",value:function(t,e){this.cache.size>=this.size&&this.cache.delete(this.cache.keys().next().value),this.cache.set(t,e)}},{key:"get",value:function(t){return this.cache.get(t)}}]),t}())(10);const w=function(t){var e=m.get(new f.Z(t).format());return void 0===e?null:e},x={exchangeRates:(g=c()(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.Z)(u.Z.EXCHANGE_RATES,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return g.apply(this,arguments)}),getSecurity:(b=c()(s().mark((function t(e,r){var n,a,i,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,a=new f.Z(e),r||!(0,l.e)("securities_cache")){t.next=6;break}if(!(n=w(a))){t.next=6;break}return t.abrupt("return",n);case 6:if(!a.id){t.next=12;break}return t.next=9,(0,p.Z)(u.Z.EXTENSIVE_SECURITY_DETAILS,{id:a.id});case 9:n=t.sent,t.next=29;break;case 12:return t.next=14,(0,p.Z)(u.Z.SECURITY,{ticker:a.symbol});case 14:if(n=(n=t.sent).filter((function(t){return t.stock.symbol===a.symbol})),a.exchange&&(n=n.filter((function(t){return t.stock.primary_exchange===a.exchange}))),a.crypto&&(n=n.filter((function(t){return"cryptocurrency"===t.security_type}))),!(n.length>1)){t.next=20;break}throw new Error("Multiple securities matched query.");case 20:if(0!==n.length){t.next=22;break}throw new Error("No securities matched query.");case 22:if(i=n,c=o()(i,1),n=c[0],!r){t.next=29;break}return t.next=28,(0,p.Z)(u.Z.EXTENSIVE_SECURITY_DETAILS,{id:n.id});case 28:n=t.sent;case 29:return(0,l.e)("securities_cache")&&null===w(a)&&(s=a,h=n,m.insert(new f.Z(s).format(),h)),t.abrupt("return",n);case 31:case"end":return t.stop()}var s,h}),t)}))),function(t,e){return b.apply(this,arguments)})};var b,g},568:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(319),o=r.n(n),a=new(r(545).Headers);const s={add:function(t,e){return a.append(t,e)},remove:function(t){return a.delete(t)},clear:function(){return o()(a).forEach((function(t){return a.delete(t[0])}))},values:function(){return o()(a)}}},352:(t,e,r)=>{r(949).install();var n=r(464).Z,o=r(568).Z,a=r(391).Z,s=r(826).Z,i=r(752).Z,c=r(889).Z,u=r(500).Z;t.exports={auth:n,headers:o,accounts:a,orders:s,quotes:c,data:i,config:u}},811:(t,e,r)=>{"use strict";r.d(e,{Z:()=>S});var n=r(757),o=r.n(n),a=r(319),s=r.n(a),i=r(926),c=r.n(i),u=r(713),p=r.n(u),f=r(545),l=r.n(f),h=r(457),d=r.n(h),y=r(568),v=r(464),m=r(500);const w=function(){return parseInt(Date.now()/1e3,10)};function x(){return b.apply(this,arguments)}function b(){return(b=c()(o().mark((function t(){var e,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(w()>=(null===(e=v.Z.tokens)||void 0===e?void 0:e.expires))){t.next=13;break}if(null===(r=v.Z.tokens)||void 0===r||!r.refresh){t.next=12;break}return t.prev=2,t.next=5,v.Z.refresh();case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),new Error("Unable to refresh expired token: ".concat(t.t0));case 10:t.next=13;break;case 12:throw new Error("Access token expired");case 13:case"end":return t.stop()}}),t,null,[[2,7]])})))).apply(this,arguments)}function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function E(t,e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){p()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e),n=t.url;if(t.parameters)for(var o=0;o<Object.keys(t.parameters).length;o++){var a=t.parameters[o];if(null===r[a]||void 0===r[a])throw new Error("URL Path parameter '".concat(a,"' missing!"));n=n.replace("{".concat(o,"}"),r[t.parameters[o]]),delete r[t.parameters[o]]}return["GET","HEAD"].includes(t.method)?{url:n,payload:void 0}:{url:n,payload:JSON.stringify(r)}}function k(t,e){return _.apply(this,arguments)}function _(){return(_=c()(o().mark((function t(e,r){var n,a,i,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=new f.Headers).append("Content-Type","application/json"),null===(n=v.Z.tokens)||void 0===n||!n.access){t.next=7;break}if(!(0,m.e)("implicit_token_refresh")){t.next=6;break}return t.next=6,x();case 6:a.append("Authorization",v.Z.tokens.access);case 7:return y.Z.values().forEach((function(t){return a.append.apply(a,s()(t))})),i=E(e,r),c=i.url,u=i.payload,t.abrupt("return",l()(c,{body:u,method:e.method,headers:a}));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t,e){return O.apply(this,arguments)}function O(){return(O=c()(o().mark((function t(e,r){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e,r);case 2:if(n=t.sent,![d().OK,d().CREATED].includes(n.status)){t.next=5;break}return t.abrupt("return",e.onSuccess(n));case 5:return t.t0=Promise,t.next=8,e.onFailure(n);case 8:return t.t1=t.sent,t.abrupt("return",t.t0.reject.call(t.t0,t.t1));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},826:(t,e,r)=>{"use strict";r.d(e,{Z:()=>R});var n=r(713),o=r.n(n),a=r(319),s=r.n(a),i=r(757),c=r.n(i),u=r(926),p=r.n(u),f=r(726),l=r(811),h=r(657);function d(t,e){return y.apply(this,arguments)}function y(){return(y=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.Z)(f.Z.ORDERS_BY_PAGE,{offset:(r-1)*f.p,accountId:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return m.apply(this,arguments)}function m(){return(m=p()(c().mark((function t(e){var r,n,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e,1);case 2:if(r=t.sent,!((n=Math.ceil(r.total/f.p))>1)){t.next=12;break}for(o=[],a=2;a<=n;a++)o.push(d(e,a).then((function(t){return t.orders})));return t.next=9,Promise.all(o);case 9:t.sent.forEach((function(t){var e;return(e=r.orders).push.apply(e,s()(t))})),r.total=r.orders.length;case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t,e,r){return x.apply(this,arguments)}function x(){return(x=p()(c().mark((function t(e,r,n){var o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:return o=t.sent,a=function(t){if(r){var e=new h.Z({symbol:t.symbol,id:t.security_id});if(!new h.Z(r).weakEquals(e))return!1}return t.status===n},o.orders=o.orders.filter(a),o.total=o.orders.length,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}const b={page:d,all:v,pending:(k=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,r,"submitted"));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return k.apply(this,arguments)}),filled:(E=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,r,"posted"));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return E.apply(this,arguments)}),cancelled:(g=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,r,"cancelled"));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return g.apply(this,arguments)})};var g,E,k,_=r(752),S=r(889),O=function(t){return["TSX","TSX-V"].includes(t)};const Z={cancel:(C=p()(c().mark((function t(e){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,(0,l.Z)(f.Z.CANCEL_ORDER,{orderId:e});case 3:return t.t1=t.sent,t.abrupt("return",{order:t.t0,response:t.t1});case 5:case"end":return t.stop()}}),t)}))),function(t){return C.apply(this,arguments)}),cancelPending:function(t){var e=this;return p()(c().mark((function r(){var n;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.pending(t);case 2:return n=r.sent,r.abrupt("return",Promise.all(n.orders.map(function(){var t=p()(c().mark((function t(r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.cancel(r.order_id));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())));case 4:case"end":return r.stop()}}),r)})))()},marketBuy:(L=p()(c().mark((function t(e,r,n){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Z.getSecurity(r);case 2:return o=t.sent,t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.t2=o.id,t.next=8,S.Z.get(r);case 8:return t.t3=t.sent,t.t4=n,t.t5=e,t.t6={security_id:t.t2,limit_price:t.t3,quantity:t.t4,order_type:"buy_quantity",order_sub_type:"market",time_in_force:"day",account_id:t.t5},t.abrupt("return",(0,t.t0)(t.t1,t.t6));case 13:case"end":return t.stop()}}),t)}))),function(t,e,r){return L.apply(this,arguments)}),limitBuy:(P=p()(c().mark((function t(e,r,n,o){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.next=4,_.Z.getSecurity(r);case 4:return t.t2=t.sent.id,t.t3=n,t.t4=o,t.t5=e,t.t6={security_id:t.t2,limit_price:t.t3,quantity:t.t4,order_type:"buy_quantity",order_sub_type:"limit",time_in_force:"day",account_id:t.t5},t.abrupt("return",(0,t.t0)(t.t1,t.t6));case 10:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return P.apply(this,arguments)}),stopLimitBuy:(A=p()(c().mark((function t(e,r,n,o,a){var s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Z.getSecurity(r);case 2:if(s=t.sent,!O(s.stock.primary_exchange)||n===o){t.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return t.abrupt("return",(0,l.Z)(f.Z.PLACE_ORDER,{security_id:s.id,stop_price:n,limit_price:o,quantity:a,order_type:"buy_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:e}));case 6:case"end":return t.stop()}}),t)}))),function(t,e,r,n,o){return A.apply(this,arguments)}),marketSell:(I=p()(c().mark((function t(e,r,n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.next=4,_.Z.getSecurity(r);case 4:if(t.t2=t.sent.id,new h.Z(r).crypto){t.next=11;break}return t.next=8,S.Z.get(r);case 8:t.t3=t.sent,t.next=12;break;case 11:t.t3=void 0;case 12:return t.t4=t.t3,t.t5=n,t.t6=e,t.t7={security_id:t.t2,market_value:t.t4,quantity:t.t5,order_type:"sell_quantity",order_sub_type:"market",time_in_force:"day",account_id:t.t6},t.abrupt("return",(0,t.t0)(t.t1,t.t7));case 17:case"end":return t.stop()}}),t)}))),function(t,e,r){return I.apply(this,arguments)}),limitSell:(j=p()(c().mark((function t(e,r,n,o){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.next=4,_.Z.getSecurity(r);case 4:return t.t2=t.sent.id,t.t3=n,t.t4=o,t.t5=e,t.t6={security_id:t.t2,limit_price:t.t3,quantity:t.t4,order_type:"sell_quantity",order_sub_type:"limit",time_in_force:"day",account_id:t.t5},t.abrupt("return",(0,t.t0)(t.t1,t.t6));case 10:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return j.apply(this,arguments)}),stopLimitSell:(T=p()(c().mark((function t(e,r,n,o,a){var s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Z.getSecurity(r);case 2:if(s=t.sent,!O(s.stock.primary_exchange)||n===o){t.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return t.abrupt("return",(0,l.Z)(f.Z.PLACE_ORDER,{security_id:s.id,stop_price:n,limit_price:o,quantity:a,order_type:"sell_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:e}));case 6:case"end":return t.stop()}}),t)}))),function(t,e,r,n,o){return T.apply(this,arguments)})};var T,j,I,A,P,L,C;function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const R=N(N({},b),Z)},889:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n,o=r(757),a=r.n(o),s=r(926),i=r.n(s),c=r(752);const u={defaultProvider:{quote:(n=i()(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.Z.getSecurity(e,!0);case 2:return r=t.sent,t.abrupt("return",r.quote.amount);case 4:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})},providers:{},use:function(t,e){if("function"!=typeof e.quote)throw new Error("Invalid quote provider for ".concat(t,"!"));this.providers[t]=e},get:function(t){var e=this;return i()(a().mark((function r(){var n,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=null,!t.exchange){r.next=5;break}n=t.exchange,r.next=10;break;case 5:if(!(Object.keys(e.providers).length>0)){r.next=10;break}return r.next=8,c.Z.getSecurity(t,!1);case 8:o=r.sent,n=o.stock.primary_exchange;case 10:if(!e.providers[n]){r.next=12;break}return r.abrupt("return",e.providers[n].quote(t));case 12:return r.abrupt("return",e.defaultProvider.quote(t));case 13:case"end":return r.stop()}}),r)})))()}}},666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function c(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),s=new Z(n||[]);return a._invoke=function(t,e,r){var n=p;return function(o,a){if(n===l)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw a;return j()}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=_(s,r);if(i){if(i===d)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=l;var c=u(t,e,r);if("normal"===c.type){if(n=r.done?h:f,c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(t,r,s),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",l="executing",h="completed",d={};function y(){}function v(){}function m(){}var w={};w[a]=function(){return this};var x=Object.getPrototypeOf,b=x&&x(x(T([])));b&&b!==r&&n.call(b,a)&&(w=b);var g=m.prototype=y.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function k(t,e){function r(o,a,s,i){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,i)}),(function(t){r("throw",t,s,i)})):e.resolve(f).then((function(t){p.value=t,s(p)}),(function(t){return r("throw",t,s,i)}))}i(c.arg)}var o;this._invoke=function(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}}function _(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,_(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=u(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Z(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:j}}function j(){return{value:e,done:!0}}return v.prototype=g.constructor=m,m.constructor=v,m[i]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,i in t||(t[i]="GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},E(k.prototype),k.prototype[s]=function(){return this},t.AsyncIterator=k,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var s=new k(c(e,r,n,o),a);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},E(g),g[i]="Generator",g[a]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=T,Z.prototype={constructor:Z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return i.type="throw",i.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},457:t=>{"use strict";t.exports=r},545:t=>{"use strict";t.exports=e},949:e=>{"use strict";e.exports=t}},o={};function a(t){if(o[t])return o[t].exports;var e=o[t]={exports:{}};return n[t](e,e.exports,a),e.exports}return a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a(352)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheUxpa2VUb0FycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlUmVzdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlU3ByZWFkLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYWNjb3VudHMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYXBpL2VuZHBvaW50cy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9hdXRoLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3RpY2tlci5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcHRpb25hbC9zZWN1cml0aWVzLWNhY2hlLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvcmUvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvZGF0YS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9oZWFkZXJzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2hlbHBlcnMvdGltZS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcHRpb25hbC9pbXBsaWNpdC10b2tlbi1yZWZyZXNoLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL25ldHdvcmsvaHR0cHMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvb3JkZXJzL2hpc3RvcnkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvb3JkZXJzL3N1Ym1pdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcmRlcnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvcXVvdGVzL2RlZmF1bHQuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvcXVvdGVzL2luZGV4LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwiaHR0cC1zdGF0dXNcIixcImNvbW1vbmpzMlwiOlwiaHR0cC1zdGF0dXNcIixcImFtZFwiOlwiaHR0cC1zdGF0dXNcIixcInJvb3RcIjpcIl9cIn0iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcIm5vZGUtZmV0Y2hcIixcImNvbW1vbmpzMlwiOlwibm9kZS1mZXRjaFwiLFwiYW1kXCI6XCJub2RlLWZldGNoXCIsXCJyb290XCI6XCJfXCJ9Iiwid2VicGFjazovL3dzdHJhZGUtYXBpL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJzb3VyY2UtbWFwLXN1cHBvcnRcIixcImNvbW1vbmpzMlwiOlwic291cmNlLW1hcC1zdXBwb3J0XCIsXCJhbWRcIjpcInNvdXJjZS1tYXAtc3VwcG9ydFwiLFwicm9vdFwiOlwiX1wifSIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsImdsb2JhbCIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzk0OV9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNTQ1X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX180NTdfXyIsImFyciIsImxlbiIsImxlbmd0aCIsImkiLCJhcnIyIiwiQXJyYXkiLCJpc0FycmF5IiwiYXJyYXlMaWtlVG9BcnJheSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsImdlbiIsInJlc29sdmUiLCJyZWplY3QiLCJfbmV4dCIsIl90aHJvdyIsImtleSIsImFyZyIsImluZm8iLCJ2YWx1ZSIsImVycm9yIiwiZG9uZSIsIlByb21pc2UiLCJ0aGVuIiwiZm4iLCJzZWxmIiwidGhpcyIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsImVyciIsInVuZGVmaW5lZCIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwib2JqIiwiaXRlciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiZnJvbSIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJfcyIsIl9pIiwibmV4dCIsInB1c2giLCJhcnJheVdpdGhIb2xlcyIsIml0ZXJhYmxlVG9BcnJheUxpbWl0IiwidW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJub25JdGVyYWJsZVJlc3QiLCJhcnJheVdpdGhvdXRIb2xlcyIsIml0ZXJhYmxlVG9BcnJheSIsIm5vbkl0ZXJhYmxlU3ByZWFkIiwibyIsIm1pbkxlbiIsIm4iLCJ0b1N0cmluZyIsImNhbGwiLCJzbGljZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsInRlc3QiLCJhbGwiLCJoYW5kbGVSZXF1ZXN0IiwiZW5kcG9pbnRzIiwiYWNjb3VudHMiLCJ0ZnNhIiwiZmluZCIsImFjY291bnQiLCJzdGFydHNXaXRoIiwicnJzcCIsImNyeXB0byIsInBlcnNvbmFsIiwiZGF0YSIsIm1lIiwicGVyc29uIiwiaGlzdG9yeSIsImludGVydmFsIiwiYWNjb3VudElkIiwiYWN0aXZpdGllcyIsImdldEJhbmtBY2NvdW50cyIsImRlcG9zaXRzIiwicG9zaXRpb25zIiwiT1JERVJTX1BFUl9QQUdFIiwiZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyIiwib25GYWlsdXJlIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwianNvbiIsInJlYXNvbiIsImJvZHkiLCJvblN1Y2Nlc3MiLCJMT0dJTiIsIm1ldGhvZCIsInVybCIsImFjY2VzcyIsImhlYWRlcnMiLCJnZXQiLCJyZWZyZXNoIiwiZXhwaXJlcyIsInBhcnNlSW50IiwidG9rZW5zIiwiYWNjb3VudEluZm8iLCJSRUZSRVNIIiwiQUNDT1VOVF9JRFMiLCJyZXN1bHRzIiwibWFwIiwiaWQiLCJMSVNUX0FDQ09VTlQiLCJNRSIsIlBFUlNPTiIsIkhJU1RPUllfQUNDT1VOVCIsInBhcmFtZXRlcnMiLCIwIiwiMSIsIkFDVElWSVRJRVMiLCJERVBPU0lUUyIsIkJBTktfQUNDT1VOVFMiLCJFWENIQU5HRV9SQVRFUyIsIlNFQ1VSSVRZIiwiRXJyb3IiLCJFWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUyIsIlBPU0lUSU9OUyIsIk9SREVSU19CWV9QQUdFIiwidG90YWwiLCJvcmRlcnMiLCJDQU5DRUxfT1JERVIiLCJQTEFDRV9PUkRFUiIsIm90cCIsIm9uIiwiZXZlbnQiLCJ0aHVuayIsImxvZ2luIiwiZW1haWwiLCJwYXNzd29yZCIsInJlZnJlc2hfdG9rZW4iLCJkaXNhYmxlZCIsImNvbmZpZ0VuYWJsZWQiLCJmZWF0dXJlIiwiaW5jbHVkZXMiLCJjb25maWciLCJjdXQiLCJzdWJzdHJpbmciLCJpbmRleE9mIiwic3BsaWNlIiwiZXhjaGFuZ2VzIiwic3ltYm9sIiwiZXhjaGFuZ2UiLCJzcGxpdCIsIm90aGVyIiwiY2FjaGUiLCJzaXplIiwiTWFwIiwia2V5cyIsInNldCIsInNlY3VyaXR5IiwicmVzdWx0IiwiVGlja2VyIiwiZm9ybWF0IiwiZXhjaGFuZ2VSYXRlcyIsImdldFNlY3VyaXR5IiwidXNlclRpY2tlciIsImV4dGVuc2l2ZSIsInRpY2tlciIsImZpbHRlciIsInN0b2NrIiwicHJpbWFyeV9leGNoYW5nZSIsInNlY3VyaXR5X3R5cGUiLCJpbnNlcnQiLCJjdXN0b21IZWFkZXJzIiwiSGVhZGVycyIsImFkZCIsImFwcGVuZCIsInJlbW92ZSIsImNsZWFyIiwiZm9yRWFjaCIsImhlYWRlciIsInZhbHVlcyIsImF1dGgiLCJxdW90ZXMiLCJEYXRlIiwibm93IiwiaW1wbGljaXRUb2tlblJlZnJlc2giLCJlcG9jaFNlY29uZHMiLCJmaW5hbGl6ZVJlcXVlc3QiLCJlbmRwb2ludCIsInBhcmFtcyIsImluZGV4IiwicGFyYW1ldGVyTmFtZSIsInJlcGxhY2UiLCJwYXlsb2FkIiwiSlNPTiIsInN0cmluZ2lmeSIsInRhbGsiLCJmZXRjaCIsInBhZ2UiLCJwYWdlTnVtIiwib2Zmc2V0IiwicGFnZXMiLCJNYXRoIiwiY2VpbCIsInRhc2tzIiwibGlzdCIsImZpbHRlcmVkT3JkZXJzIiwib3JkZXJGaWx0ZXIiLCJvcmRlciIsInNlY3VyaXR5X2lkIiwid2Vha0VxdWFscyIsInBlbmRpbmciLCJmaWxsZWQiLCJjYW5jZWxsZWQiLCJpc0NhbmFkaWFuU2VjdXJpdHkiLCJjYW5jZWwiLCJvcmRlcklkIiwiY2FuY2VsUGVuZGluZyIsIm9yZGVyX2lkIiwibWFya2V0QnV5IiwicXVhbnRpdHkiLCJkZXRhaWxzIiwibGltaXRfcHJpY2UiLCJvcmRlcl90eXBlIiwib3JkZXJfc3ViX3R5cGUiLCJ0aW1lX2luX2ZvcmNlIiwiYWNjb3VudF9pZCIsImxpbWl0QnV5IiwibGltaXQiLCJzdG9wTGltaXRCdXkiLCJzdG9wIiwic3RvcF9wcmljZSIsIm1hcmtldFNlbGwiLCJtYXJrZXRfdmFsdWUiLCJsaW1pdFNlbGwiLCJzdG9wTGltaXRTZWxsIiwic3VibWl0IiwiZGVmYXVsdFByb3ZpZGVyIiwicXVvdGUiLCJhbW91bnQiLCJwcm92aWRlcnMiLCJ1c2UiLCJwcm92aWRlciIsInJ1bnRpbWUiLCJPcCIsImhhc093biIsImhhc093blByb3BlcnR5IiwiJFN5bWJvbCIsIml0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvclN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJ0b1N0cmluZ1RhZ1N5bWJvbCIsInRvU3RyaW5nVGFnIiwid3JhcCIsImlubmVyRm4iLCJvdXRlckZuIiwidHJ5TG9jc0xpc3QiLCJwcm90b0dlbmVyYXRvciIsIkdlbmVyYXRvciIsImdlbmVyYXRvciIsImNyZWF0ZSIsImNvbnRleHQiLCJDb250ZXh0IiwiX2ludm9rZSIsInN0YXRlIiwiR2VuU3RhdGVTdXNwZW5kZWRTdGFydCIsIkdlblN0YXRlRXhlY3V0aW5nIiwiR2VuU3RhdGVDb21wbGV0ZWQiLCJkb25lUmVzdWx0IiwiZGVsZWdhdGUiLCJkZWxlZ2F0ZVJlc3VsdCIsIm1heWJlSW52b2tlRGVsZWdhdGUiLCJDb250aW51ZVNlbnRpbmVsIiwic2VudCIsIl9zZW50IiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJhYnJ1cHQiLCJyZWNvcmQiLCJ0cnlDYXRjaCIsInR5cGUiLCJHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkIiwibWFrZUludm9rZU1ldGhvZCIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJJdGVyYXRvclByb3RvdHlwZSIsImdldFByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJOYXRpdmVJdGVyYXRvclByb3RvdHlwZSIsIkdwIiwiZGVmaW5lSXRlcmF0b3JNZXRob2RzIiwiQXN5bmNJdGVyYXRvciIsIlByb21pc2VJbXBsIiwiaW52b2tlIiwiX19hd2FpdCIsInVud3JhcHBlZCIsInByZXZpb3VzUHJvbWlzZSIsImNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnIiwicmVzdWx0TmFtZSIsIm5leHRMb2MiLCJwdXNoVHJ5RW50cnkiLCJsb2NzIiwiZW50cnkiLCJ0cnlMb2MiLCJjYXRjaExvYyIsImZpbmFsbHlMb2MiLCJhZnRlckxvYyIsInRyeUVudHJpZXMiLCJyZXNldFRyeUVudHJ5IiwiY29tcGxldGlvbiIsInJlc2V0IiwiaXRlcmFibGUiLCJpdGVyYXRvck1ldGhvZCIsImlzTmFOIiwiZGlzcGxheU5hbWUiLCJpc0dlbmVyYXRvckZ1bmN0aW9uIiwiZ2VuRnVuIiwiY3RvciIsIm1hcmsiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImF3cmFwIiwiYXN5bmMiLCJvYmplY3QiLCJyZXZlcnNlIiwicG9wIiwic2tpcFRlbXBSZXNldCIsInByZXYiLCJjaGFyQXQiLCJyb290UmVjb3JkIiwicnZhbCIsImV4Y2VwdGlvbiIsImhhbmRsZSIsImxvYyIsImNhdWdodCIsImhhc0NhdGNoIiwiaGFzRmluYWxseSIsImZpbmFsbHlFbnRyeSIsImNvbXBsZXRlIiwiZmluaXNoIiwidGhyb3duIiwiZGVsZWdhdGVZaWVsZCIsInJlZ2VuZXJhdG9yUnVudGltZSIsImFjY2lkZW50YWxTdHJpY3RNb2RlIiwiRnVuY3Rpb24iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJh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T0QsUUFBVVEsRyxxQkNBakJQLEVBQU9ELFFBQVVPLEcscUJDQWpCTixFQUFPRCxRQUFVTSxJQ0NicVcsRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLEdBQUdGLEVBQXlCRSxHQUMzQixPQUFPRixFQUF5QkUsR0FBVTdXLFFBRzNDLElBQUlDLEVBQVMwVyxFQUF5QkUsR0FBWSxDQUdqRDdXLFFBQVMsSUFPVixPQUhBOFcsRUFBb0JELEdBQVU1VyxFQUFRQSxFQUFPRCxRQUFTNFcsR0FHL0MzVyxFQUFPRCxRQ2pCZixPQ0ZBNFcsRUFBb0JoUyxFQUFLM0UsSUFDeEIsSUFBSThXLEVBQVM5VyxHQUFVQSxFQUFPK1csV0FDN0IsSUFBTS9XLEVBQWdCLFFBQ3RCLElBQU1BLEVBRVAsT0FEQTJXLEVBQW9CSyxFQUFFRixFQUFRLENBQUVHLEVBQUdILElBQzVCQSxHQ0xSSCxFQUFvQkssRUFBSSxDQUFDalgsRUFBU21YLEtBQ2pDLElBQUksSUFBSTVWLEtBQU80VixFQUNYUCxFQUFvQmxTLEVBQUV5UyxFQUFZNVYsS0FBU3FWLEVBQW9CbFMsRUFBRTFFLEVBQVN1QixJQUM1RTBCLE9BQU9DLGVBQWVsRCxFQUFTdUIsRUFBSyxDQUFFdUIsWUFBWSxFQUFNeUUsSUFBSzRQLEVBQVc1VixNQ0ozRXFWLEVBQW9CbFMsRUFBSSxDQUFDcEIsRUFBSzhULElBQVNuVSxPQUFPSSxVQUFVb04sZUFBZTNMLEtBQUt4QixFQUFLOFQsR0hHMUVSLEVBQW9CLE0iLCJmaWxlIjoiZGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcInNvdXJjZS1tYXAtc3VwcG9ydFwiKSwgcmVxdWlyZShcIm5vZGUtZmV0Y2hcIiksIHJlcXVpcmUoXCJodHRwLXN0YXR1c1wiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJzb3VyY2UtbWFwLXN1cHBvcnRcIiwgXCJub2RlLWZldGNoXCIsIFwiaHR0cC1zdGF0dXNcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wid3N0cmFkZS1hcGlcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJzb3VyY2UtbWFwLXN1cHBvcnRcIiksIHJlcXVpcmUoXCJub2RlLWZldGNoXCIpLCByZXF1aXJlKFwiaHR0cC1zdGF0dXNcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIndzdHJhZGUtYXBpXCJdID0gZmFjdG9yeShyb290W1wiX1wiXSwgcm9vdFtcIl9cIl0sIHJvb3RbXCJfXCJdKTtcbn0pKGdsb2JhbCwgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOTQ5X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzU0NV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX180NTdfXykge1xucmV0dXJuICIsImZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykge1xuICAgIGFycjJbaV0gPSBhcnJbaV07XG4gIH1cblxuICByZXR1cm4gYXJyMjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlMaWtlVG9BcnJheTsiLCJmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FycmF5V2l0aEhvbGVzOyIsInZhciBhcnJheUxpa2VUb0FycmF5ID0gcmVxdWlyZShcIi4vYXJyYXlMaWtlVG9BcnJheVwiKTtcblxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hcnJheVdpdGhvdXRIb2xlczsiLCJmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXN5bmNUb0dlbmVyYXRvcjsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jbGFzc0NhbGxDaGVjazsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NyZWF0ZUNsYXNzOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9kZWZpbmVQcm9wZXJ0eTsiLCJmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2l0ZXJhYmxlVG9BcnJheTsiLCJmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuO1xuICB2YXIgX2FyciA9IFtdO1xuICB2YXIgX24gPSB0cnVlO1xuICB2YXIgX2QgPSBmYWxzZTtcbiAgdmFyIF9lID0gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2QgPSB0cnVlO1xuICAgIF9lID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIF9hcnI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2l0ZXJhYmxlVG9BcnJheUxpbWl0OyIsImZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX25vbkl0ZXJhYmxlUmVzdDsiLCJmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9ub25JdGVyYWJsZVNwcmVhZDsiLCJ2YXIgYXJyYXlXaXRoSG9sZXMgPSByZXF1aXJlKFwiLi9hcnJheVdpdGhIb2xlc1wiKTtcblxudmFyIGl0ZXJhYmxlVG9BcnJheUxpbWl0ID0gcmVxdWlyZShcIi4vaXRlcmFibGVUb0FycmF5TGltaXRcIik7XG5cbnZhciB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSA9IHJlcXVpcmUoXCIuL3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5XCIpO1xuXG52YXIgbm9uSXRlcmFibGVSZXN0ID0gcmVxdWlyZShcIi4vbm9uSXRlcmFibGVSZXN0XCIpO1xuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHtcbiAgcmV0dXJuIGFycmF5V2l0aEhvbGVzKGFycikgfHwgaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IG5vbkl0ZXJhYmxlUmVzdCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9zbGljZWRUb0FycmF5OyIsInZhciBhcnJheVdpdGhvdXRIb2xlcyA9IHJlcXVpcmUoXCIuL2FycmF5V2l0aG91dEhvbGVzXCIpO1xuXG52YXIgaXRlcmFibGVUb0FycmF5ID0gcmVxdWlyZShcIi4vaXRlcmFibGVUb0FycmF5XCIpO1xuXG52YXIgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgPSByZXF1aXJlKFwiLi91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheVwiKTtcblxudmFyIG5vbkl0ZXJhYmxlU3ByZWFkID0gcmVxdWlyZShcIi4vbm9uSXRlcmFibGVTcHJlYWRcIik7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHtcbiAgcmV0dXJuIGFycmF5V2l0aG91dEhvbGVzKGFycikgfHwgaXRlcmFibGVUb0FycmF5KGFycikgfHwgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBub25JdGVyYWJsZVNwcmVhZCgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF90b0NvbnN1bWFibGVBcnJheTsiLCJ2YXIgYXJyYXlMaWtlVG9BcnJheSA9IHJlcXVpcmUoXCIuL2FycmF5TGlrZVRvQXJyYXlcIik7XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbiAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpO1xuICBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lO1xuICBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTtcbiAgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5OyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlZ2VuZXJhdG9yLXJ1bnRpbWVcIik7XG4iLCJpbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4vYXBpL2VuZHBvaW50cyc7XG5pbXBvcnQgaGFuZGxlUmVxdWVzdCBmcm9tICcuL25ldHdvcmsvaHR0cHMnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbGwgYWNjb3VudCBpZHMgb3BlbiB1bmRlciB0aGlzIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgYWxsOiBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgYWNjb3VudHMgPSBhd2FpdCBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5BQ0NPVU5UX0lEUywge30pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRmc2E6IGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnQuc3RhcnRzV2l0aCgndGZzYScpKSxcbiAgICAgIHJyc3A6IGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnQuc3RhcnRzV2l0aCgncnJzcCcpKSxcbiAgICAgIGNyeXB0bzogYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5zdGFydHNXaXRoKCdub24tcmVnaXN0ZXJlZC1jcnlwdG8nKSksXG4gICAgICBwZXJzb25hbDogYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5zdGFydHNXaXRoKCdub24tcmVnaXN0ZXJlZCcpICYmICFhY2NvdW50LnN0YXJ0c1dpdGgoJ25vbi1yZWdpc3RlcmVkLWNyeXB0bycpKSxcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBkZXRhaWxzIGFib3V0IHlvdXIgb3BlbiBhY2NvdW50cywgbGlrZSBhY2NvdW50IHR5cGUsIGJ1eWluZyBwb3dlcixcbiAgICogY3VycmVudCBiYWxhbmNlLCBhbmQgbW9yZS5cbiAgICovXG4gIGRhdGE6IGFzeW5jICgpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkxJU1RfQUNDT1VOVCwge30pLFxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgc29tZSBzdXJmYWNlIGluZm9ybWF0aW9uIGFib3V0IHlvdSBsaWtlIHlvdXIgbmFtZSBhbmQgZW1haWwsIGFjY291bnRcbiAgICogc2lnbmF0dXJlcywgYW5kIG90aGVyIG1ldGFkYXRhLlxuICAgKi9cbiAgbWU6IGFzeW5jICgpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLk1FLCB7fSksXG5cbiAgLyoqXG4gICAqIERldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IHlvdSB0aGF0IHlvdSBwcm92aWRlZCBvbiBzaWdudXAsIGxpa2UgcmVzaWRlbnRpYWwgYW5kXG4gICAqIG1haWxpbmcgYWRkcmVzc2VzLCBlbXBsb3ltZW50LCBwaG9uZSBudW1iZXJzLCBhbmQgc28gb24uXG4gICAqL1xuICBwZXJzb246IGFzeW5jICgpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBFUlNPTiwge30pLFxuXG4gIC8qKlxuICAgKiBRdWVyeSB0aGUgaGlzdG9yeSBvZiB0aGUgYWNjb3VudCB3aXRoaW4gYSBjZXJ0YWluIHRpbWUgaW50ZXJ2YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gaW50ZXJ2YWwgVGhlIHRpbWUgaW50ZXJ2YWwgZm9yIHRoZSBoaXN0b3J5IHF1ZXJ5XG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIHF1ZXJ5XG4gICAqL1xuICBoaXN0b3J5OiBhc3luYyAoaW50ZXJ2YWwsIGFjY291bnRJZCkgPT4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuSElTVE9SWV9BQ0NPVU5ULCB7XG4gICAgaW50ZXJ2YWwsIGFjY291bnRJZCxcbiAgfSksXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgbW9zdCByZWNlbnQgMjAgYWN0aXZpdGllcyBvbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIEFjY291bnQuXG4gICAqL1xuICBhY3Rpdml0aWVzOiBhc3luYyAoKSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5BQ1RJVklUSUVTLCB7fSksXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbGwgYmFuayBhY2NvdW50cyBsaW5rZWQgdG8gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgZ2V0QmFua0FjY291bnRzOiBhc3luYyAoKSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5CQU5LX0FDQ09VTlRTLCB7fSksXG5cbiAgLyoqXG4gICAqIEdyYWIgYWxsIGRlcG9zaXQgcmVjb3JkcyBvbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnQuXG4gICAqL1xuICBkZXBvc2l0czogYXN5bmMgKCkgPT4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuREVQT1NJVFMsIHt9KSxcblxuICAvKipcbiAgICogTGlzdHMgYWxsIHBvc2l0aW9ucyBpbiB0aGUgc3BlY2lmaWVkIHRyYWRpbmcgYWNjb3VudCB1bmRlciB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIEFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgcG9zaXRpb25zOiBhc3luYyAoYWNjb3VudElkKSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QT1NJVElPTlMsIHsgYWNjb3VudElkIH0pLFxufTtcbiIsIi8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiBvcmRlcnMgcmV0cmlldmVkIGJ5IHRoZSAvb3JkZXJzIEFQSS5cbmV4cG9ydCBjb25zdCBPUkRFUlNfUEVSX1BBR0UgPSAyMDtcblxuY29uc3QgZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyID0ge1xuXG4gIC8vIERlZmF1bHQgZmFpbHVyZSBtZXRob2QgZm9yIGFsbCBlbmRwb2ludCBjYWxsc1xuICBvbkZhaWx1cmU6IGFzeW5jIChyZXNwb25zZSkgPT4gKHtcbiAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICByZWFzb246IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgYm9keTogYXdhaXQgcmVzcG9uc2UuanNvbigpLFxuICB9KSxcblxuICAvLyBEZWZhdWx0IHN1Y2Nlc3MgbWV0aG9kIGZvciBhbGwgZW5kcG9pbnQgY2FsbHNcbiAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSxcbn07XG5cbmNvbnN0IFdlYWx0aHNpbXBsZVRyYWRlRW5kcG9pbnRzID0ge1xuXG4gIC8qXG4gICAqIFRoZSBMT0dJTiBlbmRwb2ludCBpbnRpYWxpemVzIGEgbmV3IHNlc3Npb24gZm9yIHRoZSBnaXZlbiBlbWFpbCBhbmRcbiAgICogcGFzc3dvcmQgc2V0LiBJZiB0aGUgbG9naW4gaXMgc3VjY2Vzc2Z1bCwgYWNjZXNzIGFuZCByZWZyZXNoIHRva2Vuc1xuICAgKiBhcmUgcmV0dXJuZWQgaW4gdGhlIGhlYWRlcnMuIFRoZSBhY2Nlc3MgdG9rZW4gaXMgdGhlIGtleSBmb3IgaW52b2tpbmdcbiAgICogYWxsIG90aGVyIGVuZCBwb2ludHMuXG4gICAqL1xuICBMT0dJTjoge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2F1dGgvbG9naW4nLFxuICAgIG9uU3VjY2VzczogYXN5bmMgKHJlc3BvbnNlKSA9PiAoe1xuICAgICAgdG9rZW5zOiB7XG4gICAgICAgIGFjY2VzczogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3gtYWNjZXNzLXRva2VuJyksXG4gICAgICAgIHJlZnJlc2g6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LXJlZnJlc2gtdG9rZW4nKSxcbiAgICAgICAgZXhwaXJlczogcGFyc2VJbnQocmVzcG9uc2UuaGVhZGVycy5nZXQoJ3gtYWNjZXNzLXRva2VuLWV4cGlyZXMnKSwgMTApLFxuICAgICAgfSxcblxuICAgICAgYWNjb3VudEluZm86IGF3YWl0IHJlc3BvbnNlLmpzb24oKSxcbiAgICB9KSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogR2VuZXJhdGVzIGEgbmV3IHNldCBvZiBhY2Nlc3MgYW5kIHJlZnJlc2ggdG9rZW5zLlxuICAgKi9cbiAgUkVGUkVTSDoge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2F1dGgvcmVmcmVzaCcsXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+ICh7XG4gICAgICB0b2tlbnM6IHtcbiAgICAgICAgYWNjZXNzOiByZXNwb25zZS5oZWFkZXJzLmdldCgneC1hY2Nlc3MtdG9rZW4nKSxcbiAgICAgICAgcmVmcmVzaDogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3gtcmVmcmVzaC10b2tlbicpLFxuICAgICAgICBleHBpcmVzOiBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzLmdldCgneC1hY2Nlc3MtdG9rZW4tZXhwaXJlcycpLCAxMCksXG4gICAgICB9LFxuICAgIH0pLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHcmFicyBhbGwgYWNjb3VudCBpZHMgaW4gdGhpcyBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIEFDQ09VTlRfSURTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2xpc3QnLFxuICAgIG9uU3VjY2VzczogYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBDb2xsZWN0IGFsbCBhY2NvdW50IGlkcyByZWdpc3RlcmVkIHVuZGVyIHRoaXMgV2VhbHRoc2ltcGxlIFRyYWRlIEFjY291bnRcbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKChhY2NvdW50KSA9PiBhY2NvdW50LmlkKTtcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBUaGUgTElTVF9BQ0NPVU5UIGVuZHBvaW50IHJldHJpZXZlcyBnZW5lcmFsIG1ldGFkYXRhIG9mIHRoZVxuICAgKiBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudCwgaW5jbHVkaW5nIGJhbGFuY2VzLCBhY2NvdW50IGlkLCBhbmRcbiAgICogbW9yZS5cbiAgICovXG4gIExJU1RfQUNDT1VOVDoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYWNjb3VudC9saXN0JyxcbiAgICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHM7XG4gICAgfSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogVGhlIE1FIGVuZHBvaW50IHJldHJpZXZlcyBzb21lIHN1cmZhY2UgaW5mb3JtYXRpb24gYWJvdXQgeW91IGxpa2VcbiAgICogeW91ciBuYW1lIGFuZCBlbWFpbC5cbiAgICovXG4gIE1FOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9tZScsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBUaGUgUEVSU09OIGVuZHBvaW50IHJldHJpZXZlcyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCB5b3UgdGhhdFxuICAgKiB5b3UgcHJvdmlkZWQgb24gc2lnbnVwLCBsaWtlIHJlc2lkZW50aWFsIGFuZCBtYWlsaW5nIGFkZHJlc3NlcyxcbiAgICogZW1wbG95bWVudCwgcGhvbmUgbnVtYmVycywgYW5kIHNvIG9uLlxuICAgKi9cbiAgUEVSU09OOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9wZXJzb24nLFxuICAgIG9uU3VjY2VzczogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uU3VjY2VzcyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogVGhlIEhJU1RPUllfQUNDT1VOVCBlbmRwb2ludCBwcm92aWRlcyBoaXN0b3JpY2FsIHNuYXBzaG90cyBvZiB0aGVcbiAgICogV2VhbHRoc2ltcGxlIGFjY291bnQgZm9yIGEgc3BlY2lmaWVkIHRpbWVmcmFtZS5cbiAgICovXG4gIEhJU1RPUllfQUNDT1VOVDoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYWNjb3VudC9oaXN0b3J5L3swfT9hY2NvdW50X2lkPXsxfScsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2ludGVydmFsJyxcbiAgICAgIDE6ICdhY2NvdW50SWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQcm92aWRlcyB0aGUgbW9zdCByZWNlbnQgMjAgYWN0aXZpdGllcyAoZGVwb3NpdHMsIGRpdmlkZW5kcywgb3JkZXJzLCBldGMpIG9uIHRoZSBXZWFsdGhzaW1wbGVcbiAgICogVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIEFDVElWSVRJRVM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvYWN0aXZpdGllcycsXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gZGF0YS5yZXN1bHRzO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEFsbCBkZXBvc2l0cyB1bmRlciB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICovXG4gIERFUE9TSVRTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9kZXBvc2l0cycsXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gZGF0YS5yZXN1bHRzO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEFsbCBsaW5rZWQgYmFuayBhY2NvdW50cyB1bmRlciB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICovXG4gIEJBTktfQUNDT1VOVFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2JhbmstYWNjb3VudHMnLFxuICAgIG9uU3VjY2VzczogYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cztcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBDdXJyZW50IFdlYWx0aHNpbXBsZSBUcmFkZSBVU0QvQ0FEIGV4Y2hhbmdlIHJhdGVzXG4gICAqL1xuICBFWENIQU5HRV9SQVRFUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vZm9yZXgnLFxuICAgIG9uU3VjY2VzczogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uU3VjY2VzcyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogR3JhYnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHNlY3VyaXR5IHJlc2VtYmxlZCBieSB0aGUgdGlja2VyLlxuICAgKi9cbiAgU0VDVVJJVFk6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3NlY3VyaXRpZXM/cXVlcnk9ezB9JyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAndGlja2VyJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBpZiAoZGF0YS5yZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlY3VyaXR5IGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHM7XG4gICAgfSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogRmV0Y2hlcyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBhIHNlY3VyaXR5IHVzaW5nIGl0cyB1bmlxdWVcbiAgICogc2VjdXJpdHkgaWRlbnRpZmllci4gTWFya2V0IHF1b3RlLCBiaWQgYW5kIGFzayBzaXplLCBhbmQgb3RoZXIgaW5mb3JtYXRpb25cbiAgICogYXJlIHJldHVybmVkLlxuICAgKi9cbiAgRVhURU5TSVZFX1NFQ1VSSVRZX0RFVEFJTFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3NlY3VyaXRpZXMvezB9JyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnaWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBMaXN0cyBhbGwgcG9zaXRpb25zIHVuZGVyIGEgdHJhZGluZyBhY2NvdW50LlxuICAgKi9cbiAgUE9TSVRJT05TOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L3Bvc2l0aW9ucz9hY2NvdW50X2lkPXswfScsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2FjY291bnRJZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHM7XG4gICAgfSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogR3JhYiBhIHBhZ2Ugb2Ygb3JkZXJzICgyMCBvcmRlcnMpLlxuICAgKi9cbiAgT1JERVJTX0JZX1BBR0U6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycz9vZmZzZXQ9ezB9JmFjY291bnRfaWQ9ezF9JyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnb2Zmc2V0JyxcbiAgICAgIDE6ICdhY2NvdW50SWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbDogZGF0YS50b3RhbCxcbiAgICAgICAgb3JkZXJzOiBkYXRhLnJlc3VsdHMsXG4gICAgICB9O1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIENhbmNlbHMgYSBzcGVjaWZpYyBvcmRlciBieSBpdHMgaWQuXG4gICAqL1xuICBDQU5DRUxfT1JERVI6IHtcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycy97MH0nLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdvcmRlcklkJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uU3VjY2VzcyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogUGxhY2VzIGFuIG9yZGVyIGZvciBhIHNlY3VyaXR5LlxuICAgKi9cbiAgUExBQ0VfT1JERVI6IHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9vcmRlcnMnLFxuICAgIG9uU3VjY2VzczogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uU3VjY2VzcyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBXZWFsdGhzaW1wbGVUcmFkZUVuZHBvaW50cztcbiIsImltcG9ydCBoYW5kbGVSZXF1ZXN0IGZyb20gJy4vbmV0d29yay9odHRwcyc7XG5pbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4vYXBpL2VuZHBvaW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvLyBBdXRoZW50aWNhdGlvbiB0b2tlbnMgdG8gYWNjZXNzIHByaXZpbGVnZWQgZW5kcG9pbnRzXG4gIHRva2VuczogbnVsbCxcblxuICAvLyBUaHVuayBmb3IgcmV0cmlldmluZyB0aGUgb25lLXRpbWUgcGFzc3dvcmQuXG4gIG90cDogbnVsbCxcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBmdW5jdGlvbiB0byBydW4gb24gYSBjZXJ0YWluIGV2ZW50XG4gICAqIEBwYXJhbSB7Kn0gZXZlbnQgVGhlIHRyaWdnZXIgZm9yIHRoZSBmdW5jdGlvblxuICAgKiBAcGFyYW0geyp9IHRodW5rIFRoZSBmdW5jdGlvbiBibG9jayB0byBleGVjdXRlIG9uIGV2ZW50IHRyaWdnZXJcbiAgICovXG4gIG9uKGV2ZW50LCB0aHVuaykge1xuICAgIHRoaXNbZXZlbnRdID0gdGh1bms7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEF0dGVtcHRzIHRvIGVzdGFibGlzaCBhIHNlc3Npb24gZm9yIHRoZSBwcm92aWRlZCBlbWFpbCBhbmQgcGFzc3dvcmQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZW1haWwgZW1haWxlZCByZWdpc3RlcmVkIGJ5IHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHBhc3N3b3JkIFRoZSBwYXNzd29yZCBvZiB0aGUgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgbG9naW4oZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgbGV0IHJlc3BvbnNlID0gbnVsbDtcblxuICAgIC8qXG4gICAgICogSWYgd2UgYXJlIGdpdmVuIGEgZnVuY3Rpb24gZm9yIG90cCwgdGhlbiB3ZSBtdXN0IGZhaWwgYSBsb2cgaW4gdG9cbiAgICAgKiB0cmlnZ2VyIGFuIE9UUCBldmVudCB3aXRoIFdlYWx0aHNpbXBsZSBUcmFkZS4gVGhpcyB3aWxsIGFsbG93IHRoZSB1c2VyXG4gICAgICogb3RwIHRodW5rIHRvIHJldHJpZXZlIHRoZSBjb2RlLlxuICAgICAqXG4gICAgICogSWYgYSBsaXRlcmFsIHZhbHVlIGlzIHByb3ZpZGVkIGZvciBvdHAsIGl0IG1lYW5zIHRoZSB1c2VyIGhhcyBtYW51YWxseVxuICAgICAqIHByb3ZpZGVkIHVzIHdpdGggdGhlIG90cCBjb2RlLiBXZSBjYW4gc2tpcCB0aGlzIGxvZ2luIGF0dGVtcHQuXG4gICAgICovXG4gICAgaWYgKHR5cGVvZiAodGhpcy5vdHApID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhd2FpdCBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5MT0dJTiwge1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICB9KS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGxvZyBpbiBmb3IgcmVhbCB0aGlzIHRpbWUuXG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTE9HSU4sIHtcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHBhc3N3b3JkLFxuICAgICAgICBvdHA6IHR5cGVvZiAodGhpcy5vdHApID09PSAnZnVuY3Rpb24nID8gYXdhaXQgdGhpcy5vdHAoKSA6IHRoaXMub3RwLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIHdlIG1pZ2h0IGhhdmUgZmFpbGVkIGJlY2F1c2UgT1RQIHdhcyBub3QgcHJvdmlkZWRcbiAgICAgIGlmICghdGhpcy5vdHApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPVFAgbm90IHByb3ZpZGVkIScpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWVtcyB0byBiZSBpbmNvcnJlY3QgY3JlZGVudGlhbHMgb3IgT1RQLlxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgLy8gQ2FwdHVyZSB0aGUgdG9rZW5zIGZvciBsYXRlciB1c2FnZS5cbiAgICB0aGlzLnRva2VucyA9IHJlc3BvbnNlLnRva2VucztcbiAgfSxcblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgbmV3IHNldCBvZiBhY2Nlc3MgYW5kIHJlZnJlc2ggdG9rZW5zLlxuICAgKi9cbiAgYXN5bmMgcmVmcmVzaCgpIHtcbiAgICAvLyBEaXNwb3NlIG9mIHRoZSBleGlzdGluZyB0b2tlblxuICAgIHRoaXMudG9rZW5zLmFjY2VzcyA9IG51bGw7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlJFRlJFU0gsIHtcbiAgICAgIHJlZnJlc2hfdG9rZW46IHRoaXMudG9rZW5zLnJlZnJlc2gsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRva2VucyA9IHJlc3BvbnNlLnRva2VucztcbiAgfSxcbn07XG4iLCIvLyBIb2xkcyBvcHRpb25hbCBmZWF0dXJlcyB0aGF0IGhhdmUgYmVlbiBkaXNhYmxlZC5cbmNvbnN0IGRpc2FibGVkID0gWydzZWN1cml0aWVzX2NhY2hlJ107XG5cbmV4cG9ydCBjb25zdCBjb25maWdFbmFibGVkID0gKGZlYXR1cmUpID0+ICFkaXNhYmxlZC5pbmNsdWRlcyhmZWF0dXJlKTtcblxuLyoqXG4gKiBFbmFibGUgb3IgZGlzYWJsZSBhIG9wdGlvbmFsIGZlYXR1cmUgd2l0aGluIHdzdHJhZGUtYXBpLlxuICpcbiAqIEV4YW1wbGVzOlxuICogLS0tXG4gKiBjb25maWcoJ3BhbmNha2VzJylcbiAqIEVuYWJsZXMgdGhlIGZpY3RpdGlvdXMgcGFuY2FrZXMgZmVhdHVyZS5cbiAqXG4gKiBjb25maWcoJ25vX3BhbmNha2VzJylcbiAqIERpc2FibGVzIHRoZSBmaWN0aXRpb3VzIHBhbmNha2VzIGZlYXR1cmUuXG4gKlxuICogQHBhcmFtIHsqfSBmZWF0dXJlIFRoZSBzdHJpbmcgaWRlbnRpZmllciBmb3IgdGhlIGZlYXR1cmUsIHN0YXJ0aW5nIHdpdGggXCJub19cIiBpZlxuICogICAgICAgICAgICAgICAgICAgIHlvdSB3aXNoIHRvIGRpc2FibGUgaXQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbmZpZyhmZWF0dXJlKSB7XG4gIGlmIChmZWF0dXJlPy5zdGFydHNXaXRoKCdub18nKSkge1xuICAgIGNvbnN0IGN1dCA9IGZlYXR1cmUuc3Vic3RyaW5nKGZlYXR1cmUuaW5kZXhPZignXycpICsgMSk7XG5cbiAgICAvLyBXZSB3aWxsIG9ubHkgYXBwZW5kIHRoaXMgaWYgaXQgaXNuJ3QgYWxyZWFkeSBpbiB0aGVyZS5cbiAgICBpZiAoY29uZmlnRW5hYmxlZChjdXQpKSB7XG4gICAgICBkaXNhYmxlZC5wdXNoKGN1dCk7XG4gICAgfVxuXG4gIC8vIE9ubHkgZGVsZXRlIHRoZSBmZWF0dXJlIGlmIGl0J3MgYWxyZWFkeSBkaXNhYmxlZC5cbiAgfSBlbHNlIGlmICghY29uZmlnRW5hYmxlZChmZWF0dXJlKSkge1xuICAgIGRpc2FibGVkLnNwbGljZShkaXNhYmxlZC5pbmRleE9mKGZlYXR1cmUpLCAxKTtcbiAgfVxufVxuIiwiLy8gRXhjaGFuZ2VzIHN1cHBvcnRlZCBieSBXZWFsdGhzaW1wbGUgVHJhZGVcbi8vICdDQycgaXMgbm90IGFuIGV4Y2hhbmdlOyBpdCBzdGFuZHMgZm9yIENyeXB0byBjdXJyZW5jeSBhbmRcbi8vIGl0IGFsbG93cyB1cyB0byBkaXN0aW5ndWlzaCBpdCBmcm9tIGNvbnZlbnRpb25hbCBzZWN1cml0aWVzLlxuY29uc3QgZXhjaGFuZ2VzID0gWydOQVNEQVEnLCAnTllTRScsICdUU1gnLCAnVFNYLVYnLCAnTkVPJywgJ0NDJ107XG5cbi8qKlxuICogVGlja2VyIHByb3ZpZGVzIGEgbG9naWNhbCBlbmNhcHN1bGF0aW9uIGZvciB0aGUgYWxsb3dlZCBmb3Jtc1xuICogb2YgYSBzZWN1cml0eSB0aWNrZXIgd2l0aGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gKlxuICogSXQgcHJvdmlkZXMgdmFsaWRhdGlvbiBvZiB0aGUgZm9ybWF0IG9mIHRoZSB0aWNrZXIsIGFuZCB0aGVcbiAqIHZhbHVlIG9mIHRoZSBleGNoYW5nZSwgaWYgcHJvdmlkZWQuXG4gKlxuICogVGlja2VycyBtYXkgYmUgc3BlY2lmaWVkIGFzIHR3byBkYXRhIHR5cGVzOlxuICpcbiAqIC0gc3RyaW5nOiBUaGUgdGlja2VyIG1heSBiZSBhIHNpbXBsZSBzdHJpbmcgY29udGFpbmluZyB0aGUgc3ltYm9sLCBvciBhIGNvbWJpbmF0aW9uIG9mXG4gKiB0aGUgc3ltYm9sIGFuZCBleGNoYW5nZSBzZXBhcmF0ZWQgYnkgYSBjb2xvbi5cbiAqIC0gb2JqZWN0OiBUaGUgdGlja2VyIG1heSBiZSBhbiBvYmplY3Qgd2l0aCBzeW1ib2wsIGV4Y2hhbmdlLCBvciBpZCBwcm9wZXJ0aWVzLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqIFwiQUFQTFwiXG4gKiBcIlVCRVI6TllTRVwiXG4gKiB7IHN5bWJvbDogXCJBQVBMXCIgfVxuICogeyBzeW1ib2w6IFwiVUJFUlwiLCBleGNoYW5nZTogXCJOWVNFXCIgfVxuICogeyBpZDogXCJzZWMtcy03NmE3MTU1MjQyZTg0Nzc4ODBjYmI0MzI2OTIzNWNiNlwiIH1cbiAqL1xuY2xhc3MgVGlja2VyIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgdGhlIHRpY2tlciBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHNlY3VyaXR5IHRpY2tlciB2YWx1ZSwgcHJvdmlkZWQgYXMgYSBzdHJpbmcgb3IgYW4gb2JqZWN0IHdpdGggc3ltYm9sLFxuICAgKiBleGNoYW5nZSwgb3IgaWQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xuICAgIHRoaXMuc3ltYm9sID0gbnVsbDtcbiAgICB0aGlzLmV4Y2hhbmdlID0gbnVsbDtcbiAgICB0aGlzLmlkID0gbnVsbDtcbiAgICB0aGlzLmNyeXB0byA9IGZhbHNlO1xuXG4gICAgaWYgKHR5cGVvZiAodmFsdWUpID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gRW1wdHkgdGlja2VycyBhcmUgbm90IGFsbG93ZWRcbiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbXB0eSB0aWNrZXInKTtcbiAgICAgIH1cblxuICAgICAgW3RoaXMuc3ltYm9sLCB0aGlzLmV4Y2hhbmdlXSA9IHZhbHVlLnNwbGl0KCc6Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFlvdSBuZWVkIGF0IGxlYXN0IGEgc3ltYm9sIG9yIGlkIHRvIGZvcm0gYSB0aWNrZXIuXG4gICAgICBpZiAoIXZhbHVlLnN5bWJvbCAmJiAhdmFsdWUuaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRpY2tlciAnJHt2YWx1ZX0nYCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3ltYm9sID0gdmFsdWUuc3ltYm9sO1xuICAgICAgdGhpcy5leGNoYW5nZSA9IHZhbHVlLmV4Y2hhbmdlO1xuICAgICAgdGhpcy5pZCA9IHZhbHVlLmlkO1xuICAgIH1cblxuICAgIC8vIEd1YXJhbnRlZSB0aGF0IHRoZSBleGNoYW5nZSBpcyB2YWxpZCBpZiBub3QgbnVsbFxuICAgIGlmICh0aGlzLmV4Y2hhbmdlICYmICFleGNoYW5nZXMuaW5jbHVkZXModGhpcy5leGNoYW5nZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBleGNoYW5nZSAnJHt0aGlzLmV4Y2hhbmdlfSchYCk7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBjcnlwdG8gcHJvcGVydHkgdG8gdHJ1ZSB0byB0cmVhdCB0aGlzIHNlY3VyaXR5IGFzIGNyeXB0byBjdXJyZW5jeVxuICAgIGlmICh0aGlzLmV4Y2hhbmdlID09PSAnQ0MnIHx8IHRoaXMuaWQ/LnN0YXJ0c1dpdGgoJ3NlYy16JykpIHtcbiAgICAgIHRoaXMuY3J5cHRvID0gdHJ1ZTtcbiAgICAgIHRoaXMuZXhjaGFuZ2UgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFdlYWx0aHNpbXBsZSBUcmFkZSBkb2Vzbid0IGhhdmUgYSBzaG9ydCBleGNoYW5nZSBpZCAoJ05FTycpIGZvclxuICAgIC8vIEFFUVVJVEFTIE5FTyBFWENIQU5HRSBmb3Igc29tZSByZWFzb24uLi5cbiAgICAvLyBXZSBoYXZlIHRvIG1hcCBpdCB0byB0aGUgZnVsbCBuYW1lIGZvciBjb21wYXJpc29ucyB0byB3b3JrLlxuICAgIGlmICh0aGlzLmV4Y2hhbmdlID09PSAnTkVPJykge1xuICAgICAgdGhpcy5leGNoYW5nZSA9ICdBRVFVSVRBUyBORU8gRVhDSEFOR0UnO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWR1Y2VzIHRoZSB0aWNrZXIgb2JqZWN0IHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICAgKi9cbiAgZm9ybWF0KCkge1xuICAgIGlmICh0aGlzLmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5pZDtcbiAgICB9XG5cbiAgICAvLyBXZSBtdXN0IHJldHJhbnNsYXRlIHRoZSBmdWxsIG5hbWUgb2YgdGhlIE5FTyBleGNoYW5nZSBiYWNrIHRvIE5FT1xuICAgIGlmICh0aGlzLmV4Y2hhbmdlID09PSAnQUVRVUlUQVMgTkVPIEVYQ0hBTkdFJykge1xuICAgICAgcmV0dXJuIGAke3RoaXMuc3ltYm9sfTpORU9gO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhIGNvbXBvc2l0ZSB0aWNrZXIgd2l0aCAnQ0MnIGFzIHRoZSBleGNoYW5nZSBpZiBpdCdzIGEgY3J5cHRvY3VycmVuY3kuXG4gICAgaWYgKHRoaXMuY3J5cHRvKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5zeW1ib2x9OkNDYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCR7dGhpcy5zeW1ib2x9JHt0aGlzLmV4Y2hhbmdlID8gYDoke3RoaXMuZXhjaGFuZ2V9YCA6ICcnfWA7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgc3ltYm9sIG9yIGlkIHdpdGggYW5vdGhlciB0aWNrZXIuIFRoaXMgaXMgd2VhayBiZWNhdXNlXG4gICAqIGV4Y2hhbmdlIGlzIG5vdCBjb21wYXJlZCBoZXJlLCBhbGxvd2luZyBmb3IgZmFsc2UgcG9zaXRpdmVzXG4gICAqIG9mIHN5bWJvbHMgb24gZGlmZmVyZW50IGV4Y2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvdGhlciBUaWNrZXIgdG8gY29tcGFyZSB1cyB3aXRoXG4gICAqL1xuICB3ZWFrRXF1YWxzKG90aGVyKSB7XG4gICAgaWYgKHRoaXMuaWQgJiYgdGhpcy5pZCA9PT0gb3RoZXIuaWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN5bWJvbCAmJiB0aGlzLnN5bWJvbCA9PT0gb3RoZXIuc3ltYm9sICYmIHRoaXMuY3J5cHRvID09IG90aGVyLmNyeXB0bykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpY2tlcjtcbiIsImltcG9ydCBBUElDYWNoZSBmcm9tICcuLi9jb3JlL2NhY2hlJztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi4vY29yZS90aWNrZXInO1xuXG5jb25zdCBjYWNoZSA9IG5ldyBBUElDYWNoZSgxMCk7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAgICogUXVlcnkgdGhlIGNhY2hlIGZvciB0aGUgc2VjdXJpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHNlY3VyaXR5XG4gICAgICovXG4gIGdldChzZWN1cml0eSkge1xuICAgIC8vIE11c3QgZGlnZXN0IHRoZSBzZWN1cml0eSBpbnRvIHRoZSBzdGFuZGFyZCBmb3JtYXRcbiAgICBjb25zdCByZXN1bHQgPSBjYWNoZS5nZXQobmV3IFRpY2tlcihzZWN1cml0eSkuZm9ybWF0KCkpO1xuXG4gICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuXG4gIC8qKlxuICAgICAqIFJlbWVtYmVyIHRoZSBzZWN1cml0eSBmb3IgYSBmdXR1cmUgcXVpY2sgcmV0cmlldmFsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBrZXlcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICovXG4gIGluc2VydChrZXksIHZhbHVlKSB7XG4gICAgY2FjaGUuaW5zZXJ0KG5ldyBUaWNrZXIoa2V5KS5mb3JtYXQoKSwgdmFsdWUpO1xuICB9LFxufTtcbiIsIi8qXG4gKiBBUElDYWNoZSBpcyBhbiBpbnRlcm5hbCBlZmZvcnQgdG8gbWluaW1pemUgdW5uZWNlc3NhcnkgQVBJIGNhbGxzIHdoZXJlXG4gKiBwb3NzaWJsZS4gQSBzcGVjaWZpYyB1c2VjYXNlIHdoZXJlIGEgY2FjaGUgaXMgdXNlZnVsIGlzIGZpZ3VyaW5nIG91dCB0aGVcbiAqIGV4Y2hhbmdlIGEgc2VjdXJpdHkgYmVsb25ncyB0by4gQSBjYWNoZSB3b3VsZCBhbGxvdyB1cyB0byBtZW1vcml6ZVxuICogdGhpcyBzdGF0aWMgZGF0YSBmb3IgYSBwZXJpb2Qgb2YgdGltZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSBBUEkgY2FsbHMuXG4gKlxuICogVGhlIGNsYXNzIGVuY2Fwc3VsYXRlcyB0aGUgZm9sbG93aW5nIGNhY2hlIGJlaGF2aW91cjpcbiAqIC0gQSBtYXhpbXVtIGVudHJpZXMgcHJvdmlkZWQgYXMgYSBjb25zdHJ1Y3RvciBhcmd1bWVudFxuICogLSBGaXJzdCBpbiwgRmlyc3Qgb3V0IChGSUZPKSBtb2RlbFxuICpcbiAqIFRoZSBpbnRlcm5lbCBkYXRhIHN0cnVjdHVyZSBpcyBhIEhhc2hTZXQsIHNvIGxvb2t1cCB0aW1lIGNvc3QgaXMgZmFpcmx5XG4gKiBtaW5pbWFsLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBUElDYWNoZSB7XG4gIGNvbnN0cnVjdG9yKHNpemUpIHtcbiAgICB0aGlzLmNhY2hlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gIH1cblxuICAvKipcbiAgICAgKiBTdG9yZSB0aGUga2V5LXZhbHVlIHBhaXIgaW50byB0aGlzIGNhY2hlLiBUaGUgb2xkZXN0IGVudHJ5IGlzIGV2aWN0ZWQgaWZcbiAgICAgKiB3ZSdyZSBvdXQgb2Ygc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IGtleVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICAgKi9cbiAgaW5zZXJ0KGtleSwgdmFsdWUpIHtcbiAgICBpZiAodGhpcy5jYWNoZS5zaXplID49IHRoaXMuc2l6ZSkge1xuICAgICAgdGhpcy5jYWNoZS5kZWxldGUodGhpcy5jYWNoZS5rZXlzKCkubmV4dCgpLnZhbHVlKTtcbiAgICB9XG5cbiAgICB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIFJldHJpZXZlIHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggdGhlIGtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0ga2V5XG4gICAgICovXG4gIGdldChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5nZXQoa2V5KTtcbiAgfVxufVxuIiwiaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuL2FwaS9lbmRwb2ludHMnO1xuaW1wb3J0IGhhbmRsZVJlcXVlc3QgZnJvbSAnLi9uZXR3b3JrL2h0dHBzJztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi9jb3JlL3RpY2tlcic7XG5pbXBvcnQgeyBjb25maWdFbmFibGVkIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IGNhY2hlIGZyb20gJy4vb3B0aW9uYWwvc2VjdXJpdGllcy1jYWNoZSc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICogQSBzbmFwc2hvdCBvZiB0aGUgY3VycmVudCBVU0QvQ0FEIGV4Y2hhbmdlIHJhdGVzIG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGVcbiAgICogcGxhdGZvcm0uXG4gICAqL1xuICBleGNoYW5nZVJhdGVzOiBhc3luYyAoKSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5FWENIQU5HRV9SQVRFUywge30pLFxuXG4gIC8qKlxuICAgKiBJbmZvcm1hdGlvbiBhYm91dCBhIHNlY3VyaXR5IG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgUGxhdGZvcm0uXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gdXNlclRpY2tlciBUaGUgc2VjdXJpdHkgaWRcbiAgICogQHBhcmFtIHtib29sZWFufSBleHRlbnNpdmUgUHVsbHMgYSBtb3JlIGRldGFpbGVkIHJlcG9ydCBvZiB0aGUgc2VjdXJpdHkgdXNpbmcgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9zZWN1cml0aWVzL3tpZH0gQVBJXG4gICAqL1xuICBnZXRTZWN1cml0eTogYXN5bmMgKHVzZXJUaWNrZXIsIGV4dGVuc2l2ZSkgPT4ge1xuICAgIGxldCByZXN1bHQgPSBudWxsO1xuXG4gICAgLy8gUnVuIHNvbWUgdmFsaWRhdGlvbiBvbiB0aGUgdGlja2VyXG4gICAgY29uc3QgdGlja2VyID0gbmV3IFRpY2tlcih1c2VyVGlja2VyKTtcblxuICAgIGlmICghZXh0ZW5zaXZlICYmIGNvbmZpZ0VuYWJsZWQoJ3NlY3VyaXRpZXNfY2FjaGUnKSkge1xuICAgICAgcmVzdWx0ID0gY2FjaGUuZ2V0KHRpY2tlcik7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRpY2tlci5pZCkge1xuICAgICAgLy8gV2Ugd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBleHRlbnNpdmUgZGV0YWlscyBBUEkgc2luY2Ugd2UgaGF2ZSB0aGUgdW5pcXVlIGlkLlxuICAgICAgcmVzdWx0ID0gYXdhaXQgaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuRVhURU5TSVZFX1NFQ1VSSVRZX0RFVEFJTFMsIHsgaWQ6IHRpY2tlci5pZCB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gYXdhaXQgaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuU0VDVVJJVFksIHsgdGlja2VyOiB0aWNrZXIuc3ltYm9sIH0pO1xuICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoc2VjdXJpdHkpID0+IHNlY3VyaXR5LnN0b2NrLnN5bWJvbCA9PT0gdGlja2VyLnN5bWJvbCk7XG5cbiAgICAgIGlmICh0aWNrZXIuZXhjaGFuZ2UpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoc2VjdXJpdHkpID0+IHNlY3VyaXR5LnN0b2NrLnByaW1hcnlfZXhjaGFuZ2UgPT09IHRpY2tlci5leGNoYW5nZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aWNrZXIuY3J5cHRvKSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoKHNlY3VyaXR5KSA9PiBzZWN1cml0eS5zZWN1cml0eV90eXBlID09PSAnY3J5cHRvY3VycmVuY3knKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTXVsdGlwbGUgc2VjdXJpdGllcyBtYXRjaGVkIHF1ZXJ5LicpO1xuICAgICAgfSBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHNlY3VyaXRpZXMgbWF0Y2hlZCBxdWVyeS4nKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29udmVydCByZXN1bHQgZnJvbSBhIHNpbmdsZXRvbiBsaXN0IHRvIGl0cyByYXcgZW50cnlcbiAgICAgIFtyZXN1bHRdID0gcmVzdWx0O1xuXG4gICAgICBpZiAoZXh0ZW5zaXZlKSB7XG4gICAgICAgIC8vIFRoZSBjYWxsZXIgaGFzIG9wdGVkIHRvIHJlY2VpdmUgdGhlIGV4dGVuc2l2ZSBkZXRhaWxzIGFib3V0IHRoZSBzZWN1cml0eS5cbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuRVhURU5TSVZFX1NFQ1VSSVRZX0RFVEFJTFMsIHsgaWQ6IHJlc3VsdC5pZCB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29uZmlnRW5hYmxlZCgnc2VjdXJpdGllc19jYWNoZScpICYmIGNhY2hlLmdldCh0aWNrZXIpID09PSBudWxsKSB7XG4gICAgICBjYWNoZS5pbnNlcnQodGlja2VyLCByZXN1bHQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG59O1xuIiwiaW1wb3J0IHsgSGVhZGVycyB9IGZyb20gJ25vZGUtZmV0Y2gnO1xuXG5jb25zdCBjdXN0b21IZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8qKlxuICAgKiBBcHBlbmRzIGEgaGVhZGVyIG5hbWUtdmFsdWUgcGFpciB0byBhbGwgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbmFtZSBIZWFkZXIga2V5XG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgSGVhZGVyIHZhbHVlXG4gICAqL1xuICBhZGQ6IChuYW1lLCB2YWx1ZSkgPT4gY3VzdG9tSGVhZGVycy5hcHBlbmQobmFtZSwgdmFsdWUpLFxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgY3VzdG9tIGhlYWRlciBmcm9tIGFsbCByZXF1ZXN0cy5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBuYW1lIEhlYWRlciBrZXlcbiAgICovXG4gIHJlbW92ZTogKG5hbWUpID0+IGN1c3RvbUhlYWRlcnMuZGVsZXRlKG5hbWUpLFxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIGN1c3RvbSBoZWFkZXJzLlxuICAgKi9cbiAgY2xlYXI6ICgpID0+IFsuLi5jdXN0b21IZWFkZXJzXS5mb3JFYWNoKChoZWFkZXIpID0+IGN1c3RvbUhlYWRlcnMuZGVsZXRlKGhlYWRlclswXSkpLFxuXG4gIC8qKlxuICAgKiBQcm9kdWNlcyBhIGxpc3Qgb2YgY3VzdG9tIGhlYWRlcnMuXG4gICAqL1xuICB2YWx1ZXM6ICgpID0+IFsuLi5jdXN0b21IZWFkZXJzXSxcbn07XG4iLCJyZXF1aXJlKCdzb3VyY2UtbWFwLXN1cHBvcnQnKS5pbnN0YWxsKCk7XG5cbmNvbnN0IGF1dGggPSByZXF1aXJlKCcuL2F1dGgnKS5kZWZhdWx0O1xuY29uc3QgaGVhZGVycyA9IHJlcXVpcmUoJy4vaGVhZGVycycpLmRlZmF1bHQ7XG5jb25zdCBhY2NvdW50cyA9IHJlcXVpcmUoJy4vYWNjb3VudHMnKS5kZWZhdWx0O1xuY29uc3Qgb3JkZXJzID0gcmVxdWlyZSgnLi9vcmRlcnMnKS5kZWZhdWx0O1xuY29uc3QgZGF0YSA9IHJlcXVpcmUoJy4vZGF0YScpLmRlZmF1bHQ7XG5jb25zdCBxdW90ZXMgPSByZXF1aXJlKCcuL3F1b3RlcycpLmRlZmF1bHQ7XG5jb25zdCBjb25maWcgPSByZXF1aXJlKCcuL2NvbmZpZycpLmRlZmF1bHQ7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhdXRoLFxuICBoZWFkZXJzLFxuICBhY2NvdW50cyxcbiAgb3JkZXJzLFxuICBxdW90ZXMsXG4gIGRhdGEsXG4gIGNvbmZpZyxcbn07XG4iLCIvKipcbiAqIENvbXB1dGVzIHRoZSBjdXJyZW50IHRpbWUgaW4gZXBvY2ggc2Vjb25kcy5cbiAqL1xuY29uc3QgZXBvY2hTZWNvbmRzID0gKCkgPT4gcGFyc2VJbnQoRGF0ZS5ub3coKSAvIDEwMDAsIDEwKTtcbmV4cG9ydCBkZWZhdWx0IGVwb2NoU2Vjb25kcztcbiIsImltcG9ydCBlcG9jaFNlY29uZHMgZnJvbSAnLi4vaGVscGVycy90aW1lJztcbmltcG9ydCBhdXRoIGZyb20gJy4uL2F1dGgnO1xuXG4vKlxuICogVmFsaWRhdGUgdGhlIGF1dGggdG9rZW4gZm9yIGV4cGlyeSwgYXR0ZW1wdGluZyB0byByZWZyZXNoIGl0XG4gKiBpZiB3ZSBoYXZlIHRoZSByZWZyZXNoIHRva2VuLlxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBpbXBsaWNpdFRva2VuUmVmcmVzaCgpIHtcbiAgaWYgKGVwb2NoU2Vjb25kcygpID49IGF1dGgudG9rZW5zPy5leHBpcmVzKSB7XG4gICAgaWYgKGF1dGgudG9rZW5zPy5yZWZyZXNoKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBMZXQncyBpbXBsaWNpdGx5IHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiB1c2luZyB0aGUgcmVmcmVzaCB0b2tlbi5cbiAgICAgICAgYXdhaXQgYXV0aC5yZWZyZXNoKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBUaGUgcmVmcmVzaCB0b2tlbiBpcyBub3QgdmFsaWQuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHJlZnJlc2ggZXhwaXJlZCB0b2tlbjogJHtlcnJvcn1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2UgYXJlIGZvcmNlZCB0byByZWplY3QgYXMgb3VyIGFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZCBhbmQgd2VcbiAgICAgIC8vIGRvIG5vdCBoYXZlIGEgcmVmcmVzaCB0b2tlbi5cbiAgICAgIHRocm93IG5ldyBFcnJvcignQWNjZXNzIHRva2VuIGV4cGlyZWQnKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBmZXRjaCwgeyBIZWFkZXJzIH0gZnJvbSAnbm9kZS1mZXRjaCc7XG5pbXBvcnQgc3RhdHVzIGZyb20gJ2h0dHAtc3RhdHVzJztcbmltcG9ydCBjdXN0b21IZWFkZXJzIGZyb20gJy4uL2hlYWRlcnMnO1xuaW1wb3J0IGF1dGggZnJvbSAnLi4vYXV0aCc7XG5pbXBvcnQgeyBjb25maWdFbmFibGVkIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCBpbXBsaWNpdFRva2VuUmVmcmVzaCBmcm9tICcuLi9vcHRpb25hbC9pbXBsaWNpdC10b2tlbi1yZWZyZXNoJztcblxuLypcbiAqIENvbXBsZXRlIHRoZSBVUkwgYnkgZmlsbGluZyB0aGUgcGFyYW1ldGVyIHBsYWNlaG9sZGVycyB3aXRoIHRoZVxuICogZGF0YSBhcmd1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIGZpbmFsaXplUmVxdWVzdChlbmRwb2ludCwgZGF0YSkge1xuICAvLyBNYWtlIGEgY29weSBzbyB3ZSBkb24ndCBtb2RpZnkgdGhlIG9yaWdpbmFsIG9uZS5cbiAgY29uc3QgcGFyYW1zID0geyAuLi5kYXRhIH07XG4gIGxldCB7IHVybCB9ID0gZW5kcG9pbnQ7XG5cbiAgLy8gTm8gbmVlZCB0byBkbyBhbnl0aGluZyBpZiB0aGUgVVJMIGlzIHN0YXRpYyAobm8gcGFyYW1ldGVycylcbiAgaWYgKGVuZHBvaW50LnBhcmFtZXRlcnMpIHtcbiAgICAvLyBTd2FwIGFsbCB0aGUgcGFyYW1ldGVyIHBsYWNlaG9sZGVycyB3aXRoIHRoZSBhcmd1bWVudHMuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IE9iamVjdC5rZXlzKGVuZHBvaW50LnBhcmFtZXRlcnMpLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgcGFyYW1ldGVyTmFtZSA9IGVuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdO1xuXG4gICAgICAvLyB3ZSBoYXZlIHRvIGV4cGxpY2l0bHkgY2hlY2sgZm9yIG51bGwgYW5kIHVuZGVmaW5lZCBzaW5jZSBwYXJhbWV0ZXJcbiAgICAgIC8vIHZhbHVlcyBtaWdodCBiZSAwLlxuICAgICAgaWYgKHBhcmFtc1twYXJhbWV0ZXJOYW1lXSA9PT0gbnVsbCB8fCBwYXJhbXNbcGFyYW1ldGVyTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVSTCBQYXRoIHBhcmFtZXRlciAnJHtwYXJhbWV0ZXJOYW1lfScgbWlzc2luZyFgKTtcbiAgICAgIH1cblxuICAgICAgdXJsID0gdXJsLnJlcGxhY2UoYHske2luZGV4fX1gLCBwYXJhbXNbZW5kcG9pbnQucGFyYW1ldGVyc1tpbmRleF1dKTtcblxuICAgICAgLy8gTXVzdCByZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgcGF5bG9hZCBhcyBpdCBoYXMgYmVlbiBjb25zdW1lZCBieSB0aGUgVVJMXG4gICAgICBkZWxldGUgcGFyYW1zW2VuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdXTtcbiAgICB9XG4gIH1cblxuICAvLyBObyBwYXlsb2FkIGF0dGFjaGVkIHRvIEdFVC9ERUxFVEUgcmVxdWVzdHNcbiAgaWYgKFsnR0VUJywgJ0hFQUQnXS5pbmNsdWRlcyhlbmRwb2ludC5tZXRob2QpKSB7XG4gICAgcmV0dXJuIHsgdXJsLCBwYXlsb2FkOiB1bmRlZmluZWQgfTtcbiAgfVxuXG4gIHJldHVybiB7IHVybCwgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkocGFyYW1zKSB9O1xufVxuXG4vKlxuICogSW1wbGVtZW50cyB0aGUgbmV0d29yayBsZXZlbCBwcm90b2NvbCBmb3IgdGFsa2luZyB0byB0aGVcbiAqIFdlYWx0aHNpbXBsZSBUcmFkZSBIVFRQUyBBUEkuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHRhbGsoZW5kcG9pbnQsIGRhdGEpIHtcbiAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG4gIGhlYWRlcnMuYXBwZW5kKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXG4gIGlmIChhdXRoLnRva2Vucz8uYWNjZXNzKSB7XG4gICAgLy8gV2Ugd29uJ3QgYXR0ZW1wdCB0byBpbXBsaWNpdGx5IHJlZnJlc2ggaWYgdGhlIHVzZXIgaGFzIHJlcXVlc3RlZFxuICAgIC8vIHRoaXMuXG4gICAgaWYgKGNvbmZpZ0VuYWJsZWQoJ2ltcGxpY2l0X3Rva2VuX3JlZnJlc2gnKSkge1xuICAgICAgYXdhaXQgaW1wbGljaXRUb2tlblJlZnJlc2goKTtcbiAgICB9XG5cbiAgICBoZWFkZXJzLmFwcGVuZCgnQXV0aG9yaXphdGlvbicsIGF1dGgudG9rZW5zLmFjY2Vzcyk7XG4gIH1cblxuICAvLyBBcHBseSBhbGwgY3VzdG9tIGhlYWRlcnNcbiAgY3VzdG9tSGVhZGVycy52YWx1ZXMoKS5mb3JFYWNoKChoZWFkZXIpID0+IGhlYWRlcnMuYXBwZW5kKC4uLmhlYWRlcikpO1xuXG4gIC8vIGZpbGwgcGF0aCBhbmQgcXVlcnkgcGFyYW1ldGVycyBpbiB0aGUgVVJMXG4gIGNvbnN0IHsgdXJsLCBwYXlsb2FkIH0gPSBmaW5hbGl6ZVJlcXVlc3QoZW5kcG9pbnQsIGRhdGEpO1xuXG4gIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICBib2R5OiBwYXlsb2FkLFxuICAgIG1ldGhvZDogZW5kcG9pbnQubWV0aG9kLFxuICAgIGhlYWRlcnMsXG4gIH0pO1xufVxuXG4vKlxuICogRnVsZmlsbCB0aGUgZW5kcG9pbnQgcmVxdWVzdCBnaXZlbiB0aGUgZW5kcG9pbnQgY29uZmlndXJhdGlvbiwgb3B0aW9uYWxcbiAqIGRhdGEuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3QoZW5kcG9pbnQsIGRhdGEpIHtcbiAgLy8gU3VibWl0IHRoZSBIVFRQIHJlcXVlc3QgdG8gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBTZXJ2ZXJzXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGFsayhlbmRwb2ludCwgZGF0YSk7XG5cbiAgaWYgKFtzdGF0dXMuT0ssIHN0YXR1cy5DUkVBVEVEXS5pbmNsdWRlcyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgcmV0dXJuIGVuZHBvaW50Lm9uU3VjY2VzcyhyZXNwb25zZSk7XG4gIH1cblxuICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYXdhaXQgZW5kcG9pbnQub25GYWlsdXJlKHJlc3BvbnNlKSk7XG59XG4iLCJpbXBvcnQgZW5kcG9pbnRzLCB7IE9SREVSU19QRVJfUEFHRSB9IGZyb20gJy4uL2FwaS9lbmRwb2ludHMnO1xuaW1wb3J0IGhhbmRsZVJlcXVlc3QgZnJvbSAnLi4vbmV0d29yay9odHRwcyc7XG5pbXBvcnQgVGlja2VyIGZyb20gJy4uL2NvcmUvdGlja2VyJztcblxuLyoqXG4gKiBDb2xsZWN0cyBvcmRlcnMgKGZpbGxlZCwgcGVuZGluZywgY2FuY2VsbGVkKSBmb3IgdGhlIHByb3ZpZGVkIHBhZ2UgYW5kXG4gKiBhY2NvdW50IGlkLlxuICpcbiAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICogQHBhcmFtIHsqfSBwYWdlTnVtIFRoZSBvcmRlcnMgcGFnZSBpbmRleCB0byBzZWVrIHRvXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHBhZ2UoYWNjb3VudElkLCBwYWdlTnVtKSB7XG4gIHJldHVybiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5PUkRFUlNfQllfUEFHRSwge1xuICAgIG9mZnNldDogKHBhZ2VOdW0gLSAxKSAqIE9SREVSU19QRVJfUEFHRSxcbiAgICBhY2NvdW50SWQsXG4gIH0pO1xufVxuXG4vKipcbiAqIENvbGxlY3RzIGFsbCBvcmRlcnMgKGZpbGxlZCwgcGVuZGluZywgY2FuY2VsbGVkKSBmb3IgdGhlIHNwZWNpZmljIGFjY291bnQuXG4gKlxuICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGFsbChhY2NvdW50SWQpIHtcbiAgLy8gV2Ugc3RhcnQgYnkgY2FwdHVyaW5nIHRoZSBmaXJzdCBwYWdlIG9mIG9yZGVycyBpbiBvcmRlciB0b1xuICAvLyBkZXRlcm1pbmUgdGhlIG51bWJlciBvZiBwYWdlcyBhdmFpbGFibGVcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHBhZ2UoYWNjb3VudElkLCAxKTtcbiAgY29uc3QgcGFnZXMgPSBNYXRoLmNlaWwoZGF0YS50b3RhbCAvIE9SREVSU19QRVJfUEFHRSk7XG5cbiAgaWYgKHBhZ2VzID4gMSkge1xuICAgIGNvbnN0IHRhc2tzID0gW107XG5cbiAgICAvLyBCdWlsZCB0aGUgdGFzayBxdWV1ZSB0aGF0IHdpbGwgcmV0cmlldmUgdGhlIHJlbWFpbmluZyBwYWdlcyBvZiBvcmRlcnNcbiAgICBmb3IgKGxldCBwYWdlTnVtID0gMjsgcGFnZU51bSA8PSBwYWdlczsgcGFnZU51bSsrKSB7XG4gICAgICB0YXNrcy5wdXNoKHBhZ2UoYWNjb3VudElkLCBwYWdlTnVtKS50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5vcmRlcnMpKTtcbiAgICB9XG5cbiAgICAvLyBPdXQtb2Ytb3JkZXIgaW52b2NhdGlvbiBpcyBkZXNpcmVkLiBXaGF0IG1hdHRlcnMgaXMgdGhhdCBQcm9taXNlLmFsbCB3aWxsXG4gICAgLy8gZ3VhcmFudGVlIHRoYXQgdGhlIGRhdGEgb3JkZXIgaXMgcHJlc2VydmVkLlxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UuYWxsKHRhc2tzKTtcbiAgICByZXN1bHQuZm9yRWFjaCgobGlzdCkgPT4gZGF0YS5vcmRlcnMucHVzaCguLi5saXN0KSk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIHRvdGFsIGF0dHJpYnV0ZSB0byByZWZsZWN0IHRoZSBuZXcgc2l6ZVxuICAgIGRhdGEudG90YWwgPSBkYXRhLm9yZGVycy5sZW5ndGg7XG4gIH1cblxuICByZXR1cm4gZGF0YTtcbn1cblxuLypcbiAqIFJldHJpZXZlIGZpbHRlcmVkIG9yZGVycyBieSB0aWNrZXIgYW5kIHN0YXR1cy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZmlsdGVyZWRPcmRlcnMoYWNjb3VudElkLCB0aWNrZXIsIHN0YXR1cykge1xuICAvLyBGZXRjaCBhbGwgb3JkZXJzXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFsbChhY2NvdW50SWQpO1xuXG4gIGNvbnN0IG9yZGVyRmlsdGVyID0gKG9yZGVyKSA9PiB7XG4gICAgaWYgKHRpY2tlcikge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IFRpY2tlcih7IHN5bWJvbDogb3JkZXIuc3ltYm9sLCBpZDogb3JkZXIuc2VjdXJpdHlfaWQgfSk7XG4gICAgICAvLyBvcmRlciBvYmplY3RzIGRvbid0IGluY2x1ZGUgZXhjaGFuZ2VzLCBzbyB3ZSBhcmUgdW5hYmxlIHRvIG1ha2VcbiAgICAgIC8vIGEgc3Ryb25nIGNvbXBhcmlzb24gd2l0aG91dCByZXF1aXJpbmcgYSBsaW5lYXIgaW5jcmVhc2Ugb2ZcbiAgICAgIC8vIGVuZHBvaW50IGNhbGxzICh3aGljaCBpcyBub3QgcmVhc29uYWJsZSkuXG4gICAgICAvL1xuICAgICAgLy8gVGhlIHVzZXIgc2hvdWxkIHByb3ZpZGUgdGhlIHNlY3VyaXR5IGlkIGZvciBhIHN0cm9uZyBjb21wYXJpc29uIGhlcmUuXG4gICAgICBpZiAoIW5ldyBUaWNrZXIodGlja2VyKS53ZWFrRXF1YWxzKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvcmRlci5zdGF0dXMgPT09IHN0YXR1cztcbiAgfTtcblxuICAvLyBBcHBseSBmaWx0ZXIgdG8gdGhlIHJlc3VsdFxuICByZXN1bHQub3JkZXJzID0gcmVzdWx0Lm9yZGVycy5maWx0ZXIob3JkZXJGaWx0ZXIpO1xuICByZXN1bHQudG90YWwgPSByZXN1bHQub3JkZXJzLmxlbmd0aDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIHBhZ2UsXG4gIGFsbCxcblxuICAvKipcbiAgICogUmV0cmlldmVzIHBlbmRpbmcgb3JkZXJzIGZvciB0aGUgc3BlY2lmaWVkIHNlY3VyaXR5IGluIHRoZSBhY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgKG9wdGlvbmFsKSBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqL1xuICBwZW5kaW5nOiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIpID0+IGZpbHRlcmVkT3JkZXJzKGFjY291bnRJZCwgdGlja2VyLCAnc3VibWl0dGVkJyksXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBmaWxsZWQgb3JkZXJzIGZvciB0aGUgc3BlY2lmaWVkIHNlY3VyaXR5IGluIHRoZSBhY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgKG9wdGlvbmFsKSBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqL1xuICBmaWxsZWQ6IGFzeW5jIChhY2NvdW50SWQsIHRpY2tlcikgPT4gZmlsdGVyZWRPcmRlcnMoYWNjb3VudElkLCB0aWNrZXIsICdwb3N0ZWQnKSxcblxuICAvKipcbiAgICogUmV0cmlldmVzIGNhbmNlbGxlZCBvcmRlcnMgZm9yIHRoZSBzcGVjaWZpZWQgc2VjdXJpdHkgaW4gdGhlIGFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHRpY2tlciAob3B0aW9uYWwpIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICovXG4gIGNhbmNlbGxlZDogYXN5bmMgKGFjY291bnRJZCwgdGlja2VyKSA9PiBmaWx0ZXJlZE9yZGVycyhhY2NvdW50SWQsIHRpY2tlciwgJ2NhbmNlbGxlZCcpLFxufTtcbiIsImltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi4vYXBpL2VuZHBvaW50cyc7XG5pbXBvcnQgaGFuZGxlUmVxdWVzdCBmcm9tICcuLi9uZXR3b3JrL2h0dHBzJztcbmltcG9ydCBoaXN0b3J5IGZyb20gJy4vaGlzdG9yeSc7XG5pbXBvcnQgZGF0YSBmcm9tICcuLi9kYXRhJztcbmltcG9ydCBxdW90ZXMgZnJvbSAnLi4vcXVvdGVzJztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi4vY29yZS90aWNrZXInO1xuXG5jb25zdCBpc0NhbmFkaWFuU2VjdXJpdHkgPSAoZXhjaGFuZ2UpID0+IFsnVFNYJywgJ1RTWC1WJ10uaW5jbHVkZXMoZXhjaGFuZ2UpO1xuXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgdGhlIHBlbmRpbmcgb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBvcmRlciBpZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvcmRlcklkIFRoZSBwZW5kaW5nIG9yZGVyIHRvIGNhbmNlbFxuICAgKi9cbiAgY2FuY2VsOiBhc3luYyAob3JkZXJJZCkgPT4gKHtcbiAgICBvcmRlcjogb3JkZXJJZCxcbiAgICByZXNwb25zZTogYXdhaXQgaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuQ0FOQ0VMX09SREVSLCB7IG9yZGVySWQgfSksXG4gIH0pLFxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIGFsbCBwZW5kaW5nIG9yZGVycyB1bmRlciB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIEFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgY2FuY2VsUGVuZGluZyhhY2NvdW50SWQpIHtcbiAgICBjb25zdCBwZW5kaW5nID0gYXdhaXQgaGlzdG9yeS5wZW5kaW5nKGFjY291bnRJZCk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHBlbmRpbmcub3JkZXJzLm1hcChhc3luYyAob3JkZXIpID0+IHRoaXMuY2FuY2VsKG9yZGVyLm9yZGVyX2lkKSkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBNYXJrZXQgYnV5IGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gcHVyY2hhc2VcbiAgICovXG4gIG1hcmtldEJ1eTogYXN5bmMgKGFjY291bnRJZCwgdGlja2VyLCBxdWFudGl0eSkgPT4ge1xuICAgIGNvbnN0IGRldGFpbHMgPSBhd2FpdCBkYXRhLmdldFNlY3VyaXR5KHRpY2tlcik7XG5cbiAgICByZXR1cm4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiBkZXRhaWxzLmlkLFxuICAgICAgbGltaXRfcHJpY2U6IGF3YWl0IHF1b3Rlcy5nZXQodGlja2VyKSxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ2J1eV9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ21hcmtldCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogTGltaXQgYnV5IGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWF4aW11bSBwcmljZSB0byBwdXJjaGFzZSB0aGUgc2VjdXJpdHkgYXRcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gcHVyY2hhc2VcbiAgICovXG4gIGxpbWl0QnV5OiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIsIGxpbWl0LCBxdWFudGl0eSkgPT4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICBzZWN1cml0eV9pZDogKGF3YWl0IGRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKSkuaWQsXG4gICAgbGltaXRfcHJpY2U6IGxpbWl0LFxuICAgIHF1YW50aXR5LFxuICAgIG9yZGVyX3R5cGU6ICdidXlfcXVhbnRpdHknLFxuICAgIG9yZGVyX3N1Yl90eXBlOiAnbGltaXQnLFxuICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgfSksXG5cbiAgLyoqXG4gICAqIFN0b3AgbGltaXQgYnV5IGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBzdG9wIFRoZSBwcmljZSBhdCB3aGljaCB0aGUgb3JkZXIgY29udmVydHMgdG8gYSBsaW1pdCBvcmRlclxuICAgKiBAcGFyYW0geyp9IGxpbWl0IFRoZSBtYXhpbXVtIHByaWNlIHRvIHB1cmNoYXNlIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgc3RvcExpbWl0QnV5OiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIsIHN0b3AsIGxpbWl0LCBxdWFudGl0eSkgPT4ge1xuICAgIGNvbnN0IHNlY3VyaXR5ID0gYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpO1xuXG4gICAgLy8gVGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBiYWNrZW5kIGRvZXNuJ3QgY2hlY2sgZm9yIHRoaXMsIGV2ZW4gdGhvdWdoIHRoZSBhcHAgZG9lcy4uXG4gICAgaWYgKGlzQ2FuYWRpYW5TZWN1cml0eShzZWN1cml0eS5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlKSAmJiBzdG9wICE9PSBsaW1pdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUU1gvVFNYLVYgc2VjdXJpdGllcyBtdXN0IGhhdmUgYW4gZXF1aXZhbGVudCBzdG9wIGFuZCBsaW1pdCBwcmljZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiBzZWN1cml0eS5pZCxcbiAgICAgIHN0b3BfcHJpY2U6IHN0b3AsXG4gICAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdidXlfcXVhbnRpdHknLFxuICAgICAgb3JkZXJfc3ViX3R5cGU6ICdzdG9wX2xpbWl0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBNYXJrZXQgc2VsbCBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHB1cmNoYXNlXG4gICAqL1xuICBtYXJrZXRTZWxsOiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIsIHF1YW50aXR5KSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgIHNlY3VyaXR5X2lkOiAoYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpKS5pZCxcbiAgICBtYXJrZXRfdmFsdWU6ICEobmV3IFRpY2tlcih0aWNrZXIpLmNyeXB0bykgPyBhd2FpdCBxdW90ZXMuZ2V0KHRpY2tlcikgOiB1bmRlZmluZWQsXG4gICAgcXVhbnRpdHksXG4gICAgb3JkZXJfdHlwZTogJ3NlbGxfcXVhbnRpdHknLFxuICAgIG9yZGVyX3N1Yl90eXBlOiAnbWFya2V0JyxcbiAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gIH0pLFxuXG4gIC8qKlxuICAgKiBMaW1pdCBzZWxsIGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWluaW11bSBwcmljZSB0byBzZWxsIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBzZWxsXG4gICAqL1xuICBsaW1pdFNlbGw6IGFzeW5jIChhY2NvdW50SWQsIHRpY2tlciwgbGltaXQsIHF1YW50aXR5KSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgIHNlY3VyaXR5X2lkOiAoYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpKS5pZCxcbiAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgcXVhbnRpdHksXG4gICAgb3JkZXJfdHlwZTogJ3NlbGxfcXVhbnRpdHknLFxuICAgIG9yZGVyX3N1Yl90eXBlOiAnbGltaXQnLFxuICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgfSksXG5cbiAgLyoqXG4gICAqIFN0b3AgbGltaXQgc2VsbCBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gc3RvcCBUaGUgcHJpY2UgYXQgd2hpY2ggdGhlIG9yZGVyIGNvbnZlcnRzIHRvIGEgbGltaXQgb3JkZXJcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWluaW11bSBwcmljZSB0byBzZWxsIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBzZWxsXG4gICAqL1xuICBzdG9wTGltaXRTZWxsOiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIsIHN0b3AsIGxpbWl0LCBxdWFudGl0eSkgPT4ge1xuICAgIGNvbnN0IHNlY3VyaXR5ID0gYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpO1xuXG4gICAgLy8gVGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBiYWNrZW5kIGRvZXNuJ3QgY2hlY2sgZm9yIHRoaXMsIGV2ZW4gdGhvdWdoIHRoZSBhcHAgZG9lcy4uXG4gICAgaWYgKGlzQ2FuYWRpYW5TZWN1cml0eShzZWN1cml0eS5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlKSAmJiBzdG9wICE9PSBsaW1pdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUU1gvVFNYLVYgc2VjdXJpdGllcyBtdXN0IGhhdmUgYW4gZXF1aXZhbGVudCBzdG9wIGFuZCBsaW1pdCBwcmljZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiBzZWN1cml0eS5pZCxcbiAgICAgIHN0b3BfcHJpY2U6IHN0b3AsXG4gICAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdzZWxsX3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnc3RvcF9saW1pdCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfSxcbn07XG4iLCJpbXBvcnQgaGlzdG9yeSBmcm9tICcuL2hpc3RvcnknO1xuaW1wb3J0IHN1Ym1pdCBmcm9tICcuL3N1Ym1pdCc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLi4uaGlzdG9yeSxcbiAgLi4uc3VibWl0LFxufTtcbiIsIi8qKlxuICogVGhlIGRlZmF1bHQgcHJvdmlkZXIgZm9yIHF1b3RlcyBpcyBXZWFsdGhzaW1wbGUgVHJhZGUuXG4gKi9cblxuaW1wb3J0IGRhdGEgZnJvbSAnLi4vZGF0YSc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICAgKiBRdW90ZSBmb3IgYSB0aWNrZXIgZnJvbSB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGVuZHBvaW50LlxuICAgICAqXG4gICAgICogUmVtZW1iZXIgdGhhdCB0aGlzIHF1b3RlIGlzIE5PVCByZWFsLXRpbWUhXG4gICAgICovXG4gIHF1b3RlOiBhc3luYyAodGlja2VyKSA9PiB7XG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IGRhdGEuZ2V0U2VjdXJpdHkodGlja2VyLCB0cnVlKTtcbiAgICByZXR1cm4gaW5mby5xdW90ZS5hbW91bnQ7XG4gIH0sXG59O1xuIiwiaW1wb3J0IHRyYWRlIGZyb20gJy4vZGVmYXVsdCc7XG5pbXBvcnQgZGF0YSBmcm9tICcuLi9kYXRhJztcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8vIFdlYWx0aHNpbXBsZSBUcmFkZSBpcyBvdXIgZGVmYXVsdCBzb3VyY2UgZm9yIHF1b3RlcywgZGVzcGl0ZVxuICAvLyBoYXZpbmcgYSAxNSBtaW4gZGVsYXlcbiAgZGVmYXVsdFByb3ZpZGVyOiB0cmFkZSxcblxuICAvLyBNYWludGFpbnMgcXVvdGUgcHJvdmlkZXJzIG9uIGFuIGV4Y2hhbmdlIGJhc2lzXG4gIHByb3ZpZGVyczoge30sXG5cbiAgLyoqXG4gICAgICogTG9hZCBhIGN1c3RvbSBwcm92aWRlciBmb3IgdGhlIGV4Y2hhbmdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBleGNoYW5nZSBUaGUgZXhjaGFuZ2UgdGhhdCB0aGUgcHJvdmlkZXIgZmV0Y2hlcyBxdW90ZXMgZm9yXG4gICAgICogQHBhcmFtIHsqfSBwcm92aWRlciBUaGUgcHJvdmlkZXIgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHF1b3RlKCkgaW1wbGVtZW50YXRpb24uXG4gICAgICovXG4gIHVzZShleGNoYW5nZSwgcHJvdmlkZXIpIHtcbiAgICBpZiAodHlwZW9mIChwcm92aWRlci5xdW90ZSkgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIFRoZSBwcm92aWRlciBtdXN0IGhhdmUgYSBxdW90ZSgpIGltcGxlbWVudGF0aW9uIHRoYXQgd2UgY2FuIGNhbGwgbGF0ZXIhXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcXVvdGUgcHJvdmlkZXIgZm9yICR7ZXhjaGFuZ2V9IWApO1xuICAgIH1cblxuICAgIHRoaXMucHJvdmlkZXJzW2V4Y2hhbmdlXSA9IHByb3ZpZGVyO1xuICB9LFxuXG4gIC8qKlxuICAgICAqIE9idGFpbnMgYSBxdW90ZSBmb3IgdGhlIHRpY2tlci4gVGhlIHNvdXJjZSBvZiB0aGUgcXVvdGUgbWF5IGJlIGEgY3VzdG9tXG4gICAgICogcHJvdmlkZXIgaWYgYSB2YWxpZCBwcm92aWRlciBpcyByZWdpc3RlcmVkIGZvciB0aGUgZXhjaGFuZ2UgdGhhdCB0aGVcbiAgICAgKiB0aWNrZXIgdHJhZGVzIG9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHRvIGdldCBhIHF1b3RlIGZvci5cbiAgICAgKi9cbiAgYXN5bmMgZ2V0KHRpY2tlcikge1xuICAgIGxldCBleGNoYW5nZSA9IG51bGw7XG5cbiAgICAvLyBXZSBuZWVkIHRoZSBleGNoYW5nZSBpbiB0aGUgbmV4dCBzdGVwIGlmIHRoZSB1c2VyIGhhcyBzcGVjaWZpZWRcbiAgICAvLyBhIGN1c3RvbSBwcm92aWRlciBmb3IgYW4gZXhjaGFuZ2UuIFNvIGlmIHRoZSB1c2VyIGhhc24ndCBwcm92aWRlZFxuICAgIC8vIGl0LCB3ZSB3aWxsIGhhdmUgdG8gcGluZyBXZWFsdGhzaW1wbGUgdHJhZGUgdG8gZ2V0IGl0LlxuICAgIGlmICh0aWNrZXIuZXhjaGFuZ2UpIHtcbiAgICAgIGV4Y2hhbmdlID0gdGlja2VyLmV4Y2hhbmdlO1xuICAgIH0gZWxzZSBpZiAoT2JqZWN0LmtleXModGhpcy5wcm92aWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCBkYXRhLmdldFNlY3VyaXR5KHRpY2tlciwgZmFsc2UpO1xuICAgICAgZXhjaGFuZ2UgPSBpbmZvLnN0b2NrLnByaW1hcnlfZXhjaGFuZ2U7XG4gICAgfVxuXG4gICAgLy8gQSBjdXN0b20gcHJvdmlkZXIgd2lsbCB0YWtlIHByZWNlZGVuY2Ugb3ZlciB0aGUgZGVmYXVsdCBzb3VyY2VcbiAgICBpZiAodGhpcy5wcm92aWRlcnNbZXhjaGFuZ2VdKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnNbZXhjaGFuZ2VdLnF1b3RlKHRpY2tlcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRlZmF1bHRQcm92aWRlci5xdW90ZSh0aWNrZXIpO1xuICB9LFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt0b1N0cmluZ1RhZ1N5bWJvbF0gPVxuICAgIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgaWYgKCEodG9TdHJpbmdUYWdTeW1ib2wgaW4gZ2VuRnVuKSkge1xuICAgICAgICBnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuICAgICAgfVxuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIC8vIElmIGEgcmVqZWN0ZWQgUHJvbWlzZSB3YXMgeWllbGRlZCwgdGhyb3cgdGhlIHJlamVjdGlvbiBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBoYW5kbGVkIHRoZXJlLlxuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIEdwW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yXCI7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBHcFtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZVxuICAvLyBvciBub3QsIHJldHVybiB0aGUgcnVudGltZSBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gZGVjbGFyZSB0aGUgdmFyaWFibGVcbiAgLy8gcmVnZW5lcmF0b3JSdW50aW1lIGluIHRoZSBvdXRlciBzY29wZSwgd2hpY2ggYWxsb3dzIHRoaXMgbW9kdWxlIHRvIGJlXG4gIC8vIGluamVjdGVkIGVhc2lseSBieSBgYmluL3JlZ2VuZXJhdG9yIC0taW5jbHVkZS1ydW50aW1lIHNjcmlwdC5qc2AuXG4gIHJldHVybiBleHBvcnRzO1xuXG59KFxuICAvLyBJZiB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUsIHVzZSBtb2R1bGUuZXhwb3J0c1xuICAvLyBhcyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIG5hbWVzcGFjZS4gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBlbXB0eVxuICAvLyBvYmplY3QuIEVpdGhlciB3YXksIHRoZSByZXN1bHRpbmcgb2JqZWN0IHdpbGwgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gIC8vIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgdmFyaWFibGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUuXG4gIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgPyBtb2R1bGUuZXhwb3J0cyA6IHt9XG4pKTtcblxudHJ5IHtcbiAgcmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbn0gY2F0Y2ggKGFjY2lkZW50YWxTdHJpY3RNb2RlKSB7XG4gIC8vIFRoaXMgbW9kdWxlIHNob3VsZCBub3QgYmUgcnVubmluZyBpbiBzdHJpY3QgbW9kZSwgc28gdGhlIGFib3ZlXG4gIC8vIGFzc2lnbm1lbnQgc2hvdWxkIGFsd2F5cyB3b3JrIHVubGVzcyBzb21ldGhpbmcgaXMgbWlzY29uZmlndXJlZC4gSnVzdFxuICAvLyBpbiBjYXNlIHJ1bnRpbWUuanMgYWNjaWRlbnRhbGx5IHJ1bnMgaW4gc3RyaWN0IG1vZGUsIHdlIGNhbiBlc2NhcGVcbiAgLy8gc3RyaWN0IG1vZGUgdXNpbmcgYSBnbG9iYWwgRnVuY3Rpb24gY2FsbC4gVGhpcyBjb3VsZCBjb25jZWl2YWJseSBmYWlsXG4gIC8vIGlmIGEgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZm9yYmlkcyB1c2luZyBGdW5jdGlvbiwgYnV0IGluIHRoYXQgY2FzZVxuICAvLyB0aGUgcHJvcGVyIHNvbHV0aW9uIGlzIHRvIGZpeCB0aGUgYWNjaWRlbnRhbCBzdHJpY3QgbW9kZSBwcm9ibGVtLiBJZlxuICAvLyB5b3UndmUgbWlzY29uZmlndXJlZCB5b3VyIGJ1bmRsZXIgdG8gZm9yY2Ugc3RyaWN0IG1vZGUgYW5kIGFwcGxpZWQgYVxuICAvLyBDU1AgdG8gZm9yYmlkIEZ1bmN0aW9uLCBhbmQgeW91J3JlIG5vdCB3aWxsaW5nIHRvIGZpeCBlaXRoZXIgb2YgdGhvc2VcbiAgLy8gcHJvYmxlbXMsIHBsZWFzZSBkZXRhaWwgeW91ciB1bmlxdWUgcHJlZGljYW1lbnQgaW4gYSBHaXRIdWIgaXNzdWUuXG4gIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzQ1N19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNTQ1X187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX185NDlfXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Mik7XG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiBtb2R1bGVbJ2RlZmF1bHQnXSA6XG5cdFx0KCkgPT4gbW9kdWxlO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiXSwic291cmNlUm9vdCI6IiJ9