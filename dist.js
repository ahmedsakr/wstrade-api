!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("source-map-support"),require("node-fetch"),require("cloudscraper")):"function"==typeof define&&define.amd?define(["source-map-support","node-fetch","cloudscraper"],t):"object"==typeof exports?exports["wstrade-api"]=t(require("source-map-support"),require("node-fetch"),require("cloudscraper")):e["wstrade-api"]=t(e._,e._,e._)}(global,(function(e,t,r){return(()=>{var n={228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},858:e=>{e.exports=function(e){if(Array.isArray(e))return e}},646:(e,t,r)=>{var n=r(228);e.exports=function(e){if(Array.isArray(e))return n(e)}},926:e=>{function t(e,t,r,n,i,a,s){try{var o=e[a](s),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,a){var s=e.apply(r,n);function o(e){t(s,i,a,o,u,"next",e)}function u(e){t(s,i,a,o,u,"throw",e)}o(void 0)}))}}},575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},913:e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}},713:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},884:e=>{e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}}},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},38:(e,t,r)=>{var n=r(858),i=r(884),a=r(379),s=r(521);e.exports=function(e,t){return n(e)||i(e,t)||a(e,t)||s()}},319:(e,t,r)=>{var n=r(646),i=r(860),a=r(379),s=r(206);e.exports=function(e){return n(e)||i(e)||a(e)||s()}},379:(e,t,r)=>{var n=r(228);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},757:(e,t,r)=>{e.exports=r(666)},391:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(319),i=r.n(n),a=r(757),s=r.n(a),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(726),d=99,y=["sell","deposit","withdrawal","dividend","institutional_transfer","internal_transfer","refund","referral_bonus","affiliate","buy"];const v=function(){function e(t){l()(this,e),this.worker=t}var t,r,n,a,o,c,h,v,m;return p()(e,[{key:"all",value:(m=u()(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.worker.handleRequest(f.Z.ACCOUNT_IDS,{});case 2:return t=e.sent,e.abrupt("return",{tfsa:t.find((function(e){return e.startsWith("tfsa")})),rrsp:t.find((function(e){return e.startsWith("rrsp")})),crypto:t.find((function(e){return e.startsWith("non-registered-crypto")})),personal:t.find((function(e){return e.startsWith("non-registered")&&!e.startsWith("non-registered-crypto")}))});case 4:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"data",value:(v=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.LIST_ACCOUNT,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"me",value:(h=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.ME,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"person",value:(c=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.PERSON,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"history",value:(o=u()(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.HISTORY_ACCOUNT,{interval:t,accountId:r}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"activities",value:(a=u()(s().mark((function e(){var t,r,n,a,o,u,c,l,h,p,v=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=(o=v.length>0&&void 0!==v[0]?v[0]:{})&&o.limit&&o.limit>d)){e.next=3;break}throw new Error("filters.limit can not exceed 99! Leave filters.limit undefined if you want to retrieve all.");case 3:if(null==o||!o.accounts||Array.isArray(o.accounts)){e.next=5;break}throw new Error("filters.accounts must be an array!");case 5:if(null==o||!o.type||Array.isArray(o.type)){e.next=7;break}throw new Error("filters.type must be an array!");case 7:return u=[],e.next=10,this.worker.handleRequest(f.Z.ACTIVITIES,{limit:null!==(t=null==o?void 0:o.limit)&&void 0!==t?t:d,accountIds:null!==(r=null==o||null===(n=o.accounts)||void 0===n?void 0:n.join())&&void 0!==r?r:"",bookmark:"",type:null!==(a=null==o?void 0:o.type)&&void 0!==a?a:y});case 10:if(c=e.sent,u.push.apply(u,i()(c.results)),null!=o&&o.limit){e.next=22;break}case 13:if(u.length%d!=0){e.next=22;break}return e.next=16,this.worker.handleRequest(f.Z.ACTIVITIES,{limit:d,accountIds:null!==(l=null==o||null===(h=o.accounts)||void 0===h?void 0:h.join())&&void 0!==l?l:"",bookmark:c.bookmark,type:null!==(p=null==o?void 0:o.type)&&void 0!==p?p:y});case 16:if(0!==(c=e.sent).results.length){e.next=19;break}return e.abrupt("break",22);case 19:u.push.apply(u,i()(c.results)),e.next=13;break;case 22:return e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getBankAccounts",value:(n=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.BANK_ACCOUNTS,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"deposits",value:(r=u()(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.DEPOSITS,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"positions",value:(t=u()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.POSITIONS,{accountId:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n={onFailure:function(e){return{status:e.statusCode,reason:e.statusMessage,body:e.body}},onSuccess:function(e){return e.body}};const i={LOGIN:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/login",authenticated:!1,onSuccess:function(e){return{tokens:{access:e.headers["x-access-token"],refresh:e.headers["x-refresh-token"],expires:parseInt(e.headers["x-access-token-expires"],10)},accountInfo:e.body}},onFailure:n.onFailure},REFRESH:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/refresh",authenticated:!1,onSuccess:function(e){return{tokens:{access:e.headers["x-access-token"],refresh:e.headers["x-refresh-token"],expires:parseInt(e.headers["x-access-token-expires"],10)}}},onFailure:n.onFailure},ACCOUNT_IDS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",authenticated:!0,onSuccess:function(e){return e.body.results.map((function(e){return e.id}))},onFailure:n.onFailure},LIST_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},ME:{method:"GET",url:"https://trade-service.wealthsimple.com/me",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},PERSON:{method:"GET",url:"https://trade-service.wealthsimple.com/person",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},HISTORY_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/history/{0}?account_id={1}",authenticated:!0,parameters:{0:"interval",1:"accountId"},onSuccess:n.onSuccess,onFailure:n.onFailure},ACTIVITIES:{method:"GET",url:"https://trade-service.wealthsimple.com/account/activities?limit={0}&account_ids={1}&[2]&bookmark={3}",authenticated:!0,parameters:{0:"limit",1:"accountIds",2:"type",3:"bookmark"},onSuccess:n.onSuccess,onFailure:n.onFailure},DEPOSITS:{method:"GET",url:"https://trade-service.wealthsimple.com/deposits",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},BANK_ACCOUNTS:{method:"GET",url:"https://trade-service.wealthsimple.com/bank-accounts",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},EXCHANGE_RATES:{method:"GET",url:"https://trade-service.wealthsimple.com/forex",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},SECURITY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities?query={0}",authenticated:!0,parameters:{0:"ticker"},onSuccess:function(e){var t=e.body;if(0===t.results.length)throw new Error("Security does not exist");return t.results},onFailure:n.onFailure},EXTENSIVE_SECURITY_DETAILS:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}",authenticated:!0,parameters:{0:"id"},onSuccess:n.onSuccess,onFailure:n.onFailure},SECURITY_GROUPS:{method:"GET",url:"https://trade-service.wealthsimple.com/security-groups?limit=99",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},SECURITY_GROUP:{method:"GET",url:"https://trade-service.wealthsimple.com/security-groups/{0}/securities",authenticated:!0,parameters:{0:"groupId"},onSuccess:function(e){return e.body.results},onFailure:n.onFailure},QUOTES_HISTORY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}/historical_quotes/{1}?mic=XNAS",authenticated:!0,parameters:{0:"id",1:"interval"},onSuccess:n.onSuccess,onFailure:n.onFailure},POSITIONS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/positions?account_id={0}",authenticated:!0,parameters:{0:"accountId"},onSuccess:function(e){return e.body.results},onFailure:n.onFailure},ORDERS_BY_PAGE:{method:"GET",url:"https://trade-service.wealthsimple.com/orders?offset={0}&account_id={1}",authenticated:!0,parameters:{0:"offset",1:"accountId"},onSuccess:function(e){var t=e.body;return{total:t.total,orders:t.results}},onFailure:n.onFailure},CANCEL_ORDER:{method:"DELETE",url:"https://trade-service.wealthsimple.com/orders/{0}",authenticated:!0,parameters:{0:"orderId"},onSuccess:n.onSuccess,onFailure:n.onFailure},PLACE_ORDER:{method:"POST",url:"https://trade-service.wealthsimple.com/orders",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure}}},464:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(757),i=r.n(n),a=r(926),s=r.n(a),o=r(575),u=r.n(o),c=r(913),l=r.n(c);const h=function(){function e(t){u()(this,e),this.worker=t}var t,r;return l()(e,[{key:"on",value:function(e,t){return this.worker.on(e,t)}},{key:"use",value:function(e){this.worker.tokens.store(e)}},{key:"tokens",value:function(){return{access:this.worker.tokens.access,refresh:this.worker.tokens.refresh,expires:this.worker.tokens.expires}}},{key:"login",value:(r=s()(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.login(t,r));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"refresh",value:(t=s()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.refreshAuthentication());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},500:(e,t,r)=>{"use strict";r.d(t,{e:()=>a,Z:()=>s});var n=["implicit_token_refresh","securities_cache"],i=["securities_cache"],a=function(e){return!i.includes(e)};function s(e){if(!function(e){return null!=e&&e.startsWith("no_")?n.includes(e.substring("no_".length)):n.includes(e)}(e))throw new Error("'".concat(e,"' is not supported!"));if(null!=e&&e.startsWith("no_")){var t=e.substring(e.indexOf("_")+1);a(t)&&i.push(t)}else a(e)||i.splice(i.indexOf(e),1)}},657:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(38),i=r.n(n),a=r(575),s=r.n(a),o=r(913),u=r.n(o),c=["NASDAQ","NYSE","TSX","TSX-V","AEQUITAS NEO EXCHANGE","CC"];const l=function(){function e(t){var r;if(s()(this,e),this.symbol=null,this.exchange=null,this.id=null,this.crypto=!1,"string"==typeof t){if(""===t)throw new Error("Empty ticker");var n=t.split(":"),a=i()(n,2);this.symbol=a[0],this.exchange=a[1]}else{if(!t.symbol&&!t.id)throw new Error("Invalid ticker '".concat(t,"'"));this.symbol=t.symbol||null,this.exchange=t.exchange||null,this.id=t.id||null}if("NEO"===this.exchange&&(this.exchange="AEQUITAS NEO EXCHANGE"),this.exchange&&!c.includes(this.exchange))throw new Error("Invalid exchange '".concat(this.exchange,"'!"));("CC"===this.exchange||null!==(r=this.id)&&void 0!==r&&r.startsWith("sec-z"))&&(this.crypto=!0)}return u()(e,[{key:"format",value:function(){return this.id?this.id:"AEQUITAS NEO EXCHANGE"===this.exchange?"".concat(this.symbol,":NEO"):"".concat(this.symbol).concat(this.exchange?":".concat(this.exchange):"")}},{key:"weakEquals",value:function(e){return!(!this.id||this.id!==e.id)||!(!this.symbol||this.symbol!==e.symbol||this.crypto!==e.crypto)}}]),e}()},752:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(713),i=r.n(n),a=r(38),s=r.n(a),o=r(757),u=r.n(o),c=r(926),l=r.n(c),h=r(575),p=r.n(h),f=r(913),d=r.n(f),y=r(726),v=r(657),m=r(500),w=new(function(){function e(t){p()(this,e),this.cache=new Map,this.size=t}return d()(e,[{key:"insert",value:function(e,t){this.cache.size>=this.size&&this.cache.delete(this.cache.keys().next().value),this.cache.set(e,t)}},{key:"get",value:function(e){return this.cache.get(e)}}]),e}())(10);const k=function(e){var t=w.get(new v.Z(e).format());return void 0===t?null:t};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const g=function(){function e(t){p()(this,e),this.worker=t}var t,r,n,a;return d()(e,[{key:"exchangeRates",value:(a=l()(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(y.Z.EXCHANGE_RATES,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getSecurity",value:(n=l()(u().mark((function e(t,r){var n,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,i=new v.Z(t),r||!(0,m.e)("securities_cache")){e.next=6;break}if(!(n=k(i))){e.next=6;break}return e.abrupt("return",n);case 6:if(!i.id){e.next=12;break}return e.next=9,this.worker.handleRequest(y.Z.EXTENSIVE_SECURITY_DETAILS,{id:i.id});case 9:n=e.sent,e.next=28;break;case 12:return e.next=14,this.worker.handleRequest(y.Z.SECURITY,{ticker:i.symbol});case 14:if(n=(n=e.sent).filter((function(e){return e.stock.symbol===i.symbol})),i.crypto?n=n.filter((function(e){return"cryptocurrency"===e.security_type})):i.exchange&&(n=n.filter((function(e){return e.stock.primary_exchange===i.exchange}))),!(n.length>1)){e.next=19;break}throw new Error("Multiple securities matched query.");case 19:if(0!==n.length){e.next=21;break}throw new Error("No securities matched query.");case 21:if(a=n,o=s()(a,1),n=o[0],!r){e.next=28;break}return e.next=27,this.worker.handleRequest(y.Z.EXTENSIVE_SECURITY_DETAILS,{id:n.id});case 27:n=e.sent;case 28:return(0,m.e)("securities_cache")&&null===k(i)&&(u=i,c=n,w.insert(new v.Z(u).format(),c)),e.abrupt("return",n);case 30:case"end":return e.stop()}var u,c}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"securityGroups",value:(r=l()(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.worker.handleRequest(y.Z.SECURITY_GROUPS,{});case 2:return t=e.sent,e.abrupt("return",t.reduce((function(e,t){return b(b({},e),{},i()({},t.name,t.external_security_group_id))}),{}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getSecurityGroup",value:(t=l()(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,null!=t&&t.startsWith("security-group")){e.next=8;break}return e.next=4,this.securityGroups();case 4:if(n=e.sent,t in n){e.next=7;break}throw new Error("'".concat(t,"' is not a valid group name!"));case 7:r=n[t];case 8:return e.abrupt("return",this.worker.handleRequest(y.Z.SECURITY_GROUP,{groupId:r}));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},568:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(319),i=r.n(n),a=new(r(545).Headers);const s={add:function(e,t){return a.append(e,t)},remove:function(e){return a.delete(e)},clear:function(){return i()(a).forEach((function(e){return a.delete(e[0])}))},values:function(){return i()(a)}}},352:(e,t,r)=>{r(949).install();var n=r(464).Z,i=r(568).Z,a=r(391).Z,s=r(764).Z,o=r(752).Z,u=r(889).Z,c=r(500).Z,l=r(190).Z,h=function(){var e=new l,t=new o(e);return{auth:new n(e),headers:i,accounts:new a(e),orders:new s(e,t),quotes:new u(e,t),data:t,config:c}},p=new h;p.Session=function(){return new h},e.exports=p},190:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(757),i=r.n(n),a=r(38),s=r.n(a),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(713),d=r.n(f),y=r(214),v=r.n(y),m=r(568),w=r(726),k=r(500);const x=function(){function e(){l()(this,e),this.access=null,this.refresh=null,this.expires=null}return p()(e,[{key:"store",value:function(e){this.access=e.access,this.refresh=e.refresh,this.expires=e.expires}},{key:"expired",value:function(){return this.expires&&parseInt(Date.now()/1e3,10)>=this.expires}}]),e}();function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var g=200,E=201;function _(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t),n=e.url;if(e.parameters)for(var i=0;i<Object.keys(e.parameters).length;i++){var a=e.parameters[i];if(null===r[a]||void 0===r[a])throw new Error("URL parameter '".concat(a,"' missing!"));if(n.indexOf("{".concat(i,"}"))>=0)n=n.replace("{".concat(i,"}"),r[e.parameters[i]]);else{if(!(n.indexOf("[".concat(i,"]"))>=0))throw new Error("Malformed URL! This is an internal error: raise an issue!");!function(){var t=e.parameters[i],a=r[t].map((function(e){return"".concat(t,"=").concat(e)})).join("&");n=n.replace("[".concat(i,"]"),a)}()}delete r[e.parameters[i]]}return["GET","HEAD"].includes(e.method)?{url:n,payload:void 0}:{url:n,payload:JSON.stringify(r)}}const S=function(){function e(){l()(this,e),this.tokens=new x,this.events={otp:null,refresh:null}}var t,r,n,a,o;return p()(e,[{key:"on",value:function(e,t){if(!(e in this.events))throw new Error("Unsupported authentication event '".concat(e,"'!"));this.events[e]=t}},{key:"talk",value:(o=u()(i().mark((function e(t,r){var n,a,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={"Content-type":"application/json"},!t.authenticated){e.next=8;break}if(this.tokens.access){e.next=4;break}throw new Error("Authentication required for '".concat(t.url,"'"));case 4:if(!(0,k.e)("implicit_token_refresh")){e.next=7;break}return e.next=7,this.implicitTokenRefresh();case 7:n.Authorization=this.tokens.access;case 8:return m.Z.values().forEach((function(e){var t=s()(e,2),r=t[0],i=t[1];n[r]=i})),a=_(t,r),o=a.url,u=a.payload,c=null,e.next=13,v()({url:o,body:u,method:t.method,headers:n,callback:function(e,t){c=t}}).catch((function(){}));case 13:try{c.body=JSON.parse(c.body)}catch(e){}return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"handleRequest",value:(a=u()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.talk(t,r);case 2:if(n=e.sent,![g,E].includes(n.statusCode)){e.next=5;break}return e.abrupt("return",t.onSuccess(n));case 5:return e.abrupt("return",Promise.reject(t.onFailure(n)));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"login",value:(n=u()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,"function"!=typeof this.events.otp){e.next=4;break}return e.next=4,this.handleRequest(w.Z.LOGIN,{email:t,password:r}).catch((function(){}));case 4:if(e.prev=4,e.t0=this,e.t1=w.Z.LOGIN,e.t2=t,e.t3=r,"function"!=typeof this.events.otp){e.next=15;break}return e.next=12,this.events.otp();case 12:e.t4=e.sent,e.next=16;break;case 15:e.t4=this.events.otp;case 16:return e.t5=e.t4,e.t6={email:e.t2,password:e.t3,otp:e.t5},e.next=20,e.t0.handleRequest.call(e.t0,e.t1,e.t6);case 20:n=e.sent,e.next=28;break;case 23:if(e.prev=23,e.t7=e.catch(4),this.events.otp){e.next=27;break}throw new Error("OTP not provided!");case 27:throw e.t7;case 28:this.tokens.store(n.tokens);case 29:case"end":return e.stop()}}),e,this,[[4,23]])}))),function(e,t){return n.apply(this,arguments)})},{key:"refreshAuthentication",value:(r=u()(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleRequest(w.Z.REFRESH,{refresh_token:this.tokens.refresh});case 2:if(t=e.sent,this.tokens.store(t.tokens),"function"!=typeof this.events.refresh){e.next=7;break}return e.next=7,this.events.refresh(this.tokens);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"implicitTokenRefresh",value:(t=u()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tokens.expired()){e.next=22;break}if(!this.tokens.refresh){e.next=21;break}return e.prev=2,e.next=5,this.refreshAuthentication();case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Error("Unable to refresh expired token: ".concat(e.t0));case 10:if(e.prev=10,"function"!=typeof this.events.refresh){e.next=14;break}return e.next=14,this.events.refresh(this.tokens);case 14:e.next=19;break;case 16:throw e.prev=16,e.t1=e.catch(10),new Error("Trouble in call to refresh handler: ".concat(e.t1));case 19:e.next=22;break;case 21:throw new Error("Access token expired");case 22:case"end":return e.stop()}}),e,this,[[2,7],[10,16]])}))),function(){return t.apply(this,arguments)})}]),e}()},764:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(319),i=r.n(n),a=r(757),s=r.n(a),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(726),d=r(657),y=function(e){return["TSX","TSX-V"].includes(e)};function v(e,t,r){var n=e.orders.filter((function(e){if(t){var n=new d.Z({symbol:e.symbol,id:e.security_id});if(!new d.Z(t).weakEquals(n))return!1}return e.status===r}));return{orders:n,total:n.length}}const m=function(){function e(t,r){l()(this,e),this.worker=t,this.data=r}var t,r,n,a,o,c,h,m,w,k,x,b,g;return p()(e,[{key:"page",value:(g=u()(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.ORDERS_BY_PAGE,{offset:20*(r-1),accountId:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"all",value:(b=u()(s().mark((function e(t){var r,n,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.page(t,1);case 2:if(r=e.sent,!((n=Math.ceil(r.total/20))>1)){e.next=12;break}for(a=[],o=2;o<=n;o++)a.push(this.page(t,o).then((function(e){return e.orders})));return e.next=9,Promise.all(a);case 9:e.sent.forEach((function(e){var t;return(t=r.orders).push.apply(t,i()(e))})),r.total=r.orders.length;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"pending",value:(x=u()(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"submitted"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return x.apply(this,arguments)})},{key:"filled",value:(k=u()(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"posted"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"cancelled",value:(w=u()(s().mark((function e(t,r){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"cancelled"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return w.apply(this,arguments)})},{key:"cancel",value:(m=u()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,this.worker.handleRequest(f.Z.CANCEL_ORDER,{orderId:t});case 3:return e.t1=e.sent,e.abrupt("return",{order:e.t0,response:e.t1});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"cancelPending",value:(h=u()(s().mark((function e(t){var r,n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pending(t);case 2:return r=e.sent,e.abrupt("return",Promise.all(r.orders.map(function(){var e=u()(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.cancel(t.order_id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"marketBuy",value:(c=u()(s().mark((function e(t,r,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r,!0);case 2:return i=e.sent,e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:i.id,limit_price:new d.Z(r).crypto?void 0:i.quote.amount,quantity:n,order_type:"buy_quantity",order_sub_type:"market",time_in_force:"day",account_id:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return c.apply(this,arguments)})},{key:"limitBuy",value:(o=u()(s().mark((function e(t,r,n,i){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.worker,e.t1=f.Z.PLACE_ORDER,e.next=4,this.data.getSecurity(r);case 4:return e.t2=e.sent.id,e.t3=n,e.t4=i,e.t5=t,e.t6={security_id:e.t2,limit_price:e.t3,quantity:e.t4,order_type:"buy_quantity",order_sub_type:"limit",time_in_force:"day",account_id:e.t5},e.abrupt("return",e.t0.handleRequest.call(e.t0,e.t1,e.t6));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return o.apply(this,arguments)})},{key:"stopLimitBuy",value:(a=u()(s().mark((function e(t,r,n,i,a){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r);case 2:if(o=e.sent,!y(o.stock.primary_exchange)||n===i){e.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:o.id,stop_price:n,limit_price:i,quantity:a,order_type:"buy_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,i){return a.apply(this,arguments)})},{key:"marketSell",value:(n=u()(s().mark((function e(t,r,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r,!0);case 2:return i=e.sent,e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:i.id,market_value:new d.Z(r).crypto?void 0:i.quote.amount,quantity:n,order_type:"sell_quantity",order_sub_type:"market",time_in_force:"day",account_id:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"limitSell",value:(r=u()(s().mark((function e(t,r,n,i){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.worker,e.t1=f.Z.PLACE_ORDER,e.next=4,this.data.getSecurity(r);case 4:return e.t2=e.sent.id,e.t3=n,e.t4=i,e.t5=t,e.t6={security_id:e.t2,limit_price:e.t3,quantity:e.t4,order_type:"sell_quantity",order_sub_type:"limit",time_in_force:"day",account_id:e.t5},e.abrupt("return",e.t0.handleRequest.call(e.t0,e.t1,e.t6));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"stopLimitSell",value:(t=u()(s().mark((function e(t,r,n,i,a){var o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r);case 2:if(o=e.sent,!y(o.stock.primary_exchange)||n===i){e.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:o.id,stop_price:n,limit_price:i,quantity:a,order_type:"sell_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i,a){return t.apply(this,arguments)})}]),e}()},889:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(757),i=r.n(n),a=r(926),s=r.n(a),o=r(575),u=r.n(o),c=r(913),l=r.n(c);const h=function(e){return{quote:function(t){return s()(i().mark((function r(){var n;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getSecurity(t,!0);case 2:return n=r.sent,r.abrupt("return",n.quote.amount);case 4:case"end":return r.stop()}}),r)})))()}}};var p=r(657),f=r(726);const d=function(){function e(t,r){u()(this,e),this.defaultProvider=new h(r),this.providers={},this.worker=t,this.data=r}var t,r;return l()(e,[{key:"use",value:function(e,t){if("function"!=typeof t.quote)throw new Error("Invalid quote provider for ".concat(e,"!"));this.providers[e]=t}},{key:"get",value:(r=s()(i().mark((function e(t){var r,n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,!(n=new p.Z(t)).exchange){e.next=6;break}r=n.exchange,e.next=15;break;case 6:if(!n.crypto||!n.id){e.next=10;break}r="CC",e.next=15;break;case 10:if(!(Object.keys(this.providers).length>0)){e.next=15;break}return e.next=13,this.data.getSecurity(n,!1);case 13:a=e.sent,r=a.stock.primary_exchange;case 15:if(!(r in this.providers)){e.next=17;break}return e.abrupt("return",this.providers[r].quote(n));case 17:return e.abrupt("return",this.defaultProvider.quote(n));case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"history",value:(t=s()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=new p.Z(t)).id){e.next=5;break}return e.next=4,this.data.getSecurity(n);case 4:n.id=e.sent.id;case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.QUOTES_HISTORY,{id:n.id,interval:r}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}()},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new T(n||[]);return a._invoke=function(e,t,r){var n=l;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw a;return I()}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var o=_(s,r);if(o){if(o===d)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?f:h,u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=f,r.method="throw",r.arg=u.arg)}}}(e,r,s),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",h="suspendedYield",p="executing",f="completed",d={};function y(){}function v(){}function m(){}var w={};w[a]=function(){return this};var k=Object.getPrototypeOf,x=k&&k(k(R([])));x&&x!==r&&n.call(x,a)&&(w=x);var b=m.prototype=y.prototype=Object.create(w);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function E(e,t){function r(i,a,s,o){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(h).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,o)}))}o(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function R(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:I}}function I(){return{value:t,done:!0}}return v.prototype=b.constructor=m,m.constructor=v,m[o]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(E.prototype),E.prototype[s]=function(){return this},e.AsyncIterator=E,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var s=new E(u(t,r,n,i),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},g(b),b[o]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return o.type="throw",o.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},214:e=>{"use strict";e.exports=r},545:e=>{"use strict";e.exports=t},949:t=>{"use strict";t.exports=e}},i={};function a(e){if(i[e])return i[e].exports;var t=i[e]={exports:{}};return n[e](t,t.exports,a),t.exports}return a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(352)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheUxpa2VUb0FycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlUmVzdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlU3ByZWFkLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYWNjb3VudHMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYXBpL2VuZHBvaW50cy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9hdXRoLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3RpY2tlci5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcHRpb25hbC9zZWN1cml0aWVzLWNhY2hlLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvcmUvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvZGF0YS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9oZWFkZXJzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2hlbHBlcnMvdGltZS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3Rva2Vucy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9uZXR3b3JrL2h0dHBzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL29yZGVycy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9xdW90ZXMvZGVmYXVsdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9xdW90ZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJjbG91ZHNjcmFwZXJcIixcImNvbW1vbmpzMlwiOlwiY2xvdWRzY3JhcGVyXCIsXCJhbWRcIjpcImNsb3Vkc2NyYXBlclwiLFwicm9vdFwiOlwiX1wifSIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwibm9kZS1mZXRjaFwiLFwiY29tbW9uanMyXCI6XCJub2RlLWZldGNoXCIsXCJhbWRcIjpcIm5vZGUtZmV0Y2hcIixcInJvb3RcIjpcIl9cIn0iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcInNvdXJjZS1tYXAtc3VwcG9ydFwiLFwiY29tbW9uanMyXCI6XCJzb3VyY2UtbWFwLXN1cHBvcnRcIixcImFtZFwiOlwic291cmNlLW1hcC1zdXBwb3J0XCIsXCJyb290XCI6XCJfXCJ9Iiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwiZ2xvYmFsIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOTQ5X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181NDVfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzIxNF9fIiwiYXJyIiwibGVuIiwibGVuZ3RoIiwiaSIsImFycjIiLCJBcnJheSIsImlzQXJyYXkiLCJhcnJheUxpa2VUb0FycmF5IiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiZ2VuIiwicmVzb2x2ZSIsInJlamVjdCIsIl9uZXh0IiwiX3Rocm93Iiwia2V5IiwiYXJnIiwiaW5mbyIsInZhbHVlIiwiZXJyb3IiLCJkb25lIiwiUHJvbWlzZSIsInRoZW4iLCJmbiIsInNlbGYiLCJ0aGlzIiwiYXJncyIsImFyZ3VtZW50cyIsImFwcGx5IiwiZXJyIiwidW5kZWZpbmVkIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJvYmoiLCJpdGVyIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJmcm9tIiwiX2FyciIsIl9uIiwiX2QiLCJfZSIsIl9zIiwiX2kiLCJuZXh0IiwicHVzaCIsImFycmF5V2l0aEhvbGVzIiwiaXRlcmFibGVUb0FycmF5TGltaXQiLCJ1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIm5vbkl0ZXJhYmxlUmVzdCIsImFycmF5V2l0aG91dEhvbGVzIiwiaXRlcmFibGVUb0FycmF5Iiwibm9uSXRlcmFibGVTcHJlYWQiLCJvIiwibWluTGVuIiwibiIsInRvU3RyaW5nIiwiY2FsbCIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwidGVzdCIsIkFDVElWSVRJRVNfTUFYX0RSQVciLCJBQ1RJVklUSUVTX1RZUEVTX0FMTCIsImh0dHBzV29ya2VyIiwid29ya2VyIiwiaGFuZGxlUmVxdWVzdCIsImVuZHBvaW50cyIsImFjY291bnRzIiwidGZzYSIsImZpbmQiLCJhY2NvdW50Iiwic3RhcnRzV2l0aCIsInJyc3AiLCJjcnlwdG8iLCJwZXJzb25hbCIsImludGVydmFsIiwiYWNjb3VudElkIiwiZmlsdGVycyIsImxpbWl0IiwiRXJyb3IiLCJ0eXBlIiwicmVzdWx0cyIsImFjY291bnRJZHMiLCJqb2luIiwiYm9va21hcmsiLCJyZXNwb25zZSIsImRlZmF1bHRFbmRwb2ludEJlaGF2aW91ciIsIm9uRmFpbHVyZSIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJyZWFzb24iLCJzdGF0dXNNZXNzYWdlIiwiYm9keSIsIm9uU3VjY2VzcyIsIkxPR0lOIiwibWV0aG9kIiwidXJsIiwiYXV0aGVudGljYXRlZCIsInRva2VucyIsImFjY2VzcyIsImhlYWRlcnMiLCJyZWZyZXNoIiwiZXhwaXJlcyIsInBhcnNlSW50IiwiYWNjb3VudEluZm8iLCJSRUZSRVNIIiwiQUNDT1VOVF9JRFMiLCJtYXAiLCJpZCIsIkxJU1RfQUNDT1VOVCIsIk1FIiwiUEVSU09OIiwiSElTVE9SWV9BQ0NPVU5UIiwicGFyYW1ldGVycyIsIjAiLCIxIiwiQUNUSVZJVElFUyIsIjIiLCIzIiwiREVQT1NJVFMiLCJCQU5LX0FDQ09VTlRTIiwiRVhDSEFOR0VfUkFURVMiLCJTRUNVUklUWSIsImRhdGEiLCJFWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUyIsIlNFQ1VSSVRZX0dST1VQUyIsIlNFQ1VSSVRZX0dST1VQIiwiUVVPVEVTX0hJU1RPUlkiLCJQT1NJVElPTlMiLCJPUkRFUlNfQllfUEFHRSIsInRvdGFsIiwib3JkZXJzIiwiQ0FOQ0VMX09SREVSIiwiUExBQ0VfT1JERVIiLCJldmVudCIsImhhbmRsZXIiLCJvbiIsInN0YXRlIiwic3RvcmUiLCJlbWFpbCIsInBhc3N3b3JkIiwibG9naW4iLCJyZWZyZXNoQXV0aGVudGljYXRpb24iLCJzdXBwb3J0ZWRGZWF0dXJlcyIsImRpc2FibGVkIiwiY29uZmlnRW5hYmxlZCIsImZlYXR1cmUiLCJpbmNsdWRlcyIsImNvbmZpZyIsInN1YnN0cmluZyIsInN1cHBvcnRlZCIsImN1dCIsImluZGV4T2YiLCJzcGxpY2UiLCJleGNoYW5nZXMiLCJzeW1ib2wiLCJleGNoYW5nZSIsInNwbGl0Iiwib3RoZXIiLCJjYWNoZSIsInNpemUiLCJNYXAiLCJrZXlzIiwic2V0IiwiZ2V0Iiwic2VjdXJpdHkiLCJyZXN1bHQiLCJUaWNrZXIiLCJmb3JtYXQiLCJ1c2VyVGlja2VyIiwiZXh0ZW5zaXZlIiwidGlja2VyIiwiZmlsdGVyIiwic3RvY2siLCJzZWN1cml0eV90eXBlIiwicHJpbWFyeV9leGNoYW5nZSIsImluc2VydCIsInJlZHVjZSIsIml0ZW0iLCJleHRlcm5hbF9zZWN1cml0eV9ncm91cF9pZCIsImdyb3VwIiwiZ3JvdXBJZCIsInNlY3VyaXR5R3JvdXBzIiwiZ3JvdXBzIiwiY3VzdG9tSGVhZGVycyIsIkhlYWRlcnMiLCJhZGQiLCJhcHBlbmQiLCJyZW1vdmUiLCJjbGVhciIsImZvckVhY2giLCJoZWFkZXIiLCJ2YWx1ZXMiLCJBdXRoZW50aWNhdGlvbiIsIkFjY291bnRzIiwiT3JkZXJzIiwiRGF0YSIsIlF1b3RlcyIsIkh0dHBzV29ya2VyIiwiU2Vzc2lvbiIsImF1dGgiLCJxdW90ZXMiLCJkZWZhdWx0U2Vzc2lvbiIsIkRhdGUiLCJub3ciLCJIVFRQX09LIiwiSFRUUF9DUkVBVEVEIiwiZmluYWxpemVSZXF1ZXN0IiwiZW5kcG9pbnQiLCJwYXJhbXMiLCJpbmRleCIsInBhcmFtZXRlck5hbWUiLCJyZXBsYWNlIiwicXVlcnlQYXJhbU5hbWUiLCJxdWVyeVBhcmFtIiwicGF5bG9hZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJUb2tlbnMiLCJldmVudHMiLCJvdHAiLCJpbXBsaWNpdFRva2VuUmVmcmVzaCIsIkF1dGhvcml6YXRpb24iLCJjbG91ZHNjcmFwZXIiLCJjYWxsYmFjayIsInVudXNlZCIsInJlcyIsInBhcnNlIiwidGFsayIsInJlZnJlc2hfdG9rZW4iLCJleHBpcmVkIiwiaXNDYW5hZGlhblNlY3VyaXR5IiwiZmlsdGVyZWRPcmRlcnMiLCJsaXN0IiwiZmlsdGVyZWQiLCJvcmRlciIsInNlY3VyaXR5X2lkIiwid2Vha0VxdWFscyIsInBhZ2VOdW0iLCJvZmZzZXQiLCJwYWdlIiwicGFnZXMiLCJNYXRoIiwiY2VpbCIsInRhc2tzIiwiYWxsIiwib3JkZXJJZCIsInBlbmRpbmciLCJjYW5jZWwiLCJvcmRlcl9pZCIsInF1YW50aXR5IiwiZ2V0U2VjdXJpdHkiLCJkZXRhaWxzIiwibGltaXRfcHJpY2UiLCJxdW90ZSIsImFtb3VudCIsIm9yZGVyX3R5cGUiLCJvcmRlcl9zdWJfdHlwZSIsInRpbWVfaW5fZm9yY2UiLCJhY2NvdW50X2lkIiwic3RvcCIsInN0b3BfcHJpY2UiLCJtYXJrZXRfdmFsdWUiLCJkZWZhdWx0UHJvdmlkZXIiLCJUcmFkZVF1b3RlcyIsInByb3ZpZGVycyIsInByb3ZpZGVyIiwicnVudGltZSIsIk9wIiwiaGFzT3duIiwiaGFzT3duUHJvcGVydHkiLCIkU3ltYm9sIiwiaXRlcmF0b3JTeW1ib2wiLCJhc3luY0l0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsInRvU3RyaW5nVGFnU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ3cmFwIiwiaW5uZXJGbiIsIm91dGVyRm4iLCJ0cnlMb2NzTGlzdCIsInByb3RvR2VuZXJhdG9yIiwiR2VuZXJhdG9yIiwiZ2VuZXJhdG9yIiwiY3JlYXRlIiwiY29udGV4dCIsIkNvbnRleHQiLCJfaW52b2tlIiwiR2VuU3RhdGVTdXNwZW5kZWRTdGFydCIsIkdlblN0YXRlRXhlY3V0aW5nIiwiR2VuU3RhdGVDb21wbGV0ZWQiLCJkb25lUmVzdWx0IiwiZGVsZWdhdGUiLCJkZWxlZ2F0ZVJlc3VsdCIsIm1heWJlSW52b2tlRGVsZWdhdGUiLCJDb250aW51ZVNlbnRpbmVsIiwic2VudCIsIl9zZW50IiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJhYnJ1cHQiLCJyZWNvcmQiLCJ0cnlDYXRjaCIsIkdlblN0YXRlU3VzcGVuZGVkWWllbGQiLCJtYWtlSW52b2tlTWV0aG9kIiwiR2VuZXJhdG9yRnVuY3Rpb24iLCJHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSIsIkl0ZXJhdG9yUHJvdG90eXBlIiwiZ2V0UHJvdG8iLCJnZXRQcm90b3R5cGVPZiIsIk5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlIiwiR3AiLCJkZWZpbmVJdGVyYXRvck1ldGhvZHMiLCJBc3luY0l0ZXJhdG9yIiwiUHJvbWlzZUltcGwiLCJpbnZva2UiLCJfX2F3YWl0IiwidW53cmFwcGVkIiwicHJldmlvdXNQcm9taXNlIiwiY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmciLCJyZXN1bHROYW1lIiwibmV4dExvYyIsInB1c2hUcnlFbnRyeSIsImxvY3MiLCJlbnRyeSIsInRyeUxvYyIsImNhdGNoTG9jIiwiZmluYWxseUxvYyIsImFmdGVyTG9jIiwidHJ5RW50cmllcyIsInJlc2V0VHJ5RW50cnkiLCJjb21wbGV0aW9uIiwicmVzZXQiLCJpdGVyYWJsZSIsIml0ZXJhdG9yTWV0aG9kIiwiaXNOYU4iLCJkaXNwbGF5TmFtZSIsImlzR2VuZXJhdG9yRnVuY3Rpb24iLCJnZW5GdW4iLCJjdG9yIiwibWFyayIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiYXdyYXAiLCJhc3luYyIsIm9iamVjdCIsInJldmVyc2UiLCJwb3AiLCJza2lwVGVtcFJlc2V0IiwicHJldiIsImNoYXJBdCIsInJvb3RSZWNvcmQiLCJydmFsIiwiZXhjZXB0aW9uIiwiaGFuZGxlIiwibG9jIiwiY2F1Z2h0IiwiaGFzQ2F0Y2giLCJoYXNGaW5hbGx5IiwiZmluYWxseUVudHJ5IiwiY29tcGxldGUiLCJmaW5pc2giLCJ0aHJvd24iLCJkZWxlZ2F0ZVlpZWxkIiwicmVnZW5lcmF0b3JSdW50aW1lIiwiYWNjaWRlbnRhbFN0cmljdE1vZGUiLCJGdW5jdGlvbiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwicHJvcCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELEVBQVFHLFFBQVEsc0JBQXVCQSxRQUFRLGNBQWVBLFFBQVEsaUJBQzlELG1CQUFYQyxRQUF5QkEsT0FBT0MsSUFDOUNELE9BQU8sQ0FBQyxxQkFBc0IsYUFBYyxnQkFBaUJKLEdBQ25DLGlCQUFaQyxRQUNkQSxRQUFRLGVBQWlCRCxFQUFRRyxRQUFRLHNCQUF1QkEsUUFBUSxjQUFlQSxRQUFRLGlCQUUvRkosRUFBSyxlQUFpQkMsRUFBUUQsRUFBUSxFQUFHQSxFQUFRLEVBQUdBLEVBQVEsR0FSOUQsQ0FTR08sUUFBUSxTQUFTQyxFQUFrQ0MsRUFBa0NDLEdBQ3hGLE0scUJDQUFQLEVBQU9ELFFBVlAsU0FBMkJTLEVBQUtDLElBQ25CLE1BQVBBLEdBQWVBLEVBQU1ELEVBQUlFLFVBQVFELEVBQU1ELEVBQUlFLFFBRS9DLElBQUssSUFBSUMsRUFBSSxFQUFHQyxFQUFPLElBQUlDLE1BQU1KLEdBQU1FLEVBQUlGLEVBQUtFLElBQzlDQyxFQUFLRCxHQUFLSCxFQUFJRyxHQUdoQixPQUFPQyxJLFFDSFRaLEVBQU9ELFFBSlAsU0FBeUJTLEdBQ3ZCLEdBQUlLLE1BQU1DLFFBQVFOLEdBQU0sT0FBT0EsSSxjQ0RqQyxJQUFJTyxFQUFtQixFQUFRLEtBTS9CZixFQUFPRCxRQUpQLFNBQTRCUyxHQUMxQixHQUFJSyxNQUFNQyxRQUFRTixHQUFNLE9B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QU9ELFFBQVVNLElDQ2I4WCxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsR0FBR0YsRUFBeUJFLEdBQzNCLE9BQU9GLEVBQXlCRSxHQUFVdFksUUFHM0MsSUFBSUMsRUFBU21ZLEVBQXlCRSxHQUFZLENBR2pEdFksUUFBUyxJQU9WLE9BSEF1WSxFQUFvQkQsR0FBVXJZLEVBQVFBLEVBQU9ELFFBQVNxWSxHQUcvQ3BZLEVBQU9ELFFDakJmLE9DRkFxWSxFQUFvQnpULEVBQUszRSxJQUN4QixJQUFJdVksRUFBU3ZZLEdBQVVBLEVBQU93WSxXQUM3QixJQUFNeFksRUFBZ0IsUUFDdEIsSUFBTUEsRUFFUCxPQURBb1ksRUFBb0JLLEVBQUVGLEVBQVEsQ0FBRUcsRUFBR0gsSUFDNUJBLEdDTFJILEVBQW9CSyxFQUFJLENBQUMxWSxFQUFTNFksS0FDakMsSUFBSSxJQUFJclgsS0FBT3FYLEVBQ1hQLEVBQW9CM1QsRUFBRWtVLEVBQVlyWCxLQUFTOFcsRUFBb0IzVCxFQUFFMUUsRUFBU3VCLElBQzVFMEIsT0FBT0MsZUFBZWxELEVBQVN1QixFQUFLLENBQUV1QixZQUFZLEVBQU00SSxJQUFLa04sRUFBV3JYLE1DSjNFOFcsRUFBb0IzVCxFQUFJLENBQUNwQixFQUFLdVYsSUFBUzVWLE9BQU9JLFVBQVUrTyxlQUFldE4sS0FBS3hCLEVBQUt1VixHSEcxRVIsRUFBb0IsTSIsImZpbGUiOiJkaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwic291cmNlLW1hcC1zdXBwb3J0XCIpLCByZXF1aXJlKFwibm9kZS1mZXRjaFwiKSwgcmVxdWlyZShcImNsb3Vkc2NyYXBlclwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJzb3VyY2UtbWFwLXN1cHBvcnRcIiwgXCJub2RlLWZldGNoXCIsIFwiY2xvdWRzY3JhcGVyXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIndzdHJhZGUtYXBpXCJdID0gZmFjdG9yeShyZXF1aXJlKFwic291cmNlLW1hcC1zdXBwb3J0XCIpLCByZXF1aXJlKFwibm9kZS1mZXRjaFwiKSwgcmVxdWlyZShcImNsb3Vkc2NyYXBlclwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wid3N0cmFkZS1hcGlcIl0gPSBmYWN0b3J5KHJvb3RbXCJfXCJdLCByb290W1wiX1wiXSwgcm9vdFtcIl9cIl0pO1xufSkoZ2xvYmFsLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX185NDlfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNTQ1X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzIxNF9fKSB7XG5yZXR1cm4gIiwiZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHtcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYXJyMltpXSA9IGFycltpXTtcbiAgfVxuXG4gIHJldHVybiBhcnIyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hcnJheUxpa2VUb0FycmF5OyIsImZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlXaXRoSG9sZXM7IiwidmFyIGFycmF5TGlrZVRvQXJyYXkgPSByZXF1aXJlKFwiLi9hcnJheUxpa2VUb0FycmF5XCIpO1xuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KGFycik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FycmF5V2l0aG91dEhvbGVzOyIsImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcblxuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hc3luY1RvR2VuZXJhdG9yOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NsYXNzQ2FsbENoZWNrOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY3JlYXRlQ2xhc3M7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2RlZmluZVByb3BlcnR5OyIsImZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikge1xuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaXRlcmFibGVUb0FycmF5OyIsImZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47XG4gIHZhciBfYXJyID0gW107XG4gIHZhciBfbiA9IHRydWU7XG4gIHZhciBfZCA9IGZhbHNlO1xuICB2YXIgX2UgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XG4gICAgICBfYXJyLnB1c2goX3MudmFsdWUpO1xuXG4gICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZCA9IHRydWU7XG4gICAgX2UgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kKSB0aHJvdyBfZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gX2Fycjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaXRlcmFibGVUb0FycmF5TGltaXQ7IiwiZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfbm9uSXRlcmFibGVSZXN0OyIsImZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX25vbkl0ZXJhYmxlU3ByZWFkOyIsInZhciBhcnJheVdpdGhIb2xlcyA9IHJlcXVpcmUoXCIuL2FycmF5V2l0aEhvbGVzXCIpO1xuXG52YXIgaXRlcmFibGVUb0FycmF5TGltaXQgPSByZXF1aXJlKFwiLi9pdGVyYWJsZVRvQXJyYXlMaW1pdFwiKTtcblxudmFyIHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5ID0gcmVxdWlyZShcIi4vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXlcIik7XG5cbnZhciBub25JdGVyYWJsZVJlc3QgPSByZXF1aXJlKFwiLi9ub25JdGVyYWJsZVJlc3RcIik7XG5cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkge1xuICByZXR1cm4gYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgbm9uSXRlcmFibGVSZXN0KCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3NsaWNlZFRvQXJyYXk7IiwidmFyIGFycmF5V2l0aG91dEhvbGVzID0gcmVxdWlyZShcIi4vYXJyYXlXaXRob3V0SG9sZXNcIik7XG5cbnZhciBpdGVyYWJsZVRvQXJyYXkgPSByZXF1aXJlKFwiLi9pdGVyYWJsZVRvQXJyYXlcIik7XG5cbnZhciB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSA9IHJlcXVpcmUoXCIuL3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5XCIpO1xuXG52YXIgbm9uSXRlcmFibGVTcHJlYWQgPSByZXF1aXJlKFwiLi9ub25JdGVyYWJsZVNwcmVhZFwiKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikge1xuICByZXR1cm4gYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IG5vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3RvQ29uc3VtYWJsZUFycmF5OyIsInZhciBhcnJheUxpa2VUb0FycmF5ID0gcmVxdWlyZShcIi4vYXJyYXlMaWtlVG9BcnJheVwiKTtcblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikge1xuICBpZiAoIW8pIHJldHVybjtcbiAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXk7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZVwiKTtcbiIsImltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi9hcGkvZW5kcG9pbnRzJztcblxuLy8gVGhlIG1heGltdW11bSBudW1iZXIgb2YgYWN0aXZpdGllcyB3ZSBjYW4gcHVsbCBpbiBvbmUgZ28uXG5jb25zdCBBQ1RJVklUSUVTX01BWF9EUkFXID0gOTk7XG4vLyBTdXBwb3J0ZWQgYWN0aXZpdHkgdHlwZXNcbmNvbnN0IEFDVElWSVRJRVNfVFlQRVNfQUxMID0gW1xuICAnc2VsbCcsXG4gICdkZXBvc2l0JyxcbiAgJ3dpdGhkcmF3YWwnLFxuICAnZGl2aWRlbmQnLFxuICAnaW5zdGl0dXRpb25hbF90cmFuc2ZlcicsXG4gICdpbnRlcm5hbF90cmFuc2ZlcicsXG4gICdyZWZ1bmQnLFxuICAncmVmZXJyYWxfYm9udXMnLFxuICAnYWZmaWxpYXRlJyxcbiAgJ2J1eScsXG5dO1xuXG5jbGFzcyBBY2NvdW50cyB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEFjY291bnQgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aCBhbiBIdHRwcyB3b3JrZXIgc3RhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gaHR0cHNXb3JrZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKGh0dHBzV29ya2VyKSB7XG4gICAgdGhpcy53b3JrZXIgPSBodHRwc1dvcmtlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYWxsIGFjY291bnQgaWRzIG9wZW4gdW5kZXIgdGhpcyBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIGFzeW5jIGFsbCgpIHtcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkFDQ09VTlRfSURTLCB7fSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGZzYTogYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5zdGFydHNXaXRoKCd0ZnNhJykpLFxuICAgICAgcnJzcDogYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5zdGFydHNXaXRoKCdycnNwJykpLFxuICAgICAgY3J5cHRvOiBhY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXJ0c1dpdGgoJ25vbi1yZWdpc3RlcmVkLWNyeXB0bycpKSxcbiAgICAgIHBlcnNvbmFsOiBhY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXJ0c1dpdGgoJ25vbi1yZWdpc3RlcmVkJykgJiYgIWFjY291bnQuc3RhcnRzV2l0aCgnbm9uLXJlZ2lzdGVyZWQtY3J5cHRvJykpLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgZGV0YWlscyBhYm91dCB5b3VyIG9wZW4gYWNjb3VudHMsIGxpa2UgYWNjb3VudCB0eXBlLCBidXlpbmcgcG93ZXIsXG4gICAqIGN1cnJlbnQgYmFsYW5jZSwgYW5kIG1vcmUuXG4gICAqL1xuICBhc3luYyBkYXRhKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5MSVNUX0FDQ09VTlQsIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgc29tZSBzdXJmYWNlIGluZm9ybWF0aW9uIGFib3V0IHlvdSBsaWtlIHlvdXIgbmFtZSBhbmQgZW1haWwsIGFjY291bnRcbiAgICogc2lnbmF0dXJlcywgYW5kIG90aGVyIG1ldGFkYXRhLlxuICAgKi9cbiAgYXN5bmMgbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLk1FLCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogRGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgeW91IHRoYXQgeW91IHByb3ZpZGVkIG9uIHNpZ251cCwgbGlrZSByZXNpZGVudGlhbCBhbmRcbiAgICogbWFpbGluZyBhZGRyZXNzZXMsIGVtcGxveW1lbnQsIHBob25lIG51bWJlcnMsIGFuZCBzbyBvbi5cbiAgICovXG4gIGFzeW5jIHBlcnNvbigpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUEVSU09OLCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogUXVlcnkgdGhlIGhpc3Rvcnkgb2YgdGhlIGFjY291bnQgd2l0aGluIGEgY2VydGFpbiB0aW1lIGludGVydmFsLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGludGVydmFsIFRoZSB0aW1lIGludGVydmFsIGZvciB0aGUgaGlzdG9yeSBxdWVyeVxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBxdWVyeVxuICAgKi9cbiAgYXN5bmMgaGlzdG9yeShpbnRlcnZhbCwgYWNjb3VudElkKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkhJU1RPUllfQUNDT1VOVCwgeyBpbnRlcnZhbCwgYWNjb3VudElkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgYWN0aXZpdGllcyBvbiB5b3VyIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LiBZb3UgY2FuIGxpbWl0IG51bWJlciBvZiBhY3Rpdml0aWVzXG4gICAqIHRvIGZldGNoIG9yIHJlZmluZSB3aGF0IGFjdGl2aXRpZXMgYXJlIGZldGNoZWQgYmFzZWQgb24gYWN0aXZpdHkgdHlwZSAoZS5nLiwgYnV5LCBzZWxsKSxcbiAgICogYWNjb3VudCAoZS5nLiwgdGZzYSwgcnJzcCkuXG4gICAqL1xuICBhc3luYyBhY3Rpdml0aWVzKGZpbHRlcnMgPSB7fSkge1xuICAgIC8vIFRoZSBtYXhpbXVtIGRyYXcgcGVyIEFQSSBjYWxsIGlzIDk5LiBJZiBpdCdzIGhpZ2hlciwgd2UgbXVzdCBhYm9ydC5cbiAgICBpZiAoZmlsdGVycz8ubGltaXQgJiYgZmlsdGVycy5saW1pdCA+IEFDVElWSVRJRVNfTUFYX0RSQVcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZmlsdGVycy5saW1pdCBjYW4gbm90IGV4Y2VlZCA5OSEgTGVhdmUgZmlsdGVycy5saW1pdCB1bmRlZmluZWQgaWYgeW91IHdhbnQgdG8gcmV0cmlldmUgYWxsLicpO1xuICAgIH1cblxuICAgIC8vIFRlbGwgdGhlIHVzZXIgdGhhdCBmaWx0ZXIuYWNjb3VudHMgbXVzdCBiZSBhbiBlcnJvclxuICAgIGlmIChmaWx0ZXJzPy5hY2NvdW50cyAmJiAhQXJyYXkuaXNBcnJheShmaWx0ZXJzLmFjY291bnRzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmaWx0ZXJzLmFjY291bnRzIG11c3QgYmUgYW4gYXJyYXkhJyk7XG4gICAgfVxuXG4gICAgLy8gVGVsbCB0aGUgdXNlciB0aGF0IGZpbHRlci50eXBlIG11c3QgYmUgYW4gZXJyb3JcbiAgICBpZiAoZmlsdGVycz8udHlwZSAmJiAhQXJyYXkuaXNBcnJheShmaWx0ZXJzLnR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZpbHRlcnMudHlwZSBtdXN0IGJlIGFuIGFycmF5IScpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcblxuICAgIC8vIERyYXcgdGhlIGZpcnN0IHNldCBvZiBhY3Rpdml0aWVzXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuQUNUSVZJVElFUywge1xuICAgICAgbGltaXQ6IGZpbHRlcnM/LmxpbWl0ID8/IEFDVElWSVRJRVNfTUFYX0RSQVcsXG4gICAgICBhY2NvdW50SWRzOiBmaWx0ZXJzPy5hY2NvdW50cz8uam9pbigpID8/ICcnLFxuICAgICAgYm9va21hcms6ICcnLFxuICAgICAgdHlwZTogZmlsdGVycz8udHlwZSA/PyBBQ1RJVklUSUVTX1RZUEVTX0FMTCxcbiAgICB9KTtcbiAgICByZXN1bHRzLnB1c2goLi4ucmVzcG9uc2UucmVzdWx0cyk7XG5cbiAgICAvKlxuICAgICAqIFRvIGdldCBhbGwgYWN0aXZpdGllcywgd2Ugd2lsbCBoYXZlIHRvIGRyYXcgdGhlIG1heGltdW0gbnVtYmVyXG4gICAgICogb2YgYWN0aXZpdGllcyBwZXIgQVBJIGNhbGwgdW50aWwgd2UgYXJlIGRvbmUgKGkuZS4sIHdoZW4gd2VcbiAgICAgKiByZWNlaXZlIGEgbnVtYmVyIG9mIGFjdGl2aXRpZXMgbGVzcyB0aGFuIHRoZSBtYXhpbXVtIHBlciBkcmF3KVxuICAgICAqL1xuICAgIGlmICghZmlsdGVycz8ubGltaXQpIHtcbiAgICAgIC8qXG4gICAgICAgKiBUaGUgbm8tYXdhaXQtaW4tbG9vcCBydWxlIGlzIGJlaW5nIGRpc2FibGVkIGZvciB0aGlzIGNhc2UgYmVjYXVzZVxuICAgICAgICogZXZlcnkgbG9vcCBmZWVkcyBiYWNrIGludG8gdGhlIG5leHQgb25lIHdpdGggdGhlIGJvb2ttYXJrIChpLmUuLCB0aGV5XG4gICAgICAgKiBhcmUgbm90IGluZGVwZW5kZW50IGFuZCBtdXN0IHJ1biBzZXF1ZW50aWFsbHkpLlxuICAgICAgICovXG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1hd2FpdC1pbi1sb29wICovXG4gICAgICB3aGlsZSAocmVzdWx0cy5sZW5ndGggJSBBQ1RJVklUSUVTX01BWF9EUkFXID09PSAwKSB7XG4gICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuQUNUSVZJVElFUywge1xuICAgICAgICAgIGxpbWl0OiBBQ1RJVklUSUVTX01BWF9EUkFXLFxuICAgICAgICAgIGFjY291bnRJZHM6IGZpbHRlcnM/LmFjY291bnRzPy5qb2luKCkgPz8gJycsXG4gICAgICAgICAgYm9va21hcms6IHJlc3BvbnNlLmJvb2ttYXJrLFxuICAgICAgICAgIHR5cGU6IGZpbHRlcnM/LnR5cGUgPz8gQUNUSVZJVElFU19UWVBFU19BTEwsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVzY2FwZSB0aGUgbG9vcCBpZiB0aGUgcmV0dXJuZWQgcmVzdWx0cyBpcyBlbXB0eS4gVGhpcyBtZWFucyB3ZSBoYXZlIHJlYWNoZWQgdGhlIGVuZC5cbiAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHRzLnB1c2goLi4ucmVzcG9uc2UucmVzdWx0cyk7XG4gICAgICB9XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWF3YWl0LWluLWxvb3AgKi9cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYWxsIGJhbmsgYWNjb3VudHMgbGlua2VkIHRvIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIGFzeW5jIGdldEJhbmtBY2NvdW50cygpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuQkFOS19BQ0NPVU5UUywge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdyYWIgYWxsIGRlcG9zaXQgcmVjb3JkcyBvbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnQuXG4gICAqL1xuICBhc3luYyBkZXBvc2l0cygpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuREVQT1NJVFMsIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0cyBhbGwgcG9zaXRpb25zIGluIHRoZSBzcGVjaWZpZWQgdHJhZGluZyBhY2NvdW50IHVuZGVyIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqL1xuICBhc3luYyBwb3NpdGlvbnMoYWNjb3VudElkKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBPU0lUSU9OUywgeyBhY2NvdW50SWQgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQWNjb3VudHM7XG4iLCJjb25zdCBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIgPSB7XG5cbiAgLy8gRGVmYXVsdCBmYWlsdXJlIG1ldGhvZCBmb3IgYWxsIGVuZHBvaW50IGNhbGxzXG4gIG9uRmFpbHVyZTogKHJlc3BvbnNlKSA9PiAoe1xuICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzQ29kZSxcbiAgICByZWFzb246IHJlc3BvbnNlLnN0YXR1c01lc3NhZ2UsXG4gICAgYm9keTogcmVzcG9uc2UuYm9keSxcbiAgfSksXG5cbiAgLy8gRGVmYXVsdCBzdWNjZXNzIG1ldGhvZCBmb3IgYWxsIGVuZHBvaW50IGNhbGxzXG4gIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ib2R5LFxufTtcblxuY29uc3QgV2VhbHRoc2ltcGxlVHJhZGVFbmRwb2ludHMgPSB7XG5cbiAgLypcbiAgICogVGhlIExPR0lOIGVuZHBvaW50IGludGlhbGl6ZXMgYSBuZXcgc2Vzc2lvbiBmb3IgdGhlIGdpdmVuIGVtYWlsIGFuZFxuICAgKiBwYXNzd29yZCBzZXQuIElmIHRoZSBsb2dpbiBpcyBzdWNjZXNzZnVsLCBhY2Nlc3MgYW5kIHJlZnJlc2ggdG9rZW5zXG4gICAqIGFyZSByZXR1cm5lZCBpbiB0aGUgaGVhZGVycy4gVGhlIGFjY2VzcyB0b2tlbiBpcyB0aGUga2V5IGZvciBpbnZva2luZ1xuICAgKiBhbGwgb3RoZXIgZW5kIHBvaW50cy5cbiAgICovXG4gIExPR0lOOiB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYXV0aC9sb2dpbicsXG4gICAgYXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+ICh7XG4gICAgICB0b2tlbnM6IHtcbiAgICAgICAgYWNjZXNzOiByZXNwb25zZS5oZWFkZXJzWyd4LWFjY2Vzcy10b2tlbiddLFxuICAgICAgICByZWZyZXNoOiByZXNwb25zZS5oZWFkZXJzWyd4LXJlZnJlc2gtdG9rZW4nXSxcbiAgICAgICAgZXhwaXJlczogcGFyc2VJbnQocmVzcG9uc2UuaGVhZGVyc1sneC1hY2Nlc3MtdG9rZW4tZXhwaXJlcyddLCAxMCksXG4gICAgICB9LFxuXG4gICAgICBhY2NvdW50SW5mbzogcmVzcG9uc2UuYm9keSxcbiAgICB9KSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogR2VuZXJhdGVzIGEgbmV3IHNldCBvZiBhY2Nlc3MgYW5kIHJlZnJlc2ggdG9rZW5zLlxuICAgKi9cbiAgUkVGUkVTSDoge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2F1dGgvcmVmcmVzaCcsXG4gICAgYXV0aGVudGljYXRlZDogZmFsc2UsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+ICh7XG4gICAgICB0b2tlbnM6IHtcbiAgICAgICAgYWNjZXNzOiByZXNwb25zZS5oZWFkZXJzWyd4LWFjY2Vzcy10b2tlbiddLFxuICAgICAgICByZWZyZXNoOiByZXNwb25zZS5oZWFkZXJzWyd4LXJlZnJlc2gtdG9rZW4nXSxcbiAgICAgICAgZXhwaXJlczogcGFyc2VJbnQocmVzcG9uc2UuaGVhZGVyc1sneC1hY2Nlc3MtdG9rZW4tZXhwaXJlcyddLCAxMCksXG4gICAgICB9LFxuICAgIH0pLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHcmFicyBhbGwgYWNjb3VudCBpZHMgaW4gdGhpcyBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIEFDQ09VTlRfSURTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2xpc3QnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5ib2R5O1xuXG4gICAgICAvLyBDb2xsZWN0IGFsbCBhY2NvdW50IGlkcyByZWdpc3RlcmVkIHVuZGVyIHRoaXMgV2VhbHRoc2ltcGxlIFRyYWRlIEFjY291bnRcbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKChhY2NvdW50KSA9PiBhY2NvdW50LmlkKTtcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBUaGUgTElTVF9BQ0NPVU5UIGVuZHBvaW50IHJldHJpZXZlcyBnZW5lcmFsIG1ldGFkYXRhIG9mIHRoZVxuICAgKiBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudCwgaW5jbHVkaW5nIGJhbGFuY2VzLCBhY2NvdW50IGlkLCBhbmRcbiAgICogbW9yZS5cbiAgICovXG4gIExJU1RfQUNDT1VOVDoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYWNjb3VudC9saXN0JyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ib2R5LnJlc3VsdHMsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBNRSBlbmRwb2ludCByZXRyaWV2ZXMgc29tZSBzdXJmYWNlIGluZm9ybWF0aW9uIGFib3V0IHlvdSBsaWtlXG4gICAqIHlvdXIgbmFtZSBhbmQgZW1haWwuXG4gICAqL1xuICBNRToge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vbWUnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBUaGUgUEVSU09OIGVuZHBvaW50IHJldHJpZXZlcyBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCB5b3UgdGhhdFxuICAgKiB5b3UgcHJvdmlkZWQgb24gc2lnbnVwLCBsaWtlIHJlc2lkZW50aWFsIGFuZCBtYWlsaW5nIGFkZHJlc3NlcyxcbiAgICogZW1wbG95bWVudCwgcGhvbmUgbnVtYmVycywgYW5kIHNvIG9uLlxuICAgKi9cbiAgUEVSU09OOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9wZXJzb24nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBUaGUgSElTVE9SWV9BQ0NPVU5UIGVuZHBvaW50IHByb3ZpZGVzIGhpc3RvcmljYWwgc25hcHNob3RzIG9mIHRoZVxuICAgKiBXZWFsdGhzaW1wbGUgYWNjb3VudCBmb3IgYSBzcGVjaWZpZWQgdGltZWZyYW1lLlxuICAgKi9cbiAgSElTVE9SWV9BQ0NPVU5UOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2hpc3RvcnkvezB9P2FjY291bnRfaWQ9ezF9JyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdpbnRlcnZhbCcsXG4gICAgICAxOiAnYWNjb3VudElkJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uU3VjY2VzcyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogUHJvdmlkZXMgdGhlIG1vc3QgcmVjZW50IDIwIGFjdGl2aXRpZXMgKGRlcG9zaXRzLCBkaXZpZGVuZHMsIG9yZGVycywgZXRjKSBvbiB0aGUgV2VhbHRoc2ltcGxlXG4gICAqIFRyYWRlIGFjY291bnQuXG4gICAqL1xuICBBQ1RJVklUSUVTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2FjdGl2aXRpZXM/bGltaXQ9ezB9JmFjY291bnRfaWRzPXsxfSZbMl0mYm9va21hcms9ezN9JyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdsaW1pdCcsXG4gICAgICAxOiAnYWNjb3VudElkcycsXG4gICAgICAyOiAndHlwZScsXG4gICAgICAzOiAnYm9va21hcmsnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBBbGwgZGVwb3NpdHMgdW5kZXIgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqL1xuICBERVBPU0lUUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vZGVwb3NpdHMnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJvZHkucmVzdWx0cyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogQWxsIGxpbmtlZCBiYW5rIGFjY291bnRzIHVuZGVyIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgQkFOS19BQ0NPVU5UUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYmFuay1hY2NvdW50cycsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYm9keS5yZXN1bHRzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBDdXJyZW50IFdlYWx0aHNpbXBsZSBUcmFkZSBVU0QvQ0FEIGV4Y2hhbmdlIHJhdGVzXG4gICAqL1xuICBFWENIQU5HRV9SQVRFUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vZm9yZXgnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHcmFicyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc2VjdXJpdHkgcmVzZW1ibGVkIGJ5IHRoZSB0aWNrZXIuXG4gICAqL1xuICBTRUNVUklUWToge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vc2VjdXJpdGllcz9xdWVyeT17MH0nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ3RpY2tlcicsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmJvZHk7XG5cbiAgICAgIGlmIChkYXRhLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU2VjdXJpdHkgZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cztcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBGZXRjaGVzIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IGEgc2VjdXJpdHkgdXNpbmcgaXRzIHVuaXF1ZVxuICAgKiBzZWN1cml0eSBpZGVudGlmaWVyLiBNYXJrZXQgcXVvdGUsIGJpZCBhbmQgYXNrIHNpemUsIGFuZCBvdGhlciBpbmZvcm1hdGlvblxuICAgKiBhcmUgcmV0dXJuZWQuXG4gICAqL1xuICBFWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vc2VjdXJpdGllcy97MH0nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2lkJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uU3VjY2VzcyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogUHJvdmlkZXMgYSBjb21wcmVoZW5zaXZlIGxpc3Qgb24gYWxsIHNlY3VyaXR5IGdyb3VwcyBhdmFpbGFibGVcbiAgICogb24gdGhlIHBsYXRmb3JtLlxuICAgKi9cbiAgU0VDVVJJVFlfR1JPVVBTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9zZWN1cml0eS1ncm91cHM/bGltaXQ9OTknLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJvZHkucmVzdWx0cyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogUmV0cmlldmVzIGFsbCBzZWN1cml0aWVpcyBhc3NvY2lhdGVkIHdpdGggdGhlIHNlY3VyaXR5IGdyb3VwIGlkLlxuICAgKi9cbiAgU0VDVVJJVFlfR1JPVVA6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3NlY3VyaXR5LWdyb3Vwcy97MH0vc2VjdXJpdGllcycsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnZ3JvdXBJZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYm9keS5yZXN1bHRzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBGZXRjaGVzIGhpc3RvcmljYWwgcXVvdGVzIGZvciBhIHNlY3VyaXR5IGluIHRoZSBzcGVjaWZpZWQgaW50ZXJ2YWwuXG4gICAqL1xuICBRVU9URVNfSElTVE9SWToge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vc2VjdXJpdGllcy97MH0vaGlzdG9yaWNhbF9xdW90ZXMvezF9P21pYz1YTkFTJyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdpZCcsXG4gICAgICAxOiAnaW50ZXJ2YWwnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBMaXN0cyBhbGwgcG9zaXRpb25zIHVuZGVyIGEgdHJhZGluZyBhY2NvdW50LlxuICAgKi9cbiAgUE9TSVRJT05TOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L3Bvc2l0aW9ucz9hY2NvdW50X2lkPXswfScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnYWNjb3VudElkJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ib2R5LnJlc3VsdHMsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEdyYWIgYSBwYWdlIG9mIG9yZGVycyAoMjAgb3JkZXJzKS5cbiAgICovXG4gIE9SREVSU19CWV9QQUdFOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9vcmRlcnM/b2Zmc2V0PXswfSZhY2NvdW50X2lkPXsxfScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnb2Zmc2V0JyxcbiAgICAgIDE6ICdhY2NvdW50SWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5ib2R5O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG90YWw6IGRhdGEudG90YWwsXG4gICAgICAgIG9yZGVyczogZGF0YS5yZXN1bHRzLFxuICAgICAgfTtcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBDYW5jZWxzIGEgc3BlY2lmaWMgb3JkZXIgYnkgaXRzIGlkLlxuICAgKi9cbiAgQ0FOQ0VMX09SREVSOiB7XG4gICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9vcmRlcnMvezB9JyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdvcmRlcklkJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uU3VjY2VzcyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogUGxhY2VzIGFuIG9yZGVyIGZvciBhIHNlY3VyaXR5LlxuICAgKi9cbiAgUExBQ0VfT1JERVI6IHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9vcmRlcnMnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFdlYWx0aHNpbXBsZVRyYWRlRW5kcG9pbnRzO1xuIiwiY2xhc3MgQXV0aGVudGljYXRpb24ge1xuICAvKipcbiAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgQXV0aGVudGljYXRpb24gY2xhc3NzIGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICogcHJvdmlkZWQgdG9rZW5zIGFuZCBodHRwcyB3b3JrZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gaHR0cHNXb3JrZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKGh0dHBzV29ya2VyKSB7XG4gICAgdGhpcy53b3JrZXIgPSBodHRwc1dvcmtlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIHJ1biBvbiBhIGNlcnRhaW4gZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnQgVGhlIHRyaWdnZXIgZm9yIHRoZSBmdW5jdGlvblxuICAgKiBAcGFyYW0geyp9IGhhbmRsZXIgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAqL1xuICBvbihldmVudCwgaGFuZGxlcikge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5vbihldmVudCwgaGFuZGxlcik7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgYXV0aCBtb2R1bGUgd2l0aCBhbiBleGlzdGluZyBzdGF0ZSBvZiB0b2tlbnMuXG4gICAqIFRoZSBzdGF0ZSBwcm92aWRlZCBzaG91bGQgY29udGFpbiBhY2Nlc3MsIHJlZnJlc2gsIGFuZCBleHBpcmVzIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gc3RhdGUgUHJlLWV4aXN0aW5nIGF1dGhlbnRpY2F0aW9uIHN0YXRlXG4gICAqL1xuICB1c2Uoc3RhdGUpIHtcbiAgICB0aGlzLndvcmtlci50b2tlbnMuc3RvcmUoc3RhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNuYXBzaG90IG9mIHRoZSBjdXJyZW50IGF1dGhlbnRpY2F0aW9uIHRva2Vucy5cbiAgICovXG4gIHRva2VucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWNjZXNzOiB0aGlzLndvcmtlci50b2tlbnMuYWNjZXNzLFxuICAgICAgcmVmcmVzaDogdGhpcy53b3JrZXIudG9rZW5zLnJlZnJlc2gsXG4gICAgICBleHBpcmVzOiB0aGlzLndvcmtlci50b2tlbnMuZXhwaXJlcyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dGVtcHRzIHRvIGVzdGFibGlzaCBhIHNlc3Npb24gZm9yIHRoZSBwcm92aWRlZCBlbWFpbCBhbmQgcGFzc3dvcmQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZW1haWwgZW1haWxlZCByZWdpc3RlcmVkIGJ5IHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHBhc3N3b3JkIFRoZSBwYXNzd29yZCBvZiB0aGUgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgbG9naW4oZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmxvZ2luKGVtYWlsLCBwYXNzd29yZCk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgbmV3IHNldCBvZiBhY2Nlc3MgYW5kIHJlZnJlc2ggdG9rZW5zLlxuICAgKi9cbiAgYXN5bmMgcmVmcmVzaCgpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIucmVmcmVzaEF1dGhlbnRpY2F0aW9uKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXV0aGVudGljYXRpb247XG4iLCIvLyBDb25kaXRpb25hbCBmZWF0dXJlcyB0aGF0IGFyZSBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IHdzdHJhZGUtYXBpXG5jb25zdCBzdXBwb3J0ZWRGZWF0dXJlcyA9IFsnaW1wbGljaXRfdG9rZW5fcmVmcmVzaCcsICdzZWN1cml0aWVzX2NhY2hlJ107XG5jb25zdCBzdXBwb3J0ZWQgPSAoZmVhdHVyZSkgPT4ge1xuICBpZiAoIWZlYXR1cmU/LnN0YXJ0c1dpdGgoJ25vXycpKSB7XG4gICAgcmV0dXJuIHN1cHBvcnRlZEZlYXR1cmVzLmluY2x1ZGVzKGZlYXR1cmUpO1xuICB9XG5cbiAgcmV0dXJuIHN1cHBvcnRlZEZlYXR1cmVzLmluY2x1ZGVzKGZlYXR1cmUuc3Vic3RyaW5nKCdub18nLmxlbmd0aCkpO1xufTtcblxuLy8gSG9sZHMgb3B0aW9uYWwgZmVhdHVyZXMgdGhhdCBoYXZlIGJlZW4gZGlzYWJsZWQuXG5jb25zdCBkaXNhYmxlZCA9IFsnc2VjdXJpdGllc19jYWNoZSddO1xuZXhwb3J0IGNvbnN0IGNvbmZpZ0VuYWJsZWQgPSAoZmVhdHVyZSkgPT4gIWRpc2FibGVkLmluY2x1ZGVzKGZlYXR1cmUpO1xuXG4vKipcbiAqIEVuYWJsZSBvciBkaXNhYmxlIGFuIG9wdGlvbmFsIGZlYXR1cmUgd2l0aGluIHdzdHJhZGUtYXBpLlxuICpcbiAqIEV4YW1wbGVzOlxuICogLS0tXG4gKiBjb25maWcoJ2ltcGxpY2l0X3Rva2VuX3JlZnJlc2gnKVxuICogRW5hYmxlcyBpbXBsaWNpdCByZWZyZXNoaW5nIG9mIHRva2Vucy5cbiAqXG4gKiBjb25maWcoJ25vX2ltcGxpY2l0X3Rva2VuX3JlZnJlc2gnKVxuICogRGlzYWJsZXMgaW1wbGljaXQgcmVmcmVzaGluZyBvZiB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHsqfSBmZWF0dXJlIFRoZSBzdHJpbmcgaWRlbnRpZmllciBmb3IgdGhlIGZlYXR1cmUsIHN0YXJ0aW5nIHdpdGggXCJub19cIiBpZlxuICogICAgICAgICAgICAgICAgICAgIHlvdSB3aXNoIHRvIGRpc2FibGUgaXQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbmZpZyhmZWF0dXJlKSB7XG4gIGlmICghc3VwcG9ydGVkKGZlYXR1cmUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAnJHtmZWF0dXJlfScgaXMgbm90IHN1cHBvcnRlZCFgKTtcbiAgfVxuXG4gIGlmIChmZWF0dXJlPy5zdGFydHNXaXRoKCdub18nKSkge1xuICAgIGNvbnN0IGN1dCA9IGZlYXR1cmUuc3Vic3RyaW5nKGZlYXR1cmUuaW5kZXhPZignXycpICsgMSk7XG5cbiAgICAvLyBXZSB3aWxsIG9ubHkgYXBwZW5kIHRoaXMgaWYgaXQgaXNuJ3QgYWxyZWFkeSBpbiB0aGVyZS5cbiAgICBpZiAoY29uZmlnRW5hYmxlZChjdXQpKSB7XG4gICAgICBkaXNhYmxlZC5wdXNoKGN1dCk7XG4gICAgfVxuXG4gIC8vIE9ubHkgZGVsZXRlIHRoZSBmZWF0dXJlIGlmIGl0J3MgYWxyZWFkeSBkaXNhYmxlZC5cbiAgfSBlbHNlIGlmICghY29uZmlnRW5hYmxlZChmZWF0dXJlKSkge1xuICAgIGRpc2FibGVkLnNwbGljZShkaXNhYmxlZC5pbmRleE9mKGZlYXR1cmUpLCAxKTtcbiAgfVxufVxuIiwiLy8gRXhjaGFuZ2VzIHN1cHBvcnRlZCBieSBXZWFsdGhzaW1wbGUgVHJhZGVcbi8vICdDQycgaXMgbm90IGFuIGV4Y2hhbmdlOyBpdCBzdGFuZHMgZm9yIENyeXB0byBjdXJyZW5jeSBhbmRcbi8vIGl0IGFsbG93cyB1cyB0byBkaXN0aW5ndWlzaCBpdCBmcm9tIGNvbnZlbnRpb25hbCBzZWN1cml0aWVzLlxuY29uc3QgZXhjaGFuZ2VzID0gWydOQVNEQVEnLCAnTllTRScsICdUU1gnLCAnVFNYLVYnLCAnQUVRVUlUQVMgTkVPIEVYQ0hBTkdFJywgJ0NDJ107XG5cbi8qKlxuICogVGlja2VyIHByb3ZpZGVzIGEgbG9naWNhbCBlbmNhcHN1bGF0aW9uIGZvciB0aGUgYWxsb3dlZCBmb3Jtc1xuICogb2YgYSBzZWN1cml0eSB0aWNrZXIgd2l0aGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gKlxuICogSXQgcHJvdmlkZXMgdmFsaWRhdGlvbiBvZiB0aGUgZm9ybWF0IG9mIHRoZSB0aWNrZXIsIGFuZCB0aGVcbiAqIHZhbHVlIG9mIHRoZSBleGNoYW5nZSwgaWYgcHJvdmlkZWQuXG4gKlxuICogVGlja2VycyBtYXkgYmUgc3BlY2lmaWVkIGFzIHR3byBkYXRhIHR5cGVzOlxuICpcbiAqIC0gc3RyaW5nOiBUaGUgdGlja2VyIG1heSBiZSBhIHNpbXBsZSBzdHJpbmcgY29udGFpbmluZyB0aGUgc3ltYm9sLCBvciBhIGNvbWJpbmF0aW9uIG9mXG4gKiB0aGUgc3ltYm9sIGFuZCBleGNoYW5nZSBzZXBhcmF0ZWQgYnkgYSBjb2xvbi5cbiAqIC0gb2JqZWN0OiBUaGUgdGlja2VyIG1heSBiZSBhbiBvYmplY3Qgd2l0aCBzeW1ib2wsIGV4Y2hhbmdlLCBvciBpZCBwcm9wZXJ0aWVzLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqIFwiQUFQTFwiXG4gKiBcIlVCRVI6TllTRVwiXG4gKiB7IHN5bWJvbDogXCJBQVBMXCIgfVxuICogeyBzeW1ib2w6IFwiVUJFUlwiLCBleGNoYW5nZTogXCJOWVNFXCIgfVxuICogeyBpZDogXCJzZWMtcy03NmE3MTU1MjQyZTg0Nzc4ODBjYmI0MzI2OTIzNWNiNlwiIH1cbiAqL1xuY2xhc3MgVGlja2VyIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgdGhlIHRpY2tlciBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHNlY3VyaXR5IHRpY2tlciB2YWx1ZSwgcHJvdmlkZWQgYXMgYSBzdHJpbmcgb3IgYW4gb2JqZWN0IHdpdGggc3ltYm9sLFxuICAgKiBleGNoYW5nZSwgb3IgaWQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xuICAgIHRoaXMuc3ltYm9sID0gbnVsbDtcbiAgICB0aGlzLmV4Y2hhbmdlID0gbnVsbDtcbiAgICB0aGlzLmlkID0gbnVsbDtcbiAgICB0aGlzLmNyeXB0byA9IGZhbHNlO1xuXG4gICAgaWYgKHR5cGVvZiAodmFsdWUpID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gRW1wdHkgdGlja2VycyBhcmUgbm90IGFsbG93ZWRcbiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbXB0eSB0aWNrZXInKTtcbiAgICAgIH1cblxuICAgICAgW3RoaXMuc3ltYm9sLCB0aGlzLmV4Y2hhbmdlXSA9IHZhbHVlLnNwbGl0KCc6Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFlvdSBuZWVkIGF0IGxlYXN0IGEgc3ltYm9sIG9yIGlkIHRvIGZvcm0gYSB0aWNrZXIuXG4gICAgICBpZiAoIXZhbHVlLnN5bWJvbCAmJiAhdmFsdWUuaWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHRpY2tlciAnJHt2YWx1ZX0nYCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3ltYm9sID0gdmFsdWUuc3ltYm9sIHx8IG51bGw7XG4gICAgICB0aGlzLmV4Y2hhbmdlID0gdmFsdWUuZXhjaGFuZ2UgfHwgbnVsbDtcbiAgICAgIHRoaXMuaWQgPSB2YWx1ZS5pZCB8fCBudWxsO1xuICAgIH1cblxuICAgIC8vIFdlYWx0aHNpbXBsZSBUcmFkZSBkb2Vzbid0IGhhdmUgYSBzaG9ydCBleGNoYW5nZSBpZCAoJ05FTycpIGZvclxuICAgIC8vIEFFUVVJVEFTIE5FTyBFWENIQU5HRSBmb3Igc29tZSByZWFzb24uLi5cbiAgICAvLyBXZSBoYXZlIHRvIG1hcCBpdCB0byB0aGUgZnVsbCBuYW1lIGZvciBjb21wYXJpc29ucyB0byB3b3JrLlxuICAgIGlmICh0aGlzLmV4Y2hhbmdlID09PSAnTkVPJykge1xuICAgICAgdGhpcy5leGNoYW5nZSA9ICdBRVFVSVRBUyBORU8gRVhDSEFOR0UnO1xuICAgIH1cblxuICAgIC8vIEd1YXJhbnRlZSB0aGF0IHRoZSBleGNoYW5nZSBpcyB2YWxpZCBpZiBub3QgbnVsbFxuICAgIGlmICh0aGlzLmV4Y2hhbmdlICYmICFleGNoYW5nZXMuaW5jbHVkZXModGhpcy5leGNoYW5nZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBleGNoYW5nZSAnJHt0aGlzLmV4Y2hhbmdlfSchYCk7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBjcnlwdG8gcHJvcGVydHkgdG8gdHJ1ZSB0byB0cmVhdCB0aGlzIHNlY3VyaXR5IGFzIGNyeXB0b2N1cnJlbmN5XG4gICAgaWYgKHRoaXMuZXhjaGFuZ2UgPT09ICdDQycgfHwgdGhpcy5pZD8uc3RhcnRzV2l0aCgnc2VjLXonKSkge1xuICAgICAgdGhpcy5jcnlwdG8gPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWR1Y2VzIHRoZSB0aWNrZXIgb2JqZWN0IHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICAgKi9cbiAgZm9ybWF0KCkge1xuICAgIGlmICh0aGlzLmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5pZDtcbiAgICB9XG5cbiAgICAvLyBXZSBtdXN0IHJldHJhbnNsYXRlIHRoZSBmdWxsIG5hbWUgb2YgdGhlIE5FTyBleGNoYW5nZSBiYWNrIHRvIE5FT1xuICAgIGlmICh0aGlzLmV4Y2hhbmdlID09PSAnQUVRVUlUQVMgTkVPIEVYQ0hBTkdFJykge1xuICAgICAgcmV0dXJuIGAke3RoaXMuc3ltYm9sfTpORU9gO1xuICAgIH1cblxuICAgIHJldHVybiBgJHt0aGlzLnN5bWJvbH0ke3RoaXMuZXhjaGFuZ2UgPyBgOiR7dGhpcy5leGNoYW5nZX1gIDogJyd9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wYXJlcyBzeW1ib2wgb3IgaWQgd2l0aCBhbm90aGVyIHRpY2tlci4gVGhpcyBpcyB3ZWFrIGJlY2F1c2VcbiAgICogZXhjaGFuZ2UgaXMgbm90IGNvbXBhcmVkIGhlcmUsIGFsbG93aW5nIGZvciBmYWxzZSBwb3NpdGl2ZXNcbiAgICogb2Ygc3ltYm9scyBvbiBkaWZmZXJlbnQgZXhjaGFuZ2VzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG90aGVyIFRpY2tlciB0byBjb21wYXJlIHVzIHdpdGhcbiAgICovXG4gIHdlYWtFcXVhbHMob3RoZXIpIHtcbiAgICBpZiAodGhpcy5pZCAmJiB0aGlzLmlkID09PSBvdGhlci5pZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3ltYm9sICYmIHRoaXMuc3ltYm9sID09PSBvdGhlci5zeW1ib2wgJiYgdGhpcy5jcnlwdG8gPT09IG90aGVyLmNyeXB0bykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpY2tlcjtcbiIsImltcG9ydCBBUElDYWNoZSBmcm9tICcuLi9jb3JlL2NhY2hlJztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi4vY29yZS90aWNrZXInO1xuXG5jb25zdCBjYWNoZSA9IG5ldyBBUElDYWNoZSgxMCk7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAgICogUXVlcnkgdGhlIGNhY2hlIGZvciB0aGUgc2VjdXJpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHNlY3VyaXR5XG4gICAgICovXG4gIGdldChzZWN1cml0eSkge1xuICAgIC8vIE11c3QgZGlnZXN0IHRoZSBzZWN1cml0eSBpbnRvIHRoZSBzdGFuZGFyZCBmb3JtYXRcbiAgICBjb25zdCByZXN1bHQgPSBjYWNoZS5nZXQobmV3IFRpY2tlcihzZWN1cml0eSkuZm9ybWF0KCkpO1xuXG4gICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuXG4gIC8qKlxuICAgICAqIFJlbWVtYmVyIHRoZSBzZWN1cml0eSBmb3IgYSBmdXR1cmUgcXVpY2sgcmV0cmlldmFsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBrZXlcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAgICovXG4gIGluc2VydChrZXksIHZhbHVlKSB7XG4gICAgY2FjaGUuaW5zZXJ0KG5ldyBUaWNrZXIoa2V5KS5mb3JtYXQoKSwgdmFsdWUpO1xuICB9LFxufTtcbiIsIi8qXG4gKiBBUElDYWNoZSBpcyBhbiBpbnRlcm5hbCBlZmZvcnQgdG8gbWluaW1pemUgdW5uZWNlc3NhcnkgQVBJIGNhbGxzIHdoZXJlXG4gKiBwb3NzaWJsZS4gQSBzcGVjaWZpYyB1c2VjYXNlIHdoZXJlIGEgY2FjaGUgaXMgdXNlZnVsIGlzIGZpZ3VyaW5nIG91dCB0aGVcbiAqIGV4Y2hhbmdlIGEgc2VjdXJpdHkgYmVsb25ncyB0by4gQSBjYWNoZSB3b3VsZCBhbGxvdyB1cyB0byBtZW1vcml6ZVxuICogdGhpcyBzdGF0aWMgZGF0YSBmb3IgYSBwZXJpb2Qgb2YgdGltZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSBBUEkgY2FsbHMuXG4gKlxuICogVGhlIGNsYXNzIGVuY2Fwc3VsYXRlcyB0aGUgZm9sbG93aW5nIGNhY2hlIGJlaGF2aW91cjpcbiAqIC0gQSBtYXhpbXVtIGVudHJpZXMgcHJvdmlkZWQgYXMgYSBjb25zdHJ1Y3RvciBhcmd1bWVudFxuICogLSBGaXJzdCBpbiwgRmlyc3Qgb3V0IChGSUZPKSBtb2RlbFxuICpcbiAqIFRoZSBpbnRlcm5lbCBkYXRhIHN0cnVjdHVyZSBpcyBhIEhhc2hTZXQsIHNvIGxvb2t1cCB0aW1lIGNvc3QgaXMgZmFpcmx5XG4gKiBtaW5pbWFsLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBUElDYWNoZSB7XG4gIGNvbnN0cnVjdG9yKHNpemUpIHtcbiAgICB0aGlzLmNhY2hlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gIH1cblxuICAvKipcbiAgICAgKiBTdG9yZSB0aGUga2V5LXZhbHVlIHBhaXIgaW50byB0aGlzIGNhY2hlLiBUaGUgb2xkZXN0IGVudHJ5IGlzIGV2aWN0ZWQgaWZcbiAgICAgKiB3ZSdyZSBvdXQgb2Ygc3BhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IGtleVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICAgKi9cbiAgaW5zZXJ0KGtleSwgdmFsdWUpIHtcbiAgICBpZiAodGhpcy5jYWNoZS5zaXplID49IHRoaXMuc2l6ZSkge1xuICAgICAgdGhpcy5jYWNoZS5kZWxldGUodGhpcy5jYWNoZS5rZXlzKCkubmV4dCgpLnZhbHVlKTtcbiAgICB9XG5cbiAgICB0aGlzLmNhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIFJldHJpZXZlIHRoZSB2YWx1ZSBvZiB0aGUgZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggdGhlIGtleS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0ga2V5XG4gICAgICovXG4gIGdldChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZS5nZXQoa2V5KTtcbiAgfVxufVxuIiwiaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuL2FwaS9lbmRwb2ludHMnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuL2NvcmUvdGlja2VyJztcbmltcG9ydCB7IGNvbmZpZ0VuYWJsZWQgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgY2FjaGUgZnJvbSAnLi9vcHRpb25hbC9zZWN1cml0aWVzLWNhY2hlJztcblxuY2xhc3MgRGF0YSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IERhdGEgcGJqZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gSHR0cHMgd29ya2VyIHN0YXRlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGh0dHBzV29ya2VyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihodHRwc1dvcmtlcikge1xuICAgIHRoaXMud29ya2VyID0gaHR0cHNXb3JrZXI7XG4gIH1cblxuICAvKipcbiAgICogQSBzbmFwc2hvdCBvZiB0aGUgY3VycmVudCBVU0QvQ0FEIGV4Y2hhbmdlIHJhdGVzIG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGVcbiAgICogcGxhdGZvcm0uXG4gICAqL1xuICBhc3luYyBleGNoYW5nZVJhdGVzKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5FWENIQU5HRV9SQVRFUywge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IGEgc2VjdXJpdHkgb24gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBQbGF0Zm9ybS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSB1c2VyVGlja2VyIFRoZSBzZWN1cml0eSBpZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGV4dGVuc2l2ZSBQdWxscyBhIG1vcmUgZGV0YWlsZWQgcmVwb3J0IG9mIHRoZSBzZWN1cml0eSB1c2luZyB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgL3NlY3VyaXRpZXMve2lkfSBBUElcbiAgICovXG4gIGFzeW5jIGdldFNlY3VyaXR5KHVzZXJUaWNrZXIsIGV4dGVuc2l2ZSkge1xuICAgIGxldCByZXN1bHQgPSBudWxsO1xuXG4gICAgLy8gUnVuIHNvbWUgdmFsaWRhdGlvbiBvbiB0aGUgdGlja2VyXG4gICAgY29uc3QgdGlja2VyID0gbmV3IFRpY2tlcih1c2VyVGlja2VyKTtcblxuICAgIGlmICghZXh0ZW5zaXZlICYmIGNvbmZpZ0VuYWJsZWQoJ3NlY3VyaXRpZXNfY2FjaGUnKSkge1xuICAgICAgcmVzdWx0ID0gY2FjaGUuZ2V0KHRpY2tlcik7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRpY2tlci5pZCkge1xuICAgICAgLy8gV2Ugd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBleHRlbnNpdmUgZGV0YWlscyBBUEkgc2luY2Ugd2UgaGF2ZSB0aGUgdW5pcXVlIGlkLlxuICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuRVhURU5TSVZFX1NFQ1VSSVRZX0RFVEFJTFMsIHtcbiAgICAgICAgaWQ6IHRpY2tlci5pZCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5TRUNVUklUWSwgeyB0aWNrZXI6IHRpY2tlci5zeW1ib2wgfSk7XG4gICAgICByZXN1bHQgPSByZXN1bHQuZmlsdGVyKChzZWN1cml0eSkgPT4gc2VjdXJpdHkuc3RvY2suc3ltYm9sID09PSB0aWNrZXIuc3ltYm9sKTtcblxuICAgICAgaWYgKHRpY2tlci5jcnlwdG8pIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoc2VjdXJpdHkpID0+IHNlY3VyaXR5LnNlY3VyaXR5X3R5cGUgPT09ICdjcnlwdG9jdXJyZW5jeScpO1xuICAgICAgfSBlbHNlIGlmICh0aWNrZXIuZXhjaGFuZ2UpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoc2VjdXJpdHkpID0+IHNlY3VyaXR5LnN0b2NrLnByaW1hcnlfZXhjaGFuZ2UgPT09IHRpY2tlci5leGNoYW5nZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011bHRpcGxlIHNlY3VyaXRpZXMgbWF0Y2hlZCBxdWVyeS4nKTtcbiAgICAgIH0gaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzZWN1cml0aWVzIG1hdGNoZWQgcXVlcnkuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgcmVzdWx0IGZyb20gYSBzaW5nbGV0b24gbGlzdCB0byBpdHMgcmF3IGVudHJ5XG4gICAgICBbcmVzdWx0XSA9IHJlc3VsdDtcblxuICAgICAgaWYgKGV4dGVuc2l2ZSkge1xuICAgICAgICAvLyBUaGUgY2FsbGVyIGhhcyBvcHRlZCB0byByZWNlaXZlIHRoZSBleHRlbnNpdmUgZGV0YWlscyBhYm91dCB0aGUgc2VjdXJpdHkuXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkVYVEVOU0lWRV9TRUNVUklUWV9ERVRBSUxTLCB7XG4gICAgICAgICAgaWQ6IHJlc3VsdC5pZCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZ0VuYWJsZWQoJ3NlY3VyaXRpZXNfY2FjaGUnKSAmJiBjYWNoZS5nZXQodGlja2VyKSA9PT0gbnVsbCkge1xuICAgICAgY2FjaGUuaW5zZXJ0KHRpY2tlciwgcmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgYSBtYXBwaW5nIG9mIGFsbCBzZWN1cml0eSBncm91cHMgKGF2YWlsYWJsZSBvbiB0aGUgVHJhZGUgcGxhdGZvcm0pIHRvXG4gICAqIHRoZWlyIGdyb3VwIGlkcy5cbiAgICovXG4gIGFzeW5jIHNlY3VyaXR5R3JvdXBzKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlNFQ1VSSVRZX0dST1VQUywge30pO1xuXG4gICAgLy8gQ29uc3RydWN0IGEgbWFwIG9mIGNhdGVnb3J5IG5hbWUgdG8gY2F0ZWdvcnkgaWRcbiAgICByZXR1cm4gcmVzdWx0LnJlZHVjZSgobWFwLCBpdGVtKSA9PiAoe1xuICAgICAgLi4ubWFwLCBbaXRlbS5uYW1lXTogaXRlbS5leHRlcm5hbF9zZWN1cml0eV9ncm91cF9pZCxcbiAgICB9KSwge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbGwgc2VjdXJpdGllcyBhc3NvY2lhdGVkIHdpdGggdGhlIGdyb3VwIG5hbWUgb3IgaWQuXG4gICAqXG4gICAqIC0gSWYgeW91IHByb3ZpZGUgdGhlIGdyb3VwIG5hbWUsIHdlIHdpbGwgYXV0b21hdGljYWxseSBkbyBhIGxvb2t1cFxuICAgKiBmcm9tIHRoZSBUcmFkZSBzZXJ2ZXJzIHRvIGdldCBpdHMgaWRlbnRpZmllci5cbiAgICpcbiAgICogLSBBbHRlcm5hdGl2ZWx5LCBZb3UgY2FuIGdldCBhIGxpc3Qgb2YgYWxsIGdyb3VwcyAod2l0aCB0aGVpciBncm91cCBpZHMpIGZyb21cbiAgICogZGF0YS5ncm91cHMoKSBhbmQgcHJvdmlkZSB0aGUgZ3JvdXAgaWRlbnRpZmllciBkaXJlY3RseS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBncm91cCBUaGUgc2VjdXJpdHkgZ3JvdXAgbmFtZSBvciBpZGVudGlmaWVyXG4gICAqL1xuICBhc3luYyBnZXRTZWN1cml0eUdyb3VwKGdyb3VwKSB7XG4gICAgbGV0IGdyb3VwSWQgPSBncm91cDtcblxuICAgIC8vIEZldGNoIHRoZSBncm91cCBpZCBmcm9tIHRoZSBncm91cCBuYW1lXG4gICAgaWYgKCFncm91cD8uc3RhcnRzV2l0aCgnc2VjdXJpdHktZ3JvdXAnKSkge1xuICAgICAgY29uc3QgZ3JvdXBzID0gYXdhaXQgdGhpcy5zZWN1cml0eUdyb3VwcygpO1xuXG4gICAgICBpZiAoIShncm91cCBpbiBncm91cHMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJyR7Z3JvdXB9JyBpcyBub3QgYSB2YWxpZCBncm91cCBuYW1lIWApO1xuICAgICAgfVxuXG4gICAgICAvLyByZWNvcmQgdGhlIG1hdGNoZWQgZ3JvdXAgaWQuXG4gICAgICBncm91cElkID0gZ3JvdXBzW2dyb3VwXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuU0VDVVJJVFlfR1JPVVAsIHsgZ3JvdXBJZCB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhO1xuIiwiaW1wb3J0IHsgSGVhZGVycyB9IGZyb20gJ25vZGUtZmV0Y2gnO1xuXG5jb25zdCBjdXN0b21IZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8qKlxuICAgKiBBcHBlbmRzIGEgaGVhZGVyIG5hbWUtdmFsdWUgcGFpciB0byBhbGwgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbmFtZSBIZWFkZXIga2V5XG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgSGVhZGVyIHZhbHVlXG4gICAqL1xuICBhZGQ6IChuYW1lLCB2YWx1ZSkgPT4gY3VzdG9tSGVhZGVycy5hcHBlbmQobmFtZSwgdmFsdWUpLFxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgY3VzdG9tIGhlYWRlciBmcm9tIGFsbCByZXF1ZXN0cy5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBuYW1lIEhlYWRlciBrZXlcbiAgICovXG4gIHJlbW92ZTogKG5hbWUpID0+IGN1c3RvbUhlYWRlcnMuZGVsZXRlKG5hbWUpLFxuXG4gIC8qKlxuICAgKiBDbGVhcnMgYWxsIGN1c3RvbSBoZWFkZXJzLlxuICAgKi9cbiAgY2xlYXI6ICgpID0+IFsuLi5jdXN0b21IZWFkZXJzXS5mb3JFYWNoKChoZWFkZXIpID0+IGN1c3RvbUhlYWRlcnMuZGVsZXRlKGhlYWRlclswXSkpLFxuXG4gIC8qKlxuICAgKiBQcm9kdWNlcyBhIGxpc3Qgb2YgY3VzdG9tIGhlYWRlcnMuXG4gICAqL1xuICB2YWx1ZXM6ICgpID0+IFsuLi5jdXN0b21IZWFkZXJzXSxcbn07XG4iLCJyZXF1aXJlKCdzb3VyY2UtbWFwLXN1cHBvcnQnKS5pbnN0YWxsKCk7XG5cbmNvbnN0IEF1dGhlbnRpY2F0aW9uID0gcmVxdWlyZSgnLi9hdXRoJykuZGVmYXVsdDtcbmNvbnN0IGhlYWRlcnMgPSByZXF1aXJlKCcuL2hlYWRlcnMnKS5kZWZhdWx0O1xuY29uc3QgQWNjb3VudHMgPSByZXF1aXJlKCcuL2FjY291bnRzJykuZGVmYXVsdDtcbmNvbnN0IE9yZGVycyA9IHJlcXVpcmUoJy4vb3JkZXJzJykuZGVmYXVsdDtcbmNvbnN0IERhdGEgPSByZXF1aXJlKCcuL2RhdGEnKS5kZWZhdWx0O1xuY29uc3QgUXVvdGVzID0gcmVxdWlyZSgnLi9xdW90ZXMnKS5kZWZhdWx0O1xuY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi9jb25maWcnKS5kZWZhdWx0O1xuXG5jb25zdCBIdHRwc1dvcmtlciA9IHJlcXVpcmUoJy4vbmV0d29yay9odHRwcycpLmRlZmF1bHQ7XG5cbi8qKlxuICogQnVpbGRzIGEgbmV3IFRyYWRlIHNlc3Npb24gd2l0aCBhbiBpbmRlcGVuZGVudCBhdXRoZW50aWNhdGlvblxuICogc3RhdGUsIGZhY2lsaXRhdGluZyBjb25jdXJyZW50IHVzYWdlIG9mIHRoZSBUcmFkZSBBUElzLlxuICpcbiAqIFRoZSBoZWFkZXJzIGFuZCBjb25maWcgbW9kdWxlLCBob3dldmVyLCBpcyBtdXR1YWxseSBzaGFyZWQgYmV0d2VlblxuICogYWxsIHNlc3Npb25zLlxuICovXG5jb25zdCBTZXNzaW9uID0gKCkgPT4ge1xuICBjb25zdCB3b3JrZXIgPSBuZXcgSHR0cHNXb3JrZXIoKTtcbiAgY29uc3QgZGF0YSA9IG5ldyBEYXRhKHdvcmtlcik7XG5cbiAgcmV0dXJuIHtcbiAgICBhdXRoOiBuZXcgQXV0aGVudGljYXRpb24od29ya2VyKSxcbiAgICBoZWFkZXJzLFxuICAgIGFjY291bnRzOiBuZXcgQWNjb3VudHMod29ya2VyKSxcbiAgICBvcmRlcnM6IG5ldyBPcmRlcnMod29ya2VyLCBkYXRhKSxcbiAgICBxdW90ZXM6IG5ldyBRdW90ZXMod29ya2VyLCBkYXRhKSxcbiAgICBkYXRhLFxuICAgIGNvbmZpZyxcbiAgfTtcbn07XG5cbi8vIFdlIG5lZWQgYSBkZWZhdWx0IHNlc3Npb24gZXhwb3J0ZWQgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHJlYXNvbnMsXG4vLyBidXQgYWxzbyBiZWNhdXNlIG5vdCBldmVyeW9uZSBjYXJlcyBhYm91dCBjb25jdXJyZW50IHVzYWdlcy5cbmNvbnN0IGRlZmF1bHRTZXNzaW9uID0gbmV3IFNlc3Npb24oKTtcbi8vIEFsbG93IHRoZSBjcmVhdGlvbiBvZiBtdWx0aXBsZSBzZXNzaW9ucyB0aHJvdWdoIGEgU2Vzc2lvbigpIGNvbnN0cnVjdG9yXG5kZWZhdWx0U2Vzc2lvbi5TZXNzaW9uID0gKCkgPT4gbmV3IFNlc3Npb24oKTtcblxubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0U2Vzc2lvbjtcbiIsIi8qKlxuICogQ29tcHV0ZXMgdGhlIGN1cnJlbnQgdGltZSBpbiBlcG9jaCBzZWNvbmRzLlxuICovXG5jb25zdCBlcG9jaFNlY29uZHMgPSAoKSA9PiBwYXJzZUludChEYXRlLm5vdygpIC8gMTAwMCwgMTApO1xuZXhwb3J0IGRlZmF1bHQgZXBvY2hTZWNvbmRzO1xuIiwiaW1wb3J0IGVwb2NoU2Vjb25kcyBmcm9tICcuLi9oZWxwZXJzL3RpbWUnO1xuXG4vKipcbiAqIFRoaXMgbW9kdWxlIHdpbGwgcHJvdmlkZSBhIHVuaWZvcm0gaW50ZXJmYWNlIGZvciBzdG9yYWdlXG4gKiBhbmQgcmV0cmlldmFsIG9mIGF1dGhlbnRpY2F0b24gdG9rZW5zIHRocm91Z2hvdXQgd3N0cmFkZS1hcGkuXG4gKi9cbmNsYXNzIFRva2VucyB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGF1dGhlbnRpY2F0aW9uIHRva2VucyBvYmplY3QuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmFjY2VzcyA9IG51bGw7XG4gICAgdGhpcy5yZWZyZXNoID0gbnVsbDtcbiAgICB0aGlzLmV4cGlyZXMgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGF1dGhlbnRpY2F0aW9uIHRva2Vucy5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB0b2tlbnMgVGhlIG5ldyB0b2tlbnNcbiAgICovXG4gIHN0b3JlKHRva2Vucykge1xuICAgIHRoaXMuYWNjZXNzID0gdG9rZW5zLmFjY2VzcztcbiAgICB0aGlzLnJlZnJlc2ggPSB0b2tlbnMucmVmcmVzaDtcbiAgICB0aGlzLmV4cGlyZXMgPSB0b2tlbnMuZXhwaXJlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGN1cnJlbnQgdG9rZW5zIGhhdmUgZXhwaXJlZC5cbiAgICovXG4gIGV4cGlyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXhwaXJlcyAmJiBlcG9jaFNlY29uZHMoKSA+PSB0aGlzLmV4cGlyZXM7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVG9rZW5zO1xuIiwiaW1wb3J0IGNsb3Vkc2NyYXBlciBmcm9tICdjbG91ZHNjcmFwZXInO1xuaW1wb3J0IGN1c3RvbUhlYWRlcnMgZnJvbSAnLi4vaGVhZGVycyc7XG5pbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4uL2FwaS9lbmRwb2ludHMnO1xuaW1wb3J0IHsgY29uZmlnRW5hYmxlZCB9IGZyb20gJy4uL2NvbmZpZyc7XG5pbXBvcnQgVG9rZW5zIGZyb20gJy4uL2NvcmUvdG9rZW5zJztcblxuY29uc3QgW0hUVFBfT0ssIEhUVFBfQ1JFQVRFRF0gPSBbMjAwLCAyMDFdO1xuXG4vKlxuICogQ29tcGxldGUgdGhlIFVSTCBieSBmaWxsaW5nIHRoZSBwYXJhbWV0ZXIgcGxhY2Vob2xkZXJzIHdpdGggdGhlXG4gKiBkYXRhIGFyZ3VtZW50cy5cbiAqL1xuZnVuY3Rpb24gZmluYWxpemVSZXF1ZXN0KGVuZHBvaW50LCBkYXRhKSB7XG4gIC8vIE1ha2UgYSBjb3B5IHNvIHdlIGRvbid0IG1vZGlmeSB0aGUgb3JpZ2luYWwgb25lLlxuICBjb25zdCBwYXJhbXMgPSB7IC4uLmRhdGEgfTtcbiAgbGV0IHsgdXJsIH0gPSBlbmRwb2ludDtcblxuICAvLyBObyBuZWVkIHRvIGRvIGFueXRoaW5nIGlmIHRoZSBVUkwgaXMgc3RhdGljIChubyBwYXJhbWV0ZXJzKVxuICBpZiAoZW5kcG9pbnQucGFyYW1ldGVycykge1xuICAgIC8vIFN3YXAgYWxsIHRoZSBwYXJhbWV0ZXIgcGxhY2Vob2xkZXJzIHdpdGggdGhlIGFyZ3VtZW50cy5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgT2JqZWN0LmtleXMoZW5kcG9pbnQucGFyYW1ldGVycykubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBjb25zdCBwYXJhbWV0ZXJOYW1lID0gZW5kcG9pbnQucGFyYW1ldGVyc1tpbmRleF07XG5cbiAgICAgIC8vIHdlIGhhdmUgdG8gZXhwbGljaXRseSBjaGVjayBmb3IgbnVsbCBhbmQgdW5kZWZpbmVkIHNpbmNlIHBhcmFtZXRlclxuICAgICAgLy8gdmFsdWVzIG1pZ2h0IGJlIDAuXG4gICAgICBpZiAocGFyYW1zW3BhcmFtZXRlck5hbWVdID09PSBudWxsIHx8IHBhcmFtc1twYXJhbWV0ZXJOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVVJMIHBhcmFtZXRlciAnJHtwYXJhbWV0ZXJOYW1lfScgbWlzc2luZyFgKTtcbiAgICAgIH1cblxuICAgICAgLypcbiAgICAgICAgKiBQYXJhbWV0ZXJzIHN1cnJvdW5kZWQgd2l0aCBjdXJseSBicmFjZXMgKGUuZy4sIHsyfSkgYXJlIHNpbXBsZSB2YWx1ZSByZXBsYWNlbWVudHMsXG4gICAgICAgICogd2hpbGUgb25lcyBzdXJyb3VuZGVkIHdpdGggc3F1YXJlIGJyYWNrZXRzIChlLmcuLCBbMV0pIGFyZSBhcnJheS12YWx1ZSByZXBsYWNlbWVudHMuXG4gICAgICAgICovXG4gICAgICBpZiAodXJsLmluZGV4T2YoYHske2luZGV4fX1gKSA+PSAwKSB7XG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKGB7JHtpbmRleH19YCwgcGFyYW1zW2VuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdXSk7XG4gICAgICB9IGVsc2UgaWYgKHVybC5pbmRleE9mKGBbJHtpbmRleH1dYCkgPj0gMCkge1xuICAgICAgICAvLyBleHRyYWN0IHF1ZXJ5IHBhcmFtZXRlciBuYW1lIGFuZCB0aGUgYXJyYXkgb2YgdmFsdWVzXG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1OYW1lID0gZW5kcG9pbnQucGFyYW1ldGVyc1tpbmRleF07XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHBhcmFtc1txdWVyeVBhcmFtTmFtZV07XG5cbiAgICAgICAgLy8gQ29uc3RydWN0IHRoZSBxdWVyeVBhcmFtIHVzaW5nIGV2ZXJ5IHZhbHVlIGluIHRoZSB2YWx1ZXMgYXJyYXkuXG4gICAgICAgIC8vIEhlcmUgaXMgYW4gZXhhbXBsZSBvZiB3aGF0IHF1ZXJ5UGFyYW0gZW5kcyB1cCBiZWluZzpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gcXVlcnlQYXJhbU5hbWUgPSAndHlwZSdcbiAgICAgICAgLy8gdmFsdWVzID0gWydidXknLCAnc2VsbCcsICdkaXZpZGVuZCddXG4gICAgICAgIC8vIHF1ZXJ5UGFyYW0gPSAndHlwZT1idXkmdHlwZT1zZWxsJnR5cGU9ZGl2aWRlbmQnXG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW0gPSB2YWx1ZXMubWFwKCh2YWx1ZSkgPT4gYCR7cXVlcnlQYXJhbU5hbWV9PSR7dmFsdWV9YCkuam9pbignJicpO1xuXG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKGBbJHtpbmRleH1dYCwgcXVlcnlQYXJhbSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01hbGZvcm1lZCBVUkwhIFRoaXMgaXMgYW4gaW50ZXJuYWwgZXJyb3I6IHJhaXNlIGFuIGlzc3VlIScpO1xuICAgICAgfVxuXG4gICAgICAvLyBNdXN0IHJlbW92ZSB0aGlzIGtleSBmcm9tIHRoZSBwYXlsb2FkIGFzIGl0IGhhcyBiZWVuIGNvbnN1bWVkIGJ5IHRoZSBVUkxcbiAgICAgIGRlbGV0ZSBwYXJhbXNbZW5kcG9pbnQucGFyYW1ldGVyc1tpbmRleF1dO1xuICAgIH1cbiAgfVxuXG4gIC8vIE5vIHBheWxvYWQgYXR0YWNoZWQgdG8gR0VUL0RFTEVURSByZXF1ZXN0c1xuICBpZiAoWydHRVQnLCAnSEVBRCddLmluY2x1ZGVzKGVuZHBvaW50Lm1ldGhvZCkpIHtcbiAgICByZXR1cm4geyB1cmwsIHBheWxvYWQ6IHVuZGVmaW5lZCB9O1xuICB9XG5cbiAgcmV0dXJuIHsgdXJsLCBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeShwYXJhbXMpIH07XG59XG5cbmNsYXNzIEh0dHBzV29ya2VyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBIdHRwc1dvcmtlciB3aXRoIGl0cyBvd24gYXV0aGVudGljYXRpb24gc3RhdGUuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnRva2VucyA9IG5ldyBUb2tlbnMoKTtcblxuICAgIC8vIGF1dGhlbnRpY2F0aW9uIGV2ZW50c1xuICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgb3RwOiBudWxsLFxuICAgICAgcmVmcmVzaDogbnVsbCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGEgZnVuY3Rpb24gdG8gcnVuIG9uIGEgY2VydGFpbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCBUaGUgdHJpZ2dlciBmb3IgdGhlIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7Kn0gaGFuZGxlciBldmVudCBoYW5kbGVyIGZvciB0aGUgZXZlbnRcbiAgICovXG4gIG9uKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgaWYgKCEoZXZlbnQgaW4gdGhpcy5ldmVudHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGF1dGhlbnRpY2F0aW9uIGV2ZW50ICcke2V2ZW50fSchYCk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudHNbZXZlbnRdID0gaGFuZGxlcjtcbiAgfVxuXG4gIC8qXG4gICAqIEltcGxlbWVudHMgdGhlIG5ldHdvcmsgbGV2ZWwgcHJvdG9jb2wgZm9yIHRhbGtpbmcgdG8gdGhlXG4gICAqIFdlYWx0aHNpbXBsZSBUcmFkZSBIVFRQUyBBUEkuXG4gICAqL1xuICBhc3luYyB0YWxrKGVuZHBvaW50LCBkYXRhKSB7XG4gICAgY29uc3QgaGVhZGVycyA9IHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9O1xuXG4gICAgaWYgKGVuZHBvaW50LmF1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIC8vIG5vIGFjY2VzcyB0b2tlbiBtZWFucyB3ZSB3aWxsIHByZW1hdHVyZWx5IGZhaWwgdGhlIHJlcXVlc3QgYmVjYXVzZVxuICAgICAgLy8gdGhpcyBpcyBhIHByaXZpbGVnZWQgZW5kcG9pbnQuXG4gICAgICBpZiAoIXRoaXMudG9rZW5zLmFjY2Vzcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkIGZvciAnJHtlbmRwb2ludC51cmx9J2ApO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29uZmlnRW5hYmxlZCgnaW1wbGljaXRfdG9rZW5fcmVmcmVzaCcpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaW1wbGljaXRUb2tlblJlZnJlc2goKTtcbiAgICAgIH1cblxuICAgICAgaGVhZGVycy5BdXRob3JpemF0aW9uID0gdGhpcy50b2tlbnMuYWNjZXNzO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IGFsbCBjdXN0b20gaGVhZGVyc1xuICAgIGN1c3RvbUhlYWRlcnMudmFsdWVzKCkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7IGhlYWRlcnNba2V5XSA9IHZhbHVlOyB9KTtcblxuICAgIC8vIGZpbGwgcGF0aCBhbmQgcXVlcnkgcGFyYW1ldGVycyBpbiB0aGUgVVJMXG4gICAgY29uc3QgeyB1cmwsIHBheWxvYWQgfSA9IGZpbmFsaXplUmVxdWVzdChlbmRwb2ludCwgZGF0YSk7XG5cbiAgICAvLyBXZWFsdGhzaW1wbGUgZW5kcG9pbnRzIGFyZSBwcm90ZWN0ZWQgYnkgQ2xvdWRmbGFyZS5cbiAgICAvLyBUaGUgY2xvdWRzY3JhcGVyIGxpYnJhcnkgdGFrZXMgY2FyZSBvZiB0aGUgQ2xvdWRmbGFyZSBjaGFsbGVuZ2VzXG4gICAgLy8gd2hpbGUgYWxzbyBleGVjdXRpbmcgb3VyIHJlcXVlc3RcbiAgICBsZXQgcmVzcG9uc2UgPSBudWxsO1xuICAgIGF3YWl0IGNsb3Vkc2NyYXBlcih7XG4gICAgICB1cmwsXG4gICAgICBib2R5OiBwYXlsb2FkLFxuICAgICAgbWV0aG9kOiBlbmRwb2ludC5tZXRob2QsXG4gICAgICBoZWFkZXJzLFxuICAgICAgY2FsbGJhY2s6ICh1bnVzZWQsIHJlcykgPT4ge1xuICAgICAgICAvLyBTYXZlIHRoZSBIVFRQIHJlc3BvbnNlXG4gICAgICAgIHJlc3BvbnNlID0gcmVzO1xuICAgICAgfSxcbiAgICB9KS5jYXRjaCgoKSA9PiB7IH0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlLmJvZHkgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBpdCdzIG5vdCBKU09OLCBidXQgdGhhdCdzIGZpbmUuIFdlIGRvbid0IGRvIGFueXRoaW5nXG4gICAgICAvLyBmb3Igbm93LlxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIC8qXG4gICAqIEZ1bGZpbGwgdGhlIGVuZHBvaW50IHJlcXVlc3QgZ2l2ZW4gdGhlIGVuZHBvaW50IGNvbmZpZ3VyYXRpb24sIG9wdGlvbmFsXG4gICAqIGRhdGEuXG4gICAqL1xuICBhc3luYyBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50LCBkYXRhKSB7XG4gICAgLy8gU3VibWl0IHRoZSBIVFRQIHJlcXVlc3QgdG8gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBTZXJ2ZXJzXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRhbGsoZW5kcG9pbnQsIGRhdGEpO1xuXG4gICAgaWYgKFtIVFRQX09LLCBIVFRQX0NSRUFURURdLmluY2x1ZGVzKHJlc3BvbnNlLnN0YXR1c0NvZGUpKSB7XG4gICAgICByZXR1cm4gZW5kcG9pbnQub25TdWNjZXNzKHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZW5kcG9pbnQub25GYWlsdXJlKHJlc3BvbnNlKSk7XG4gIH1cblxuICAvKipcbiAgICogQXR0ZW1wdHMgdG8gZXN0YWJsaXNoIGEgc2Vzc2lvbiBmb3IgdGhlIHByb3ZpZGVkIGVtYWlsIGFuZCBwYXNzd29yZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBlbWFpbCBlbWFpbGVkIHJlZ2lzdGVyZWQgYnkgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqIEBwYXJhbSB7Kn0gcGFzc3dvcmQgVGhlIHBhc3N3b3JkIG9mIHRoZSBhY2NvdW50XG4gICAqL1xuICBhc3luYyBsb2dpbihlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICBsZXQgcmVzcG9uc2UgPSBudWxsO1xuXG4gICAgLypcbiAgICAgKiBJZiB3ZSBhcmUgZ2l2ZW4gYSBmdW5jdGlvbiBmb3Igb3RwLCB0aGVuIHdlIG11c3QgZmFpbCBhIGxvZyBpbiB0b1xuICAgICAqIHRyaWdnZXIgYW4gT1RQIGV2ZW50IHdpdGggV2VhbHRoc2ltcGxlIFRyYWRlLiBUaGlzIHdpbGwgYWxsb3cgdGhlIHVzZXJcbiAgICAgKiBvdHAgdGh1bmsgdG8gcmV0cmlldmUgdGhlIGNvZGUuXG4gICAgICpcbiAgICAgKiBJZiBhIGxpdGVyYWwgdmFsdWUgaXMgcHJvdmlkZWQgZm9yIG90cCwgaXQgbWVhbnMgdGhlIHVzZXIgaGFzIG1hbnVhbGx5XG4gICAgICogcHJvdmlkZWQgdXMgd2l0aCB0aGUgb3RwIGNvZGUuIFdlIGNhbiBza2lwIHRoaXMgbG9naW4gYXR0ZW1wdC5cbiAgICAgKi9cbiAgICBpZiAodHlwZW9mICh0aGlzLmV2ZW50cy5vdHApID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhd2FpdCB0aGlzLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkxPR0lOLCB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGxvZyBpbiBmb3IgcmVhbCB0aGlzIHRpbWUuXG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5MT0dJTiwge1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgIG90cDogdHlwZW9mICh0aGlzLmV2ZW50cy5vdHApID09PSAnZnVuY3Rpb24nID8gYXdhaXQgdGhpcy5ldmVudHMub3RwKCkgOiB0aGlzLmV2ZW50cy5vdHAsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gd2UgbWlnaHQgaGF2ZSBmYWlsZWQgYmVjYXVzZSBPVFAgd2FzIG5vdCBwcm92aWRlZFxuICAgICAgaWYgKCF0aGlzLmV2ZW50cy5vdHApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPVFAgbm90IHByb3ZpZGVkIScpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWVtcyB0byBiZSBpbmNvcnJlY3QgY3JlZGVudGlhbHMgb3IgT1RQLlxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgLy8gQ2FwdHVyZSB0aGUgdG9rZW5zIGZvciBsYXRlciB1c2FnZS5cbiAgICB0aGlzLnRva2Vucy5zdG9yZShyZXNwb25zZS50b2tlbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idGFpbiBhIG5ldyBzZXQgb2YgYXV0aGVudGljYXRpb24gdG9rZW5zIHVzaW5nIHRoZVxuICAgKiBleGlzdGluZyByZWZyZXNoIHRva2VuLlxuICAgKlxuICAgKiBJZiB3ZSBhcmUgZ2l2ZW4gYSBmdW5jdGlvbiBmb3IgcmVmcmVzaCwgY2FsbCB0aGF0IGZ1bmN0aW9uXG4gICAqIHdpdGggdGhlIHJlZnJlc2hlZCB0b2tlbnMuXG4gICAqL1xuICBhc3luYyByZWZyZXNoQXV0aGVudGljYXRpb24oKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlJFRlJFU0gsIHtcbiAgICAgIHJlZnJlc2hfdG9rZW46IHRoaXMudG9rZW5zLnJlZnJlc2gsXG4gICAgfSk7XG5cbiAgICB0aGlzLnRva2Vucy5zdG9yZShyZXNwb25zZS50b2tlbnMpO1xuICAgIC8vIGNhbGwgdGhlIGhhbmRsZXIgZm9yIHRoaXMgZXZlbnQgaWYgd2UgaGF2ZSBvbmVcbiAgICBpZiAodHlwZW9mICh0aGlzLmV2ZW50cy5yZWZyZXNoKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYXdhaXQgdGhpcy5ldmVudHMucmVmcmVzaCh0aGlzLnRva2Vucyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBleGlzdGluZyBzZXQgb2YgdG9rZW5zIGhhdmUgZXhwaXJlZCwgYXV0b21hdGljYWxseVxuICAgKiB0cmlnZ2VyaW5nIGEgcmVmcmVzaCBpZiB0aGV5IGhhdmUgZXhwaXJlZC5cbiAgICpcbiAgICogSWYgd2UgYXJlIGdpdmVuIGEgZnVuY3Rpb24gZm9yIHJlZnJlc2gsIGNhbGwgdGhhdCBmdW5jdGlvblxuICAgKiB3aXRoIHRoZSByZWZyZXNoZWQgdG9rZW5zLlxuICAgKi9cbiAgYXN5bmMgaW1wbGljaXRUb2tlblJlZnJlc2goKSB7XG4gICAgaWYgKHRoaXMudG9rZW5zLmV4cGlyZWQoKSkge1xuICAgICAgaWYgKHRoaXMudG9rZW5zLnJlZnJlc2gpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBMZXQncyBpbXBsaWNpdGx5IHJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiB1c2luZyB0aGUgcmVmcmVzaCB0b2tlbi5cbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hBdXRoZW50aWNhdGlvbigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIFRoZSByZWZyZXNoIHRva2VuIGlzIG5vdCB2YWxpZC5cbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byByZWZyZXNoIGV4cGlyZWQgdG9rZW46ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBhbmQgY2FsbCB0aGUgaGFuZGxlciBmb3IgdGhpcyBldmVudCBpZiB3ZSBoYXZlIG9uZVxuICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXMuZXZlbnRzLnJlZnJlc2gpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV2ZW50cy5yZWZyZXNoKHRoaXMudG9rZW5zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gd2hhdCBzaG91bGQgd2UgZG8gaGVyZT9cbiAgICAgICAgICAvLyB0aGlzIGlzIG5vdCBhIHNob3cgc3RvcHBlciBidXQgdGhlIHVzZXJcbiAgICAgICAgICAvLyBzaG91bGQga25vdyB0aGlzIGhhcHBlbmVkXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUcm91YmxlIGluIGNhbGwgdG8gcmVmcmVzaCBoYW5kbGVyOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXZSBhcmUgZm9yY2VkIHRvIHJlamVjdCBhcyBvdXIgYWNjZXNzIHRva2VuIGhhcyBleHBpcmVkIGFuZCB3ZVxuICAgICAgICAvLyBkbyBub3QgaGF2ZSBhIHJlZnJlc2ggdG9rZW4uXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQWNjZXNzIHRva2VuIGV4cGlyZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSHR0cHNXb3JrZXI7XG4iLCJpbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4vYXBpL2VuZHBvaW50cyc7XG5pbXBvcnQgVGlja2VyIGZyb20gJy4vY29yZS90aWNrZXInO1xuXG4vLyBUaGUgbWF4aW11bSBudW1iZXIgb2Ygb3JkZXJzIHJldHJpZXZlZCBieSB0aGUgL29yZGVycyBBUEkuXG5jb25zdCBPUkRFUlNfUEVSX1BBR0UgPSAyMDtcblxuY29uc3QgaXNDYW5hZGlhblNlY3VyaXR5ID0gKGV4Y2hhbmdlKSA9PiBbJ1RTWCcsICdUU1gtViddLmluY2x1ZGVzKGV4Y2hhbmdlKTtcblxuLypcbiAqIFJldHJpZXZlIGZpbHRlcmVkIG9yZGVycyBieSB0aWNrZXIgYW5kIHN0YXR1cy5cbiAqL1xuZnVuY3Rpb24gZmlsdGVyZWRPcmRlcnMobGlzdCwgdGlja2VyLCBzdGF0dXMpIHtcbiAgY29uc3Qgb3JkZXJGaWx0ZXIgPSAob3JkZXIpID0+IHtcbiAgICBpZiAodGlja2VyKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgVGlja2VyKHsgc3ltYm9sOiBvcmRlci5zeW1ib2wsIGlkOiBvcmRlci5zZWN1cml0eV9pZCB9KTtcbiAgICAgIC8vIG9yZGVyIG9iamVjdHMgZG9uJ3QgaW5jbHVkZSBleGNoYW5nZXMsIHNvIHdlIGFyZSB1bmFibGUgdG8gbWFrZVxuICAgICAgLy8gYSBzdHJvbmcgY29tcGFyaXNvbiB3aXRob3V0IHJlcXVpcmluZyBhIGxpbmVhciBpbmNyZWFzZSBvZlxuICAgICAgLy8gZW5kcG9pbnQgY2FsbHMgKHdoaWNoIGlzIG5vdCByZWFzb25hYmxlKS5cbiAgICAgIC8vXG4gICAgICAvLyBUaGUgdXNlciBzaG91bGQgcHJvdmlkZSB0aGUgc2VjdXJpdHkgaWQgZm9yIGEgc3Ryb25nIGNvbXBhcmlzb24gaGVyZS5cbiAgICAgIGlmICghbmV3IFRpY2tlcih0aWNrZXIpLndlYWtFcXVhbHModGFyZ2V0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9yZGVyLnN0YXR1cyA9PT0gc3RhdHVzO1xuICB9O1xuXG4gIC8vIEFwcGx5IGZpbHRlciB0byB0aGUgcmVzdWx0XG4gIGNvbnN0IGZpbHRlcmVkID0gbGlzdC5vcmRlcnMuZmlsdGVyKG9yZGVyRmlsdGVyKTtcblxuICByZXR1cm4ge1xuICAgIG9yZGVyczogZmlsdGVyZWQsXG4gICAgdG90YWw6IGZpbHRlcmVkLmxlbmd0aCxcbiAgfTtcbn1cblxuY2xhc3MgT3JkZXJzIHtcbiAgLyoqXG4gICAqIENyZWF0ZXcgYSBuZXcgT3JkZXJIaXN0b3J5IG9iamVjdCBhc3NvY2lhdGVkIHdpdGggYW4gSHR0cHMgd29ya2VyIHN0YXRlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGh0dHBzV29ya2VyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihodHRwc1dvcmtlciwgZGF0YSkge1xuICAgIHRoaXMud29ya2VyID0gaHR0cHNXb3JrZXI7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsZWN0cyBvcmRlcnMgKGZpbGxlZCwgcGVuZGluZywgY2FuY2VsbGVkKSBmb3IgdGhlIHByb3ZpZGVkIHBhZ2UgYW5kXG4gICAqIGFjY291bnQgaWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHBhZ2VOdW0gVGhlIG9yZGVycyBwYWdlIGluZGV4IHRvIHNlZWsgdG9cbiAgICovXG4gIGFzeW5jIHBhZ2UoYWNjb3VudElkLCBwYWdlTnVtKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLk9SREVSU19CWV9QQUdFLCB7XG4gICAgICBvZmZzZXQ6IChwYWdlTnVtIC0gMSkgKiBPUkRFUlNfUEVSX1BBR0UsXG4gICAgICBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ29sbGVjdHMgYWxsIG9yZGVycyAoZmlsbGVkLCBwZW5kaW5nLCBjYW5jZWxsZWQpIGZvciB0aGUgc3BlY2lmaWMgYWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqL1xuICBhc3luYyBhbGwoYWNjb3VudElkKSB7XG4gICAgLy8gV2Ugc3RhcnQgYnkgY2FwdHVyaW5nIHRoZSBmaXJzdCBwYWdlIG9mIG9yZGVycyBpbiBvcmRlciB0b1xuICAgIC8vIGRldGVybWluZSB0aGUgbnVtYmVyIG9mIHBhZ2VzIGF2YWlsYWJsZVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnBhZ2UoYWNjb3VudElkLCAxKTtcbiAgICBjb25zdCBwYWdlcyA9IE1hdGguY2VpbChkYXRhLnRvdGFsIC8gT1JERVJTX1BFUl9QQUdFKTtcblxuICAgIGlmIChwYWdlcyA+IDEpIHtcbiAgICAgIGNvbnN0IHRhc2tzID0gW107XG5cbiAgICAgIC8vIEJ1aWxkIHRoZSB0YXNrIHF1ZXVlIHRoYXQgd2lsbCByZXRyaWV2ZSB0aGUgcmVtYWluaW5nIHBhZ2VzIG9mIG9yZGVyc1xuICAgICAgZm9yIChsZXQgcGFnZU51bSA9IDI7IHBhZ2VOdW0gPD0gcGFnZXM7IHBhZ2VOdW0rKykge1xuICAgICAgICB0YXNrcy5wdXNoKHRoaXMucGFnZShhY2NvdW50SWQsIHBhZ2VOdW0pLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0Lm9yZGVycykpO1xuICAgICAgfVxuXG4gICAgICAvLyBPdXQtb2Ytb3JkZXIgaW52b2NhdGlvbiBpcyBkZXNpcmVkLiBXaGF0IG1hdHRlcnMgaXMgdGhhdCBQcm9taXNlLmFsbCB3aWxsXG4gICAgICAvLyBndWFyYW50ZWUgdGhhdCB0aGUgZGF0YSBvcmRlciBpcyBwcmVzZXJ2ZWQuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcyk7XG4gICAgICByZXN1bHQuZm9yRWFjaCgobGlzdCkgPT4gZGF0YS5vcmRlcnMucHVzaCguLi5saXN0KSk7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgdG90YWwgYXR0cmlidXRlIHRvIHJlZmxlY3QgdGhlIG5ldyBzaXplXG4gICAgICBkYXRhLnRvdGFsID0gZGF0YS5vcmRlcnMubGVuZ3RoO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBwZW5kaW5nIG9yZGVycyBmb3IgdGhlIHNwZWNpZmllZCBzZWN1cml0eSBpbiB0aGUgYWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIChvcHRpb25hbCkgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKi9cbiAgYXN5bmMgcGVuZGluZyhhY2NvdW50SWQsIHRpY2tlcikge1xuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IHRoaXMuYWxsKGFjY291bnRJZCk7XG4gICAgcmV0dXJuIGZpbHRlcmVkT3JkZXJzKG9yZGVycywgdGlja2VyLCAnc3VibWl0dGVkJyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGZpbGxlZCBvcmRlcnMgZm9yIHRoZSBzcGVjaWZpZWQgc2VjdXJpdHkgaW4gdGhlIGFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHRpY2tlciAob3B0aW9uYWwpIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICovXG4gIGFzeW5jIGZpbGxlZChhY2NvdW50SWQsIHRpY2tlcikge1xuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IHRoaXMuYWxsKGFjY291bnRJZCk7XG4gICAgcmV0dXJuIGZpbHRlcmVkT3JkZXJzKG9yZGVycywgdGlja2VyLCAncG9zdGVkJyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGNhbmNlbGxlZCBvcmRlcnMgZm9yIHRoZSBzcGVjaWZpZWQgc2VjdXJpdHkgaW4gdGhlIGFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHRpY2tlciAob3B0aW9uYWwpIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICovXG4gIGFzeW5jIGNhbmNlbGxlZChhY2NvdW50SWQsIHRpY2tlcikge1xuICAgIGNvbnN0IG9yZGVycyA9IGF3YWl0IHRoaXMuYWxsKGFjY291bnRJZCk7XG4gICAgcmV0dXJuIGZpbHRlcmVkT3JkZXJzKG9yZGVycywgdGlja2VyLCAnY2FuY2VsbGVkJyk7XG4gIH1cblxuICAvKipcbiAgICogQ2FuY2VscyB0aGUgcGVuZGluZyBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIG9yZGVyIGlkLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG9yZGVySWQgVGhlIHBlbmRpbmcgb3JkZXIgdG8gY2FuY2VsXG4gICAqL1xuICBhc3luYyBjYW5jZWwob3JkZXJJZCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcmRlcjogb3JkZXJJZCxcbiAgICAgIHJlc3BvbnNlOiBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5DQU5DRUxfT1JERVIsIHsgb3JkZXJJZCB9KSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgYWxsIHBlbmRpbmcgb3JkZXJzIHVuZGVyIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqL1xuICBhc3luYyBjYW5jZWxQZW5kaW5nKGFjY291bnRJZCkge1xuICAgIGNvbnN0IHBlbmRpbmcgPSBhd2FpdCB0aGlzLnBlbmRpbmcoYWNjb3VudElkKTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocGVuZGluZy5vcmRlcnMubWFwKGFzeW5jIChvcmRlcikgPT4gdGhpcy5jYW5jZWwob3JkZXIub3JkZXJfaWQpKSk7XG4gIH1cblxuICAvKipcbiAgICogTWFya2V0IGJ1eSBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHB1cmNoYXNlXG4gICAqL1xuICBhc3luYyBtYXJrZXRCdXkoYWNjb3VudElkLCB0aWNrZXIsIHF1YW50aXR5KSB7XG4gICAgY29uc3QgZGV0YWlscyA9IGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIsIHRydWUpO1xuXG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgICBzZWN1cml0eV9pZDogZGV0YWlscy5pZCxcbiAgICAgIGxpbWl0X3ByaWNlOiAhKG5ldyBUaWNrZXIodGlja2VyKS5jcnlwdG8pID8gZGV0YWlscy5xdW90ZS5hbW91bnQgOiB1bmRlZmluZWQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdidXlfcXVhbnRpdHknLFxuICAgICAgb3JkZXJfc3ViX3R5cGU6ICdtYXJrZXQnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTGltaXQgYnV5IGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWF4aW11bSBwcmljZSB0byBwdXJjaGFzZSB0aGUgc2VjdXJpdHkgYXRcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gcHVyY2hhc2VcbiAgICovXG4gIGFzeW5jIGxpbWl0QnV5KGFjY291bnRJZCwgdGlja2VyLCBsaW1pdCwgcXVhbnRpdHkpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiAoYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlcikpLmlkLFxuICAgICAgbGltaXRfcHJpY2U6IGxpbWl0LFxuICAgICAgcXVhbnRpdHksXG4gICAgICBvcmRlcl90eXBlOiAnYnV5X3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnbGltaXQnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBsaW1pdCBidXkgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IHN0b3AgVGhlIHByaWNlIGF0IHdoaWNoIHRoZSBvcmRlciBjb252ZXJ0cyB0byBhIGxpbWl0IG9yZGVyXG4gICAqIEBwYXJhbSB7Kn0gbGltaXQgVGhlIG1heGltdW0gcHJpY2UgdG8gcHVyY2hhc2UgdGhlIHNlY3VyaXR5IGF0XG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHB1cmNoYXNlXG4gICAqL1xuICBhc3luYyBzdG9wTGltaXRCdXkoYWNjb3VudElkLCB0aWNrZXIsIHN0b3AsIGxpbWl0LCBxdWFudGl0eSkge1xuICAgIGNvbnN0IHNlY3VyaXR5ID0gYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlcik7XG5cbiAgICAvLyBUaGUgV2VhbHRoc2ltcGxlIFRyYWRlIGJhY2tlbmQgZG9lc24ndCBjaGVjayBmb3IgdGhpcywgZXZlbiB0aG91Z2ggdGhlIGFwcCBkb2VzLi5cbiAgICBpZiAoaXNDYW5hZGlhblNlY3VyaXR5KHNlY3VyaXR5LnN0b2NrLnByaW1hcnlfZXhjaGFuZ2UpICYmIHN0b3AgIT09IGxpbWl0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RTWC9UU1gtViBzZWN1cml0aWVzIG11c3QgaGF2ZSBhbiBlcXVpdmFsZW50IHN0b3AgYW5kIGxpbWl0IHByaWNlLicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IHNlY3VyaXR5LmlkLFxuICAgICAgc3RvcF9wcmljZTogc3RvcCxcbiAgICAgIGxpbWl0X3ByaWNlOiBsaW1pdCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ2J1eV9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ3N0b3BfbGltaXQnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTWFya2V0IHNlbGwgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgYXN5bmMgbWFya2V0U2VsbChhY2NvdW50SWQsIHRpY2tlciwgcXVhbnRpdHkpIHtcbiAgICBjb25zdCBkZXRhaWxzID0gYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlciwgdHJ1ZSk7XG5cbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiBkZXRhaWxzLmlkLFxuICAgICAgbWFya2V0X3ZhbHVlOiAhKG5ldyBUaWNrZXIodGlja2VyKS5jcnlwdG8pID8gZGV0YWlscy5xdW90ZS5hbW91bnQgOiB1bmRlZmluZWQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdzZWxsX3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnbWFya2V0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExpbWl0IHNlbGwgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IGxpbWl0IFRoZSBtaW5pbXVtIHByaWNlIHRvIHNlbGwgdGhlIHNlY3VyaXR5IGF0XG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHNlbGxcbiAgICovXG4gIGFzeW5jIGxpbWl0U2VsbChhY2NvdW50SWQsIHRpY2tlciwgbGltaXQsIHF1YW50aXR5KSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgICBzZWN1cml0eV9pZDogKGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpKS5pZCxcbiAgICAgIGxpbWl0X3ByaWNlOiBsaW1pdCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ3NlbGxfcXVhbnRpdHknLFxuICAgICAgb3JkZXJfc3ViX3R5cGU6ICdsaW1pdCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGxpbWl0IHNlbGwgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IHN0b3AgVGhlIHByaWNlIGF0IHdoaWNoIHRoZSBvcmRlciBjb252ZXJ0cyB0byBhIGxpbWl0IG9yZGVyXG4gICAqIEBwYXJhbSB7Kn0gbGltaXQgVGhlIG1pbmltdW0gcHJpY2UgdG8gc2VsbCB0aGUgc2VjdXJpdHkgYXRcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gc2VsbFxuICAgKi9cbiAgYXN5bmMgc3RvcExpbWl0U2VsbChhY2NvdW50SWQsIHRpY2tlciwgc3RvcCwgbGltaXQsIHF1YW50aXR5KSB7XG4gICAgY29uc3Qgc2VjdXJpdHkgPSBhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKTtcblxuICAgIC8vIFRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYmFja2VuZCBkb2Vzbid0IGNoZWNrIGZvciB0aGlzLCBldmVuIHRob3VnaCB0aGUgYXBwIGRvZXMuLlxuICAgIGlmIChpc0NhbmFkaWFuU2VjdXJpdHkoc2VjdXJpdHkuc3RvY2sucHJpbWFyeV9leGNoYW5nZSkgJiYgc3RvcCAhPT0gbGltaXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVFNYL1RTWC1WIHNlY3VyaXRpZXMgbXVzdCBoYXZlIGFuIGVxdWl2YWxlbnQgc3RvcCBhbmQgbGltaXQgcHJpY2UuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgICBzZWN1cml0eV9pZDogc2VjdXJpdHkuaWQsXG4gICAgICBzdG9wX3ByaWNlOiBzdG9wLFxuICAgICAgbGltaXRfcHJpY2U6IGxpbWl0LFxuICAgICAgcXVhbnRpdHksXG4gICAgICBvcmRlcl90eXBlOiAnc2VsbF9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ3N0b3BfbGltaXQnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgT3JkZXJzO1xuIiwiLyoqXG4gKiBUaGUgZGVmYXVsdCBwcm92aWRlciBmb3IgcXVvdGVzIGlzIFdlYWx0aHNpbXBsZSBUcmFkZS5cbiAqL1xuXG5leHBvcnQgZGVmYXVsdCAoZGF0YSkgPT4gKHtcblxuICAvKipcbiAgICAgKiBRdW90ZSBmb3IgYSB0aWNrZXIgZnJvbSB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGVuZHBvaW50LlxuICAgICAqXG4gICAgICogUmVtZW1iZXIgdGhhdCB0aGlzIHF1b3RlIGlzIE5PVCByZWFsLXRpbWUhXG4gICAgICovXG4gIGFzeW5jIHF1b3RlKHRpY2tlcikge1xuICAgIGNvbnN0IGluZm8gPSBhd2FpdCBkYXRhLmdldFNlY3VyaXR5KHRpY2tlciwgdHJ1ZSk7XG4gICAgcmV0dXJuIGluZm8ucXVvdGUuYW1vdW50O1xuICB9LFxufSk7XG4iLCJpbXBvcnQgVHJhZGVRdW90ZXMgZnJvbSAnLi9kZWZhdWx0JztcbmltcG9ydCBUaWNrZXIgZnJvbSAnLi4vY29yZS90aWNrZXInO1xuaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuLi9hcGkvZW5kcG9pbnRzJztcblxuY2xhc3MgUXVvdGVzIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgUXVvdGVzIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIEhUVFBTIFdvcmtlciBzdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBodHRwc1dvcmtlclxuICAgKi9cbiAgY29uc3RydWN0b3IoaHR0cHNXb3JrZXIsIGRhdGEpIHtcbiAgICAvLyBXZWFsdGhzaW1wbGUgVHJhZGUgaXMgb3VyIGRlZmF1bHQgc291cmNlIGZvciBxdW90ZXMsIGRlc3BpdGVcbiAgICAvLyBoYXZpbmcgYSAxNSBtaW4gZGVsYXlcbiAgICB0aGlzLmRlZmF1bHRQcm92aWRlciA9IG5ldyBUcmFkZVF1b3RlcyhkYXRhKTtcblxuICAgIC8vIE1haW50YWlucyBxdW90ZSBwcm92aWRlcnMgb24gYW4gZXhjaGFuZ2UgYmFzaXNcbiAgICB0aGlzLnByb3ZpZGVycyA9IHt9O1xuXG4gICAgdGhpcy53b3JrZXIgPSBodHRwc1dvcmtlcjtcbiAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICB9XG5cbiAgLyoqXG4gICAgICogTG9hZCBhIGN1c3RvbSBwcm92aWRlciBmb3IgdGhlIGV4Y2hhbmdlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBleGNoYW5nZSBUaGUgZXhjaGFuZ2UgdGhhdCB0aGUgcHJvdmlkZXIgZmV0Y2hlcyBxdW90ZXMgZm9yXG4gICAgICogQHBhcmFtIHsqfSBwcm92aWRlciBUaGUgcHJvdmlkZXIgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHF1b3RlKCkgaW1wbGVtZW50YXRpb24uXG4gICAgICovXG4gIHVzZShleGNoYW5nZSwgcHJvdmlkZXIpIHtcbiAgICBpZiAodHlwZW9mIChwcm92aWRlci5xdW90ZSkgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIFRoZSBwcm92aWRlciBtdXN0IGhhdmUgYSBxdW90ZSgpIGltcGxlbWVudGF0aW9uIHRoYXQgd2UgY2FuIGNhbGwgbGF0ZXIhXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcXVvdGUgcHJvdmlkZXIgZm9yICR7ZXhjaGFuZ2V9IWApO1xuICAgIH1cblxuICAgIHRoaXMucHJvdmlkZXJzW2V4Y2hhbmdlXSA9IHByb3ZpZGVyO1xuICB9XG5cbiAgLyoqXG4gICAgICogT2J0YWlucyBhIHF1b3RlIGZvciB0aGUgdGlja2VyLiBUaGUgc291cmNlIG9mIHRoZSBxdW90ZSBtYXkgYmUgYSBjdXN0b21cbiAgICAgKiBwcm92aWRlciBpZiBhIHZhbGlkIHByb3ZpZGVyIGlzIHJlZ2lzdGVyZWQgZm9yIHRoZSBleGNoYW5nZSB0aGF0IHRoZVxuICAgICAqIHRpY2tlciB0cmFkZXMgb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHNlY3VyaXR5IFRoZSBzZWN1cml0eSB0byBnZXQgYSBxdW90ZSBmb3IuXG4gICAgICovXG4gIGFzeW5jIGdldChzZWN1cml0eSkge1xuICAgIGxldCBleGNoYW5nZSA9IG51bGw7XG4gICAgY29uc3QgdGlja2VyID0gbmV3IFRpY2tlcihzZWN1cml0eSk7XG5cbiAgICBpZiAodGlja2VyLmV4Y2hhbmdlKSB7XG4gICAgICAvLyBXZSBuZWVkIHRoZSBleGNoYW5nZSBpbiB0aGUgbmV4dCBzdGVwIGlmIHRoZSB1c2VyIGhhcyBzcGVjaWZpZWRcbiAgICAgIC8vIGEgY3VzdG9tIHByb3ZpZGVyIGZvciBhbiBleGNoYW5nZS4gU28gaWYgdGhlIHVzZXIgaGFzbid0IHByb3ZpZGVkXG4gICAgICAvLyBpdCwgd2Ugd2lsbCBoYXZlIHRvIHBpbmcgV2VhbHRoc2ltcGxlIHRyYWRlIHRvIGdldCBpdC5cbiAgICAgIGV4Y2hhbmdlID0gdGlja2VyLmV4Y2hhbmdlO1xuICAgIH0gZWxzZSBpZiAodGlja2VyLmNyeXB0byAmJiB0aWNrZXIuaWQpIHtcbiAgICAgIC8vIElmIHRoZSBpZCBpcyBvbmx5IGdpdmVuIGJ1dCB3ZSBrbm93IGl0J3MgYSBjcnlwdG8gaWQsXG4gICAgICAvLyB3ZSB3aWxsIGF1dG9tYXRpY2FsbHkgc2V0IGV4Y2hhbmdlIHRvICdDQycuXG4gICAgICBleGNoYW5nZSA9ICdDQyc7XG4gICAgfSBlbHNlIGlmIChPYmplY3Qua2V5cyh0aGlzLnByb3ZpZGVycykubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIsIGZhbHNlKTtcbiAgICAgIGV4Y2hhbmdlID0gaW5mby5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlO1xuICAgIH1cblxuICAgIC8vIEEgY3VzdG9tIHByb3ZpZGVyIHdpbGwgdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhlIGRlZmF1bHQgc291cmNlXG4gICAgaWYgKGV4Y2hhbmdlIGluIHRoaXMucHJvdmlkZXJzKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnNbZXhjaGFuZ2VdLnF1b3RlKHRpY2tlcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGVmYXVsdFByb3ZpZGVyLnF1b3RlKHRpY2tlcik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBoaXN0b3JpY2FsIHF1b3RlcyB3aXRoaW4gYSBzcGVjaWZpZWQgaW50ZXJ2YWwgZm9yIHRoZSB0aWNrZXIuXG4gICAqIFRoZSBzb3VyY2Ugb2YgdGhlIGhpc3RvcmljYWwgZGF0YSBpcyBub3QgY3VzdG9taXphYmxlIGF0IHRoaXMgdGltZSBiZWNhdXNlXG4gICAqIHRoZXJlIGlzIG5vIG5lZWQgZm9yIGl0IHRvIGJlIHNvLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgdGlja2VyIHRvIHNlYXJjaCBoaXN0b3JpY2FsIHF1b3RlcyBmb3JcbiAgICogQHBhcmFtIHsqfSBpbnRlcnZhbCBUaGUgdGltZSByYW5nZSBvZiB0aGUgcXVvdGVzXG4gICAqL1xuICBhc3luYyBoaXN0b3J5KHNlY3VyaXR5LCBpbnRlcnZhbCkge1xuICAgIC8vIHZhbGlkYXRlIHRoZSB1c2VyLWdpdmVuIHNlY3VyaXR5XG4gICAgY29uc3QgdGlja2VyID0gbmV3IFRpY2tlcihzZWN1cml0eSk7XG4gICAgaWYgKCF0aWNrZXIuaWQpIHtcbiAgICAgIHRpY2tlci5pZCA9IChhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKSkuaWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlFVT1RFU19ISVNUT1JZLCB7IGlkOiB0aWNrZXIuaWQsIGludGVydmFsIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFF1b3RlcztcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt0b1N0cmluZ1RhZ1N5bWJvbF0gPVxuICAgIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgaWYgKCEodG9TdHJpbmdUYWdTeW1ib2wgaW4gZ2VuRnVuKSkge1xuICAgICAgICBnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuICAgICAgfVxuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIC8vIElmIGEgcmVqZWN0ZWQgUHJvbWlzZSB3YXMgeWllbGRlZCwgdGhyb3cgdGhlIHJlamVjdGlvbiBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBoYW5kbGVkIHRoZXJlLlxuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIEdwW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yXCI7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBHcFtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZVxuICAvLyBvciBub3QsIHJldHVybiB0aGUgcnVudGltZSBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gZGVjbGFyZSB0aGUgdmFyaWFibGVcbiAgLy8gcmVnZW5lcmF0b3JSdW50aW1lIGluIHRoZSBvdXRlciBzY29wZSwgd2hpY2ggYWxsb3dzIHRoaXMgbW9kdWxlIHRvIGJlXG4gIC8vIGluamVjdGVkIGVhc2lseSBieSBgYmluL3JlZ2VuZXJhdG9yIC0taW5jbHVkZS1ydW50aW1lIHNjcmlwdC5qc2AuXG4gIHJldHVybiBleHBvcnRzO1xuXG59KFxuICAvLyBJZiB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUsIHVzZSBtb2R1bGUuZXhwb3J0c1xuICAvLyBhcyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIG5hbWVzcGFjZS4gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBlbXB0eVxuICAvLyBvYmplY3QuIEVpdGhlciB3YXksIHRoZSByZXN1bHRpbmcgb2JqZWN0IHdpbGwgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gIC8vIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgdmFyaWFibGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUuXG4gIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgPyBtb2R1bGUuZXhwb3J0cyA6IHt9XG4pKTtcblxudHJ5IHtcbiAgcmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbn0gY2F0Y2ggKGFjY2lkZW50YWxTdHJpY3RNb2RlKSB7XG4gIC8vIFRoaXMgbW9kdWxlIHNob3VsZCBub3QgYmUgcnVubmluZyBpbiBzdHJpY3QgbW9kZSwgc28gdGhlIGFib3ZlXG4gIC8vIGFzc2lnbm1lbnQgc2hvdWxkIGFsd2F5cyB3b3JrIHVubGVzcyBzb21ldGhpbmcgaXMgbWlzY29uZmlndXJlZC4gSnVzdFxuICAvLyBpbiBjYXNlIHJ1bnRpbWUuanMgYWNjaWRlbnRhbGx5IHJ1bnMgaW4gc3RyaWN0IG1vZGUsIHdlIGNhbiBlc2NhcGVcbiAgLy8gc3RyaWN0IG1vZGUgdXNpbmcgYSBnbG9iYWwgRnVuY3Rpb24gY2FsbC4gVGhpcyBjb3VsZCBjb25jZWl2YWJseSBmYWlsXG4gIC8vIGlmIGEgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZm9yYmlkcyB1c2luZyBGdW5jdGlvbiwgYnV0IGluIHRoYXQgY2FzZVxuICAvLyB0aGUgcHJvcGVyIHNvbHV0aW9uIGlzIHRvIGZpeCB0aGUgYWNjaWRlbnRhbCBzdHJpY3QgbW9kZSBwcm9ibGVtLiBJZlxuICAvLyB5b3UndmUgbWlzY29uZmlndXJlZCB5b3VyIGJ1bmRsZXIgdG8gZm9yY2Ugc3RyaWN0IG1vZGUgYW5kIGFwcGxpZWQgYVxuICAvLyBDU1AgdG8gZm9yYmlkIEZ1bmN0aW9uLCBhbmQgeW91J3JlIG5vdCB3aWxsaW5nIHRvIGZpeCBlaXRoZXIgb2YgdGhvc2VcbiAgLy8gcHJvYmxlbXMsIHBsZWFzZSBkZXRhaWwgeW91ciB1bmlxdWUgcHJlZGljYW1lbnQgaW4gYSBHaXRIdWIgaXNzdWUuXG4gIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzIxNF9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNTQ1X187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX185NDlfXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Mik7XG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiBtb2R1bGVbJ2RlZmF1bHQnXSA6XG5cdFx0KCkgPT4gbW9kdWxlO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiXSwic291cmNlUm9vdCI6IiJ9