!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("source-map-support"),require("node-fetch"),require("cloudscraper")):"function"==typeof define&&define.amd?define(["source-map-support","node-fetch","cloudscraper"],t):"object"==typeof exports?exports["wstrade-api"]=t(require("source-map-support"),require("node-fetch"),require("cloudscraper")):e["wstrade-api"]=t(e._,e._,e._)}(global,(function(e,t,r){return(()=>{var n={228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},858:e=>{e.exports=function(e){if(Array.isArray(e))return e}},646:(e,t,r)=>{var n=r(228);e.exports=function(e){if(Array.isArray(e))return n(e)}},926:e=>{function t(e,t,r,n,i,s,a){try{var o=e[s](a),u=o.value}catch(e){return void r(e)}o.done?t(u):Promise.resolve(u).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,s){var a=e.apply(r,n);function o(e){t(a,i,s,o,u,"next",e)}function u(e){t(a,i,s,o,u,"throw",e)}o(void 0)}))}}},575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},913:e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}},713:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},884:e=>{e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw s}}return r}}},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},38:(e,t,r)=>{var n=r(858),i=r(884),s=r(379),a=r(521);e.exports=function(e,t){return n(e)||i(e,t)||s(e,t)||a()}},319:(e,t,r)=>{var n=r(646),i=r(860),s=r(379),a=r(206);e.exports=function(e){return n(e)||i(e)||s(e)||a()}},379:(e,t,r)=>{var n=r(228);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},757:(e,t,r)=>{e.exports=r(666)},391:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(319),i=r.n(n),s=r(757),a=r.n(s),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(726),d=99,y=["sell","deposit","withdrawal","dividend","institutional_transfer","internal_transfer","refund","referral_bonus","affiliate","buy"];const v=function(){function e(t){l()(this,e),this.worker=t}var t,r,n,s,o,c,h,v,m;return p()(e,[{key:"all",value:(m=u()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.worker.handleRequest(f.Z.ACCOUNT_IDS,{});case 2:return t=e.sent,e.abrupt("return",{tfsa:t.find((function(e){return e.startsWith("tfsa")})),rrsp:t.find((function(e){return e.startsWith("rrsp")})),crypto:t.find((function(e){return e.startsWith("non-registered-crypto")})),personal:t.find((function(e){return e.startsWith("non-registered")&&!e.startsWith("non-registered-crypto")}))});case 4:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})},{key:"data",value:(v=u()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.LIST_ACCOUNT,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"me",value:(h=u()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.ME,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"person",value:(c=u()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.PERSON,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"history",value:(o=u()(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.HISTORY_ACCOUNT,{interval:t,accountId:r}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"activities",value:(s=u()(a().mark((function e(){var t,r,n,s,o,u,c,l,h,p,v=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=(o=v.length>0&&void 0!==v[0]?v[0]:{})&&o.limit&&o.limit>d)){e.next=3;break}throw new Error("filters.limit can not exceed 99! Leave filters.limit undefined if you want to retrieve all.");case 3:if(null==o||!o.accounts||Array.isArray(o.accounts)){e.next=5;break}throw new Error("filters.accounts must be an array!");case 5:if(null==o||!o.type||Array.isArray(o.type)){e.next=7;break}throw new Error("filters.type must be an array!");case 7:return u=[],e.next=10,this.worker.handleRequest(f.Z.ACTIVITIES,{limit:null!==(t=null==o?void 0:o.limit)&&void 0!==t?t:d,accountIds:null!==(r=null==o||null===(n=o.accounts)||void 0===n?void 0:n.join())&&void 0!==r?r:"",bookmark:"",type:null!==(s=null==o?void 0:o.type)&&void 0!==s?s:y});case 10:if(c=e.sent,u.push.apply(u,i()(c.results)),null!=o&&o.limit){e.next=22;break}case 13:if(u.length%d!=0){e.next=22;break}return e.next=16,this.worker.handleRequest(f.Z.ACTIVITIES,{limit:d,accountIds:null!==(l=null==o||null===(h=o.accounts)||void 0===h?void 0:h.join())&&void 0!==l?l:"",bookmark:c.bookmark,type:null!==(p=null==o?void 0:o.type)&&void 0!==p?p:y});case 16:if(0!==(c=e.sent).results.length){e.next=19;break}return e.abrupt("break",22);case 19:u.push.apply(u,i()(c.results)),e.next=13;break;case 22:return e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getBankAccounts",value:(n=u()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.BANK_ACCOUNTS,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"deposits",value:(r=u()(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.DEPOSITS,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"positions",value:(t=u()(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.POSITIONS,{accountId:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n={onFailure:function(e){return{status:e.statusCode,reason:e.statusMessage,body:e.body}},onSuccess:function(e){return e.body}};const i={LOGIN:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/login",authenticated:!1,onSuccess:function(e){return{tokens:{access:e.headers["x-access-token"],refresh:e.headers["x-refresh-token"],expires:parseInt(e.headers["x-access-token-expires"],10)},accountInfo:e.body}},onFailure:n.onFailure},REFRESH:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/refresh",authenticated:!1,onSuccess:function(e){return{tokens:{access:e.headers["x-access-token"],refresh:e.headers["x-refresh-token"],expires:parseInt(e.headers["x-access-token-expires"],10)}}},onFailure:n.onFailure},ACCOUNT_IDS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",authenticated:!0,onSuccess:function(e){return e.body.results.map((function(e){return e.id}))},onFailure:n.onFailure},LIST_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},ME:{method:"GET",url:"https://trade-service.wealthsimple.com/me",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},PERSON:{method:"GET",url:"https://trade-service.wealthsimple.com/person",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},HISTORY_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/history/{0}?account_id={1}",authenticated:!0,parameters:{0:"interval",1:"accountId"},onSuccess:n.onSuccess,onFailure:n.onFailure},ACTIVITIES:{method:"GET",url:"https://trade-service.wealthsimple.com/account/activities?limit={0}&account_ids={1}&[2]&bookmark={3}",authenticated:!0,parameters:{0:"limit",1:"accountIds",2:"type",3:"bookmark"},onSuccess:n.onSuccess,onFailure:n.onFailure},DEPOSITS:{method:"GET",url:"https://trade-service.wealthsimple.com/deposits",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},BANK_ACCOUNTS:{method:"GET",url:"https://trade-service.wealthsimple.com/bank-accounts",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},EXCHANGE_RATES:{method:"GET",url:"https://trade-service.wealthsimple.com/forex",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure},SECURITY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities?query={0}",authenticated:!0,parameters:{0:"ticker"},onSuccess:function(e){var t=e.body;if(0===t.results.length)throw new Error("Security does not exist");return t.results},onFailure:n.onFailure},EXTENSIVE_SECURITY_DETAILS:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}",authenticated:!0,parameters:{0:"id"},onSuccess:n.onSuccess,onFailure:n.onFailure},SECURITY_GROUPS:{method:"GET",url:"https://trade-service.wealthsimple.com/security-groups?limit=99",authenticated:!0,onSuccess:function(e){return e.body.results},onFailure:n.onFailure},SECURITY_GROUP:{method:"GET",url:"https://trade-service.wealthsimple.com/security-groups/{0}/securities",authenticated:!0,parameters:{0:"groupId"},onSuccess:function(e){return e.body.results},onFailure:n.onFailure},QUOTES_HISTORY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}/historical_quotes/{1}?mic=XNAS",authenticated:!0,parameters:{0:"id",1:"interval"},onSuccess:n.onSuccess,onFailure:n.onFailure},POSITIONS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/positions?account_id={0}",authenticated:!0,parameters:{0:"accountId"},onSuccess:function(e){return e.body.results},onFailure:n.onFailure},ORDERS_BY_PAGE:{method:"GET",url:"https://trade-service.wealthsimple.com/orders?offset={0}&account_id={1}",authenticated:!0,parameters:{0:"offset",1:"accountId"},onSuccess:function(e){var t=e.body;return{total:t.total,orders:t.results}},onFailure:n.onFailure},CANCEL_ORDER:{method:"DELETE",url:"https://trade-service.wealthsimple.com/orders/{0}",authenticated:!0,parameters:{0:"orderId"},onSuccess:n.onSuccess,onFailure:n.onFailure},PLACE_ORDER:{method:"POST",url:"https://trade-service.wealthsimple.com/orders",authenticated:!0,onSuccess:n.onSuccess,onFailure:n.onFailure}}},464:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(757),i=r.n(n),s=r(926),a=r.n(s),o=r(575),u=r.n(o),c=r(913),l=r.n(c),h=r(726);const p=function(){function e(t){u()(this,e),this.worker=t,this.events={otp:null,refresh:null}}var t,r;return l()(e,[{key:"on",value:function(e,t){if(!(e in this.events))throw new Error("Unsupported authentication event '".concat(e,"'!"));"refresh"==e?this.worker.on(e,t):this.events[e]=t}},{key:"use",value:function(e){this.worker.tokens.store(e)}},{key:"tokens",value:function(){return{access:this.worker.tokens.access,refresh:this.worker.tokens.refresh,expires:this.worker.tokens.expires}}},{key:"login",value:(r=a()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,"function"!=typeof this.events.otp){e.next=4;break}return e.next=4,this.worker.handleRequest(h.Z.LOGIN,{email:t,password:r}).catch((function(){}));case 4:if(e.prev=4,e.t0=this.worker,e.t1=h.Z.LOGIN,e.t2=t,e.t3=r,"function"!=typeof this.events.otp){e.next=15;break}return e.next=12,this.events.otp();case 12:e.t4=e.sent,e.next=16;break;case 15:e.t4=this.events.otp;case 16:return e.t5=e.t4,e.t6={email:e.t2,password:e.t3,otp:e.t5},e.next=20,e.t0.handleRequest.call(e.t0,e.t1,e.t6);case 20:n=e.sent,e.next=28;break;case 23:if(e.prev=23,e.t7=e.catch(4),this.events.otp){e.next=27;break}throw new Error("OTP not provided!");case 27:throw e.t7;case 28:this.use(n.tokens);case 29:case"end":return e.stop()}}),e,this,[[4,23]])}))),function(e,t){return r.apply(this,arguments)})},{key:"refresh",value:(t=a()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.refreshAuthentication());case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()},500:(e,t,r)=>{"use strict";r.d(t,{e:()=>s,Z:()=>a});var n=["implicit_token_refresh","securities_cache"],i=["securities_cache"],s=function(e){return!i.includes(e)};function a(e){if(!function(e){return null!=e&&e.startsWith("no_")?n.includes(e.substring("no_".length)):n.includes(e)}(e))throw new Error("'".concat(e,"' is not supported!"));if(null!=e&&e.startsWith("no_")){var t=e.substring(e.indexOf("_")+1);s(t)&&i.push(t)}else s(e)||i.splice(i.indexOf(e),1)}},657:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(38),i=r.n(n),s=r(575),a=r.n(s),o=r(913),u=r.n(o),c=["NASDAQ","NYSE","TSX","TSX-V","AEQUITAS NEO EXCHANGE","CC"];const l=function(){function e(t){var r;if(a()(this,e),this.symbol=null,this.exchange=null,this.id=null,this.crypto=!1,"string"==typeof t){if(""===t)throw new Error("Empty ticker");var n=t.split(":"),s=i()(n,2);this.symbol=s[0],this.exchange=s[1]}else{if(!t.symbol&&!t.id)throw new Error("Invalid ticker '".concat(t,"'"));this.symbol=t.symbol||null,this.exchange=t.exchange||null,this.id=t.id||null}if("NEO"===this.exchange&&(this.exchange="AEQUITAS NEO EXCHANGE"),this.exchange&&!c.includes(this.exchange))throw new Error("Invalid exchange '".concat(this.exchange,"'!"));("CC"===this.exchange||null!==(r=this.id)&&void 0!==r&&r.startsWith("sec-z"))&&(this.crypto=!0)}return u()(e,[{key:"format",value:function(){return this.id?this.id:"AEQUITAS NEO EXCHANGE"===this.exchange?"".concat(this.symbol,":NEO"):"".concat(this.symbol).concat(this.exchange?":".concat(this.exchange):"")}},{key:"weakEquals",value:function(e){return!(!this.id||this.id!==e.id)||!(!this.symbol||this.symbol!==e.symbol||this.crypto!==e.crypto)}}]),e}()},752:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(713),i=r.n(n),s=r(38),a=r.n(s),o=r(757),u=r.n(o),c=r(926),l=r.n(c),h=r(575),p=r.n(h),f=r(913),d=r.n(f),y=r(726),v=r(657),m=r(500),w=new(function(){function e(t){p()(this,e),this.cache=new Map,this.size=t}return d()(e,[{key:"insert",value:function(e,t){this.cache.size>=this.size&&this.cache.delete(this.cache.keys().next().value),this.cache.set(e,t)}},{key:"get",value:function(e){return this.cache.get(e)}}]),e}())(10);const k=function(e){var t=w.get(new v.Z(e).format());return void 0===t?null:t};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){i()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const g=function(){function e(t){p()(this,e),this.worker=t}var t,r,n,s;return d()(e,[{key:"exchangeRates",value:(s=l()(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(y.Z.EXCHANGE_RATES,{}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getSecurity",value:(n=l()(u().mark((function e(t,r){var n,i,s,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,i=new v.Z(t),r||!(0,m.e)("securities_cache")){e.next=6;break}if(!(n=k(i))){e.next=6;break}return e.abrupt("return",n);case 6:if(!i.id){e.next=12;break}return e.next=9,this.worker.handleRequest(y.Z.EXTENSIVE_SECURITY_DETAILS,{id:i.id});case 9:n=e.sent,e.next=28;break;case 12:return e.next=14,this.worker.handleRequest(y.Z.SECURITY,{ticker:i.symbol});case 14:if(n=(n=e.sent).filter((function(e){return e.stock.symbol===i.symbol})),i.crypto?n=n.filter((function(e){return"cryptocurrency"===e.security_type})):i.exchange&&(n=n.filter((function(e){return e.stock.primary_exchange===i.exchange}))),!(n.length>1)){e.next=19;break}throw new Error("Multiple securities matched query.");case 19:if(0!==n.length){e.next=21;break}throw new Error("No securities matched query.");case 21:if(s=n,o=a()(s,1),n=o[0],!r){e.next=28;break}return e.next=27,this.worker.handleRequest(y.Z.EXTENSIVE_SECURITY_DETAILS,{id:n.id});case 27:n=e.sent;case 28:return(0,m.e)("securities_cache")&&null===k(i)&&(u=i,c=n,w.insert(new v.Z(u).format(),c)),e.abrupt("return",n);case 30:case"end":return e.stop()}var u,c}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"securityGroups",value:(r=l()(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.worker.handleRequest(y.Z.SECURITY_GROUPS,{});case 2:return t=e.sent,e.abrupt("return",t.reduce((function(e,t){return b(b({},e),{},i()({},t.name,t.external_security_group_id))}),{}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getSecurityGroup",value:(t=l()(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,null!=t&&t.startsWith("security-group")){e.next=8;break}return e.next=4,this.securityGroups();case 4:if(n=e.sent,t in n){e.next=7;break}throw new Error("'".concat(t,"' is not a valid group name!"));case 7:r=n[t];case 8:return e.abrupt("return",this.worker.handleRequest(y.Z.SECURITY_GROUP,{groupId:r}));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}()},568:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(319),i=r.n(n),s=new(r(545).Headers);const a={add:function(e,t){return s.append(e,t)},remove:function(e){return s.delete(e)},clear:function(){return i()(s).forEach((function(e){return s.delete(e[0])}))},values:function(){return i()(s)}}},352:(e,t,r)=>{r(949).install();var n=r(464).Z,i=r(568).Z,s=r(391).Z,a=r(764).Z,o=r(752).Z,u=r(889).Z,c=r(500).Z,l=r(190).Z,h=function(){var e=new l,t=new o(e);return{auth:new n(e),headers:i,accounts:new s(e),orders:new a(e,t),quotes:new u(e,t),data:t,config:c}},p=new h;p.Session=function(){return new h},e.exports=p},190:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(757),i=r.n(n),s=r(38),a=r.n(s),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(713),d=r.n(f),y=r(214),v=r.n(y),m=r(568),w=r(726),k=r(500);const x=function(){function e(){l()(this,e),this.access=null,this.refresh=null,this.expires=null}return p()(e,[{key:"store",value:function(e){this.access=e.access,this.refresh=e.refresh,this.expires=e.expires}},{key:"expired",value:function(){return this.expires&&parseInt(Date.now()/1e3,10)>=this.expires}}]),e}();function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var g=200,E=201;function _(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){d()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t),n=e.url;if(e.parameters)for(var i=0;i<Object.keys(e.parameters).length;i++){var s=e.parameters[i];if(null===r[s]||void 0===r[s])throw new Error("URL parameter '".concat(s,"' missing!"));if(n.indexOf("{".concat(i,"}"))>=0)n=n.replace("{".concat(i,"}"),r[e.parameters[i]]);else{if(!(n.indexOf("[".concat(i,"]"))>=0))throw new Error("Malformed URL! This is an internal error: raise an issue!");!function(){var t=e.parameters[i],s=r[t].map((function(e){return"".concat(t,"=").concat(e)})).join("&");n=n.replace("[".concat(i,"]"),s)}()}delete r[e.parameters[i]]}return["GET","HEAD"].includes(e.method)?{url:n,payload:void 0}:{url:n,payload:JSON.stringify(r)}}const S=function(){function e(){l()(this,e),this.tokens=new x,this.events={refresh:null}}var t,r,n,s;return p()(e,[{key:"on",value:function(e,t){if(!(e in this.events))throw new Error("Unsupported authentication event '".concat(e,"'!"));this.events[e]=t}},{key:"talk",value:(s=u()(i().mark((function e(t,r){var n,s,o,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={"Content-type":"application/json"},!t.authenticated){e.next=8;break}if(this.tokens.access){e.next=4;break}throw new Error("Authentication required for '".concat(t.url,"'"));case 4:if(!(0,k.e)("implicit_token_refresh")){e.next=7;break}return e.next=7,this.implicitTokenRefresh();case 7:n.Authorization=this.tokens.access;case 8:return m.Z.values().forEach((function(e){var t=a()(e,2),r=t[0],i=t[1];n[r]=i})),s=_(t,r),o=s.url,u=s.payload,c=null,e.next=13,v()({url:o,body:u,method:t.method,headers:n,callback:function(e,t){c=t}}).catch((function(){}));case 13:try{c.body=JSON.parse(c.body)}catch(e){}return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"handleRequest",value:(n=u()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.talk(t,r);case 2:if(n=e.sent,![g,E].includes(n.statusCode)){e.next=5;break}return e.abrupt("return",t.onSuccess(n));case 5:return e.abrupt("return",Promise.reject(t.onFailure(n)));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"refreshAuthentication",value:(r=u()(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleRequest(w.Z.REFRESH,{refresh_token:this.tokens.refresh});case 2:if(t=e.sent,this.tokens.store(t.tokens),"function"!=typeof this.events.refresh){e.next=7;break}return e.next=7,this.events.refresh(this.tokens);case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"implicitTokenRefresh",value:(t=u()(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tokens.expired()){e.next=22;break}if(!this.tokens.refresh){e.next=21;break}return e.prev=2,e.next=5,this.refreshAuthentication();case 5:e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(2),new Error("Unable to refresh expired token: ".concat(e.t0));case 10:if(e.prev=10,"function"!=typeof this.events.refresh){e.next=14;break}return e.next=14,this.events.refresh(this.tokens);case 14:e.next=19;break;case 16:throw e.prev=16,e.t1=e.catch(10),new Error("Trouble in call to refresh handler: ".concat(e.t1));case 19:e.next=22;break;case 21:throw new Error("Access token expired");case 22:case"end":return e.stop()}}),e,this,[[2,7],[10,16]])}))),function(){return t.apply(this,arguments)})}]),e}()},764:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(319),i=r.n(n),s=r(757),a=r.n(s),o=r(926),u=r.n(o),c=r(575),l=r.n(c),h=r(913),p=r.n(h),f=r(726),d=r(657),y=function(e){return["TSX","TSX-V"].includes(e)};function v(e,t,r){var n=e.orders.filter((function(e){if(t){var n=new d.Z({symbol:e.symbol,id:e.security_id});if(!new d.Z(t).weakEquals(n))return!1}return e.status===r}));return{orders:n,total:n.length}}const m=function(){function e(t,r){l()(this,e),this.worker=t,this.data=r}var t,r,n,s,o,c,h,m,w,k,x,b,g;return p()(e,[{key:"page",value:(g=u()(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.worker.handleRequest(f.Z.ORDERS_BY_PAGE,{offset:20*(r-1),accountId:t}));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"all",value:(b=u()(a().mark((function e(t){var r,n,s,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.page(t,1);case 2:if(r=e.sent,!((n=Math.ceil(r.total/20))>1)){e.next=12;break}for(s=[],o=2;o<=n;o++)s.push(this.page(t,o).then((function(e){return e.orders})));return e.next=9,Promise.all(s);case 9:e.sent.forEach((function(e){var t;return(t=r.orders).push.apply(t,i()(e))})),r.total=r.orders.length;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)})},{key:"pending",value:(x=u()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"submitted"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return x.apply(this,arguments)})},{key:"filled",value:(k=u()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"posted"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return k.apply(this,arguments)})},{key:"cancelled",value:(w=u()(a().mark((function e(t,r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.all(t);case 2:return n=e.sent,e.abrupt("return",v(n,r,"cancelled"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return w.apply(this,arguments)})},{key:"cancel",value:(m=u()(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,this.worker.handleRequest(f.Z.CANCEL_ORDER,{orderId:t});case 3:return e.t1=e.sent,e.abrupt("return",{order:e.t0,response:e.t1});case 5:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"cancelPending",value:(h=u()(a().mark((function e(t){var r,n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.pending(t);case 2:return r=e.sent,e.abrupt("return",Promise.all(r.orders.map(function(){var e=u()(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.cancel(t.order_id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"marketBuy",value:(c=u()(a().mark((function e(t,r,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r,!0);case 2:return i=e.sent,e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:i.id,limit_price:new d.Z(r).crypto?void 0:i.quote.amount,quantity:n,order_type:"buy_quantity",order_sub_type:"market",time_in_force:"day",account_id:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return c.apply(this,arguments)})},{key:"limitBuy",value:(o=u()(a().mark((function e(t,r,n,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.worker,e.t1=f.Z.PLACE_ORDER,e.next=4,this.data.getSecurity(r);case 4:return e.t2=e.sent.id,e.t3=n,e.t4=i,e.t5=t,e.t6={security_id:e.t2,limit_price:e.t3,quantity:e.t4,order_type:"buy_quantity",order_sub_type:"limit",time_in_force:"day",account_id:e.t5},e.abrupt("return",e.t0.handleRequest.call(e.t0,e.t1,e.t6));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return o.apply(this,arguments)})},{key:"stopLimitBuy",value:(s=u()(a().mark((function e(t,r,n,i,s){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r);case 2:if(o=e.sent,!y(o.stock.primary_exchange)||n===i){e.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:o.id,stop_price:n,limit_price:i,quantity:s,order_type:"buy_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,i){return s.apply(this,arguments)})},{key:"marketSell",value:(n=u()(a().mark((function e(t,r,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r,!0);case 2:return i=e.sent,e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:i.id,market_value:new d.Z(r).crypto?void 0:i.quote.amount,quantity:n,order_type:"sell_quantity",order_sub_type:"market",time_in_force:"day",account_id:t}));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"limitSell",value:(r=u()(a().mark((function e(t,r,n,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.worker,e.t1=f.Z.PLACE_ORDER,e.next=4,this.data.getSecurity(r);case 4:return e.t2=e.sent.id,e.t3=n,e.t4=i,e.t5=t,e.t6={security_id:e.t2,limit_price:e.t3,quantity:e.t4,order_type:"sell_quantity",order_sub_type:"limit",time_in_force:"day",account_id:e.t5},e.abrupt("return",e.t0.handleRequest.call(e.t0,e.t1,e.t6));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"stopLimitSell",value:(t=u()(a().mark((function e(t,r,n,i,s){var o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data.getSecurity(r);case 2:if(o=e.sent,!y(o.stock.primary_exchange)||n===i){e.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.PLACE_ORDER,{security_id:o.id,stop_price:n,limit_price:i,quantity:s,order_type:"sell_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,r,n,i,s){return t.apply(this,arguments)})}]),e}()},889:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(757),i=r.n(n),s=r(926),a=r.n(s),o=r(575),u=r.n(o),c=r(913),l=r.n(c);const h=function(e){return{quote:function(t){return a()(i().mark((function r(){var n;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getSecurity(t,!0);case 2:return n=r.sent,r.abrupt("return",n.quote.amount);case 4:case"end":return r.stop()}}),r)})))()}}};var p=r(657),f=r(726);const d=function(){function e(t,r){u()(this,e),this.defaultProvider=new h(r),this.providers={},this.worker=t,this.data=r}var t,r;return l()(e,[{key:"use",value:function(e,t){if("function"!=typeof t.quote)throw new Error("Invalid quote provider for ".concat(e,"!"));this.providers[e]=t}},{key:"get",value:(r=a()(i().mark((function e(t){var r,n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,!(n=new p.Z(t)).exchange){e.next=6;break}r=n.exchange,e.next=15;break;case 6:if(!n.crypto||!n.id){e.next=10;break}r="CC",e.next=15;break;case 10:if(!(Object.keys(this.providers).length>0)){e.next=15;break}return e.next=13,this.data.getSecurity(n,!1);case 13:s=e.sent,r=s.stock.primary_exchange;case 15:if(!(r in this.providers)){e.next=17;break}return e.abrupt("return",this.providers[r].quote(n));case 17:return e.abrupt("return",this.defaultProvider.quote(n));case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"history",value:(t=a()(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=new p.Z(t)).id){e.next=5;break}return e.next=4,this.data.getSecurity(n);case 4:n.id=e.sent.id;case 5:return e.abrupt("return",this.worker.handleRequest(f.Z.QUOTES_HISTORY,{id:n.id,interval:r}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,r){return t.apply(this,arguments)})}]),e}()},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function u(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,s=Object.create(i.prototype),a=new T(n||[]);return s._invoke=function(e,t,r){var n=l;return function(i,s){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw s;return I()}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var o=_(a,r);if(o){if(o===d)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?f:h,u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=f,r.method="throw",r.arg=u.arg)}}}(e,r,a),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",h="suspendedYield",p="executing",f="completed",d={};function y(){}function v(){}function m(){}var w={};w[s]=function(){return this};var k=Object.getPrototypeOf,x=k&&k(k(R([])));x&&x!==r&&n.call(x,s)&&(w=x);var b=m.prototype=y.prototype=Object.create(w);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function E(e,t){function r(i,s,a,o){var u=c(e[i],e,s);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,a,o)}),(function(e){r("throw",e,a,o)})):t.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,o)}))}o(u.arg)}var i;this._invoke=function(e,n){function s(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(s,s):s()}}function _(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var s=i.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function R(e){if(e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:I}}function I(){return{value:t,done:!0}}return v.prototype=b.constructor=m,m.constructor=v,m[o]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},g(E.prototype),E.prototype[a]=function(){return this},e.AsyncIterator=E,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var a=new E(u(t,r,n,i),s);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(b),b[o]="Generator",b[s]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return o.type="throw",o.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},214:e=>{"use strict";e.exports=r},545:e=>{"use strict";e.exports=t},949:t=>{"use strict";t.exports=e}},i={};function s(e){if(i[e])return i[e].exports;var t=i[e]={exports:{}};return n[e](t,t.exports,s),t.exports}return s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s(352)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheUxpa2VUb0FycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlUmVzdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlU3ByZWFkLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYWNjb3VudHMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYXBpL2VuZHBvaW50cy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9hdXRoLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3RpY2tlci5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcHRpb25hbC9zZWN1cml0aWVzLWNhY2hlLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvcmUvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvZGF0YS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9oZWFkZXJzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2hlbHBlcnMvdGltZS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3Rva2Vucy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9uZXR3b3JrL2h0dHBzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL29yZGVycy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9xdW90ZXMvZGVmYXVsdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9xdW90ZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJjbG91ZHNjcmFwZXJcIixcImNvbW1vbmpzMlwiOlwiY2xvdWRzY3JhcGVyXCIsXCJhbWRcIjpcImNsb3Vkc2NyYXBlclwiLFwicm9vdFwiOlwiX1wifSIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwibm9kZS1mZXRjaFwiLFwiY29tbW9uanMyXCI6XCJub2RlLWZldGNoXCIsXCJhbWRcIjpcIm5vZGUtZmV0Y2hcIixcInJvb3RcIjpcIl9cIn0iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcInNvdXJjZS1tYXAtc3VwcG9ydFwiLFwiY29tbW9uanMyXCI6XCJzb3VyY2UtbWFwLXN1cHBvcnRcIixcImFtZFwiOlwic291cmNlLW1hcC1zdXBwb3J0XCIsXCJyb290XCI6XCJfXCJ9Iiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwiZ2xvYmFsIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOTQ5X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181NDVfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzIxNF9fIiwiYXJyIiwibGVuIiwibGVuZ3RoIiwiaSIsImFycjIiLCJBcnJheSIsImlzQXJyYXkiLCJhcnJheUxpa2VUb0FycmF5IiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiZ2VuIiwicmVzb2x2ZSIsInJlamVjdCIsIl9uZXh0IiwiX3Rocm93Iiwia2V5IiwiYXJnIiwiaW5mbyIsInZhbHVlIiwiZXJyb3IiLCJkb25lIiwiUHJvbWlzZSIsInRoZW4iLCJmbiIsInNlbGYiLCJ0aGlzIiwiYXJncyIsImFyZ3VtZW50cyIsImFwcGx5IiwiZXJyIiwidW5kZWZpbmVkIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJvYmoiLCJpdGVyIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJmcm9tIiwiX2FyciIsIl9uIiwiX2QiLCJfZSIsIl9zIiwiX2kiLCJuZXh0IiwicHVzaCIsImFycmF5V2l0aEhvbGVzIiwiaXRlcmFibGVUb0FycmF5TGltaXQiLCJ1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIm5vbkl0ZXJhYmxlUmVzdCIsImFycmF5V2l0aG91dEhvbGVzIiwiaXRlcmFibGVUb0FycmF5Iiwibm9uSXRlcmFibGVTcHJlYWQiLCJvIiwibWluTGVuIiwibiIsInRvU3RyaW5nIiwiY2FsbCIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwidGVzdCIsIkFDVElWSVRJRVNfTUFYX0RSQVciLCJBQ1RJVklUSUVTX1RZUEVTX0FMTCIsImh0dHBzV29ya2VyIiwid29ya2VyIiwiaGFuZGxlUmVxdWVzdCIsImVuZHBvaW50cyIsImFjY291bnRzIiwidGZzYSIsImZpbmQiLCJhY2NvdW50Iiwic3RhcnRzV2l0aCIsInJyc3AiLCJjcnlwdG8iLCJwZXJzb25hbCIsImludGVydmFsIiwiYWNjb3VudElkIiwiZmlsdGVycyIsImxpbWl0IiwiRXJyb3IiLCJ0eXBlIiwicmVzdWx0cyIsImFjY291bnRJZHMiLCJqb2luIiwiYm9va21hcmsiLCJyZXNwb25zZSIsImRlZmF1bHRFbmRwb2ludEJlaGF2aW91ciIsIm9uRmFpbHVyZSIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJyZWFzb24iLCJzdGF0dXNNZXNzYWdlIiwiYm9keSIsIm9uU3VjY2VzcyIsIkxPR0lOIiwibWV0aG9kIiwidXJsIiwiYXV0aGVudGljYXRlZCIsInRva2VucyIsImFjY2VzcyIsImhlYWRlcnMiLCJyZWZyZXNoIiwiZXhwaXJlcyIsInBhcnNlSW50IiwiYWNjb3VudEluZm8iLCJSRUZSRVNIIiwiQUNDT1VOVF9JRFMiLCJtYXAiLCJpZCIsIkxJU1RfQUNDT1VOVCIsIk1FIiwiUEVSU09OIiwiSElTVE9SWV9BQ0NPVU5UIiwicGFyYW1ldGVycyIsIjAiLCIxIiwiQUNUSVZJVElFUyIsIjIiLCIzIiwiREVQT1NJVFMiLCJCQU5LX0FDQ09VTlRTIiwiRVhDSEFOR0VfUkFURVMiLCJTRUNVUklUWSIsImRhdGEiLCJFWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUyIsIlNFQ1VSSVRZX0dST1VQUyIsIlNFQ1VSSVRZX0dST1VQIiwiUVVPVEVTX0hJU1RPUlkiLCJQT1NJVElPTlMiLCJPUkRFUlNfQllfUEFHRSIsInRvdGFsIiwib3JkZXJzIiwiQ0FOQ0VMX09SREVSIiwiUExBQ0VfT1JERVIiLCJldmVudHMiLCJvdHAiLCJldmVudCIsImhhbmRsZXIiLCJvbiIsInN0YXRlIiwic3RvcmUiLCJlbWFpbCIsInBhc3N3b3JkIiwidXNlIiwicmVmcmVzaEF1dGhlbnRpY2F0aW9uIiwic3VwcG9ydGVkRmVhdHVyZXMiLCJkaXNhYmxlZCIsImNvbmZpZ0VuYWJsZWQiLCJmZWF0dXJlIiwiaW5jbHVkZXMiLCJjb25maWciLCJzdWJzdHJpbmciLCJzdXBwb3J0ZWQiLCJjdXQiLCJpbmRleE9mIiwic3BsaWNlIiwiZXhjaGFuZ2VzIiwic3ltYm9sIiwiZXhjaGFuZ2UiLCJzcGxpdCIsIm90aGVyIiwiY2FjaGUiLCJzaXplIiwiTWFwIiwia2V5cyIsInNldCIsImdldCIsInNlY3VyaXR5IiwicmVzdWx0IiwiVGlja2VyIiwiZm9ybWF0IiwidXNlclRpY2tlciIsImV4dGVuc2l2ZSIsInRpY2tlciIsImZpbHRlciIsInN0b2NrIiwic2VjdXJpdHlfdHlwZSIsInByaW1hcnlfZXhjaGFuZ2UiLCJpbnNlcnQiLCJyZWR1Y2UiLCJpdGVtIiwiZXh0ZXJuYWxfc2VjdXJpdHlfZ3JvdXBfaWQiLCJncm91cCIsImdyb3VwSWQiLCJzZWN1cml0eUdyb3VwcyIsImdyb3VwcyIsImN1c3RvbUhlYWRlcnMiLCJIZWFkZXJzIiwiYWRkIiwiYXBwZW5kIiwicmVtb3ZlIiwiY2xlYXIiLCJmb3JFYWNoIiwiaGVhZGVyIiwidmFsdWVzIiwiQXV0aGVudGljYXRpb24iLCJBY2NvdW50cyIsIk9yZGVycyIsIkRhdGEiLCJRdW90ZXMiLCJIdHRwc1dvcmtlciIsIlNlc3Npb24iLCJhdXRoIiwicXVvdGVzIiwiZGVmYXVsdFNlc3Npb24iLCJEYXRlIiwibm93IiwiSFRUUF9PSyIsIkhUVFBfQ1JFQVRFRCIsImZpbmFsaXplUmVxdWVzdCIsImVuZHBvaW50IiwicGFyYW1zIiwiaW5kZXgiLCJwYXJhbWV0ZXJOYW1lIiwicmVwbGFjZSIsInF1ZXJ5UGFyYW1OYW1lIiwicXVlcnlQYXJhbSIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwiVG9rZW5zIiwiaW1wbGljaXRUb2tlblJlZnJlc2giLCJBdXRob3JpemF0aW9uIiwiY2xvdWRzY3JhcGVyIiwiY2FsbGJhY2siLCJ1bnVzZWQiLCJyZXMiLCJwYXJzZSIsInRhbGsiLCJyZWZyZXNoX3Rva2VuIiwiZXhwaXJlZCIsImlzQ2FuYWRpYW5TZWN1cml0eSIsImZpbHRlcmVkT3JkZXJzIiwibGlzdCIsImZpbHRlcmVkIiwib3JkZXIiLCJzZWN1cml0eV9pZCIsIndlYWtFcXVhbHMiLCJwYWdlTnVtIiwib2Zmc2V0IiwicGFnZSIsInBhZ2VzIiwiTWF0aCIsImNlaWwiLCJ0YXNrcyIsImFsbCIsIm9yZGVySWQiLCJwZW5kaW5nIiwiY2FuY2VsIiwib3JkZXJfaWQiLCJxdWFudGl0eSIsImdldFNlY3VyaXR5IiwiZGV0YWlscyIsImxpbWl0X3ByaWNlIiwicXVvdGUiLCJhbW91bnQiLCJvcmRlcl90eXBlIiwib3JkZXJfc3ViX3R5cGUiLCJ0aW1lX2luX2ZvcmNlIiwiYWNjb3VudF9pZCIsInN0b3AiLCJzdG9wX3ByaWNlIiwibWFya2V0X3ZhbHVlIiwiZGVmYXVsdFByb3ZpZGVyIiwiVHJhZGVRdW90ZXMiLCJwcm92aWRlcnMiLCJwcm92aWRlciIsInJ1bnRpbWUiLCJPcCIsImhhc093biIsImhhc093blByb3BlcnR5IiwiJFN5bWJvbCIsIml0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvclN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJ0b1N0cmluZ1RhZ1N5bWJvbCIsInRvU3RyaW5nVGFnIiwid3JhcCIsImlubmVyRm4iLCJvdXRlckZuIiwidHJ5TG9jc0xpc3QiLCJwcm90b0dlbmVyYXRvciIsIkdlbmVyYXRvciIsImdlbmVyYXRvciIsImNyZWF0ZSIsImNvbnRleHQiLCJDb250ZXh0IiwiX2ludm9rZSIsIkdlblN0YXRlU3VzcGVuZGVkU3RhcnQiLCJHZW5TdGF0ZUV4ZWN1dGluZyIsIkdlblN0YXRlQ29tcGxldGVkIiwiZG9uZVJlc3VsdCIsImRlbGVnYXRlIiwiZGVsZWdhdGVSZXN1bHQiLCJtYXliZUludm9rZURlbGVnYXRlIiwiQ29udGludWVTZW50aW5lbCIsInNlbnQiLCJfc2VudCIsImRpc3BhdGNoRXhjZXB0aW9uIiwiYWJydXB0IiwicmVjb3JkIiwidHJ5Q2F0Y2giLCJHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkIiwibWFrZUludm9rZU1ldGhvZCIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJJdGVyYXRvclByb3RvdHlwZSIsImdldFByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJOYXRpdmVJdGVyYXRvclByb3RvdHlwZSIsIkdwIiwiZGVmaW5lSXRlcmF0b3JNZXRob2RzIiwiQXN5bmNJdGVyYXRvciIsIlByb21pc2VJbXBsIiwiaW52b2tlIiwiX19hd2FpdCIsInVud3JhcHBlZCIsInByZXZpb3VzUHJvbWlzZSIsImNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnIiwicmVzdWx0TmFtZSIsIm5leHRMb2MiLCJwdXNoVHJ5RW50cnkiLCJsb2NzIiwiZW50cnkiLCJ0cnlMb2MiLCJjYXRjaExvYyIsImZpbmFsbHlMb2MiLCJhZnRlckxvYyIsInRyeUVudHJpZXMiLCJyZXNldFRyeUVudHJ5IiwiY29tcGxldGlvbiIsInJlc2V0IiwiaXRlcmFibGUiLCJpdGVyYXRvck1ldGhvZCIsImlzTmFOIiwiZGlzcGxheU5hbWUiLCJpc0dlbmVyYXRvckZ1bmN0aW9uIiwiZ2VuRnVuIiwiY3RvciIsIm1hcmsiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImF3cmFwIiwiYXN5bmMiLCJvYmplY3QiLCJyZXZlcnNlIiwicG9wIiwic2tpcFRlbXBSZXNldCIsInByZXYiLCJjaGFyQXQiLCJyb290UmVjb3JkIiwicnZhbCIsImV4Y2VwdGlvbiIsImhhbmRsZSIsImxvYyIsImNhdWdodCIsImhhc0NhdGNoIiwiaGFzRmluYWxseSIsImZpbmFsbHlFbnRyeSIsImNvbXBsZXRlIiwiZmluaXNoIiwidGhyb3duIiwiZGVsZWdhdGVZaWVsZCIsInJlZ2VuZXJhdG9yUnVudGltZSIsImFjY2lkZW50YWxTdHJpY3RNb2RlIiwiRnVuY3Rpb24iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsInByb3AiXSwibWFwcGluZ3MiOiJDQUFBLFNBQTJDQSxFQUFNQyxHQUMxQixpQkFBWkMsU0FBMEMsaUJBQVhDLE9BQ3hDQSxPQUFPRCxRQUFVRCxFQUFRRyxRQUFRLHNCQUF1QkEsUUFBUSxjQUFlQSxRQUFRLGlCQUM5RCxtQkFBWEMsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLENBQUMscUJBQXNCLGFBQWMsZ0JBQWlCSixHQUNuQyxpQkFBWkMsUUFDZEEsUUFBUSxlQUFpQkQsRUFBUUcsUUFBUSxzQkFBdUJBLFFBQVEsY0FBZUEsUUFBUSxpQkFFL0ZKLEVBQUssZUFBaUJDLEVBQVFELEVBQVEsRUFBR0EsRUFBUSxFQUFHQSxFQUFRLEdBUjlELENBU0dPLFFBQVEsU0FBU0MsRUFBa0NDLEVBQWtDQyxHQUN4RixNLHFCQ0FBUCxFQUFPRCxRQVZQLFNBQTJCUyxFQUFLQyxJQUNuQixNQUFQQSxHQUFlQSxFQUFNRCxFQUFJRSxVQUFRRCxFQUFNRCxFQUFJRSxRQUUvQyxJQUFLLElBQUlDLEVBQUksRUFBR0MsRUFBTyxJQUFJQyxNQUFNSixHQUFNRSxFQUFJRixFQUFLRSxJQUM5Q0MsRUFBS0QsR0FBS0gsRUFBSUcsR0FHaEIsT0FBT0MsSSxRQ0hUWixFQUFPRCxRQUpQLFNBQXlCUyxHQUN2QixHQUFJSyxNQUFNQyxRQUFRTixHQUFNLE9BQU9BLEksY0NEakMsSUFBSU8sRUFBbUIsRUFBUSxLQU0vQmYsRUFBT0QsUUFKUCxTQUE0QlMsR0FDMUIsR0FBSUssTUFBTUMsUUFBUU4sR0FBTSxPQUFP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eUJBQWRBLENBQXdDbEcsSyxxQkN2dEIxQ2hTLEVBQU9ELFFBQVVRLEcscUJDQWpCUCxFQUFPRCxRQUFVTyxHLHFCQ0FqQk4sRUFBT0QsUUFBVU0sSUNDYjhYLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixHQUFHRixFQUF5QkUsR0FDM0IsT0FBT0YsRUFBeUJFLEdBQVV0WSxRQUczQyxJQUFJQyxFQUFTbVksRUFBeUJFLEdBQVksQ0FHakR0WSxRQUFTLElBT1YsT0FIQXVZLEVBQW9CRCxHQUFVclksRUFBUUEsRUFBT0QsUUFBU3FZLEdBRy9DcFksRUFBT0QsUUNqQmYsT0NGQXFZLEVBQW9CelQsRUFBSzNFLElBQ3hCLElBQUl1WSxFQUFTdlksR0FBVUEsRUFBT3dZLFdBQzdCLElBQU14WSxFQUFnQixRQUN0QixJQUFNQSxFQUVQLE9BREFvWSxFQUFvQkssRUFBRUYsRUFBUSxDQUFFRyxFQUFHSCxJQUM1QkEsR0NMUkgsRUFBb0JLLEVBQUksQ0FBQzFZLEVBQVM0WSxLQUNqQyxJQUFJLElBQUlyWCxLQUFPcVgsRUFDWFAsRUFBb0IzVCxFQUFFa1UsRUFBWXJYLEtBQVM4VyxFQUFvQjNULEVBQUUxRSxFQUFTdUIsSUFDNUUwQixPQUFPQyxlQUFlbEQsRUFBU3VCLEVBQUssQ0FBRXVCLFlBQVksRUFBTThJLElBQUtnTixFQUFXclgsTUNKM0U4VyxFQUFvQjNULEVBQUksQ0FBQ3BCLEVBQUt1VixJQUFTNVYsT0FBT0ksVUFBVStPLGVBQWV0TixLQUFLeEIsRUFBS3VWLEdIRzFFUixFQUFvQixNIiwiZmlsZSI6ImRpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJzb3VyY2UtbWFwLXN1cHBvcnRcIiksIHJlcXVpcmUoXCJub2RlLWZldGNoXCIpLCByZXF1aXJlKFwiY2xvdWRzY3JhcGVyXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInNvdXJjZS1tYXAtc3VwcG9ydFwiLCBcIm5vZGUtZmV0Y2hcIiwgXCJjbG91ZHNjcmFwZXJcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wid3N0cmFkZS1hcGlcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJzb3VyY2UtbWFwLXN1cHBvcnRcIiksIHJlcXVpcmUoXCJub2RlLWZldGNoXCIpLCByZXF1aXJlKFwiY2xvdWRzY3JhcGVyXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJ3c3RyYWRlLWFwaVwiXSA9IGZhY3Rvcnkocm9vdFtcIl9cIl0sIHJvb3RbXCJfXCJdLCByb290W1wiX1wiXSk7XG59KShnbG9iYWwsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzk0OV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181NDVfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMjE0X18pIHtcbnJldHVybiAiLCJmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FycmF5TGlrZVRvQXJyYXk7IiwiZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hcnJheVdpdGhIb2xlczsiLCJ2YXIgYXJyYXlMaWtlVG9BcnJheSA9IHJlcXVpcmUoXCIuL2FycmF5TGlrZVRvQXJyYXlcIik7XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkoYXJyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlXaXRob3V0SG9sZXM7IiwiZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykge1xuICB0cnkge1xuICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTtcbiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlamVjdChlcnJvcik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGluZm8uZG9uZSkge1xuICAgIHJlc29sdmUodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcyxcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXG4gICAgICBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwibmV4dFwiLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIF90aHJvdyhlcnIpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcInRocm93XCIsIGVycik7XG4gICAgICB9XG5cbiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FzeW5jVG9HZW5lcmF0b3I7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY2xhc3NDYWxsQ2hlY2s7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jcmVhdGVDbGFzczsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfZGVmaW5lUHJvcGVydHk7IiwiZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pdGVyYWJsZVRvQXJyYXk7IiwiZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkge1xuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjtcbiAgdmFyIF9hcnIgPSBbXTtcbiAgdmFyIF9uID0gdHJ1ZTtcbiAgdmFyIF9kID0gZmFsc2U7XG4gIHZhciBfZSA9IHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHtcbiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7XG5cbiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhaztcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kID0gdHJ1ZTtcbiAgICBfZSA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2QpIHRocm93IF9lO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBfYXJyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pdGVyYWJsZVRvQXJyYXlMaW1pdDsiLCJmdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9ub25JdGVyYWJsZVJlc3Q7IiwiZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfbm9uSXRlcmFibGVTcHJlYWQ7IiwidmFyIGFycmF5V2l0aEhvbGVzID0gcmVxdWlyZShcIi4vYXJyYXlXaXRoSG9sZXNcIik7XG5cbnZhciBpdGVyYWJsZVRvQXJyYXlMaW1pdCA9IHJlcXVpcmUoXCIuL2l0ZXJhYmxlVG9BcnJheUxpbWl0XCIpO1xuXG52YXIgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgPSByZXF1aXJlKFwiLi91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheVwiKTtcblxudmFyIG5vbkl0ZXJhYmxlUmVzdCA9IHJlcXVpcmUoXCIuL25vbkl0ZXJhYmxlUmVzdFwiKTtcblxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBhcnJheVdpdGhIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBub25JdGVyYWJsZVJlc3QoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfc2xpY2VkVG9BcnJheTsiLCJ2YXIgYXJyYXlXaXRob3V0SG9sZXMgPSByZXF1aXJlKFwiLi9hcnJheVdpdGhvdXRIb2xlc1wiKTtcblxudmFyIGl0ZXJhYmxlVG9BcnJheSA9IHJlcXVpcmUoXCIuL2l0ZXJhYmxlVG9BcnJheVwiKTtcblxudmFyIHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5ID0gcmVxdWlyZShcIi4vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXlcIik7XG5cbnZhciBub25JdGVyYWJsZVNwcmVhZCA9IHJlcXVpcmUoXCIuL25vbkl0ZXJhYmxlU3ByZWFkXCIpO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBhcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgbm9uSXRlcmFibGVTcHJlYWQoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdG9Db25zdW1hYmxlQXJyYXk7IiwidmFyIGFycmF5TGlrZVRvQXJyYXkgPSByZXF1aXJlKFwiLi9hcnJheUxpa2VUb0FycmF5XCIpO1xuXG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWdlbmVyYXRvci1ydW50aW1lXCIpO1xuIiwiaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuL2FwaS9lbmRwb2ludHMnO1xuXG4vLyBUaGUgbWF4aW11bXVtIG51bWJlciBvZiBhY3Rpdml0aWVzIHdlIGNhbiBwdWxsIGluIG9uZSBnby5cbmNvbnN0IEFDVElWSVRJRVNfTUFYX0RSQVcgPSA5OTtcbi8vIFN1cHBvcnRlZCBhY3Rpdml0eSB0eXBlc1xuY29uc3QgQUNUSVZJVElFU19UWVBFU19BTEwgPSBbXG4gICdzZWxsJyxcbiAgJ2RlcG9zaXQnLFxuICAnd2l0aGRyYXdhbCcsXG4gICdkaXZpZGVuZCcsXG4gICdpbnN0aXR1dGlvbmFsX3RyYW5zZmVyJyxcbiAgJ2ludGVybmFsX3RyYW5zZmVyJyxcbiAgJ3JlZnVuZCcsXG4gICdyZWZlcnJhbF9ib251cycsXG4gICdhZmZpbGlhdGUnLFxuICAnYnV5Jyxcbl07XG5cbmNsYXNzIEFjY291bnRzIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQWNjb3VudCBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIGFuIEh0dHBzIHdvcmtlciBzdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBodHRwc1dvcmtlclxuICAgKi9cbiAgY29uc3RydWN0b3IoaHR0cHNXb3JrZXIpIHtcbiAgICB0aGlzLndvcmtlciA9IGh0dHBzV29ya2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbGwgYWNjb3VudCBpZHMgb3BlbiB1bmRlciB0aGlzIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgYXN5bmMgYWxsKCkge1xuICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuQUNDT1VOVF9JRFMsIHt9KTtcblxuICAgIHJldHVybiB7XG4gICAgICB0ZnNhOiBhY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXJ0c1dpdGgoJ3Rmc2EnKSksXG4gICAgICBycnNwOiBhY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXJ0c1dpdGgoJ3Jyc3AnKSksXG4gICAgICBjcnlwdG86IGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnQuc3RhcnRzV2l0aCgnbm9uLXJlZ2lzdGVyZWQtY3J5cHRvJykpLFxuICAgICAgcGVyc29uYWw6IGFjY291bnRzLmZpbmQoKGFjY291bnQpID0+IGFjY291bnQuc3RhcnRzV2l0aCgnbm9uLXJlZ2lzdGVyZWQnKSAmJiAhYWNjb3VudC5zdGFydHNXaXRoKCdub24tcmVnaXN0ZXJlZC1jcnlwdG8nKSksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBkZXRhaWxzIGFib3V0IHlvdXIgb3BlbiBhY2NvdW50cywgbGlrZSBhY2NvdW50IHR5cGUsIGJ1eWluZyBwb3dlcixcbiAgICogY3VycmVudCBiYWxhbmNlLCBhbmQgbW9yZS5cbiAgICovXG4gIGFzeW5jIGRhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkxJU1RfQUNDT1VOVCwge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBzb21lIHN1cmZhY2UgaW5mb3JtYXRpb24gYWJvdXQgeW91IGxpa2UgeW91ciBuYW1lIGFuZCBlbWFpbCwgYWNjb3VudFxuICAgKiBzaWduYXR1cmVzLCBhbmQgb3RoZXIgbWV0YWRhdGEuXG4gICAqL1xuICBhc3luYyBtZSgpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTUUsIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCB5b3UgdGhhdCB5b3UgcHJvdmlkZWQgb24gc2lnbnVwLCBsaWtlIHJlc2lkZW50aWFsIGFuZFxuICAgKiBtYWlsaW5nIGFkZHJlc3NlcywgZW1wbG95bWVudCwgcGhvbmUgbnVtYmVycywgYW5kIHNvIG9uLlxuICAgKi9cbiAgYXN5bmMgcGVyc29uKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QRVJTT04sIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWVyeSB0aGUgaGlzdG9yeSBvZiB0aGUgYWNjb3VudCB3aXRoaW4gYSBjZXJ0YWluIHRpbWUgaW50ZXJ2YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gaW50ZXJ2YWwgVGhlIHRpbWUgaW50ZXJ2YWwgZm9yIHRoZSBoaXN0b3J5IHF1ZXJ5XG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIHF1ZXJ5XG4gICAqL1xuICBhc3luYyBoaXN0b3J5KGludGVydmFsLCBhY2NvdW50SWQpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuSElTVE9SWV9BQ0NPVU5ULCB7IGludGVydmFsLCBhY2NvdW50SWQgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2hlcyBhY3Rpdml0aWVzIG9uIHlvdXIgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnQuIFlvdSBjYW4gbGltaXQgbnVtYmVyIG9mIGFjdGl2aXRpZXNcbiAgICogdG8gZmV0Y2ggb3IgcmVmaW5lIHdoYXQgYWN0aXZpdGllcyBhcmUgZmV0Y2hlZCBiYXNlZCBvbiBhY3Rpdml0eSB0eXBlIChlLmcuLCBidXksIHNlbGwpLFxuICAgKiBhY2NvdW50IChlLmcuLCB0ZnNhLCBycnNwKS5cbiAgICovXG4gIGFzeW5jIGFjdGl2aXRpZXMoZmlsdGVycyA9IHt9KSB7XG4gICAgLy8gVGhlIG1heGltdW0gZHJhdyBwZXIgQVBJIGNhbGwgaXMgOTkuIElmIGl0J3MgaGlnaGVyLCB3ZSBtdXN0IGFib3J0LlxuICAgIGlmIChmaWx0ZXJzPy5saW1pdCAmJiBmaWx0ZXJzLmxpbWl0ID4gQUNUSVZJVElFU19NQVhfRFJBVykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmaWx0ZXJzLmxpbWl0IGNhbiBub3QgZXhjZWVkIDk5ISBMZWF2ZSBmaWx0ZXJzLmxpbWl0IHVuZGVmaW5lZCBpZiB5b3Ugd2FudCB0byByZXRyaWV2ZSBhbGwuJyk7XG4gICAgfVxuXG4gICAgLy8gVGVsbCB0aGUgdXNlciB0aGF0IGZpbHRlci5hY2NvdW50cyBtdXN0IGJlIGFuIGVycm9yXG4gICAgaWYgKGZpbHRlcnM/LmFjY291bnRzICYmICFBcnJheS5pc0FycmF5KGZpbHRlcnMuYWNjb3VudHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZpbHRlcnMuYWNjb3VudHMgbXVzdCBiZSBhbiBhcnJheSEnKTtcbiAgICB9XG5cbiAgICAvLyBUZWxsIHRoZSB1c2VyIHRoYXQgZmlsdGVyLnR5cGUgbXVzdCBiZSBhbiBlcnJvclxuICAgIGlmIChmaWx0ZXJzPy50eXBlICYmICFBcnJheS5pc0FycmF5KGZpbHRlcnMudHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignZmlsdGVycy50eXBlIG11c3QgYmUgYW4gYXJyYXkhJyk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuXG4gICAgLy8gRHJhdyB0aGUgZmlyc3Qgc2V0IG9mIGFjdGl2aXRpZXNcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5BQ1RJVklUSUVTLCB7XG4gICAgICBsaW1pdDogZmlsdGVycz8ubGltaXQgPz8gQUNUSVZJVElFU19NQVhfRFJBVyxcbiAgICAgIGFjY291bnRJZHM6IGZpbHRlcnM/LmFjY291bnRzPy5qb2luKCkgPz8gJycsXG4gICAgICBib29rbWFyazogJycsXG4gICAgICB0eXBlOiBmaWx0ZXJzPy50eXBlID8/IEFDVElWSVRJRVNfVFlQRVNfQUxMLFxuICAgIH0pO1xuICAgIHJlc3VsdHMucHVzaCguLi5yZXNwb25zZS5yZXN1bHRzKTtcblxuICAgIC8qXG4gICAgICogVG8gZ2V0IGFsbCBhY3Rpdml0aWVzLCB3ZSB3aWxsIGhhdmUgdG8gZHJhdyB0aGUgbWF4aW11bSBudW1iZXJcbiAgICAgKiBvZiBhY3Rpdml0aWVzIHBlciBBUEkgY2FsbCB1bnRpbCB3ZSBhcmUgZG9uZSAoaS5lLiwgd2hlbiB3ZVxuICAgICAqIHJlY2VpdmUgYSBudW1iZXIgb2YgYWN0aXZpdGllcyBsZXNzIHRoYW4gdGhlIG1heGltdW0gcGVyIGRyYXcpXG4gICAgICovXG4gICAgaWYgKCFmaWx0ZXJzPy5saW1pdCkge1xuICAgICAgLypcbiAgICAgICAqIFRoZSBuby1hd2FpdC1pbi1sb29wIHJ1bGUgaXMgYmVpbmcgZGlzYWJsZWQgZm9yIHRoaXMgY2FzZSBiZWNhdXNlXG4gICAgICAgKiBldmVyeSBsb29wIGZlZWRzIGJhY2sgaW50byB0aGUgbmV4dCBvbmUgd2l0aCB0aGUgYm9va21hcmsgKGkuZS4sIHRoZXlcbiAgICAgICAqIGFyZSBub3QgaW5kZXBlbmRlbnQgYW5kIG11c3QgcnVuIHNlcXVlbnRpYWxseSkuXG4gICAgICAgKi9cbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWF3YWl0LWluLWxvb3AgKi9cbiAgICAgIHdoaWxlIChyZXN1bHRzLmxlbmd0aCAlIEFDVElWSVRJRVNfTUFYX0RSQVcgPT09IDApIHtcbiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5BQ1RJVklUSUVTLCB7XG4gICAgICAgICAgbGltaXQ6IEFDVElWSVRJRVNfTUFYX0RSQVcsXG4gICAgICAgICAgYWNjb3VudElkczogZmlsdGVycz8uYWNjb3VudHM/LmpvaW4oKSA/PyAnJyxcbiAgICAgICAgICBib29rbWFyazogcmVzcG9uc2UuYm9va21hcmssXG4gICAgICAgICAgdHlwZTogZmlsdGVycz8udHlwZSA/PyBBQ1RJVklUSUVTX1RZUEVTX0FMTCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRXNjYXBlIHRoZSBsb29wIGlmIHRoZSByZXR1cm5lZCByZXN1bHRzIGlzIGVtcHR5LiBUaGlzIG1lYW5zIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kLlxuICAgICAgICBpZiAocmVzcG9uc2UucmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdHMucHVzaCguLi5yZXNwb25zZS5yZXN1bHRzKTtcbiAgICAgIH1cbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tYXdhaXQtaW4tbG9vcCAqL1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBhbGwgYmFuayBhY2NvdW50cyBsaW5rZWQgdG8gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgYXN5bmMgZ2V0QmFua0FjY291bnRzKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5CQU5LX0FDQ09VTlRTLCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogR3JhYiBhbGwgZGVwb3NpdCByZWNvcmRzIG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIGFzeW5jIGRlcG9zaXRzKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5ERVBPU0lUUywge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RzIGFsbCBwb3NpdGlvbnMgaW4gdGhlIHNwZWNpZmllZCB0cmFkaW5nIGFjY291bnQgdW5kZXIgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBBY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICovXG4gIGFzeW5jIHBvc2l0aW9ucyhhY2NvdW50SWQpIHtcbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUE9TSVRJT05TLCB7IGFjY291bnRJZCB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBY2NvdW50cztcbiIsImNvbnN0IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ciA9IHtcblxuICAvLyBEZWZhdWx0IGZhaWx1cmUgbWV0aG9kIGZvciBhbGwgZW5kcG9pbnQgY2FsbHNcbiAgb25GYWlsdXJlOiAocmVzcG9uc2UpID0+ICh7XG4gICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXNDb2RlLFxuICAgIHJlYXNvbjogcmVzcG9uc2Uuc3RhdHVzTWVzc2FnZSxcbiAgICBib2R5OiByZXNwb25zZS5ib2R5LFxuICB9KSxcblxuICAvLyBEZWZhdWx0IHN1Y2Nlc3MgbWV0aG9kIGZvciBhbGwgZW5kcG9pbnQgY2FsbHNcbiAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJvZHksXG59O1xuXG5jb25zdCBXZWFsdGhzaW1wbGVUcmFkZUVuZHBvaW50cyA9IHtcblxuICAvKlxuICAgKiBUaGUgTE9HSU4gZW5kcG9pbnQgaW50aWFsaXplcyBhIG5ldyBzZXNzaW9uIGZvciB0aGUgZ2l2ZW4gZW1haWwgYW5kXG4gICAqIHBhc3N3b3JkIHNldC4gSWYgdGhlIGxvZ2luIGlzIHN1Y2Nlc3NmdWwsIGFjY2VzcyBhbmQgcmVmcmVzaCB0b2tlbnNcbiAgICogYXJlIHJldHVybmVkIGluIHRoZSBoZWFkZXJzLiBUaGUgYWNjZXNzIHRva2VuIGlzIHRoZSBrZXkgZm9yIGludm9raW5nXG4gICAqIGFsbCBvdGhlciBlbmQgcG9pbnRzLlxuICAgKi9cbiAgTE9HSU46IHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hdXRoL2xvZ2luJyxcbiAgICBhdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gKHtcbiAgICAgIHRva2Vuczoge1xuICAgICAgICBhY2Nlc3M6IHJlc3BvbnNlLmhlYWRlcnNbJ3gtYWNjZXNzLXRva2VuJ10sXG4gICAgICAgIHJlZnJlc2g6IHJlc3BvbnNlLmhlYWRlcnNbJ3gtcmVmcmVzaC10b2tlbiddLFxuICAgICAgICBleHBpcmVzOiBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzWyd4LWFjY2Vzcy10b2tlbi1leHBpcmVzJ10sIDEwKSxcbiAgICAgIH0sXG5cbiAgICAgIGFjY291bnRJbmZvOiByZXNwb25zZS5ib2R5LFxuICAgIH0pLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHZW5lcmF0ZXMgYSBuZXcgc2V0IG9mIGFjY2VzcyBhbmQgcmVmcmVzaCB0b2tlbnMuXG4gICAqL1xuICBSRUZSRVNIOiB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYXV0aC9yZWZyZXNoJyxcbiAgICBhdXRoZW50aWNhdGVkOiBmYWxzZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gKHtcbiAgICAgIHRva2Vuczoge1xuICAgICAgICBhY2Nlc3M6IHJlc3BvbnNlLmhlYWRlcnNbJ3gtYWNjZXNzLXRva2VuJ10sXG4gICAgICAgIHJlZnJlc2g6IHJlc3BvbnNlLmhlYWRlcnNbJ3gtcmVmcmVzaC10b2tlbiddLFxuICAgICAgICBleHBpcmVzOiBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzWyd4LWFjY2Vzcy10b2tlbi1leHBpcmVzJ10sIDEwKSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEdyYWJzIGFsbCBhY2NvdW50IGlkcyBpbiB0aGlzIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgQUNDT1VOVF9JRFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvbGlzdCcsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmJvZHk7XG5cbiAgICAgIC8vIENvbGxlY3QgYWxsIGFjY291bnQgaWRzIHJlZ2lzdGVyZWQgdW5kZXIgdGhpcyBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudFxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cy5tYXAoKGFjY291bnQpID0+IGFjY291bnQuaWQpO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBMSVNUX0FDQ09VTlQgZW5kcG9pbnQgcmV0cmlldmVzIGdlbmVyYWwgbWV0YWRhdGEgb2YgdGhlXG4gICAqIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LCBpbmNsdWRpbmcgYmFsYW5jZXMsIGFjY291bnQgaWQsIGFuZFxuICAgKiBtb3JlLlxuICAgKi9cbiAgTElTVF9BQ0NPVU5UOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2xpc3QnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJvZHkucmVzdWx0cyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogVGhlIE1FIGVuZHBvaW50IHJldHJpZXZlcyBzb21lIHN1cmZhY2UgaW5mb3JtYXRpb24gYWJvdXQgeW91IGxpa2VcbiAgICogeW91ciBuYW1lIGFuZCBlbWFpbC5cbiAgICovXG4gIE1FOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9tZScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBQRVJTT04gZW5kcG9pbnQgcmV0cmlldmVzIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IHlvdSB0aGF0XG4gICAqIHlvdSBwcm92aWRlZCBvbiBzaWdudXAsIGxpa2UgcmVzaWRlbnRpYWwgYW5kIG1haWxpbmcgYWRkcmVzc2VzLFxuICAgKiBlbXBsb3ltZW50LCBwaG9uZSBudW1iZXJzLCBhbmQgc28gb24uXG4gICAqL1xuICBQRVJTT046IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3BlcnNvbicsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBISVNUT1JZX0FDQ09VTlQgZW5kcG9pbnQgcHJvdmlkZXMgaGlzdG9yaWNhbCBzbmFwc2hvdHMgb2YgdGhlXG4gICAqIFdlYWx0aHNpbXBsZSBhY2NvdW50IGZvciBhIHNwZWNpZmllZCB0aW1lZnJhbWUuXG4gICAqL1xuICBISVNUT1JZX0FDQ09VTlQ6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvaGlzdG9yeS97MH0/YWNjb3VudF9pZD17MX0nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2ludGVydmFsJyxcbiAgICAgIDE6ICdhY2NvdW50SWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQcm92aWRlcyB0aGUgbW9zdCByZWNlbnQgMjAgYWN0aXZpdGllcyAoZGVwb3NpdHMsIGRpdmlkZW5kcywgb3JkZXJzLCBldGMpIG9uIHRoZSBXZWFsdGhzaW1wbGVcbiAgICogVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIEFDVElWSVRJRVM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvYWN0aXZpdGllcz9saW1pdD17MH0mYWNjb3VudF9pZHM9ezF9JlsyXSZib29rbWFyaz17M30nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2xpbWl0JyxcbiAgICAgIDE6ICdhY2NvdW50SWRzJyxcbiAgICAgIDI6ICd0eXBlJyxcbiAgICAgIDM6ICdib29rbWFyaycsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEFsbCBkZXBvc2l0cyB1bmRlciB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICovXG4gIERFUE9TSVRTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9kZXBvc2l0cycsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYm9keS5yZXN1bHRzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBBbGwgbGlua2VkIGJhbmsgYWNjb3VudHMgdW5kZXIgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqL1xuICBCQU5LX0FDQ09VTlRTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9iYW5rLWFjY291bnRzJyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ib2R5LnJlc3VsdHMsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEN1cnJlbnQgV2VhbHRoc2ltcGxlIFRyYWRlIFVTRC9DQUQgZXhjaGFuZ2UgcmF0ZXNcbiAgICovXG4gIEVYQ0hBTkdFX1JBVEVTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9mb3JleCcsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEdyYWJzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzZWN1cml0eSByZXNlbWJsZWQgYnkgdGhlIHRpY2tlci5cbiAgICovXG4gIFNFQ1VSSVRZOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9zZWN1cml0aWVzP3F1ZXJ5PXswfScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAndGlja2VyJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuYm9keTtcblxuICAgICAgaWYgKGRhdGEucmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZWN1cml0eSBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YS5yZXN1bHRzO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEZldGNoZXMgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgYSBzZWN1cml0eSB1c2luZyBpdHMgdW5pcXVlXG4gICAqIHNlY3VyaXR5IGlkZW50aWZpZXIuIE1hcmtldCBxdW90ZSwgYmlkIGFuZCBhc2sgc2l6ZSwgYW5kIG90aGVyIGluZm9ybWF0aW9uXG4gICAqIGFyZSByZXR1cm5lZC5cbiAgICovXG4gIEVYVEVOU0lWRV9TRUNVUklUWV9ERVRBSUxTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9zZWN1cml0aWVzL3swfScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnaWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQcm92aWRlcyBhIGNvbXByZWhlbnNpdmUgbGlzdCBvbiBhbGwgc2VjdXJpdHkgZ3JvdXBzIGF2YWlsYWJsZVxuICAgKiBvbiB0aGUgcGxhdGZvcm0uXG4gICAqL1xuICBTRUNVUklUWV9HUk9VUFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3NlY3VyaXR5LWdyb3Vwcz9saW1pdD05OScsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4gcmVzcG9uc2UuYm9keS5yZXN1bHRzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBSZXRyaWV2ZXMgYWxsIHNlY3VyaXRpZWlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc2VjdXJpdHkgZ3JvdXAgaWQuXG4gICAqL1xuICBTRUNVUklUWV9HUk9VUDoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vc2VjdXJpdHktZ3JvdXBzL3swfS9zZWN1cml0aWVzJyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdncm91cElkJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogKHJlc3BvbnNlKSA9PiByZXNwb25zZS5ib2R5LnJlc3VsdHMsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEZldGNoZXMgaGlzdG9yaWNhbCBxdW90ZXMgZm9yIGEgc2VjdXJpdHkgaW4gdGhlIHNwZWNpZmllZCBpbnRlcnZhbC5cbiAgICovXG4gIFFVT1RFU19ISVNUT1JZOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9zZWN1cml0aWVzL3swfS9oaXN0b3JpY2FsX3F1b3Rlcy97MX0/bWljPVhOQVMnLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ2lkJyxcbiAgICAgIDE6ICdpbnRlcnZhbCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIExpc3RzIGFsbCBwb3NpdGlvbnMgdW5kZXIgYSB0cmFkaW5nIGFjY291bnQuXG4gICAqL1xuICBQT1NJVElPTlM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvcG9zaXRpb25zP2FjY291bnRfaWQ9ezB9JyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdhY2NvdW50SWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmJvZHkucmVzdWx0cyxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogR3JhYiBhIHBhZ2Ugb2Ygb3JkZXJzICgyMCBvcmRlcnMpLlxuICAgKi9cbiAgT1JERVJTX0JZX1BBR0U6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycz9vZmZzZXQ9ezB9JmFjY291bnRfaWQ9ezF9JyxcbiAgICBhdXRoZW50aWNhdGVkOiB0cnVlLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdvZmZzZXQnLFxuICAgICAgMTogJ2FjY291bnRJZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmJvZHk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3RhbDogZGF0YS50b3RhbCxcbiAgICAgICAgb3JkZXJzOiBkYXRhLnJlc3VsdHMsXG4gICAgICB9O1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIENhbmNlbHMgYSBzcGVjaWZpYyBvcmRlciBieSBpdHMgaWQuXG4gICAqL1xuICBDQU5DRUxfT1JERVI6IHtcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycy97MH0nLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IHRydWUsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ29yZGVySWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQbGFjZXMgYW4gb3JkZXIgZm9yIGEgc2VjdXJpdHkuXG4gICAqL1xuICBQTEFDRV9PUkRFUjoge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycycsXG4gICAgYXV0aGVudGljYXRlZDogdHJ1ZSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxufTtcblxuZXhwb3J0IGRlZmF1bHQgV2VhbHRoc2ltcGxlVHJhZGVFbmRwb2ludHM7XG4iLCJpbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4vYXBpL2VuZHBvaW50cyc7XG5cbmNsYXNzIEF1dGhlbnRpY2F0aW9uIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIEF1dGhlbnRpY2F0aW9uIGNsYXNzcyBhc3NvY2lhdGVkIHdpdGggdGhlXG4gICAqIHByb3ZpZGVkIHRva2VucyBhbmQgaHR0cHMgd29ya2VyLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGh0dHBzV29ya2VyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihodHRwc1dvcmtlcikge1xuICAgIHRoaXMud29ya2VyID0gaHR0cHNXb3JrZXI7XG5cbiAgICAvLyBhdXRoZW50aWNhdGlvbiBldmVudHNcbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgIG90cDogbnVsbCxcbiAgICAgIHJlZnJlc2g6IG51bGwsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIHJ1biBvbiBhIGNlcnRhaW4gZXZlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnQgVGhlIHRyaWdnZXIgZm9yIHRoZSBmdW5jdGlvblxuICAgKiBAcGFyYW0geyp9IGhhbmRsZXIgZXZlbnQgaGFuZGxlciBmb3IgdGhlIGV2ZW50XG4gICAqL1xuICBvbihldmVudCwgaGFuZGxlcikge1xuICAgIGlmICghKGV2ZW50IGluIHRoaXMuZXZlbnRzKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBhdXRoZW50aWNhdGlvbiBldmVudCAnJHtldmVudH0nIWApO1xuICAgIH1cbiAgICAvLyB0aGlzIGNyZWF0ZXMgYSBlZGdlIGNhc2UgaW4gdGhlIGxpc3Qgb2YgZXZlbnRzXG4gICAgLy8gYmVjYXVzZSB3ZSdyZSBub3cgcGFydGx5IGEgY29uZmlndXJhdGlvbiBwcm94eSBhbmQgdmFsaWRhdGlvbiBmb3IgYVxuICAgIC8vIHNldHRpbmcgdGhhdCdzIGluIGh0dHBzLmpzXG4gICAgaWYgKGV2ZW50ID09ICdyZWZyZXNoJykge1xuICAgICAgdGhpcy53b3JrZXIub24oZXZlbnQsIGhhbmRsZXIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IGhhbmRsZXI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGF1dGggbW9kdWxlIHdpdGggYW4gZXhpc3Rpbmcgc3RhdGUgb2YgdG9rZW5zLlxuICAgKiBUaGUgc3RhdGUgcHJvdmlkZWQgc2hvdWxkIGNvbnRhaW4gYWNjZXNzLCByZWZyZXNoLCBhbmQgZXhwaXJlcyBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHN0YXRlIFByZS1leGlzdGluZyBhdXRoZW50aWNhdGlvbiBzdGF0ZVxuICAgKi9cbiAgdXNlKHN0YXRlKSB7XG4gICAgdGhpcy53b3JrZXIudG9rZW5zLnN0b3JlKHN0YXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTbmFwc2hvdCBvZiB0aGUgY3VycmVudCBhdXRoZW50aWNhdGlvbiB0b2tlbnMuXG4gICAqL1xuICB0b2tlbnMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjY2VzczogdGhpcy53b3JrZXIudG9rZW5zLmFjY2VzcyxcbiAgICAgIHJlZnJlc2g6IHRoaXMud29ya2VyLnRva2Vucy5yZWZyZXNoLFxuICAgICAgZXhwaXJlczogdGhpcy53b3JrZXIudG9rZW5zLmV4cGlyZXMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHRlbXB0cyB0byBlc3RhYmxpc2ggYSBzZXNzaW9uIGZvciB0aGUgcHJvdmlkZWQgZW1haWwgYW5kIHBhc3N3b3JkLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGVtYWlsIGVtYWlsZWQgcmVnaXN0ZXJlZCBieSB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSBwYXNzd29yZCBUaGUgcGFzc3dvcmQgb2YgdGhlIGFjY291bnRcbiAgICovXG4gIGFzeW5jIGxvZ2luKGVtYWlsLCBwYXNzd29yZCkge1xuICAgIGxldCByZXNwb25zZSA9IG51bGw7XG5cbiAgICAvKlxuICAgICAqIElmIHdlIGFyZSBnaXZlbiBhIGZ1bmN0aW9uIGZvciBvdHAsIHRoZW4gd2UgbXVzdCBmYWlsIGEgbG9nIGluIHRvXG4gICAgICogdHJpZ2dlciBhbiBPVFAgZXZlbnQgd2l0aCBXZWFsdGhzaW1wbGUgVHJhZGUuIFRoaXMgd2lsbCBhbGxvdyB0aGUgdXNlclxuICAgICAqIG90cCB0aHVuayB0byByZXRyaWV2ZSB0aGUgY29kZS5cbiAgICAgKlxuICAgICAqIElmIGEgbGl0ZXJhbCB2YWx1ZSBpcyBwcm92aWRlZCBmb3Igb3RwLCBpdCBtZWFucyB0aGUgdXNlciBoYXMgbWFudWFsbHlcbiAgICAgKiBwcm92aWRlZCB1cyB3aXRoIHRoZSBvdHAgY29kZS4gV2UgY2FuIHNraXAgdGhpcyBsb2dpbiBhdHRlbXB0LlxuICAgICAqL1xuICAgIGlmICh0eXBlb2YgKHRoaXMuZXZlbnRzLm90cCkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGF3YWl0IHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkxPR0lOLCB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGxvZyBpbiBmb3IgcmVhbCB0aGlzIHRpbWUuXG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTE9HSU4sIHtcbiAgICAgICAgZW1haWwsXG4gICAgICAgIHBhc3N3b3JkLFxuICAgICAgICBvdHA6IHR5cGVvZiAodGhpcy5ldmVudHMub3RwKSA9PT0gJ2Z1bmN0aW9uJyA/IGF3YWl0IHRoaXMuZXZlbnRzLm90cCgpIDogdGhpcy5ldmVudHMub3RwLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIHdlIG1pZ2h0IGhhdmUgZmFpbGVkIGJlY2F1c2UgT1RQIHdhcyBub3QgcHJvdmlkZWRcbiAgICAgIGlmICghdGhpcy5ldmVudHMub3RwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignT1RQIG5vdCBwcm92aWRlZCEnKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2VlbXMgdG8gYmUgaW5jb3JyZWN0IGNyZWRlbnRpYWxzIG9yIE9UUC5cbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIC8vIENhcHR1cmUgdGhlIHRva2VucyBmb3IgbGF0ZXIgdXNhZ2UuXG4gICAgdGhpcy51c2UocmVzcG9uc2UudG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBuZXcgc2V0IG9mIGFjY2VzcyBhbmQgcmVmcmVzaCB0b2tlbnMuXG4gICAqL1xuICBhc3luYyByZWZyZXNoKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5yZWZyZXNoQXV0aGVudGljYXRpb24oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBdXRoZW50aWNhdGlvbjtcbiIsIi8vIENvbmRpdGlvbmFsIGZlYXR1cmVzIHRoYXQgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgd3N0cmFkZS1hcGlcbmNvbnN0IHN1cHBvcnRlZEZlYXR1cmVzID0gWydpbXBsaWNpdF90b2tlbl9yZWZyZXNoJywgJ3NlY3VyaXRpZXNfY2FjaGUnXTtcbmNvbnN0IHN1cHBvcnRlZCA9IChmZWF0dXJlKSA9PiB7XG4gIGlmICghZmVhdHVyZT8uc3RhcnRzV2l0aCgnbm9fJykpIHtcbiAgICByZXR1cm4gc3VwcG9ydGVkRmVhdHVyZXMuaW5jbHVkZXMoZmVhdHVyZSk7XG4gIH1cblxuICByZXR1cm4gc3VwcG9ydGVkRmVhdHVyZXMuaW5jbHVkZXMoZmVhdHVyZS5zdWJzdHJpbmcoJ25vXycubGVuZ3RoKSk7XG59O1xuXG4vLyBIb2xkcyBvcHRpb25hbCBmZWF0dXJlcyB0aGF0IGhhdmUgYmVlbiBkaXNhYmxlZC5cbmNvbnN0IGRpc2FibGVkID0gWydzZWN1cml0aWVzX2NhY2hlJ107XG5leHBvcnQgY29uc3QgY29uZmlnRW5hYmxlZCA9IChmZWF0dXJlKSA9PiAhZGlzYWJsZWQuaW5jbHVkZXMoZmVhdHVyZSk7XG5cbi8qKlxuICogRW5hYmxlIG9yIGRpc2FibGUgYW4gb3B0aW9uYWwgZmVhdHVyZSB3aXRoaW4gd3N0cmFkZS1hcGkuXG4gKlxuICogRXhhbXBsZXM6XG4gKiAtLS1cbiAqIGNvbmZpZygnaW1wbGljaXRfdG9rZW5fcmVmcmVzaCcpXG4gKiBFbmFibGVzIGltcGxpY2l0IHJlZnJlc2hpbmcgb2YgdG9rZW5zLlxuICpcbiAqIGNvbmZpZygnbm9faW1wbGljaXRfdG9rZW5fcmVmcmVzaCcpXG4gKiBEaXNhYmxlcyBpbXBsaWNpdCByZWZyZXNoaW5nIG9mIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0geyp9IGZlYXR1cmUgVGhlIHN0cmluZyBpZGVudGlmaWVyIGZvciB0aGUgZmVhdHVyZSwgc3RhcnRpbmcgd2l0aCBcIm5vX1wiIGlmXG4gKiAgICAgICAgICAgICAgICAgICAgeW91IHdpc2ggdG8gZGlzYWJsZSBpdC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29uZmlnKGZlYXR1cmUpIHtcbiAgaWYgKCFzdXBwb3J0ZWQoZmVhdHVyZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCcke2ZlYXR1cmV9JyBpcyBub3Qgc3VwcG9ydGVkIWApO1xuICB9XG5cbiAgaWYgKGZlYXR1cmU/LnN0YXJ0c1dpdGgoJ25vXycpKSB7XG4gICAgY29uc3QgY3V0ID0gZmVhdHVyZS5zdWJzdHJpbmcoZmVhdHVyZS5pbmRleE9mKCdfJykgKyAxKTtcblxuICAgIC8vIFdlIHdpbGwgb25seSBhcHBlbmQgdGhpcyBpZiBpdCBpc24ndCBhbHJlYWR5IGluIHRoZXJlLlxuICAgIGlmIChjb25maWdFbmFibGVkKGN1dCkpIHtcbiAgICAgIGRpc2FibGVkLnB1c2goY3V0KTtcbiAgICB9XG5cbiAgLy8gT25seSBkZWxldGUgdGhlIGZlYXR1cmUgaWYgaXQncyBhbHJlYWR5IGRpc2FibGVkLlxuICB9IGVsc2UgaWYgKCFjb25maWdFbmFibGVkKGZlYXR1cmUpKSB7XG4gICAgZGlzYWJsZWQuc3BsaWNlKGRpc2FibGVkLmluZGV4T2YoZmVhdHVyZSksIDEpO1xuICB9XG59XG4iLCIvLyBFeGNoYW5nZXMgc3VwcG9ydGVkIGJ5IFdlYWx0aHNpbXBsZSBUcmFkZVxuLy8gJ0NDJyBpcyBub3QgYW4gZXhjaGFuZ2U7IGl0IHN0YW5kcyBmb3IgQ3J5cHRvIGN1cnJlbmN5IGFuZFxuLy8gaXQgYWxsb3dzIHVzIHRvIGRpc3Rpbmd1aXNoIGl0IGZyb20gY29udmVudGlvbmFsIHNlY3VyaXRpZXMuXG5jb25zdCBleGNoYW5nZXMgPSBbJ05BU0RBUScsICdOWVNFJywgJ1RTWCcsICdUU1gtVicsICdBRVFVSVRBUyBORU8gRVhDSEFOR0UnLCAnQ0MnXTtcblxuLyoqXG4gKiBUaWNrZXIgcHJvdmlkZXMgYSBsb2dpY2FsIGVuY2Fwc3VsYXRpb24gZm9yIHRoZSBhbGxvd2VkIGZvcm1zXG4gKiBvZiBhIHNlY3VyaXR5IHRpY2tlciB3aXRoaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAqXG4gKiBJdCBwcm92aWRlcyB2YWxpZGF0aW9uIG9mIHRoZSBmb3JtYXQgb2YgdGhlIHRpY2tlciwgYW5kIHRoZVxuICogdmFsdWUgb2YgdGhlIGV4Y2hhbmdlLCBpZiBwcm92aWRlZC5cbiAqXG4gKiBUaWNrZXJzIG1heSBiZSBzcGVjaWZpZWQgYXMgdHdvIGRhdGEgdHlwZXM6XG4gKlxuICogLSBzdHJpbmc6IFRoZSB0aWNrZXIgbWF5IGJlIGEgc2ltcGxlIHN0cmluZyBjb250YWluaW5nIHRoZSBzeW1ib2wsIG9yIGEgY29tYmluYXRpb24gb2ZcbiAqIHRoZSBzeW1ib2wgYW5kIGV4Y2hhbmdlIHNlcGFyYXRlZCBieSBhIGNvbG9uLlxuICogLSBvYmplY3Q6IFRoZSB0aWNrZXIgbWF5IGJlIGFuIG9iamVjdCB3aXRoIHN5bWJvbCwgZXhjaGFuZ2UsIG9yIGlkIHByb3BlcnRpZXMuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogXCJBQVBMXCJcbiAqIFwiVUJFUjpOWVNFXCJcbiAqIHsgc3ltYm9sOiBcIkFBUExcIiB9XG4gKiB7IHN5bWJvbDogXCJVQkVSXCIsIGV4Y2hhbmdlOiBcIk5ZU0VcIiB9XG4gKiB7IGlkOiBcInNlYy1zLTc2YTcxNTUyNDJlODQ3Nzg4MGNiYjQzMjY5MjM1Y2I2XCIgfVxuICovXG5jbGFzcyBUaWNrZXIge1xuICAvKipcbiAgICogQ29uc3RydWN0cyB0aGUgdGlja2VyIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgc2VjdXJpdHkgdGlja2VyIHZhbHVlLCBwcm92aWRlZCBhcyBhIHN0cmluZyBvciBhbiBvYmplY3Qgd2l0aCBzeW1ib2wsXG4gICAqIGV4Y2hhbmdlLCBvciBpZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgdGhpcy5zeW1ib2wgPSBudWxsO1xuICAgIHRoaXMuZXhjaGFuZ2UgPSBudWxsO1xuICAgIHRoaXMuaWQgPSBudWxsO1xuICAgIHRoaXMuY3J5cHRvID0gZmFsc2U7XG5cbiAgICBpZiAodHlwZW9mICh2YWx1ZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBFbXB0eSB0aWNrZXJzIGFyZSBub3QgYWxsb3dlZFxuICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IHRpY2tlcicpO1xuICAgICAgfVxuXG4gICAgICBbdGhpcy5zeW1ib2wsIHRoaXMuZXhjaGFuZ2VdID0gdmFsdWUuc3BsaXQoJzonKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gWW91IG5lZWQgYXQgbGVhc3QgYSBzeW1ib2wgb3IgaWQgdG8gZm9ybSBhIHRpY2tlci5cbiAgICAgIGlmICghdmFsdWUuc3ltYm9sICYmICF2YWx1ZS5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGlja2VyICcke3ZhbHVlfSdgKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zeW1ib2wgPSB2YWx1ZS5zeW1ib2wgfHwgbnVsbDtcbiAgICAgIHRoaXMuZXhjaGFuZ2UgPSB2YWx1ZS5leGNoYW5nZSB8fCBudWxsO1xuICAgICAgdGhpcy5pZCA9IHZhbHVlLmlkIHx8IG51bGw7XG4gICAgfVxuXG4gICAgLy8gV2VhbHRoc2ltcGxlIFRyYWRlIGRvZXNuJ3QgaGF2ZSBhIHNob3J0IGV4Y2hhbmdlIGlkICgnTkVPJykgZm9yXG4gICAgLy8gQUVRVUlUQVMgTkVPIEVYQ0hBTkdFIGZvciBzb21lIHJlYXNvbi4uLlxuICAgIC8vIFdlIGhhdmUgdG8gbWFwIGl0IHRvIHRoZSBmdWxsIG5hbWUgZm9yIGNvbXBhcmlzb25zIHRvIHdvcmsuXG4gICAgaWYgKHRoaXMuZXhjaGFuZ2UgPT09ICdORU8nKSB7XG4gICAgICB0aGlzLmV4Y2hhbmdlID0gJ0FFUVVJVEFTIE5FTyBFWENIQU5HRSc7XG4gICAgfVxuXG4gICAgLy8gR3VhcmFudGVlIHRoYXQgdGhlIGV4Y2hhbmdlIGlzIHZhbGlkIGlmIG5vdCBudWxsXG4gICAgaWYgKHRoaXMuZXhjaGFuZ2UgJiYgIWV4Y2hhbmdlcy5pbmNsdWRlcyh0aGlzLmV4Y2hhbmdlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGV4Y2hhbmdlICcke3RoaXMuZXhjaGFuZ2V9JyFgKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGNyeXB0byBwcm9wZXJ0eSB0byB0cnVlIHRvIHRyZWF0IHRoaXMgc2VjdXJpdHkgYXMgY3J5cHRvY3VycmVuY3lcbiAgICBpZiAodGhpcy5leGNoYW5nZSA9PT0gJ0NDJyB8fCB0aGlzLmlkPy5zdGFydHNXaXRoKCdzZWMteicpKSB7XG4gICAgICB0aGlzLmNyeXB0byA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZHVjZXMgdGhlIHRpY2tlciBvYmplY3QgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXG4gICAqL1xuICBmb3JtYXQoKSB7XG4gICAgaWYgKHRoaXMuaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cblxuICAgIC8vIFdlIG11c3QgcmV0cmFuc2xhdGUgdGhlIGZ1bGwgbmFtZSBvZiB0aGUgTkVPIGV4Y2hhbmdlIGJhY2sgdG8gTkVPXG4gICAgaWYgKHRoaXMuZXhjaGFuZ2UgPT09ICdBRVFVSVRBUyBORU8gRVhDSEFOR0UnKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5zeW1ib2x9Ok5FT2A7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMuc3ltYm9sfSR7dGhpcy5leGNoYW5nZSA/IGA6JHt0aGlzLmV4Y2hhbmdlfWAgOiAnJ31gO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXBhcmVzIHN5bWJvbCBvciBpZCB3aXRoIGFub3RoZXIgdGlja2VyLiBUaGlzIGlzIHdlYWsgYmVjYXVzZVxuICAgKiBleGNoYW5nZSBpcyBub3QgY29tcGFyZWQgaGVyZSwgYWxsb3dpbmcgZm9yIGZhbHNlIHBvc2l0aXZlc1xuICAgKiBvZiBzeW1ib2xzIG9uIGRpZmZlcmVudCBleGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGlja2VyIHRvIGNvbXBhcmUgdXMgd2l0aFxuICAgKi9cbiAgd2Vha0VxdWFscyhvdGhlcikge1xuICAgIGlmICh0aGlzLmlkICYmIHRoaXMuaWQgPT09IG90aGVyLmlkKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zeW1ib2wgJiYgdGhpcy5zeW1ib2wgPT09IG90aGVyLnN5bWJvbCAmJiB0aGlzLmNyeXB0byA9PT0gb3RoZXIuY3J5cHRvKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlja2VyO1xuIiwiaW1wb3J0IEFQSUNhY2hlIGZyb20gJy4uL2NvcmUvY2FjaGUnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuLi9jb3JlL3RpY2tlcic7XG5cbmNvbnN0IGNhY2hlID0gbmV3IEFQSUNhY2hlKDEwKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICAgKiBRdWVyeSB0aGUgY2FjaGUgZm9yIHRoZSBzZWN1cml0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gc2VjdXJpdHlcbiAgICAgKi9cbiAgZ2V0KHNlY3VyaXR5KSB7XG4gICAgLy8gTXVzdCBkaWdlc3QgdGhlIHNlY3VyaXR5IGludG8gdGhlIHN0YW5kYXJkIGZvcm1hdFxuICAgIGNvbnN0IHJlc3VsdCA9IGNhY2hlLmdldChuZXcgVGlja2VyKHNlY3VyaXR5KS5mb3JtYXQoKSk7XG5cbiAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG5cbiAgLyoqXG4gICAgICogUmVtZW1iZXIgdGhlIHNlY3VyaXR5IGZvciBhIGZ1dHVyZSBxdWljayByZXRyaWV2YWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IGtleVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICAgKi9cbiAgaW5zZXJ0KGtleSwgdmFsdWUpIHtcbiAgICBjYWNoZS5pbnNlcnQobmV3IFRpY2tlcihrZXkpLmZvcm1hdCgpLCB2YWx1ZSk7XG4gIH0sXG59O1xuIiwiLypcbiAqIEFQSUNhY2hlIGlzIGFuIGludGVybmFsIGVmZm9ydCB0byBtaW5pbWl6ZSB1bm5lY2Vzc2FyeSBBUEkgY2FsbHMgd2hlcmVcbiAqIHBvc3NpYmxlLiBBIHNwZWNpZmljIHVzZWNhc2Ugd2hlcmUgYSBjYWNoZSBpcyB1c2VmdWwgaXMgZmlndXJpbmcgb3V0IHRoZVxuICogZXhjaGFuZ2UgYSBzZWN1cml0eSBiZWxvbmdzIHRvLiBBIGNhY2hlIHdvdWxkIGFsbG93IHVzIHRvIG1lbW9yaXplXG4gKiB0aGlzIHN0YXRpYyBkYXRhIGZvciBhIHBlcmlvZCBvZiB0aW1lIHRvIGF2b2lkIHVubmVjZXNzYXJ5IEFQSSBjYWxscy5cbiAqXG4gKiBUaGUgY2xhc3MgZW5jYXBzdWxhdGVzIHRoZSBmb2xsb3dpbmcgY2FjaGUgYmVoYXZpb3VyOlxuICogLSBBIG1heGltdW0gZW50cmllcyBwcm92aWRlZCBhcyBhIGNvbnN0cnVjdG9yIGFyZ3VtZW50XG4gKiAtIEZpcnN0IGluLCBGaXJzdCBvdXQgKEZJRk8pIG1vZGVsXG4gKlxuICogVGhlIGludGVybmVsIGRhdGEgc3RydWN0dXJlIGlzIGEgSGFzaFNldCwgc28gbG9va3VwIHRpbWUgY29zdCBpcyBmYWlybHlcbiAqIG1pbmltYWwuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFQSUNhY2hlIHtcbiAgY29uc3RydWN0b3Ioc2l6ZSkge1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIFN0b3JlIHRoZSBrZXktdmFsdWUgcGFpciBpbnRvIHRoaXMgY2FjaGUuIFRoZSBvbGRlc3QgZW50cnkgaXMgZXZpY3RlZCBpZlxuICAgICAqIHdlJ3JlIG91dCBvZiBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0ga2V5XG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqL1xuICBpbnNlcnQoa2V5LCB2YWx1ZSkge1xuICAgIGlmICh0aGlzLmNhY2hlLnNpemUgPj0gdGhpcy5zaXplKSB7XG4gICAgICB0aGlzLmNhY2hlLmRlbGV0ZSh0aGlzLmNhY2hlLmtleXMoKS5uZXh0KCkudmFsdWUpO1xuICAgIH1cblxuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAgICogUmV0cmlldmUgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCB0aGUga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBrZXlcbiAgICAgKi9cbiAgZ2V0KGtleSkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChrZXkpO1xuICB9XG59XG4iLCJpbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4vYXBpL2VuZHBvaW50cyc7XG5pbXBvcnQgVGlja2VyIGZyb20gJy4vY29yZS90aWNrZXInO1xuaW1wb3J0IHsgY29uZmlnRW5hYmxlZCB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCBjYWNoZSBmcm9tICcuL29wdGlvbmFsL3NlY3VyaXRpZXMtY2FjaGUnO1xuXG5jbGFzcyBEYXRhIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgRGF0YSBwYmplY3QgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBIdHRwcyB3b3JrZXIgc3RhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gaHR0cHNXb3JrZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKGh0dHBzV29ya2VyKSB7XG4gICAgdGhpcy53b3JrZXIgPSBodHRwc1dvcmtlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNuYXBzaG90IG9mIHRoZSBjdXJyZW50IFVTRC9DQUQgZXhjaGFuZ2UgcmF0ZXMgb24gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZVxuICAgKiBwbGF0Zm9ybS5cbiAgICovXG4gIGFzeW5jIGV4Y2hhbmdlUmF0ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkVYQ0hBTkdFX1JBVEVTLCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgYSBzZWN1cml0eSBvbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIFBsYXRmb3JtLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R9IHVzZXJUaWNrZXIgVGhlIHNlY3VyaXR5IGlkXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZXh0ZW5zaXZlIFB1bGxzIGEgbW9yZSBkZXRhaWxlZCByZXBvcnQgb2YgdGhlIHNlY3VyaXR5IHVzaW5nIHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvc2VjdXJpdGllcy97aWR9IEFQSVxuICAgKi9cbiAgYXN5bmMgZ2V0U2VjdXJpdHkodXNlclRpY2tlciwgZXh0ZW5zaXZlKSB7XG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XG5cbiAgICAvLyBSdW4gc29tZSB2YWxpZGF0aW9uIG9uIHRoZSB0aWNrZXJcbiAgICBjb25zdCB0aWNrZXIgPSBuZXcgVGlja2VyKHVzZXJUaWNrZXIpO1xuXG4gICAgaWYgKCFleHRlbnNpdmUgJiYgY29uZmlnRW5hYmxlZCgnc2VjdXJpdGllc19jYWNoZScpKSB7XG4gICAgICByZXN1bHQgPSBjYWNoZS5nZXQodGlja2VyKTtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGlja2VyLmlkKSB7XG4gICAgICAvLyBXZSB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGV4dGVuc2l2ZSBkZXRhaWxzIEFQSSBzaW5jZSB3ZSBoYXZlIHRoZSB1bmlxdWUgaWQuXG4gICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5FWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUywge1xuICAgICAgICBpZDogdGlja2VyLmlkLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlNFQ1VSSVRZLCB7IHRpY2tlcjogdGlja2VyLnN5bWJvbCB9KTtcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5maWx0ZXIoKHNlY3VyaXR5KSA9PiBzZWN1cml0eS5zdG9jay5zeW1ib2wgPT09IHRpY2tlci5zeW1ib2wpO1xuXG4gICAgICBpZiAodGlja2VyLmNyeXB0bykge1xuICAgICAgICByZXN1bHQgPSByZXN1bHQuZmlsdGVyKChzZWN1cml0eSkgPT4gc2VjdXJpdHkuc2VjdXJpdHlfdHlwZSA9PT0gJ2NyeXB0b2N1cnJlbmN5Jyk7XG4gICAgICB9IGVsc2UgaWYgKHRpY2tlci5leGNoYW5nZSkge1xuICAgICAgICByZXN1bHQgPSByZXN1bHQuZmlsdGVyKChzZWN1cml0eSkgPT4gc2VjdXJpdHkuc3RvY2sucHJpbWFyeV9leGNoYW5nZSA9PT0gdGlja2VyLmV4Y2hhbmdlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTXVsdGlwbGUgc2VjdXJpdGllcyBtYXRjaGVkIHF1ZXJ5LicpO1xuICAgICAgfSBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHNlY3VyaXRpZXMgbWF0Y2hlZCBxdWVyeS4nKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29udmVydCByZXN1bHQgZnJvbSBhIHNpbmdsZXRvbiBsaXN0IHRvIGl0cyByYXcgZW50cnlcbiAgICAgIFtyZXN1bHRdID0gcmVzdWx0O1xuXG4gICAgICBpZiAoZXh0ZW5zaXZlKSB7XG4gICAgICAgIC8vIFRoZSBjYWxsZXIgaGFzIG9wdGVkIHRvIHJlY2VpdmUgdGhlIGV4dGVuc2l2ZSBkZXRhaWxzIGFib3V0IHRoZSBzZWN1cml0eS5cbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuRVhURU5TSVZFX1NFQ1VSSVRZX0RFVEFJTFMsIHtcbiAgICAgICAgICBpZDogcmVzdWx0LmlkLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29uZmlnRW5hYmxlZCgnc2VjdXJpdGllc19jYWNoZScpICYmIGNhY2hlLmdldCh0aWNrZXIpID09PSBudWxsKSB7XG4gICAgICBjYWNoZS5pbnNlcnQodGlja2VyLCByZXN1bHQpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2hlcyBhIG1hcHBpbmcgb2YgYWxsIHNlY3VyaXR5IGdyb3VwcyAoYXZhaWxhYmxlIG9uIHRoZSBUcmFkZSBwbGF0Zm9ybSkgdG9cbiAgICogdGhlaXIgZ3JvdXAgaWRzLlxuICAgKi9cbiAgYXN5bmMgc2VjdXJpdHlHcm91cHMoKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuU0VDVVJJVFlfR1JPVVBTLCB7fSk7XG5cbiAgICAvLyBDb25zdHJ1Y3QgYSBtYXAgb2YgY2F0ZWdvcnkgbmFtZSB0byBjYXRlZ29yeSBpZFxuICAgIHJldHVybiByZXN1bHQucmVkdWNlKChtYXAsIGl0ZW0pID0+ICh7XG4gICAgICAuLi5tYXAsIFtpdGVtLm5hbWVdOiBpdGVtLmV4dGVybmFsX3NlY3VyaXR5X2dyb3VwX2lkLFxuICAgIH0pLCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIGFsbCBzZWN1cml0aWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ3JvdXAgbmFtZSBvciBpZC5cbiAgICpcbiAgICogLSBJZiB5b3UgcHJvdmlkZSB0aGUgZ3JvdXAgbmFtZSwgd2Ugd2lsbCBhdXRvbWF0aWNhbGx5IGRvIGEgbG9va3VwXG4gICAqIGZyb20gdGhlIFRyYWRlIHNlcnZlcnMgdG8gZ2V0IGl0cyBpZGVudGlmaWVyLlxuICAgKlxuICAgKiAtIEFsdGVybmF0aXZlbHksIFlvdSBjYW4gZ2V0IGEgbGlzdCBvZiBhbGwgZ3JvdXBzICh3aXRoIHRoZWlyIGdyb3VwIGlkcykgZnJvbVxuICAgKiBkYXRhLmdyb3VwcygpIGFuZCBwcm92aWRlIHRoZSBncm91cCBpZGVudGlmaWVyIGRpcmVjdGx5LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGdyb3VwIFRoZSBzZWN1cml0eSBncm91cCBuYW1lIG9yIGlkZW50aWZpZXJcbiAgICovXG4gIGFzeW5jIGdldFNlY3VyaXR5R3JvdXAoZ3JvdXApIHtcbiAgICBsZXQgZ3JvdXBJZCA9IGdyb3VwO1xuXG4gICAgLy8gRmV0Y2ggdGhlIGdyb3VwIGlkIGZyb20gdGhlIGdyb3VwIG5hbWVcbiAgICBpZiAoIWdyb3VwPy5zdGFydHNXaXRoKCdzZWN1cml0eS1ncm91cCcpKSB7XG4gICAgICBjb25zdCBncm91cHMgPSBhd2FpdCB0aGlzLnNlY3VyaXR5R3JvdXBzKCk7XG5cbiAgICAgIGlmICghKGdyb3VwIGluIGdyb3VwcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAnJHtncm91cH0nIGlzIG5vdCBhIHZhbGlkIGdyb3VwIG5hbWUhYCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHJlY29yZCB0aGUgbWF0Y2hlZCBncm91cCBpZC5cbiAgICAgIGdyb3VwSWQgPSBncm91cHNbZ3JvdXBdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5TRUNVUklUWV9HUk9VUCwgeyBncm91cElkIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERhdGE7XG4iLCJpbXBvcnQgeyBIZWFkZXJzIH0gZnJvbSAnbm9kZS1mZXRjaCc7XG5cbmNvbnN0IGN1c3RvbUhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuXG5leHBvcnQgZGVmYXVsdCB7XG5cbiAgLyoqXG4gICAqIEFwcGVuZHMgYSBoZWFkZXIgbmFtZS12YWx1ZSBwYWlyIHRvIGFsbCByZXF1ZXN0cy5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBuYW1lIEhlYWRlciBrZXlcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBIZWFkZXIgdmFsdWVcbiAgICovXG4gIGFkZDogKG5hbWUsIHZhbHVlKSA9PiBjdXN0b21IZWFkZXJzLmFwcGVuZChuYW1lLCB2YWx1ZSksXG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBjdXN0b20gaGVhZGVyIGZyb20gYWxsIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG5hbWUgSGVhZGVyIGtleVxuICAgKi9cbiAgcmVtb3ZlOiAobmFtZSkgPT4gY3VzdG9tSGVhZGVycy5kZWxldGUobmFtZSksXG5cbiAgLyoqXG4gICAqIENsZWFycyBhbGwgY3VzdG9tIGhlYWRlcnMuXG4gICAqL1xuICBjbGVhcjogKCkgPT4gWy4uLmN1c3RvbUhlYWRlcnNdLmZvckVhY2goKGhlYWRlcikgPT4gY3VzdG9tSGVhZGVycy5kZWxldGUoaGVhZGVyWzBdKSksXG5cbiAgLyoqXG4gICAqIFByb2R1Y2VzIGEgbGlzdCBvZiBjdXN0b20gaGVhZGVycy5cbiAgICovXG4gIHZhbHVlczogKCkgPT4gWy4uLmN1c3RvbUhlYWRlcnNdLFxufTtcbiIsInJlcXVpcmUoJ3NvdXJjZS1tYXAtc3VwcG9ydCcpLmluc3RhbGwoKTtcblxuY29uc3QgQXV0aGVudGljYXRpb24gPSByZXF1aXJlKCcuL2F1dGgnKS5kZWZhdWx0O1xuY29uc3QgaGVhZGVycyA9IHJlcXVpcmUoJy4vaGVhZGVycycpLmRlZmF1bHQ7XG5jb25zdCBBY2NvdW50cyA9IHJlcXVpcmUoJy4vYWNjb3VudHMnKS5kZWZhdWx0O1xuY29uc3QgT3JkZXJzID0gcmVxdWlyZSgnLi9vcmRlcnMnKS5kZWZhdWx0O1xuY29uc3QgRGF0YSA9IHJlcXVpcmUoJy4vZGF0YScpLmRlZmF1bHQ7XG5jb25zdCBRdW90ZXMgPSByZXF1aXJlKCcuL3F1b3RlcycpLmRlZmF1bHQ7XG5jb25zdCBjb25maWcgPSByZXF1aXJlKCcuL2NvbmZpZycpLmRlZmF1bHQ7XG5cbmNvbnN0IEh0dHBzV29ya2VyID0gcmVxdWlyZSgnLi9uZXR3b3JrL2h0dHBzJykuZGVmYXVsdDtcblxuLyoqXG4gKiBCdWlsZHMgYSBuZXcgVHJhZGUgc2Vzc2lvbiB3aXRoIGFuIGluZGVwZW5kZW50IGF1dGhlbnRpY2F0aW9uXG4gKiBzdGF0ZSwgZmFjaWxpdGF0aW5nIGNvbmN1cnJlbnQgdXNhZ2Ugb2YgdGhlIFRyYWRlIEFQSXMuXG4gKlxuICogVGhlIGhlYWRlcnMgYW5kIGNvbmZpZyBtb2R1bGUsIGhvd2V2ZXIsIGlzIG11dHVhbGx5IHNoYXJlZCBiZXR3ZWVuXG4gKiBhbGwgc2Vzc2lvbnMuXG4gKi9cbmNvbnN0IFNlc3Npb24gPSAoKSA9PiB7XG4gIGNvbnN0IHdvcmtlciA9IG5ldyBIdHRwc1dvcmtlcigpO1xuICBjb25zdCBkYXRhID0gbmV3IERhdGEod29ya2VyKTtcblxuICByZXR1cm4ge1xuICAgIGF1dGg6IG5ldyBBdXRoZW50aWNhdGlvbih3b3JrZXIpLFxuICAgIGhlYWRlcnMsXG4gICAgYWNjb3VudHM6IG5ldyBBY2NvdW50cyh3b3JrZXIpLFxuICAgIG9yZGVyczogbmV3IE9yZGVycyh3b3JrZXIsIGRhdGEpLFxuICAgIHF1b3RlczogbmV3IFF1b3Rlcyh3b3JrZXIsIGRhdGEpLFxuICAgIGRhdGEsXG4gICAgY29uZmlnLFxuICB9O1xufTtcblxuLy8gV2UgbmVlZCBhIGRlZmF1bHQgc2Vzc2lvbiBleHBvcnRlZCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgcmVhc29ucyxcbi8vIGJ1dCBhbHNvIGJlY2F1c2Ugbm90IGV2ZXJ5b25lIGNhcmVzIGFib3V0IGNvbmN1cnJlbnQgdXNhZ2VzLlxuY29uc3QgZGVmYXVsdFNlc3Npb24gPSBuZXcgU2Vzc2lvbigpO1xuLy8gQWxsb3cgdGhlIGNyZWF0aW9uIG9mIG11bHRpcGxlIHNlc3Npb25zIHRocm91Z2ggYSBTZXNzaW9uKCkgY29uc3RydWN0b3JcbmRlZmF1bHRTZXNzaW9uLlNlc3Npb24gPSAoKSA9PiBuZXcgU2Vzc2lvbigpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRTZXNzaW9uO1xuIiwiLyoqXG4gKiBDb21wdXRlcyB0aGUgY3VycmVudCB0aW1lIGluIGVwb2NoIHNlY29uZHMuXG4gKi9cbmNvbnN0IGVwb2NoU2Vjb25kcyA9ICgpID0+IHBhcnNlSW50KERhdGUubm93KCkgLyAxMDAwLCAxMCk7XG5leHBvcnQgZGVmYXVsdCBlcG9jaFNlY29uZHM7XG4iLCJpbXBvcnQgZXBvY2hTZWNvbmRzIGZyb20gJy4uL2hlbHBlcnMvdGltZSc7XG5cbi8qKlxuICogVGhpcyBtb2R1bGUgd2lsbCBwcm92aWRlIGEgdW5pZm9ybSBpbnRlcmZhY2UgZm9yIHN0b3JhZ2VcbiAqIGFuZCByZXRyaWV2YWwgb2YgYXV0aGVudGljYXRvbiB0b2tlbnMgdGhyb3VnaG91dCB3c3RyYWRlLWFwaS5cbiAqL1xuY2xhc3MgVG9rZW5zIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgYXV0aGVudGljYXRpb24gdG9rZW5zIG9iamVjdC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYWNjZXNzID0gbnVsbDtcbiAgICB0aGlzLnJlZnJlc2ggPSBudWxsO1xuICAgIHRoaXMuZXhwaXJlcyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgYXV0aGVudGljYXRpb24gdG9rZW5zLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHRva2VucyBUaGUgbmV3IHRva2Vuc1xuICAgKi9cbiAgc3RvcmUodG9rZW5zKSB7XG4gICAgdGhpcy5hY2Nlc3MgPSB0b2tlbnMuYWNjZXNzO1xuICAgIHRoaXMucmVmcmVzaCA9IHRva2Vucy5yZWZyZXNoO1xuICAgIHRoaXMuZXhwaXJlcyA9IHRva2Vucy5leHBpcmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGUgY3VycmVudCB0b2tlbnMgaGF2ZSBleHBpcmVkLlxuICAgKi9cbiAgZXhwaXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5leHBpcmVzICYmIGVwb2NoU2Vjb25kcygpID49IHRoaXMuZXhwaXJlcztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUb2tlbnM7XG4iLCJpbXBvcnQgY2xvdWRzY3JhcGVyIGZyb20gJ2Nsb3Vkc2NyYXBlcic7XG5pbXBvcnQgY3VzdG9tSGVhZGVycyBmcm9tICcuLi9oZWFkZXJzJztcbmltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi4vYXBpL2VuZHBvaW50cyc7XG5pbXBvcnQgeyBjb25maWdFbmFibGVkIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCBUb2tlbnMgZnJvbSAnLi4vY29yZS90b2tlbnMnO1xuXG5jb25zdCBbSFRUUF9PSywgSFRUUF9DUkVBVEVEXSA9IFsyMDAsIDIwMV07XG5cbi8qXG4gKiBDb21wbGV0ZSB0aGUgVVJMIGJ5IGZpbGxpbmcgdGhlIHBhcmFtZXRlciBwbGFjZWhvbGRlcnMgd2l0aCB0aGVcbiAqIGRhdGEgYXJndW1lbnRzLlxuICovXG5mdW5jdGlvbiBmaW5hbGl6ZVJlcXVlc3QoZW5kcG9pbnQsIGRhdGEpIHtcbiAgLy8gTWFrZSBhIGNvcHkgc28gd2UgZG9uJ3QgbW9kaWZ5IHRoZSBvcmlnaW5hbCBvbmUuXG4gIGNvbnN0IHBhcmFtcyA9IHsgLi4uZGF0YSB9O1xuICBsZXQgeyB1cmwgfSA9IGVuZHBvaW50O1xuXG4gIC8vIE5vIG5lZWQgdG8gZG8gYW55dGhpbmcgaWYgdGhlIFVSTCBpcyBzdGF0aWMgKG5vIHBhcmFtZXRlcnMpXG4gIGlmIChlbmRwb2ludC5wYXJhbWV0ZXJzKSB7XG4gICAgLy8gU3dhcCBhbGwgdGhlIHBhcmFtZXRlciBwbGFjZWhvbGRlcnMgd2l0aCB0aGUgYXJndW1lbnRzLlxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBPYmplY3Qua2V5cyhlbmRwb2ludC5wYXJhbWV0ZXJzKS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGNvbnN0IHBhcmFtZXRlck5hbWUgPSBlbmRwb2ludC5wYXJhbWV0ZXJzW2luZGV4XTtcblxuICAgICAgLy8gd2UgaGF2ZSB0byBleHBsaWNpdGx5IGNoZWNrIGZvciBudWxsIGFuZCB1bmRlZmluZWQgc2luY2UgcGFyYW1ldGVyXG4gICAgICAvLyB2YWx1ZXMgbWlnaHQgYmUgMC5cbiAgICAgIGlmIChwYXJhbXNbcGFyYW1ldGVyTmFtZV0gPT09IG51bGwgfHwgcGFyYW1zW3BhcmFtZXRlck5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVUkwgcGFyYW1ldGVyICcke3BhcmFtZXRlck5hbWV9JyBtaXNzaW5nIWApO1xuICAgICAgfVxuXG4gICAgICAvKlxuICAgICAgICAqIFBhcmFtZXRlcnMgc3Vycm91bmRlZCB3aXRoIGN1cmx5IGJyYWNlcyAoZS5nLiwgezJ9KSBhcmUgc2ltcGxlIHZhbHVlIHJlcGxhY2VtZW50cyxcbiAgICAgICAgKiB3aGlsZSBvbmVzIHN1cnJvdW5kZWQgd2l0aCBzcXVhcmUgYnJhY2tldHMgKGUuZy4sIFsxXSkgYXJlIGFycmF5LXZhbHVlIHJlcGxhY2VtZW50cy5cbiAgICAgICAgKi9cbiAgICAgIGlmICh1cmwuaW5kZXhPZihgeyR7aW5kZXh9fWApID49IDApIHtcbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoYHske2luZGV4fX1gLCBwYXJhbXNbZW5kcG9pbnQucGFyYW1ldGVyc1tpbmRleF1dKTtcbiAgICAgIH0gZWxzZSBpZiAodXJsLmluZGV4T2YoYFske2luZGV4fV1gKSA+PSAwKSB7XG4gICAgICAgIC8vIGV4dHJhY3QgcXVlcnkgcGFyYW1ldGVyIG5hbWUgYW5kIHRoZSBhcnJheSBvZiB2YWx1ZXNcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbU5hbWUgPSBlbmRwb2ludC5wYXJhbWV0ZXJzW2luZGV4XTtcbiAgICAgICAgY29uc3QgdmFsdWVzID0gcGFyYW1zW3F1ZXJ5UGFyYW1OYW1lXTtcblxuICAgICAgICAvLyBDb25zdHJ1Y3QgdGhlIHF1ZXJ5UGFyYW0gdXNpbmcgZXZlcnkgdmFsdWUgaW4gdGhlIHZhbHVlcyBhcnJheS5cbiAgICAgICAgLy8gSGVyZSBpcyBhbiBleGFtcGxlIG9mIHdoYXQgcXVlcnlQYXJhbSBlbmRzIHVwIGJlaW5nOlxuICAgICAgICAvL1xuICAgICAgICAvLyBxdWVyeVBhcmFtTmFtZSA9ICd0eXBlJ1xuICAgICAgICAvLyB2YWx1ZXMgPSBbJ2J1eScsICdzZWxsJywgJ2RpdmlkZW5kJ11cbiAgICAgICAgLy8gcXVlcnlQYXJhbSA9ICd0eXBlPWJ1eSZ0eXBlPXNlbGwmdHlwZT1kaXZpZGVuZCdcbiAgICAgICAgY29uc3QgcXVlcnlQYXJhbSA9IHZhbHVlcy5tYXAoKHZhbHVlKSA9PiBgJHtxdWVyeVBhcmFtTmFtZX09JHt2YWx1ZX1gKS5qb2luKCcmJyk7XG5cbiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoYFske2luZGV4fV1gLCBxdWVyeVBhcmFtKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWFsZm9ybWVkIFVSTCEgVGhpcyBpcyBhbiBpbnRlcm5hbCBlcnJvcjogcmFpc2UgYW4gaXNzdWUhJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIE11c3QgcmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIHBheWxvYWQgYXMgaXQgaGFzIGJlZW4gY29uc3VtZWQgYnkgdGhlIFVSTFxuICAgICAgZGVsZXRlIHBhcmFtc1tlbmRwb2ludC5wYXJhbWV0ZXJzW2luZGV4XV07XG4gICAgfVxuICB9XG5cbiAgLy8gTm8gcGF5bG9hZCBhdHRhY2hlZCB0byBHRVQvREVMRVRFIHJlcXVlc3RzXG4gIGlmIChbJ0dFVCcsICdIRUFEJ10uaW5jbHVkZXMoZW5kcG9pbnQubWV0aG9kKSkge1xuICAgIHJldHVybiB7IHVybCwgcGF5bG9hZDogdW5kZWZpbmVkIH07XG4gIH1cblxuICByZXR1cm4geyB1cmwsIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KHBhcmFtcykgfTtcbn1cblxuY2xhc3MgSHR0cHNXb3JrZXIge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IEh0dHBzV29ya2VyIHdpdGggaXRzIG93biBhdXRoZW50aWNhdGlvbiBzdGF0ZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudG9rZW5zID0gbmV3IFRva2VucygpO1xuXG4gICAgLy8gYXV0aGVudGljYXRpb24gZXZlbnRzXG4gICAgdGhpcy5ldmVudHMgPSB7XG4gICAgICByZWZyZXNoOiBudWxsLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBmdW5jdGlvbiB0byBydW4gb24gYSBjZXJ0YWluIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50IFRoZSB0cmlnZ2VyIGZvciB0aGUgZnVuY3Rpb25cbiAgICogQHBhcmFtIHsqfSBoYW5kbGVyIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBldmVudFxuICAgKi9cbiAgIG9uKGV2ZW50LCBoYW5kbGVyKSB7XG4gICAgaWYgKCEoZXZlbnQgaW4gdGhpcy5ldmVudHMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGF1dGhlbnRpY2F0aW9uIGV2ZW50ICcke2V2ZW50fSchYCk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudHNbZXZlbnRdID0gaGFuZGxlcjtcbiAgfVxuXG4gIC8qXG4gICAqIEltcGxlbWVudHMgdGhlIG5ldHdvcmsgbGV2ZWwgcHJvdG9jb2wgZm9yIHRhbGtpbmcgdG8gdGhlXG4gICAqIFdlYWx0aHNpbXBsZSBUcmFkZSBIVFRQUyBBUEkuXG4gICAqL1xuICBhc3luYyB0YWxrKGVuZHBvaW50LCBkYXRhKSB7XG4gICAgY29uc3QgaGVhZGVycyA9IHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9O1xuXG4gICAgaWYgKGVuZHBvaW50LmF1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIC8vIG5vIGFjY2VzcyB0b2tlbiBtZWFucyB3ZSB3aWxsIHByZW1hdHVyZWx5IGZhaWwgdGhlIHJlcXVlc3QgYmVjYXVzZVxuICAgICAgLy8gdGhpcyBpcyBhIHByaXZpbGVnZWQgZW5kcG9pbnQuXG4gICAgICBpZiAoIXRoaXMudG9rZW5zLmFjY2Vzcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkIGZvciAnJHtlbmRwb2ludC51cmx9J2ApO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29uZmlnRW5hYmxlZCgnaW1wbGljaXRfdG9rZW5fcmVmcmVzaCcpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaW1wbGljaXRUb2tlblJlZnJlc2goKTtcbiAgICAgIH1cblxuICAgICAgaGVhZGVycy5BdXRob3JpemF0aW9uID0gdGhpcy50b2tlbnMuYWNjZXNzO1xuICAgIH1cblxuICAgIC8vIEFwcGx5IGFsbCBjdXN0b20gaGVhZGVyc1xuICAgIGN1c3RvbUhlYWRlcnMudmFsdWVzKCkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7IGhlYWRlcnNba2V5XSA9IHZhbHVlOyB9KTtcblxuICAgIC8vIGZpbGwgcGF0aCBhbmQgcXVlcnkgcGFyYW1ldGVycyBpbiB0aGUgVVJMXG4gICAgY29uc3QgeyB1cmwsIHBheWxvYWQgfSA9IGZpbmFsaXplUmVxdWVzdChlbmRwb2ludCwgZGF0YSk7XG5cbiAgICAvLyBXZWFsdGhzaW1wbGUgZW5kcG9pbnRzIGFyZSBwcm90ZWN0ZWQgYnkgQ2xvdWRmbGFyZS5cbiAgICAvLyBUaGUgY2xvdWRzY3JhcGVyIGxpYnJhcnkgdGFrZXMgY2FyZSBvZiB0aGUgQ2xvdWRmbGFyZSBjaGFsbGVuZ2VzXG4gICAgLy8gd2hpbGUgYWxzbyBleGVjdXRpbmcgb3VyIHJlcXVlc3RcbiAgICBsZXQgcmVzcG9uc2UgPSBudWxsO1xuICAgIGF3YWl0IGNsb3Vkc2NyYXBlcih7XG4gICAgICB1cmwsXG4gICAgICBib2R5OiBwYXlsb2FkLFxuICAgICAgbWV0aG9kOiBlbmRwb2ludC5tZXRob2QsXG4gICAgICBoZWFkZXJzLFxuICAgICAgY2FsbGJhY2s6ICh1bnVzZWQsIHJlcykgPT4ge1xuICAgICAgICAvLyBTYXZlIHRoZSBIVFRQIHJlc3BvbnNlXG4gICAgICAgIHJlc3BvbnNlID0gcmVzO1xuICAgICAgfSxcbiAgICB9KS5jYXRjaCgoKSA9PiB7IH0pO1xuXG4gICAgdHJ5IHtcbiAgICAgIHJlc3BvbnNlLmJvZHkgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmJvZHkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBpdCdzIG5vdCBKU09OLCBidXQgdGhhdCdzIGZpbmUuIFdlIGRvbid0IGRvIGFueXRoaW5nXG4gICAgICAvLyBmb3Igbm93LlxuICAgIH1cblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIC8qXG4gICAqIEZ1bGZpbGwgdGhlIGVuZHBvaW50IHJlcXVlc3QgZ2l2ZW4gdGhlIGVuZHBvaW50IGNvbmZpZ3VyYXRpb24sIG9wdGlvbmFsXG4gICAqIGRhdGEuXG4gICAqL1xuICBhc3luYyBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50LCBkYXRhKSB7XG4gICAgLy8gU3VibWl0IHRoZSBIVFRQIHJlcXVlc3QgdG8gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBTZXJ2ZXJzXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnRhbGsoZW5kcG9pbnQsIGRhdGEpO1xuXG4gICAgaWYgKFtIVFRQX09LLCBIVFRQX0NSRUFURURdLmluY2x1ZGVzKHJlc3BvbnNlLnN0YXR1c0NvZGUpKSB7XG4gICAgICByZXR1cm4gZW5kcG9pbnQub25TdWNjZXNzKHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZW5kcG9pbnQub25GYWlsdXJlKHJlc3BvbnNlKSk7XG4gIH1cblxuICAvKipcbiAgICogT2J0YWluIGEgbmV3IHNldCBvZiBhdXRoZW50aWNhdGlvbiB0b2tlbnMgdXNpbmcgdGhlXG4gICAqIGV4aXN0aW5nIHJlZnJlc2ggdG9rZW4uXG4gICAqXG4gICAqIElmIHdlIGFyZSBnaXZlbiBhIGZ1bmN0aW9uIGZvciByZWZyZXNoLCBjYWxsIHRoYXQgZnVuY3Rpb25cbiAgICogd2l0aCB0aGUgcmVmcmVzaGVkIHRva2Vucy5cbiAgICovXG4gIGFzeW5jIHJlZnJlc2hBdXRoZW50aWNhdGlvbigpIHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUkVGUkVTSCwge1xuICAgICAgcmVmcmVzaF90b2tlbjogdGhpcy50b2tlbnMucmVmcmVzaCxcbiAgICB9KTtcblxuICAgIHRoaXMudG9rZW5zLnN0b3JlKHJlc3BvbnNlLnRva2Vucyk7XG4gICAgLy8gY2FsbCB0aGUgaGFuZGxlciBmb3IgdGhpcyBldmVudCBpZiB3ZSBoYXZlIG9uZVxuICAgIGlmICh0eXBlb2YgKHRoaXMuZXZlbnRzLnJlZnJlc2gpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhd2FpdCB0aGlzLmV2ZW50cy5yZWZyZXNoKHRoaXMudG9rZW5zKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgZXhpc3Rpbmcgc2V0IG9mIHRva2VucyBoYXZlIGV4cGlyZWQsIGF1dG9tYXRpY2FsbHlcbiAgICogdHJpZ2dlcmluZyBhIHJlZnJlc2ggaWYgdGhleSBoYXZlIGV4cGlyZWQuXG4gICAqXG4gICAqIElmIHdlIGFyZSBnaXZlbiBhIGZ1bmN0aW9uIGZvciByZWZyZXNoLCBjYWxsIHRoYXQgZnVuY3Rpb25cbiAgICogd2l0aCB0aGUgcmVmcmVzaGVkIHRva2Vucy5cbiAgICovXG4gIGFzeW5jIGltcGxpY2l0VG9rZW5SZWZyZXNoKCkge1xuICAgIGlmICh0aGlzLnRva2Vucy5leHBpcmVkKCkpIHtcbiAgICAgIGlmICh0aGlzLnRva2Vucy5yZWZyZXNoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gTGV0J3MgaW1wbGljaXRseSByZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4gdXNpbmcgdGhlIHJlZnJlc2ggdG9rZW4uXG4gICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoQXV0aGVudGljYXRpb24oKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBUaGUgcmVmcmVzaCB0b2tlbiBpcyBub3QgdmFsaWQuXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gcmVmcmVzaCBleHBpcmVkIHRva2VuOiAke2Vycm9yfWApO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gYW5kIGNhbGwgdGhlIGhhbmRsZXIgZm9yIHRoaXMgZXZlbnQgaWYgd2UgaGF2ZSBvbmVcbiAgICAgICAgICBpZiAodHlwZW9mICh0aGlzLmV2ZW50cy5yZWZyZXNoKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ldmVudHMucmVmcmVzaCh0aGlzLnRva2VucylcbiAgICAgICAgICB9IFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIHdoYXQgc2hvdWxkIHdlIGRvIGhlcmU/XG4gICAgICAgICAgLy8gdGhpcyBpcyBub3QgYSBzaG93IHN0b3BwZXIgYnV0IHRoZSB1c2VyXG4gICAgICAgICAgLy8gc2hvdWxkIGtub3cgdGhpcyBoYXBwZW5lZFxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVHJvdWJsZSBpbiBjYWxsIHRvIHJlZnJlc2ggaGFuZGxlcjogJHtlcnJvcn1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2UgYXJlIGZvcmNlZCB0byByZWplY3QgYXMgb3VyIGFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZCBhbmQgd2VcbiAgICAgICAgLy8gZG8gbm90IGhhdmUgYSByZWZyZXNoIHRva2VuLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjY2VzcyB0b2tlbiBleHBpcmVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEh0dHBzV29ya2VyO1xuIiwiaW1wb3J0IGVuZHBvaW50cyBmcm9tICcuL2FwaS9lbmRwb2ludHMnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuL2NvcmUvdGlja2VyJztcblxuLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIG9yZGVycyByZXRyaWV2ZWQgYnkgdGhlIC9vcmRlcnMgQVBJLlxuY29uc3QgT1JERVJTX1BFUl9QQUdFID0gMjA7XG5cbmNvbnN0IGlzQ2FuYWRpYW5TZWN1cml0eSA9IChleGNoYW5nZSkgPT4gWydUU1gnLCAnVFNYLVYnXS5pbmNsdWRlcyhleGNoYW5nZSk7XG5cbi8qXG4gKiBSZXRyaWV2ZSBmaWx0ZXJlZCBvcmRlcnMgYnkgdGlja2VyIGFuZCBzdGF0dXMuXG4gKi9cbmZ1bmN0aW9uIGZpbHRlcmVkT3JkZXJzKGxpc3QsIHRpY2tlciwgc3RhdHVzKSB7XG4gIGNvbnN0IG9yZGVyRmlsdGVyID0gKG9yZGVyKSA9PiB7XG4gICAgaWYgKHRpY2tlcikge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IFRpY2tlcih7IHN5bWJvbDogb3JkZXIuc3ltYm9sLCBpZDogb3JkZXIuc2VjdXJpdHlfaWQgfSk7XG4gICAgICAvLyBvcmRlciBvYmplY3RzIGRvbid0IGluY2x1ZGUgZXhjaGFuZ2VzLCBzbyB3ZSBhcmUgdW5hYmxlIHRvIG1ha2VcbiAgICAgIC8vIGEgc3Ryb25nIGNvbXBhcmlzb24gd2l0aG91dCByZXF1aXJpbmcgYSBsaW5lYXIgaW5jcmVhc2Ugb2ZcbiAgICAgIC8vIGVuZHBvaW50IGNhbGxzICh3aGljaCBpcyBub3QgcmVhc29uYWJsZSkuXG4gICAgICAvL1xuICAgICAgLy8gVGhlIHVzZXIgc2hvdWxkIHByb3ZpZGUgdGhlIHNlY3VyaXR5IGlkIGZvciBhIHN0cm9uZyBjb21wYXJpc29uIGhlcmUuXG4gICAgICBpZiAoIW5ldyBUaWNrZXIodGlja2VyKS53ZWFrRXF1YWxzKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvcmRlci5zdGF0dXMgPT09IHN0YXR1cztcbiAgfTtcblxuICAvLyBBcHBseSBmaWx0ZXIgdG8gdGhlIHJlc3VsdFxuICBjb25zdCBmaWx0ZXJlZCA9IGxpc3Qub3JkZXJzLmZpbHRlcihvcmRlckZpbHRlcik7XG5cbiAgcmV0dXJuIHtcbiAgICBvcmRlcnM6IGZpbHRlcmVkLFxuICAgIHRvdGFsOiBmaWx0ZXJlZC5sZW5ndGgsXG4gIH07XG59XG5cbmNsYXNzIE9yZGVycyB7XG4gIC8qKlxuICAgKiBDcmVhdGV3IGEgbmV3IE9yZGVySGlzdG9yeSBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIGFuIEh0dHBzIHdvcmtlciBzdGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBodHRwc1dvcmtlclxuICAgKi9cbiAgY29uc3RydWN0b3IoaHR0cHNXb3JrZXIsIGRhdGEpIHtcbiAgICB0aGlzLndvcmtlciA9IGh0dHBzV29ya2VyO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gIH1cblxuICAvKipcbiAgICogQ29sbGVjdHMgb3JkZXJzIChmaWxsZWQsIHBlbmRpbmcsIGNhbmNlbGxlZCkgZm9yIHRoZSBwcm92aWRlZCBwYWdlIGFuZFxuICAgKiBhY2NvdW50IGlkLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSBwYWdlTnVtIFRoZSBvcmRlcnMgcGFnZSBpbmRleCB0byBzZWVrIHRvXG4gICAqL1xuICBhc3luYyBwYWdlKGFjY291bnRJZCwgcGFnZU51bSkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5PUkRFUlNfQllfUEFHRSwge1xuICAgICAgb2Zmc2V0OiAocGFnZU51bSAtIDEpICogT1JERVJTX1BFUl9QQUdFLFxuICAgICAgYWNjb3VudElkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbGxlY3RzIGFsbCBvcmRlcnMgKGZpbGxlZCwgcGVuZGluZywgY2FuY2VsbGVkKSBmb3IgdGhlIHNwZWNpZmljIGFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgYWxsKGFjY291bnRJZCkge1xuICAgIC8vIFdlIHN0YXJ0IGJ5IGNhcHR1cmluZyB0aGUgZmlyc3QgcGFnZSBvZiBvcmRlcnMgaW4gb3JkZXIgdG9cbiAgICAvLyBkZXRlcm1pbmUgdGhlIG51bWJlciBvZiBwYWdlcyBhdmFpbGFibGVcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5wYWdlKGFjY291bnRJZCwgMSk7XG4gICAgY29uc3QgcGFnZXMgPSBNYXRoLmNlaWwoZGF0YS50b3RhbCAvIE9SREVSU19QRVJfUEFHRSk7XG5cbiAgICBpZiAocGFnZXMgPiAxKSB7XG4gICAgICBjb25zdCB0YXNrcyA9IFtdO1xuXG4gICAgICAvLyBCdWlsZCB0aGUgdGFzayBxdWV1ZSB0aGF0IHdpbGwgcmV0cmlldmUgdGhlIHJlbWFpbmluZyBwYWdlcyBvZiBvcmRlcnNcbiAgICAgIGZvciAobGV0IHBhZ2VOdW0gPSAyOyBwYWdlTnVtIDw9IHBhZ2VzOyBwYWdlTnVtKyspIHtcbiAgICAgICAgdGFza3MucHVzaCh0aGlzLnBhZ2UoYWNjb3VudElkLCBwYWdlTnVtKS50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5vcmRlcnMpKTtcbiAgICAgIH1cblxuICAgICAgLy8gT3V0LW9mLW9yZGVyIGludm9jYXRpb24gaXMgZGVzaXJlZC4gV2hhdCBtYXR0ZXJzIGlzIHRoYXQgUHJvbWlzZS5hbGwgd2lsbFxuICAgICAgLy8gZ3VhcmFudGVlIHRoYXQgdGhlIGRhdGEgb3JkZXIgaXMgcHJlc2VydmVkLlxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5hbGwodGFza3MpO1xuICAgICAgcmVzdWx0LmZvckVhY2goKGxpc3QpID0+IGRhdGEub3JkZXJzLnB1c2goLi4ubGlzdCkpO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHRvdGFsIGF0dHJpYnV0ZSB0byByZWZsZWN0IHRoZSBuZXcgc2l6ZVxuICAgICAgZGF0YS50b3RhbCA9IGRhdGEub3JkZXJzLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgcGVuZGluZyBvcmRlcnMgZm9yIHRoZSBzcGVjaWZpZWQgc2VjdXJpdHkgaW4gdGhlIGFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKiBAcGFyYW0geyp9IHRpY2tlciAob3B0aW9uYWwpIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICovXG4gIGFzeW5jIHBlbmRpbmcoYWNjb3VudElkLCB0aWNrZXIpIHtcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCB0aGlzLmFsbChhY2NvdW50SWQpO1xuICAgIHJldHVybiBmaWx0ZXJlZE9yZGVycyhvcmRlcnMsIHRpY2tlciwgJ3N1Ym1pdHRlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBmaWxsZWQgb3JkZXJzIGZvciB0aGUgc3BlY2lmaWVkIHNlY3VyaXR5IGluIHRoZSBhY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgKG9wdGlvbmFsKSBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqL1xuICBhc3luYyBmaWxsZWQoYWNjb3VudElkLCB0aWNrZXIpIHtcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCB0aGlzLmFsbChhY2NvdW50SWQpO1xuICAgIHJldHVybiBmaWx0ZXJlZE9yZGVycyhvcmRlcnMsIHRpY2tlciwgJ3Bvc3RlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBjYW5jZWxsZWQgb3JkZXJzIGZvciB0aGUgc3BlY2lmaWVkIHNlY3VyaXR5IGluIHRoZSBhY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgKG9wdGlvbmFsKSBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqL1xuICBhc3luYyBjYW5jZWxsZWQoYWNjb3VudElkLCB0aWNrZXIpIHtcbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCB0aGlzLmFsbChhY2NvdW50SWQpO1xuICAgIHJldHVybiBmaWx0ZXJlZE9yZGVycyhvcmRlcnMsIHRpY2tlciwgJ2NhbmNlbGxlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgdGhlIHBlbmRpbmcgb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBvcmRlciBpZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBvcmRlcklkIFRoZSBwZW5kaW5nIG9yZGVyIHRvIGNhbmNlbFxuICAgKi9cbiAgYXN5bmMgY2FuY2VsKG9yZGVySWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb3JkZXI6IG9yZGVySWQsXG4gICAgICByZXNwb25zZTogYXdhaXQgdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuQ0FOQ0VMX09SREVSLCB7IG9yZGVySWQgfSksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIGFsbCBwZW5kaW5nIG9yZGVycyB1bmRlciB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIEFjY291bnQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgYXN5bmMgY2FuY2VsUGVuZGluZyhhY2NvdW50SWQpIHtcbiAgICBjb25zdCBwZW5kaW5nID0gYXdhaXQgdGhpcy5wZW5kaW5nKGFjY291bnRJZCk7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHBlbmRpbmcub3JkZXJzLm1hcChhc3luYyAob3JkZXIpID0+IHRoaXMuY2FuY2VsKG9yZGVyLm9yZGVyX2lkKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcmtldCBidXkgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgYXN5bmMgbWFya2V0QnV5KGFjY291bnRJZCwgdGlja2VyLCBxdWFudGl0eSkge1xuICAgIGNvbnN0IGRldGFpbHMgPSBhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyLCB0cnVlKTtcblxuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IGRldGFpbHMuaWQsXG4gICAgICBsaW1pdF9wcmljZTogIShuZXcgVGlja2VyKHRpY2tlcikuY3J5cHRvKSA/IGRldGFpbHMucXVvdGUuYW1vdW50IDogdW5kZWZpbmVkLFxuICAgICAgcXVhbnRpdHksXG4gICAgICBvcmRlcl90eXBlOiAnYnV5X3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnbWFya2V0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExpbWl0IGJ1eSBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gbGltaXQgVGhlIG1heGltdW0gcHJpY2UgdG8gcHVyY2hhc2UgdGhlIHNlY3VyaXR5IGF0XG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHB1cmNoYXNlXG4gICAqL1xuICBhc3luYyBsaW1pdEJ1eShhY2NvdW50SWQsIHRpY2tlciwgbGltaXQsIHF1YW50aXR5KSB7XG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgICBzZWN1cml0eV9pZDogKGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpKS5pZCxcbiAgICAgIGxpbWl0X3ByaWNlOiBsaW1pdCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ2J1eV9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ2xpbWl0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgbGltaXQgYnV5IGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBzdG9wIFRoZSBwcmljZSBhdCB3aGljaCB0aGUgb3JkZXIgY29udmVydHMgdG8gYSBsaW1pdCBvcmRlclxuICAgKiBAcGFyYW0geyp9IGxpbWl0IFRoZSBtYXhpbXVtIHByaWNlIHRvIHB1cmNoYXNlIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgYXN5bmMgc3RvcExpbWl0QnV5KGFjY291bnRJZCwgdGlja2VyLCBzdG9wLCBsaW1pdCwgcXVhbnRpdHkpIHtcbiAgICBjb25zdCBzZWN1cml0eSA9IGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpO1xuXG4gICAgLy8gVGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBiYWNrZW5kIGRvZXNuJ3QgY2hlY2sgZm9yIHRoaXMsIGV2ZW4gdGhvdWdoIHRoZSBhcHAgZG9lcy4uXG4gICAgaWYgKGlzQ2FuYWRpYW5TZWN1cml0eShzZWN1cml0eS5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlKSAmJiBzdG9wICE9PSBsaW1pdCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUU1gvVFNYLVYgc2VjdXJpdGllcyBtdXN0IGhhdmUgYW4gZXF1aXZhbGVudCBzdG9wIGFuZCBsaW1pdCBwcmljZS4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53b3JrZXIuaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUExBQ0VfT1JERVIsIHtcbiAgICAgIHNlY3VyaXR5X2lkOiBzZWN1cml0eS5pZCxcbiAgICAgIHN0b3BfcHJpY2U6IHN0b3AsXG4gICAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdidXlfcXVhbnRpdHknLFxuICAgICAgb3JkZXJfc3ViX3R5cGU6ICdzdG9wX2xpbWl0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcmtldCBzZWxsIGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gcHVyY2hhc2VcbiAgICovXG4gIGFzeW5jIG1hcmtldFNlbGwoYWNjb3VudElkLCB0aWNrZXIsIHF1YW50aXR5KSB7XG4gICAgY29uc3QgZGV0YWlscyA9IGF3YWl0IHRoaXMuZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIsIHRydWUpO1xuXG4gICAgcmV0dXJuIHRoaXMud29ya2VyLmhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgICBzZWN1cml0eV9pZDogZGV0YWlscy5pZCxcbiAgICAgIG1hcmtldF92YWx1ZTogIShuZXcgVGlja2VyKHRpY2tlcikuY3J5cHRvKSA/IGRldGFpbHMucXVvdGUuYW1vdW50IDogdW5kZWZpbmVkLFxuICAgICAgcXVhbnRpdHksXG4gICAgICBvcmRlcl90eXBlOiAnc2VsbF9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ21hcmtldCcsXG4gICAgICB0aW1lX2luX2ZvcmNlOiAnZGF5JyxcbiAgICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW1pdCBzZWxsIGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBsaW1pdCBUaGUgbWluaW11bSBwcmljZSB0byBzZWxsIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBzZWxsXG4gICAqL1xuICBhc3luYyBsaW1pdFNlbGwoYWNjb3VudElkLCB0aWNrZXIsIGxpbWl0LCBxdWFudGl0eSkge1xuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IChhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyKSkuaWQsXG4gICAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgICBxdWFudGl0eSxcbiAgICAgIG9yZGVyX3R5cGU6ICdzZWxsX3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnbGltaXQnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBsaW1pdCBzZWxsIGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBzdG9wIFRoZSBwcmljZSBhdCB3aGljaCB0aGUgb3JkZXIgY29udmVydHMgdG8gYSBsaW1pdCBvcmRlclxuICAgKiBAcGFyYW0geyp9IGxpbWl0IFRoZSBtaW5pbXVtIHByaWNlIHRvIHNlbGwgdGhlIHNlY3VyaXR5IGF0XG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHNlbGxcbiAgICovXG4gIGFzeW5jIHN0b3BMaW1pdFNlbGwoYWNjb3VudElkLCB0aWNrZXIsIHN0b3AsIGxpbWl0LCBxdWFudGl0eSkge1xuICAgIGNvbnN0IHNlY3VyaXR5ID0gYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlcik7XG5cbiAgICAvLyBUaGUgV2VhbHRoc2ltcGxlIFRyYWRlIGJhY2tlbmQgZG9lc24ndCBjaGVjayBmb3IgdGhpcywgZXZlbiB0aG91Z2ggdGhlIGFwcCBkb2VzLi5cbiAgICBpZiAoaXNDYW5hZGlhblNlY3VyaXR5KHNlY3VyaXR5LnN0b2NrLnByaW1hcnlfZXhjaGFuZ2UpICYmIHN0b3AgIT09IGxpbWl0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RTWC9UU1gtViBzZWN1cml0aWVzIG11c3QgaGF2ZSBhbiBlcXVpdmFsZW50IHN0b3AgYW5kIGxpbWl0IHByaWNlLicpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IHNlY3VyaXR5LmlkLFxuICAgICAgc3RvcF9wcmljZTogc3RvcCxcbiAgICAgIGxpbWl0X3ByaWNlOiBsaW1pdCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ3NlbGxfcXVhbnRpdHknLFxuICAgICAgb3JkZXJfc3ViX3R5cGU6ICdzdG9wX2xpbWl0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE9yZGVycztcbiIsIi8qKlxuICogVGhlIGRlZmF1bHQgcHJvdmlkZXIgZm9yIHF1b3RlcyBpcyBXZWFsdGhzaW1wbGUgVHJhZGUuXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgKGRhdGEpID0+ICh7XG5cbiAgLyoqXG4gICAgICogUXVvdGUgZm9yIGEgdGlja2VyIGZyb20gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBlbmRwb2ludC5cbiAgICAgKlxuICAgICAqIFJlbWVtYmVyIHRoYXQgdGhpcyBxdW90ZSBpcyBOT1QgcmVhbC10aW1lIVxuICAgICAqL1xuICBhc3luYyBxdW90ZSh0aWNrZXIpIHtcbiAgICBjb25zdCBpbmZvID0gYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIsIHRydWUpO1xuICAgIHJldHVybiBpbmZvLnF1b3RlLmFtb3VudDtcbiAgfSxcbn0pO1xuIiwiaW1wb3J0IFRyYWRlUXVvdGVzIGZyb20gJy4vZGVmYXVsdCc7XG5pbXBvcnQgVGlja2VyIGZyb20gJy4uL2NvcmUvdGlja2VyJztcbmltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi4vYXBpL2VuZHBvaW50cyc7XG5cbmNsYXNzIFF1b3RlcyB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IFF1b3RlcyBvYmplY3QgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiBIVFRQUyBXb3JrZXIgc3RhdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gaHR0cHNXb3JrZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKGh0dHBzV29ya2VyLCBkYXRhKSB7XG4gICAgLy8gV2VhbHRoc2ltcGxlIFRyYWRlIGlzIG91ciBkZWZhdWx0IHNvdXJjZSBmb3IgcXVvdGVzLCBkZXNwaXRlXG4gICAgLy8gaGF2aW5nIGEgMTUgbWluIGRlbGF5XG4gICAgdGhpcy5kZWZhdWx0UHJvdmlkZXIgPSBuZXcgVHJhZGVRdW90ZXMoZGF0YSk7XG5cbiAgICAvLyBNYWludGFpbnMgcXVvdGUgcHJvdmlkZXJzIG9uIGFuIGV4Y2hhbmdlIGJhc2lzXG4gICAgdGhpcy5wcm92aWRlcnMgPSB7fTtcblxuICAgIHRoaXMud29ya2VyID0gaHR0cHNXb3JrZXI7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIExvYWQgYSBjdXN0b20gcHJvdmlkZXIgZm9yIHRoZSBleGNoYW5nZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gZXhjaGFuZ2UgVGhlIGV4Y2hhbmdlIHRoYXQgdGhlIHByb3ZpZGVyIGZldGNoZXMgcXVvdGVzIGZvclxuICAgICAqIEBwYXJhbSB7Kn0gcHJvdmlkZXIgVGhlIHByb3ZpZGVyIG9iamVjdCBjb250YWluaW5nIHRoZSBxdW90ZSgpIGltcGxlbWVudGF0aW9uLlxuICAgICAqL1xuICB1c2UoZXhjaGFuZ2UsIHByb3ZpZGVyKSB7XG4gICAgaWYgKHR5cGVvZiAocHJvdmlkZXIucXVvdGUpICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBUaGUgcHJvdmlkZXIgbXVzdCBoYXZlIGEgcXVvdGUoKSBpbXBsZW1lbnRhdGlvbiB0aGF0IHdlIGNhbiBjYWxsIGxhdGVyIVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHF1b3RlIHByb3ZpZGVyIGZvciAke2V4Y2hhbmdlfSFgKTtcbiAgICB9XG5cbiAgICB0aGlzLnByb3ZpZGVyc1tleGNoYW5nZV0gPSBwcm92aWRlcjtcbiAgfVxuXG4gIC8qKlxuICAgICAqIE9idGFpbnMgYSBxdW90ZSBmb3IgdGhlIHRpY2tlci4gVGhlIHNvdXJjZSBvZiB0aGUgcXVvdGUgbWF5IGJlIGEgY3VzdG9tXG4gICAgICogcHJvdmlkZXIgaWYgYSB2YWxpZCBwcm92aWRlciBpcyByZWdpc3RlcmVkIGZvciB0aGUgZXhjaGFuZ2UgdGhhdCB0aGVcbiAgICAgKiB0aWNrZXIgdHJhZGVzIG9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBzZWN1cml0eSBUaGUgc2VjdXJpdHkgdG8gZ2V0IGEgcXVvdGUgZm9yLlxuICAgICAqL1xuICBhc3luYyBnZXQoc2VjdXJpdHkpIHtcbiAgICBsZXQgZXhjaGFuZ2UgPSBudWxsO1xuICAgIGNvbnN0IHRpY2tlciA9IG5ldyBUaWNrZXIoc2VjdXJpdHkpO1xuXG4gICAgaWYgKHRpY2tlci5leGNoYW5nZSkge1xuICAgICAgLy8gV2UgbmVlZCB0aGUgZXhjaGFuZ2UgaW4gdGhlIG5leHQgc3RlcCBpZiB0aGUgdXNlciBoYXMgc3BlY2lmaWVkXG4gICAgICAvLyBhIGN1c3RvbSBwcm92aWRlciBmb3IgYW4gZXhjaGFuZ2UuIFNvIGlmIHRoZSB1c2VyIGhhc24ndCBwcm92aWRlZFxuICAgICAgLy8gaXQsIHdlIHdpbGwgaGF2ZSB0byBwaW5nIFdlYWx0aHNpbXBsZSB0cmFkZSB0byBnZXQgaXQuXG4gICAgICBleGNoYW5nZSA9IHRpY2tlci5leGNoYW5nZTtcbiAgICB9IGVsc2UgaWYgKHRpY2tlci5jcnlwdG8gJiYgdGlja2VyLmlkKSB7XG4gICAgICAvLyBJZiB0aGUgaWQgaXMgb25seSBnaXZlbiBidXQgd2Uga25vdyBpdCdzIGEgY3J5cHRvIGlkLFxuICAgICAgLy8gd2Ugd2lsbCBhdXRvbWF0aWNhbGx5IHNldCBleGNoYW5nZSB0byAnQ0MnLlxuICAgICAgZXhjaGFuZ2UgPSAnQ0MnO1xuICAgIH0gZWxzZSBpZiAoT2JqZWN0LmtleXModGhpcy5wcm92aWRlcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0aGlzLmRhdGEuZ2V0U2VjdXJpdHkodGlja2VyLCBmYWxzZSk7XG4gICAgICBleGNoYW5nZSA9IGluZm8uc3RvY2sucHJpbWFyeV9leGNoYW5nZTtcbiAgICB9XG5cbiAgICAvLyBBIGN1c3RvbSBwcm92aWRlciB3aWxsIHRha2UgcHJlY2VkZW5jZSBvdmVyIHRoZSBkZWZhdWx0IHNvdXJjZVxuICAgIGlmIChleGNoYW5nZSBpbiB0aGlzLnByb3ZpZGVycykge1xuICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzW2V4Y2hhbmdlXS5xdW90ZSh0aWNrZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRlZmF1bHRQcm92aWRlci5xdW90ZSh0aWNrZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgaGlzdG9yaWNhbCBxdW90ZXMgd2l0aGluIGEgc3BlY2lmaWVkIGludGVydmFsIGZvciB0aGUgdGlja2VyLlxuICAgKiBUaGUgc291cmNlIG9mIHRoZSBoaXN0b3JpY2FsIGRhdGEgaXMgbm90IGN1c3RvbWl6YWJsZSBhdCB0aGlzIHRpbWUgYmVjYXVzZVxuICAgKiB0aGVyZSBpcyBubyBuZWVkIGZvciBpdCB0byBiZSBzby5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHRpY2tlciB0byBzZWFyY2ggaGlzdG9yaWNhbCBxdW90ZXMgZm9yXG4gICAqIEBwYXJhbSB7Kn0gaW50ZXJ2YWwgVGhlIHRpbWUgcmFuZ2Ugb2YgdGhlIHF1b3Rlc1xuICAgKi9cbiAgYXN5bmMgaGlzdG9yeShzZWN1cml0eSwgaW50ZXJ2YWwpIHtcbiAgICAvLyB2YWxpZGF0ZSB0aGUgdXNlci1naXZlbiBzZWN1cml0eVxuICAgIGNvbnN0IHRpY2tlciA9IG5ldyBUaWNrZXIoc2VjdXJpdHkpO1xuICAgIGlmICghdGlja2VyLmlkKSB7XG4gICAgICB0aWNrZXIuaWQgPSAoYXdhaXQgdGhpcy5kYXRhLmdldFNlY3VyaXR5KHRpY2tlcikpLmlkO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndvcmtlci5oYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5RVU9URVNfSElTVE9SWSwgeyBpZDogdGlja2VyLmlkLCBpbnRlcnZhbCB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBRdW90ZXM7XG4iLCIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbnZhciBydW50aW1lID0gKGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBPcCA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBoYXNPd24gPSBPcC5oYXNPd25Qcm9wZXJ0eTtcbiAgdmFyIHVuZGVmaW5lZDsgLy8gTW9yZSBjb21wcmVzc2libGUgdGhhbiB2b2lkIDAuXG4gIHZhciAkU3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiID8gU3ltYm9sIDoge307XG4gIHZhciBpdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuaXRlcmF0b3IgfHwgXCJAQGl0ZXJhdG9yXCI7XG4gIHZhciBhc3luY0l0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCI7XG4gIHZhciB0b1N0cmluZ1RhZ1N5bWJvbCA9ICRTeW1ib2wudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG5cbiAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLlxuICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yO1xuICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKHByb3RvR2VuZXJhdG9yLnByb3RvdHlwZSk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0cnlMb2NzTGlzdCB8fCBbXSk7XG5cbiAgICAvLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLlxuICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblxuICAgIHJldHVybiBnZW5lcmF0b3I7XG4gIH1cbiAgZXhwb3J0cy53cmFwID0gd3JhcDtcblxuICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb25cbiAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkXG4gIC8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZVxuICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWRcbiAgLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZ1xuICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZVxuICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGVcbiAgLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaFxuICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuXG4gIGZ1bmN0aW9uIHRyeUNhdGNoKGZuLCBvYmosIGFyZykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogZXJyIH07XG4gICAgfVxuICB9XG5cbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkID0gXCJzdXNwZW5kZWRZaWVsZFwiO1xuICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSBcImV4ZWN1dGluZ1wiO1xuICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xuXG4gIC8vIFJldHVybmluZyB0aGlzIG9iamVjdCBmcm9tIHRoZSBpbm5lckZuIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXNcbiAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LlxuICB2YXIgQ29udGludWVTZW50aW5lbCA9IHt9O1xuXG4gIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZFxuICAvLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0cy4gRm9yIGZ1bGwgc3BlYyBjb21wbGlhbmNlLCB5b3UgbWF5IHdpc2ggdG8gY29uZmlndXJlIHlvdXJcbiAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9XG5cbiAgLy8gVGhpcyBpcyBhIHBvbHlmaWxsIGZvciAlSXRlcmF0b3JQcm90b3R5cGUlIGZvciBlbnZpcm9ubWVudHMgdGhhdFxuICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LlxuICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcbiAgSXRlcmF0b3JQcm90b3R5cGVbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIHZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbiAgdmFyIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlID0gZ2V0UHJvdG8gJiYgZ2V0UHJvdG8oZ2V0UHJvdG8odmFsdWVzKFtdKSkpO1xuICBpZiAoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgJiZcbiAgICAgIE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICE9PSBPcCAmJlxuICAgICAgaGFzT3duLmNhbGwoTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUsIGl0ZXJhdG9yU3ltYm9sKSkge1xuICAgIC8vIFRoaXMgZW52aXJvbm1lbnQgaGFzIGEgbmF0aXZlICVJdGVyYXRvclByb3RvdHlwZSU7IHVzZSBpdCBpbnN0ZWFkXG4gICAgLy8gb2YgdGhlIHBvbHlmaWxsLlxuICAgIEl0ZXJhdG9yUHJvdG90eXBlID0gTmF0aXZlSXRlcmF0b3JQcm90b3R5cGU7XG4gIH1cblxuICB2YXIgR3AgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPVxuICAgIEdlbmVyYXRvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEl0ZXJhdG9yUHJvdG90eXBlKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24ucHJvdG90eXBlID0gR3AuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUuY29uc3RydWN0b3IgPSBHZW5lcmF0b3JGdW5jdGlvbjtcbiAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGVbdG9TdHJpbmdUYWdTeW1ib2xdID1cbiAgICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IFwiR2VuZXJhdG9yRnVuY3Rpb25cIjtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBwcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24gPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICB2YXIgY3RvciA9IHR5cGVvZiBnZW5GdW4gPT09IFwiZnVuY3Rpb25cIiAmJiBnZW5GdW4uY29uc3RydWN0b3I7XG4gICAgcmV0dXJuIGN0b3JcbiAgICAgID8gY3RvciA9PT0gR2VuZXJhdG9yRnVuY3Rpb24gfHxcbiAgICAgICAgLy8gRm9yIHRoZSBuYXRpdmUgR2VuZXJhdG9yRnVuY3Rpb24gY29uc3RydWN0b3IsIHRoZSBiZXN0IHdlIGNhblxuICAgICAgICAvLyBkbyBpcyB0byBjaGVjayBpdHMgLm5hbWUgcHJvcGVydHkuXG4gICAgICAgIChjdG9yLmRpc3BsYXlOYW1lIHx8IGN0b3IubmFtZSkgPT09IFwiR2VuZXJhdG9yRnVuY3Rpb25cIlxuICAgICAgOiBmYWxzZTtcbiAgfTtcblxuICBleHBvcnRzLm1hcmsgPSBmdW5jdGlvbihnZW5GdW4pIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoZ2VuRnVuLCBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdlbkZ1bi5fX3Byb3RvX18gPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgICAgIGlmICghKHRvU3RyaW5nVGFnU3ltYm9sIGluIGdlbkZ1bikpIHtcbiAgICAgICAgZ2VuRnVuW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yRnVuY3Rpb25cIjtcbiAgICAgIH1cbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcbiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC5cbiAgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yLCBQcm9taXNlSW1wbCkge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAvLyBJZiBhIHJlamVjdGVkIFByb21pc2Ugd2FzIHlpZWxkZWQsIHRocm93IHRoZSByZWplY3Rpb24gYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgaGFuZGxlZCB0aGVyZS5cbiAgICAgICAgICByZXR1cm4gaW52b2tlKFwidGhyb3dcIiwgZXJyb3IsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlSW1wbChmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG4gIEFzeW5jSXRlcmF0b3IucHJvdG90eXBlW2FzeW5jSXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuICBleHBvcnRzLkFzeW5jSXRlcmF0b3IgPSBBc3luY0l0ZXJhdG9yO1xuXG4gIC8vIE5vdGUgdGhhdCBzaW1wbGUgYXN5bmMgZnVuY3Rpb25zIGFyZSBpbXBsZW1lbnRlZCBvbiB0b3Agb2ZcbiAgLy8gQXN5bmNJdGVyYXRvciBvYmplY3RzOyB0aGV5IGp1c3QgcmV0dXJuIGEgUHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9mXG4gIC8vIHRoZSBmaW5hbCByZXN1bHQgcHJvZHVjZWQgYnkgdGhlIGl0ZXJhdG9yLlxuICBleHBvcnRzLmFzeW5jID0gZnVuY3Rpb24oaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QsIFByb21pc2VJbXBsKSB7XG4gICAgaWYgKFByb21pc2VJbXBsID09PSB2b2lkIDApIFByb21pc2VJbXBsID0gUHJvbWlzZTtcblxuICAgIHZhciBpdGVyID0gbmV3IEFzeW5jSXRlcmF0b3IoXG4gICAgICB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSxcbiAgICAgIFByb21pc2VJbXBsXG4gICAgKTtcblxuICAgIHJldHVybiBleHBvcnRzLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbilcbiAgICAgID8gaXRlciAvLyBJZiBvdXRlckZuIGlzIGEgZ2VuZXJhdG9yLCByZXR1cm4gdGhlIGZ1bGwgaXRlcmF0b3IuXG4gICAgICA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7XG4gICAgICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkge1xuICAgIHZhciBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlRXhlY3V0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVDb21wbGV0ZWQpIHtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzpcbiAgICAgICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZVxuICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIGNvbnRleHQuYXJnID0gYXJnO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlO1xuICAgICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcbiAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkge1xuICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBjb250ZXh0LmFyZyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZSA9IEdlblN0YXRlRXhlY3V0aW5nO1xuXG4gICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PVxuICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi5cbiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZVxuICAgICAgICAgICAgPyBHZW5TdGF0ZUNvbXBsZXRlZFxuICAgICAgICAgICAgOiBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuXG4gICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcbiAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlXG4gIC8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGVcbiAgLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsXG4gIC8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLlxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtcbiAgICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvd1xuICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAvLyBOb3RlOiBbXCJyZXR1cm5cIl0gbXVzdCBiZSB1c2VkIGZvciBFUzMgcGFyc2luZyBjb21wYXRpYmlsaXR5LlxuICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3JbXCJyZXR1cm5cIl0pIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIGEgcmV0dXJuIG1ldGhvZCwgZ2l2ZSBpdCBhXG4gICAgICAgICAgLy8gY2hhbmNlIHRvIGNsZWFuIHVwLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcblxuICAgICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAvLyBJZiBtYXliZUludm9rZURlbGVnYXRlKGNvbnRleHQpIGNoYW5nZWQgY29udGV4dC5tZXRob2QgZnJvbVxuICAgICAgICAgICAgLy8gXCJyZXR1cm5cIiB0byBcInRocm93XCIsIGxldCB0aGF0IG92ZXJyaWRlIHRoZSBUeXBlRXJyb3IgYmVsb3cuXG4gICAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgIFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKG1ldGhvZCwgZGVsZWdhdGUuaXRlcmF0b3IsIGNvbnRleHQuYXJnKTtcblxuICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgdmFyIGluZm8gPSByZWNvcmQuYXJnO1xuXG4gICAgaWYgKCEgaW5mbykge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXCJpdGVyYXRvciByZXN1bHQgaXMgbm90IGFuIG9iamVjdFwiKTtcbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuXG4gICAgaWYgKGluZm8uZG9uZSkge1xuICAgICAgLy8gQXNzaWduIHRoZSByZXN1bHQgb2YgdGhlIGZpbmlzaGVkIGRlbGVnYXRlIHRvIHRoZSB0ZW1wb3JhcnlcbiAgICAgIC8vIHZhcmlhYmxlIHNwZWNpZmllZCBieSBkZWxlZ2F0ZS5yZXN1bHROYW1lIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0W2RlbGVnYXRlLnJlc3VsdE5hbWVdID0gaW5mby52YWx1ZTtcblxuICAgICAgLy8gUmVzdW1lIGV4ZWN1dGlvbiBhdCB0aGUgZGVzaXJlZCBsb2NhdGlvbiAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dC5uZXh0ID0gZGVsZWdhdGUubmV4dExvYztcblxuICAgICAgLy8gSWYgY29udGV4dC5tZXRob2Qgd2FzIFwidGhyb3dcIiBidXQgdGhlIGRlbGVnYXRlIGhhbmRsZWQgdGhlXG4gICAgICAvLyBleGNlcHRpb24sIGxldCB0aGUgb3V0ZXIgZ2VuZXJhdG9yIHByb2NlZWQgbm9ybWFsbHkuIElmXG4gICAgICAvLyBjb250ZXh0Lm1ldGhvZCB3YXMgXCJuZXh0XCIsIGZvcmdldCBjb250ZXh0LmFyZyBzaW5jZSBpdCBoYXMgYmVlblxuICAgICAgLy8gXCJjb25zdW1lZFwiIGJ5IHRoZSBkZWxlZ2F0ZSBpdGVyYXRvci4gSWYgY29udGV4dC5tZXRob2Qgd2FzXG4gICAgICAvLyBcInJldHVyblwiLCBhbGxvdyB0aGUgb3JpZ2luYWwgLnJldHVybiBjYWxsIHRvIGNvbnRpbnVlIGluIHRoZVxuICAgICAgLy8gb3V0ZXIgZ2VuZXJhdG9yLlxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kICE9PSBcInJldHVyblwiKSB7XG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJlLXlpZWxkIHRoZSByZXN1bHQgcmV0dXJuZWQgYnkgdGhlIGRlbGVnYXRlIG1ldGhvZC5cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cblxuICAgIC8vIFRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBpcyBmaW5pc2hlZCwgc28gZm9yZ2V0IGl0IGFuZCBjb250aW51ZSB3aXRoXG4gICAgLy8gdGhlIG91dGVyIGdlbmVyYXRvci5cbiAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgfVxuXG4gIC8vIERlZmluZSBHZW5lcmF0b3IucHJvdG90eXBlLntuZXh0LHRocm93LHJldHVybn0gaW4gdGVybXMgb2YgdGhlXG4gIC8vIHVuaWZpZWQgLl9pbnZva2UgaGVscGVyIG1ldGhvZC5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEdwKTtcblxuICBHcFt0b1N0cmluZ1RhZ1N5bWJvbF0gPSBcIkdlbmVyYXRvclwiO1xuXG4gIC8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlXG4gIC8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlXG4gIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yXG4gIC8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgR3BbaXRlcmF0b3JTeW1ib2xdID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgR3AudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfTtcblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cbiAgICBpZiAoMSBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG4gICAgfVxuXG4gICAgaWYgKDIgaW4gbG9jcykge1xuICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07XG4gICAgICBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM107XG4gICAgfVxuXG4gICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkge1xuICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuICAgIHJlY29yZC50eXBlID0gXCJub3JtYWxcIjtcbiAgICBkZWxldGUgcmVjb3JkLmFyZztcbiAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuICB9XG5cbiAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaFxuICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb21cbiAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG4gICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiBcInJvb3RcIiB9XTtcbiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7XG4gICAgdGhpcy5yZXNldCh0cnVlKTtcbiAgfVxuXG4gIGV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIGtleXMucmV2ZXJzZSgpO1xuXG4gICAgLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXBcbiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLlxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIG5leHQudmFsdWUgPSBrZXk7XG4gICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlXG4gICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpc1xuICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG4gICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcbiAgICBpZiAoaXRlcmFibGUpIHtcbiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtcbiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmFibGUubmV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHtcbiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLlxuICAgIHJldHVybiB7IG5leHQ6IGRvbmVSZXN1bHQgfTtcbiAgfVxuICBleHBvcnRzLnZhbHVlcyA9IHZhbHVlcztcblxuICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTtcblxuICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6XG4gICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuICAgICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cbiAgICAgICAgaWYgKGNhdWdodCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICEhIGNhdWdodDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcbiAgICAgICAgICAvLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCBcImNhdGNoTG9jXCIpO1xuICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKTtcblxuICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG4gICAgICAgICAgKHR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgICB0eXBlID09PSBcImNvbnRpbnVlXCIpICYmXG4gICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcbiAgICAgICAgICBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYVxuICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG4gICAgICAgIGZpbmFsbHlFbnRyeSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlO1xuICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSkge1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcbiAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG4gICAgfSxcblxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgIHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgIHRoaXMubmV4dCA9IFwiZW5kXCI7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiICYmIGFmdGVyTG9jKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcbiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykge1xuICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvblxuICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG5cbiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsXG4gICAgICAgIG5leHRMb2M6IG5leHRMb2NcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3RcbiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLlxuICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGVcbiAgLy8gb3Igbm90LCByZXR1cm4gdGhlIHJ1bnRpbWUgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGRlY2xhcmUgdGhlIHZhcmlhYmxlXG4gIC8vIHJlZ2VuZXJhdG9yUnVudGltZSBpbiB0aGUgb3V0ZXIgc2NvcGUsIHdoaWNoIGFsbG93cyB0aGlzIG1vZHVsZSB0byBiZVxuICAvLyBpbmplY3RlZCBlYXNpbHkgYnkgYGJpbi9yZWdlbmVyYXRvciAtLWluY2x1ZGUtcnVudGltZSBzY3JpcHQuanNgLlxuICByZXR1cm4gZXhwb3J0cztcblxufShcbiAgLy8gSWYgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlLCB1c2UgbW9kdWxlLmV4cG9ydHNcbiAgLy8gYXMgdGhlIHJlZ2VuZXJhdG9yUnVudGltZSBuYW1lc3BhY2UuIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgZW1wdHlcbiAgLy8gb2JqZWN0LiBFaXRoZXIgd2F5LCB0aGUgcmVzdWx0aW5nIG9iamVjdCB3aWxsIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZVxuICAvLyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIHZhcmlhYmxlIGF0IHRoZSB0b3Agb2YgdGhpcyBmaWxlLlxuICB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiID8gbW9kdWxlLmV4cG9ydHMgOiB7fVxuKSk7XG5cbnRyeSB7XG4gIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG59IGNhdGNoIChhY2NpZGVudGFsU3RyaWN0TW9kZSkge1xuICAvLyBUaGlzIG1vZHVsZSBzaG91bGQgbm90IGJlIHJ1bm5pbmcgaW4gc3RyaWN0IG1vZGUsIHNvIHRoZSBhYm92ZVxuICAvLyBhc3NpZ25tZW50IHNob3VsZCBhbHdheXMgd29yayB1bmxlc3Mgc29tZXRoaW5nIGlzIG1pc2NvbmZpZ3VyZWQuIEp1c3RcbiAgLy8gaW4gY2FzZSBydW50aW1lLmpzIGFjY2lkZW50YWxseSBydW5zIGluIHN0cmljdCBtb2RlLCB3ZSBjYW4gZXNjYXBlXG4gIC8vIHN0cmljdCBtb2RlIHVzaW5nIGEgZ2xvYmFsIEZ1bmN0aW9uIGNhbGwuIFRoaXMgY291bGQgY29uY2VpdmFibHkgZmFpbFxuICAvLyBpZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGZvcmJpZHMgdXNpbmcgRnVuY3Rpb24sIGJ1dCBpbiB0aGF0IGNhc2VcbiAgLy8gdGhlIHByb3BlciBzb2x1dGlvbiBpcyB0byBmaXggdGhlIGFjY2lkZW50YWwgc3RyaWN0IG1vZGUgcHJvYmxlbS4gSWZcbiAgLy8geW91J3ZlIG1pc2NvbmZpZ3VyZWQgeW91ciBidW5kbGVyIHRvIGZvcmNlIHN0cmljdCBtb2RlIGFuZCBhcHBsaWVkIGFcbiAgLy8gQ1NQIHRvIGZvcmJpZCBGdW5jdGlvbiwgYW5kIHlvdSdyZSBub3Qgd2lsbGluZyB0byBmaXggZWl0aGVyIG9mIHRob3NlXG4gIC8vIHByb2JsZW1zLCBwbGVhc2UgZGV0YWlsIHlvdXIgdW5pcXVlIHByZWRpY2FtZW50IGluIGEgR2l0SHViIGlzc3VlLlxuICBGdW5jdGlvbihcInJcIiwgXCJyZWdlbmVyYXRvclJ1bnRpbWUgPSByXCIpKHJ1bnRpbWUpO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18yMTRfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzU0NV9fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fOTQ5X187IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBtb2R1bGUgZXhwb3J0cyBtdXN0IGJlIHJldHVybmVkIGZyb20gcnVudGltZSBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5yZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygzNTIpO1xuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gbW9kdWxlWydkZWZhdWx0J10gOlxuXHRcdCgpID0+IG1vZHVsZTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApIl0sInNvdXJjZVJvb3QiOiIifQ==