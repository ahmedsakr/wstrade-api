!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("source-map-support"),require("node-fetch"),require("http-status")):"function"==typeof define&&define.amd?define(["source-map-support","node-fetch","http-status"],e):"object"==typeof exports?exports["wstrade-api"]=e(require("source-map-support"),require("node-fetch"),require("http-status")):t["wstrade-api"]=e(t._,t._,t._)}(global,(function(t,e,r){return(()=>{var n={228:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},858:t=>{t.exports=function(t){if(Array.isArray(t))return t}},646:(t,e,r)=>{var n=r(228);t.exports=function(t){if(Array.isArray(t))return n(t)}},926:t=>{function e(t,e,r,n,o,a,s){try{var i=t[a](s),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(n,o)}t.exports=function(t){return function(){var r=this,n=arguments;return new Promise((function(o,a){var s=t.apply(r,n);function i(t){e(s,o,a,i,c,"next",t)}function c(t){e(s,o,a,i,c,"throw",t)}i(void 0)}))}}},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},913:t=>{function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}},713:t=>{t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},860:t=>{t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},884:t=>{t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,a=void 0;try{for(var s,i=t[Symbol.iterator]();!(n=(s=i.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}},521:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},206:t=>{t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},38:(t,e,r)=>{var n=r(858),o=r(884),a=r(379),s=r(521);t.exports=function(t,e){return n(t)||o(t,e)||a(t,e)||s()}},319:(t,e,r)=>{var n=r(646),o=r(860),a=r(379),s=r(206);t.exports=function(t){return n(t)||o(t)||a(t)||s()}},379:(t,e,r)=>{var n=r(228);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}},757:(t,e,r)=>{t.exports=r(666)},391:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(757),o=r.n(n),a=r(926),s=r.n(a),i=r(726),c=r(811);const u={all:(w=s()(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.Z)(i.Z.ACCOUNT_IDS,{});case 2:return e=t.sent,t.abrupt("return",{tfsa:e.find((function(t){return t.startsWith("tfsa")})),rrsp:e.find((function(t){return t.startsWith("rrsp")})),crypto:e.find((function(t){return t.startsWith("non-registered-crypto")})),personal:e.find((function(t){return t.startsWith("non-registered")&&!t.startsWith("non-registered-crypto")}))});case 4:case"end":return t.stop()}}),t)}))),function(){return w.apply(this,arguments)}),data:(m=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.LIST_ACCOUNT,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return m.apply(this,arguments)}),me:(v=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.ME,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return v.apply(this,arguments)}),person:(y=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.PERSON,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return y.apply(this,arguments)}),history:(d=s()(o().mark((function t(e,r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.HISTORY_ACCOUNT,{interval:e,accountId:r}));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return d.apply(this,arguments)}),activities:(h=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.ACTIVITIES,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)}),getBankAccounts:(l=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.BANK_ACCOUNTS,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)}),deposits:(f=s()(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.DEPOSITS,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)}),positions:(p=s()(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,c.Z)(i.Z.POSITIONS,{accountId:e}));case 1:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)})};var p,f,l,h,d,y,v,m,w},726:(t,e,r)=>{"use strict";r.d(e,{p:()=>x,Z:()=>g});var n,o,a,s,i,c,u,p,f,l,h,d,y=r(757),v=r.n(y),m=r(926),w=r.n(m),x=20,b={onFailure:(o=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.status,t.t1=e.statusText,t.next=4,e.json();case 4:return t.t2=t.sent,t.abrupt("return",{status:t.t0,reason:t.t1,body:t.t2});case 6:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)}),onSuccess:(n=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.json());case 1:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})};const g={LOGIN:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/login",onSuccess:(d=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0={access:e.headers.get("x-access-token"),refresh:e.headers.get("x-refresh-token"),expires:parseInt(e.headers.get("x-access-token-expires"),10)},t.next=3,e.json();case 3:return t.t1=t.sent,t.abrupt("return",{tokens:t.t0,accountInfo:t.t1});case 5:case"end":return t.stop()}}),t)}))),function(t){return d.apply(this,arguments)}),onFailure:b.onFailure},REFRESH:{method:"POST",url:"https://trade-service.wealthsimple.com/auth/refresh",onSuccess:(h=w()(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{tokens:{access:e.headers.get("x-access-token"),refresh:e.headers.get("x-refresh-token"),expires:parseInt(e.headers.get("x-access-token-expires"),10)}});case 1:case"end":return t.stop()}}),t)}))),function(t){return h.apply(this,arguments)}),onFailure:b.onFailure},ACCOUNT_IDS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",onSuccess:(l=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results.map((function(t){return t.id})));case 4:case"end":return t.stop()}}),t)}))),function(t){return l.apply(this,arguments)}),onFailure:b.onFailure},LIST_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/list",onSuccess:(f=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return f.apply(this,arguments)}),onFailure:b.onFailure},ME:{method:"GET",url:"https://trade-service.wealthsimple.com/me",onSuccess:b.onSuccess,onFailure:b.onFailure},PERSON:{method:"GET",url:"https://trade-service.wealthsimple.com/person",onSuccess:b.onSuccess,onFailure:b.onFailure},HISTORY_ACCOUNT:{method:"GET",url:"https://trade-service.wealthsimple.com/account/history/{0}?account_id={1}",parameters:{0:"interval",1:"accountId"},onSuccess:b.onSuccess,onFailure:b.onFailure},ACTIVITIES:{method:"GET",url:"https://trade-service.wealthsimple.com/account/activities",onSuccess:(p=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)}),onFailure:b.onFailure},DEPOSITS:{method:"GET",url:"https://trade-service.wealthsimple.com/deposits",onSuccess:(u=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)}),onFailure:b.onFailure},BANK_ACCOUNTS:{method:"GET",url:"https://trade-service.wealthsimple.com/bank-accounts",onSuccess:(c=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)}),onFailure:b.onFailure},EXCHANGE_RATES:{method:"GET",url:"https://trade-service.wealthsimple.com/forex",onSuccess:b.onSuccess,onFailure:b.onFailure},SECURITY:{method:"GET",url:"https://trade-service.wealthsimple.com/securities?query={0}",parameters:{0:"ticker"},onSuccess:(i=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:if(0!==(r=t.sent).results.length){t.next=5;break}throw new Error("Security does not exist");case 5:return t.abrupt("return",r.results);case 6:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)}),onFailure:b.onFailure},EXTENSIVE_SECURITY_DETAILS:{method:"GET",url:"https://trade-service.wealthsimple.com/securities/{0}",parameters:{0:"id"},onSuccess:b.onSuccess,onFailure:b.onFailure},POSITIONS:{method:"GET",url:"https://trade-service.wealthsimple.com/account/positions?account_id={0}",parameters:{0:"accountId"},onSuccess:(s=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",r.results);case 4:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)}),onFailure:b.onFailure},ORDERS_BY_PAGE:{method:"GET",url:"https://trade-service.wealthsimple.com/orders?offset={0}&account_id={1}",parameters:{0:"offset",1:"accountId"},onSuccess:(a=w()(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return r=t.sent,t.abrupt("return",{total:r.total,orders:r.results});case 4:case"end":return t.stop()}}),t)}))),function(t){return a.apply(this,arguments)}),onFailure:b.onFailure},CANCEL_ORDER:{method:"DELETE",url:"https://trade-service.wealthsimple.com/orders/{0}",parameters:{0:"orderId"},onSuccess:b.onSuccess,onFailure:b.onFailure},PLACE_ORDER:{method:"POST",url:"https://trade-service.wealthsimple.com/orders",onSuccess:b.onSuccess,onFailure:b.onFailure}}},464:(t,e,r)=>{"use strict";r.d(e,{Z:()=>u});var n=r(757),o=r.n(n),a=r(926),s=r.n(a),i=r(811),c=r(726);const u={tokens:null,otp:null,on:function(t,e){this[t]=e},login:function(t,e){var r=this;return s()(o().mark((function n(){var a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=null,"function"!=typeof r.otp){n.next=4;break}return n.next=4,(0,i.Z)(c.Z.LOGIN,{email:t,password:e}).catch((function(){}));case 4:if(n.prev=4,n.t0=i.Z,n.t1=c.Z.LOGIN,n.t2=t,n.t3=e,"function"!=typeof r.otp){n.next=15;break}return n.next=12,r.otp();case 12:n.t4=n.sent,n.next=16;break;case 15:n.t4=r.otp;case 16:return n.t5=n.t4,n.t6={email:n.t2,password:n.t3,otp:n.t5},n.next=20,(0,n.t0)(n.t1,n.t6);case 20:a=n.sent,n.next=28;break;case 23:if(n.prev=23,n.t7=n.catch(4),r.otp){n.next=27;break}throw new Error("OTP not provided!");case 27:throw n.t7;case 28:r.tokens=a.tokens;case 29:case"end":return n.stop()}}),n,null,[[4,23]])})))()},refresh:function(){var t=this;return s()(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.tokens.access=null,e.next=3,(0,i.Z)(c.Z.REFRESH,{refresh_token:t.tokens.refresh});case 3:r=e.sent,t.tokens=r.tokens;case 5:case"end":return e.stop()}}),e)})))()}}},500:(t,e,r)=>{"use strict";r.d(e,{e:()=>o,Z:()=>a});var n=["securities_cache"],o=function(t){return!n.includes(t)};function a(t){if(null!=t&&t.startsWith("no_")){var e=t.substring(t.indexOf("_")+1);o(e)&&n.push(e)}else o(t)||n.splice(n.indexOf(t),1)}},657:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(38),o=r.n(n),a=r(575),s=r.n(a),i=r(913),c=r.n(i),u=["NASDAQ","NYSE","TSX","TSX-V","NEO","CC"];const p=function(){function t(e){var r;if(s()(this,t),this.symbol=null,this.exchange=null,this.id=null,this.crypto=!1,"string"==typeof e){if(""===e)throw new Error("Empty ticker");var n=e.split(":"),a=o()(n,2);this.symbol=a[0],this.exchange=a[1]}else{if(!e.symbol&&!e.id)throw new Error("Invalid ticker '".concat(e,"'"));this.symbol=e.symbol||null,this.exchange=e.exchange||null,this.id=e.id||null}if(this.exchange&&!u.includes(this.exchange))throw new Error("Invalid exchange '".concat(this.exchange,"'!"));("CC"===this.exchange||null!==(r=this.id)&&void 0!==r&&r.startsWith("sec-z"))&&(this.crypto=!0),"NEO"===this.exchange&&(this.exchange="AEQUITAS NEO EXCHANGE")}return c()(t,[{key:"format",value:function(){return this.id?this.id:"AEQUITAS NEO EXCHANGE"===this.exchange?"".concat(this.symbol,":NEO"):"".concat(this.symbol).concat(this.exchange?":".concat(this.exchange):"")}},{key:"weakEquals",value:function(t){return!(!this.id||this.id!==t.id)||!(!this.symbol||this.symbol!==t.symbol||this.crypto!==t.crypto)}}]),t}()},752:(t,e,r)=>{"use strict";r.d(e,{Z:()=>x});var n=r(38),o=r.n(n),a=r(757),s=r.n(a),i=r(926),c=r.n(i),u=r(726),p=r(811),f=r(657),l=r(500),h=r(575),d=r.n(h),y=r(913),v=r.n(y),m=new(function(){function t(e){d()(this,t),this.cache=new Map,this.size=e}return v()(t,[{key:"insert",value:function(t,e){this.cache.size>=this.size&&this.cache.delete(this.cache.keys().next().value),this.cache.set(t,e)}},{key:"get",value:function(t){return this.cache.get(t)}}]),t}())(10);const w=function(t){var e=m.get(new f.Z(t).format());return void 0===e?null:e},x={exchangeRates:(g=c()(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,p.Z)(u.Z.EXCHANGE_RATES,{}));case 1:case"end":return t.stop()}}),t)}))),function(){return g.apply(this,arguments)}),getSecurity:(b=c()(s().mark((function t(e,r){var n,a,i,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,a=new f.Z(e),r||!(0,l.e)("securities_cache")){t.next=6;break}if(!(n=w(a))){t.next=6;break}return t.abrupt("return",n);case 6:if(!a.id){t.next=12;break}return t.next=9,(0,p.Z)(u.Z.EXTENSIVE_SECURITY_DETAILS,{id:a.id});case 9:n=t.sent,t.next=28;break;case 12:return t.next=14,(0,p.Z)(u.Z.SECURITY,{ticker:a.symbol});case 14:if(n=(n=t.sent).filter((function(t){return t.stock.symbol===a.symbol})),a.crypto?n=n.filter((function(t){return"cryptocurrency"===t.security_type})):a.exchange&&(n=n.filter((function(t){return t.stock.primary_exchange===a.exchange}))),!(n.length>1)){t.next=19;break}throw new Error("Multiple securities matched query.");case 19:if(0!==n.length){t.next=21;break}throw new Error("No securities matched query.");case 21:if(i=n,c=o()(i,1),n=c[0],!r){t.next=28;break}return t.next=27,(0,p.Z)(u.Z.EXTENSIVE_SECURITY_DETAILS,{id:n.id});case 27:n=t.sent;case 28:return(0,l.e)("securities_cache")&&null===w(a)&&(s=a,h=n,m.insert(new f.Z(s).format(),h)),t.abrupt("return",n);case 30:case"end":return t.stop()}var s,h}),t)}))),function(t,e){return b.apply(this,arguments)})};var b,g},568:(t,e,r)=>{"use strict";r.d(e,{Z:()=>s});var n=r(319),o=r.n(n),a=new(r(545).Headers);const s={add:function(t,e){return a.append(t,e)},remove:function(t){return a.delete(t)},clear:function(){return o()(a).forEach((function(t){return a.delete(t[0])}))},values:function(){return o()(a)}}},352:(t,e,r)=>{r(949).install();var n=r(464).Z,o=r(568).Z,a=r(391).Z,s=r(826).Z,i=r(752).Z,c=r(889).Z,u=r(500).Z;t.exports={auth:n,headers:o,accounts:a,orders:s,quotes:c,data:i,config:u}},811:(t,e,r)=>{"use strict";r.d(e,{Z:()=>S});var n=r(757),o=r.n(n),a=r(319),s=r.n(a),i=r(926),c=r.n(i),u=r(713),p=r.n(u),f=r(545),l=r.n(f),h=r(457),d=r.n(h),y=r(568),v=r(464),m=r(500);const w=function(){return parseInt(Date.now()/1e3,10)};function x(){return b.apply(this,arguments)}function b(){return(b=c()(o().mark((function t(){var e,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(w()>=(null===(e=v.Z.tokens)||void 0===e?void 0:e.expires))){t.next=13;break}if(null===(r=v.Z.tokens)||void 0===r||!r.refresh){t.next=12;break}return t.prev=2,t.next=5,v.Z.refresh();case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),new Error("Unable to refresh expired token: ".concat(t.t0));case 10:t.next=13;break;case 12:throw new Error("Access token expired");case 13:case"end":return t.stop()}}),t,null,[[2,7]])})))).apply(this,arguments)}function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function k(t,e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){p()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e),n=t.url;if(t.parameters)for(var o=0;o<Object.keys(t.parameters).length;o++){var a=t.parameters[o];if(null===r[a]||void 0===r[a])throw new Error("URL Path parameter '".concat(a,"' missing!"));n=n.replace("{".concat(o,"}"),r[t.parameters[o]]),delete r[t.parameters[o]]}return["GET","HEAD"].includes(t.method)?{url:n,payload:void 0}:{url:n,payload:JSON.stringify(r)}}function E(t,e){return _.apply(this,arguments)}function _(){return(_=c()(o().mark((function t(e,r){var n,a,i,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=new f.Headers).append("Content-Type","application/json"),null===(n=v.Z.tokens)||void 0===n||!n.access){t.next=7;break}if(!(0,m.e)("implicit_token_refresh")){t.next=6;break}return t.next=6,x();case 6:a.append("Authorization",v.Z.tokens.access);case 7:return y.Z.values().forEach((function(t){return a.append.apply(a,s()(t))})),i=k(e,r),c=i.url,u=i.payload,t.abrupt("return",l()(c,{body:u,method:e.method,headers:a}));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t,e){return O.apply(this,arguments)}function O(){return(O=c()(o().mark((function t(e,r){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e,r);case 2:if(n=t.sent,![d().OK,d().CREATED].includes(n.status)){t.next=5;break}return t.abrupt("return",e.onSuccess(n));case 5:return t.t0=Promise,t.next=8,e.onFailure(n);case 8:return t.t1=t.sent,t.abrupt("return",t.t0.reject.call(t.t0,t.t1));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},826:(t,e,r)=>{"use strict";r.d(e,{Z:()=>R});var n=r(713),o=r.n(n),a=r(319),s=r.n(a),i=r(757),c=r.n(i),u=r(926),p=r.n(u),f=r(726),l=r(811),h=r(657);function d(t,e){return y.apply(this,arguments)}function y(){return(y=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,l.Z)(f.Z.ORDERS_BY_PAGE,{offset:(r-1)*f.p,accountId:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return m.apply(this,arguments)}function m(){return(m=p()(c().mark((function t(e){var r,n,o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e,1);case 2:if(r=t.sent,!((n=Math.ceil(r.total/f.p))>1)){t.next=12;break}for(o=[],a=2;a<=n;a++)o.push(d(e,a).then((function(t){return t.orders})));return t.next=9,Promise.all(o);case 9:t.sent.forEach((function(t){var e;return(e=r.orders).push.apply(e,s()(t))})),r.total=r.orders.length;case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t,e,r){return x.apply(this,arguments)}function x(){return(x=p()(c().mark((function t(e,r,n){var o,a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:return o=t.sent,a=function(t){if(r){var e=new h.Z({symbol:t.symbol,id:t.security_id});if(!new h.Z(r).weakEquals(e))return!1}return t.status===n},o.orders=o.orders.filter(a),o.total=o.orders.length,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}const b={page:d,all:v,pending:(E=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,r,"submitted"));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return E.apply(this,arguments)}),filled:(k=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,r,"posted"));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return k.apply(this,arguments)}),cancelled:(g=p()(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w(e,r,"cancelled"));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return g.apply(this,arguments)})};var g,k,E,_=r(752),S=r(889),O=function(t){return["TSX","TSX-V"].includes(t)};const Z={cancel:(C=p()(c().mark((function t(e){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,(0,l.Z)(f.Z.CANCEL_ORDER,{orderId:e});case 3:return t.t1=t.sent,t.abrupt("return",{order:t.t0,response:t.t1});case 5:case"end":return t.stop()}}),t)}))),function(t){return C.apply(this,arguments)}),cancelPending:function(t){var e=this;return p()(c().mark((function r(){var n;return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.pending(t);case 2:return n=r.sent,r.abrupt("return",Promise.all(n.orders.map(function(){var t=p()(c().mark((function t(r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.cancel(r.order_id));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())));case 4:case"end":return r.stop()}}),r)})))()},marketBuy:(L=p()(c().mark((function t(e,r,n){var o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Z.getSecurity(r);case 2:if(o=t.sent,t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.t2=o.id,new h.Z(r).crypto){t.next=12;break}return t.next=9,S.Z.get(r);case 9:t.t3=t.sent,t.next=13;break;case 12:t.t3=void 0;case 13:return t.t4=t.t3,t.t5=n,t.t6=e,t.t7={security_id:t.t2,limit_price:t.t4,quantity:t.t5,order_type:"buy_quantity",order_sub_type:"market",time_in_force:"day",account_id:t.t6},t.abrupt("return",(0,t.t0)(t.t1,t.t7));case 18:case"end":return t.stop()}}),t)}))),function(t,e,r){return L.apply(this,arguments)}),limitBuy:(P=p()(c().mark((function t(e,r,n,o){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.next=4,_.Z.getSecurity(r);case 4:return t.t2=t.sent.id,t.t3=n,t.t4=o,t.t5=e,t.t6={security_id:t.t2,limit_price:t.t3,quantity:t.t4,order_type:"buy_quantity",order_sub_type:"limit",time_in_force:"day",account_id:t.t5},t.abrupt("return",(0,t.t0)(t.t1,t.t6));case 10:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return P.apply(this,arguments)}),stopLimitBuy:(A=p()(c().mark((function t(e,r,n,o,a){var s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Z.getSecurity(r);case 2:if(s=t.sent,!O(s.stock.primary_exchange)||n===o){t.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return t.abrupt("return",(0,l.Z)(f.Z.PLACE_ORDER,{security_id:s.id,stop_price:n,limit_price:o,quantity:a,order_type:"buy_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:e}));case 6:case"end":return t.stop()}}),t)}))),function(t,e,r,n,o){return A.apply(this,arguments)}),marketSell:(I=p()(c().mark((function t(e,r,n){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.next=4,_.Z.getSecurity(r);case 4:if(t.t2=t.sent.id,new h.Z(r).crypto){t.next=11;break}return t.next=8,S.Z.get(r);case 8:t.t3=t.sent,t.next=12;break;case 11:t.t3=void 0;case 12:return t.t4=t.t3,t.t5=n,t.t6=e,t.t7={security_id:t.t2,market_value:t.t4,quantity:t.t5,order_type:"sell_quantity",order_sub_type:"market",time_in_force:"day",account_id:t.t6},t.abrupt("return",(0,t.t0)(t.t1,t.t7));case 17:case"end":return t.stop()}}),t)}))),function(t,e,r){return I.apply(this,arguments)}),limitSell:(j=p()(c().mark((function t(e,r,n,o){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.Z,t.t1=f.Z.PLACE_ORDER,t.next=4,_.Z.getSecurity(r);case 4:return t.t2=t.sent.id,t.t3=n,t.t4=o,t.t5=e,t.t6={security_id:t.t2,limit_price:t.t3,quantity:t.t4,order_type:"sell_quantity",order_sub_type:"limit",time_in_force:"day",account_id:t.t5},t.abrupt("return",(0,t.t0)(t.t1,t.t6));case 10:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return j.apply(this,arguments)}),stopLimitSell:(T=p()(c().mark((function t(e,r,n,o,a){var s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.Z.getSecurity(r);case 2:if(s=t.sent,!O(s.stock.primary_exchange)||n===o){t.next=5;break}throw new Error("TSX/TSX-V securities must have an equivalent stop and limit price.");case 5:return t.abrupt("return",(0,l.Z)(f.Z.PLACE_ORDER,{security_id:s.id,stop_price:n,limit_price:o,quantity:a,order_type:"sell_quantity",order_sub_type:"stop_limit",time_in_force:"day",account_id:e}));case 6:case"end":return t.stop()}}),t)}))),function(t,e,r,n,o){return T.apply(this,arguments)})};var T,j,I,A,P,L,C;function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const R=N(N({},b),Z)},889:(t,e,r)=>{"use strict";r.d(e,{Z:()=>f});var n=r(757),o=r.n(n),a=r(926),s=r.n(a),i=r(752);const c={quote:(u=s()(o().mark((function t(e){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Z.getSecurity(e,!0);case 2:return r=t.sent,t.abrupt("return",r.quote.amount);case 4:case"end":return t.stop()}}),t)}))),function(t){return u.apply(this,arguments)})};var u,p=r(657);const f={defaultProvider:c,providers:{},use:function(t,e){if("function"!=typeof e.quote)throw new Error("Invalid quote provider for ".concat(t,"!"));this.providers[t]=e},get:function(t){var e=this;return s()(o().mark((function r(){var n,a,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=null,!(a=new p.Z(t)).exchange){r.next=6;break}n=a.exchange,r.next=15;break;case 6:if(!a.crypto||!a.id){r.next=10;break}n="CC",r.next=15;break;case 10:if(!(Object.keys(e.providers).length>0)){r.next=15;break}return r.next=13,i.Z.getSecurity(a,!1);case 13:s=r.sent,n=s.stock.primary_exchange;case 15:if(!(n in e.providers)){r.next=17;break}return r.abrupt("return",e.providers[n].quote(a));case 17:return r.abrupt("return",e.defaultProvider.quote(a));case 18:case"end":return r.stop()}}),r)})))()}}},666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function c(t,e,r,n){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),s=new Z(n||[]);return a._invoke=function(t,e,r){var n=p;return function(o,a){if(n===l)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw a;return j()}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var i=_(s,r);if(i){if(i===d)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=l;var c=u(t,e,r);if("normal"===c.type){if(n=r.done?h:f,c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(t,r,s),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var p="suspendedStart",f="suspendedYield",l="executing",h="completed",d={};function y(){}function v(){}function m(){}var w={};w[a]=function(){return this};var x=Object.getPrototypeOf,b=x&&x(x(T([])));b&&b!==r&&n.call(b,a)&&(w=b);var g=m.prototype=y.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t,e){function r(o,a,s,i){var c=u(t[o],t,a);if("throw"!==c.type){var p=c.arg,f=p.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,s,i)}),(function(t){r("throw",t,s,i)})):e.resolve(f).then((function(t){p.value=t,s(p)}),(function(t){return r("throw",t,s,i)}))}i(c.arg)}var o;this._invoke=function(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}}function _(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,_(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=u(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Z(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}return{next:j}}function j(){return{value:e,done:!0}}return v.prototype=g.constructor=m,m.constructor=v,m[i]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,i in t||(t[i]="GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},k(E.prototype),E.prototype[s]=function(){return this},t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var s=new E(c(e,r,n,o),a);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(g),g[i]="Generator",g[a]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=T,Z.prototype={constructor:Z,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return i.type="throw",i.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},457:t=>{"use strict";t.exports=r},545:t=>{"use strict";t.exports=e},949:e=>{"use strict";e.exports=t}},o={};function a(t){if(o[t])return o[t].exports;var e=o[t]={exports:{}};return n[t](e,e.exports,a),e.exports}return a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a(352)})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheUxpa2VUb0FycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2FzeW5jVG9HZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjay5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlUmVzdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL25vbkl0ZXJhYmxlU3ByZWFkLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2xpY2VkVG9BcnJheS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3RvQ29uc3VtYWJsZUFycmF5LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYWNjb3VudHMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvYXBpL2VuZHBvaW50cy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9hdXRoLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9jb3JlL3RpY2tlci5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcHRpb25hbC9zZWN1cml0aWVzLWNhY2hlLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2NvcmUvY2FjaGUuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvZGF0YS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9oZWFkZXJzLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL2hlbHBlcnMvdGltZS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcHRpb25hbC9pbXBsaWNpdC10b2tlbi1yZWZyZXNoLmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vc3JjL25ldHdvcmsvaHR0cHMuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvb3JkZXJzL2hpc3RvcnkuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvb3JkZXJzL3N1Ym1pdC5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS8uL3NyYy9vcmRlcnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvcXVvdGVzL2RlZmF1bHQuanMiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvLi9zcmMvcXVvdGVzL2luZGV4LmpzIiwid2VicGFjazovL3dzdHJhZGUtYXBpLy4vbm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwiaHR0cC1zdGF0dXNcIixcImNvbW1vbmpzMlwiOlwiaHR0cC1zdGF0dXNcIixcImFtZFwiOlwiaHR0cC1zdGF0dXNcIixcInJvb3RcIjpcIl9cIn0iLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcIm5vZGUtZmV0Y2hcIixcImNvbW1vbmpzMlwiOlwibm9kZS1mZXRjaFwiLFwiYW1kXCI6XCJub2RlLWZldGNoXCIsXCJyb290XCI6XCJfXCJ9Iiwid2VicGFjazovL3dzdHJhZGUtYXBpL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJzb3VyY2UtbWFwLXN1cHBvcnRcIixcImNvbW1vbmpzMlwiOlwic291cmNlLW1hcC1zdXBwb3J0XCIsXCJhbWRcIjpcInNvdXJjZS1tYXAtc3VwcG9ydFwiLFwicm9vdFwiOlwiX1wifSIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93c3RyYWRlLWFwaS93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vd3N0cmFkZS1hcGkvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dzdHJhZGUtYXBpL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsImdsb2JhbCIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzk0OV9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNTQ1X18iLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX180NTdfXyIsImFyciIsImxlbiIsImxlbmd0aCIsImkiLCJhcnIyIiwiQXJyYXkiLCJpc0FycmF5IiwiYXJyYXlMaWtlVG9BcnJheSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsImdlbiIsInJlc29sdmUiLCJyZWplY3QiLCJfbmV4dCIsIl90aHJvdyIsImtleSIsImFyZyIsImluZm8iLCJ2YWx1ZSIsImVycm9yIiwiZG9uZSIsIlByb21pc2UiLCJ0aGVuIiwiZm4iLCJzZWxmIiwidGhpcyIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsImVyciIsInVuZGVmaW5lZCIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwib2JqIiwiaXRlciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiZnJvbSIsIl9hcnIiLCJfbiIsIl9kIiwiX2UiLCJfcyIsIl9pIiwibmV4dCIsInB1c2giLCJhcnJheVdpdGhIb2xlcyIsIml0ZXJhYmxlVG9BcnJheUxpbWl0IiwidW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJub25JdGVyYWJsZVJlc3QiLCJhcnJheVdpdGhvdXRIb2xlcyIsIml0ZXJhYmxlVG9BcnJheSIsIm5vbkl0ZXJhYmxlU3ByZWFkIiwibyIsIm1pbkxlbiIsIm4iLCJ0b1N0cmluZyIsImNhbGwiLCJzbGljZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsInRlc3QiLCJhbGwiLCJoYW5kbGVSZXF1ZXN0IiwiZW5kcG9pbnRzIiwiYWNjb3VudHMiLCJ0ZnNhIiwiZmluZCIsImFjY291bnQiLCJzdGFydHNXaXRoIiwicnJzcCIsImNyeXB0byIsInBlcnNvbmFsIiwiZGF0YSIsIm1lIiwicGVyc29uIiwiaGlzdG9yeSIsImludGVydmFsIiwiYWNjb3VudElkIiwiYWN0aXZpdGllcyIsImdldEJhbmtBY2NvdW50cyIsImRlcG9zaXRzIiwicG9zaXRpb25zIiwiT1JERVJTX1BFUl9QQUdFIiwiZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyIiwib25GYWlsdXJlIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwianNvbiIsInJlYXNvbiIsImJvZHkiLCJvblN1Y2Nlc3MiLCJMT0dJTiIsIm1ldGhvZCIsInVybCIsImFjY2VzcyIsImhlYWRlcnMiLCJnZXQiLCJyZWZyZXNoIiwiZXhwaXJlcyIsInBhcnNlSW50IiwidG9rZW5zIiwiYWNjb3VudEluZm8iLCJSRUZSRVNIIiwiQUNDT1VOVF9JRFMiLCJyZXN1bHRzIiwibWFwIiwiaWQiLCJMSVNUX0FDQ09VTlQiLCJNRSIsIlBFUlNPTiIsIkhJU1RPUllfQUNDT1VOVCIsInBhcmFtZXRlcnMiLCIwIiwiMSIsIkFDVElWSVRJRVMiLCJERVBPU0lUUyIsIkJBTktfQUNDT1VOVFMiLCJFWENIQU5HRV9SQVRFUyIsIlNFQ1VSSVRZIiwiRXJyb3IiLCJFWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUyIsIlBPU0lUSU9OUyIsIk9SREVSU19CWV9QQUdFIiwidG90YWwiLCJvcmRlcnMiLCJDQU5DRUxfT1JERVIiLCJQTEFDRV9PUkRFUiIsIm90cCIsIm9uIiwiZXZlbnQiLCJ0aHVuayIsImxvZ2luIiwiZW1haWwiLCJwYXNzd29yZCIsInJlZnJlc2hfdG9rZW4iLCJkaXNhYmxlZCIsImNvbmZpZ0VuYWJsZWQiLCJmZWF0dXJlIiwiaW5jbHVkZXMiLCJjb25maWciLCJjdXQiLCJzdWJzdHJpbmciLCJpbmRleE9mIiwic3BsaWNlIiwiZXhjaGFuZ2VzIiwic3ltYm9sIiwiZXhjaGFuZ2UiLCJzcGxpdCIsIm90aGVyIiwiY2FjaGUiLCJzaXplIiwiTWFwIiwia2V5cyIsInNldCIsInNlY3VyaXR5IiwicmVzdWx0IiwiVGlja2VyIiwiZm9ybWF0IiwiZXhjaGFuZ2VSYXRlcyIsImdldFNlY3VyaXR5IiwidXNlclRpY2tlciIsImV4dGVuc2l2ZSIsInRpY2tlciIsImZpbHRlciIsInN0b2NrIiwic2VjdXJpdHlfdHlwZSIsInByaW1hcnlfZXhjaGFuZ2UiLCJpbnNlcnQiLCJjdXN0b21IZWFkZXJzIiwiSGVhZGVycyIsImFkZCIsImFwcGVuZCIsInJlbW92ZSIsImNsZWFyIiwiZm9yRWFjaCIsImhlYWRlciIsInZhbHVlcyIsImF1dGgiLCJxdW90ZXMiLCJEYXRlIiwibm93IiwiaW1wbGljaXRUb2tlblJlZnJlc2giLCJlcG9jaFNlY29uZHMiLCJmaW5hbGl6ZVJlcXVlc3QiLCJlbmRwb2ludCIsInBhcmFtcyIsImluZGV4IiwicGFyYW1ldGVyTmFtZSIsInJlcGxhY2UiLCJwYXlsb2FkIiwiSlNPTiIsInN0cmluZ2lmeSIsInRhbGsiLCJmZXRjaCIsInBhZ2UiLCJwYWdlTnVtIiwib2Zmc2V0IiwicGFnZXMiLCJNYXRoIiwiY2VpbCIsInRhc2tzIiwibGlzdCIsImZpbHRlcmVkT3JkZXJzIiwib3JkZXJGaWx0ZXIiLCJvcmRlciIsInNlY3VyaXR5X2lkIiwid2Vha0VxdWFscyIsInBlbmRpbmciLCJmaWxsZWQiLCJjYW5jZWxsZWQiLCJpc0NhbmFkaWFuU2VjdXJpdHkiLCJjYW5jZWwiLCJvcmRlcklkIiwiY2FuY2VsUGVuZGluZyIsIm9yZGVyX2lkIiwibWFya2V0QnV5IiwicXVhbnRpdHkiLCJkZXRhaWxzIiwibGltaXRfcHJpY2UiLCJvcmRlcl90eXBlIiwib3JkZXJfc3ViX3R5cGUiLCJ0aW1lX2luX2ZvcmNlIiwiYWNjb3VudF9pZCIsImxpbWl0QnV5IiwibGltaXQiLCJzdG9wTGltaXRCdXkiLCJzdG9wIiwic3RvcF9wcmljZSIsIm1hcmtldFNlbGwiLCJtYXJrZXRfdmFsdWUiLCJsaW1pdFNlbGwiLCJzdG9wTGltaXRTZWxsIiwic3VibWl0IiwicXVvdGUiLCJhbW91bnQiLCJkZWZhdWx0UHJvdmlkZXIiLCJ0cmFkZSIsInByb3ZpZGVycyIsInVzZSIsInByb3ZpZGVyIiwicnVudGltZSIsIk9wIiwiaGFzT3duIiwiaGFzT3duUHJvcGVydHkiLCIkU3ltYm9sIiwiaXRlcmF0b3JTeW1ib2wiLCJhc3luY0l0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsInRvU3RyaW5nVGFnU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ3cmFwIiwiaW5uZXJGbiIsIm91dGVyRm4iLCJ0cnlMb2NzTGlzdCIsInByb3RvR2VuZXJhdG9yIiwiR2VuZXJhdG9yIiwiZ2VuZXJhdG9yIiwiY3JlYXRlIiwiY29udGV4dCIsIkNvbnRleHQiLCJfaW52b2tlIiwic3RhdGUiLCJHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0IiwiR2VuU3RhdGVFeGVjdXRpbmciLCJHZW5TdGF0ZUNvbXBsZXRlZCIsImRvbmVSZXN1bHQiLCJkZWxlZ2F0ZSIsImRlbGVnYXRlUmVzdWx0IiwibWF5YmVJbnZva2VEZWxlZ2F0ZSIsIkNvbnRpbnVlU2VudGluZWwiLCJzZW50IiwiX3NlbnQiLCJkaXNwYXRjaEV4Y2VwdGlvbiIsImFicnVwdCIsInJlY29yZCIsInRyeUNhdGNoIiwidHlwZSIsIkdlblN0YXRlU3VzcGVuZGVkWWllbGQiLCJtYWtlSW52b2tlTWV0aG9kIiwiR2VuZXJhdG9yRnVuY3Rpb24iLCJHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSIsIkl0ZXJhdG9yUHJvdG90eXBlIiwiZ2V0UHJvdG8iLCJnZXRQcm90b3R5cGVPZiIsIk5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlIiwiR3AiLCJkZWZpbmVJdGVyYXRvck1ldGhvZHMiLCJBc3luY0l0ZXJhdG9yIiwiUHJvbWlzZUltcGwiLCJpbnZva2UiLCJfX2F3YWl0IiwidW53cmFwcGVkIiwicHJldmlvdXNQcm9taXNlIiwiY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmciLCJyZXN1bHROYW1lIiwibmV4dExvYyIsInB1c2hUcnlFbnRyeSIsImxvY3MiLCJlbnRyeSIsInRyeUxvYyIsImNhdGNoTG9jIiwiZmluYWxseUxvYyIsImFmdGVyTG9jIiwidHJ5RW50cmllcyIsInJlc2V0VHJ5RW50cnkiLCJjb21wbGV0aW9uIiwicmVzZXQiLCJpdGVyYWJsZSIsIml0ZXJhdG9yTWV0aG9kIiwiaXNOYU4iLCJkaXNwbGF5TmFtZSIsImlzR2VuZXJhdG9yRnVuY3Rpb24iLCJnZW5GdW4iLCJjdG9yIiwibWFyayIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiYXdyYXAiLCJhc3luYyIsIm9iamVjdCIsInJldmVyc2UiLCJwb3AiLCJza2lwVGVtcFJlc2V0IiwicHJldiIsImNoYXJBdCIsInJvb3RSZWNvcmQiLCJydmFsIiwiZXhjZXB0aW9uIiwiaGFuZGxlIiwibG9jIiwiY2F1Z2h0IiwiaGFzQ2F0Y2giLCJoYXNGaW5hbGx5IiwiZmluYWxseUVudHJ5IiwiY29tcGxldGUiLCJmaW5pc2giLCJ0aHJvd24iLCJkZWxlZ2F0ZVlpZWxkIiwicmVnZW5lcmF0b3JSdW50aW1lIiwiYWNjaWRlbnRhbFN0cmljdE1vZGUiLCJGdW5jdGlvbiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJnZXR0ZXIiLCJfX2VzTW9kdWxl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aXNCaUJDLEVBQU9ELFNBR3RDLElBQ0V5VyxtQkFBcUJsRyxFQUNyQixNQUFPbUcsR0FVUEMsU0FBUyxJQUFLLHlCQUFkQSxDQUF3Q3BHLEsscUJDdnRCMUN0USxFQUFPRCxRQUFVUSxHLHFCQ0FqQlAsRUFBT0QsUUFBVU8sRyxxQkNBakJOLEVBQU9ELFFBQVVNLElDQ2JzVyxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsR0FBR0YsRUFBeUJFLEdBQzNCLE9BQU9GLEVBQXlCRSxHQUFVOVcsUUFHM0MsSUFBSUMsRUFBUzJXLEVBQXlCRSxHQUFZLENBR2pEOVcsUUFBUyxJQU9WLE9BSEErVyxFQUFvQkQsR0FBVTdXLEVBQVFBLEVBQU9ELFFBQVM2VyxHQUcvQzVXLEVBQU9ELFFDakJmLE9DRkE2VyxFQUFvQmpTLEVBQUszRSxJQUN4QixJQUFJK1csRUFBUy9XLEdBQVVBLEVBQU9nWCxXQUM3QixJQUFNaFgsRUFBZ0IsUUFDdEIsSUFBTUEsRUFFUCxPQURBNFcsRUFBb0JLLEVBQUVGLEVBQVEsQ0FBRUcsRUFBR0gsSUFDNUJBLEdDTFJILEVBQW9CSyxFQUFJLENBQUNsWCxFQUFTb1gsS0FDakMsSUFBSSxJQUFJN1YsS0FBTzZWLEVBQ1hQLEVBQW9CblMsRUFBRTBTLEVBQVk3VixLQUFTc1YsRUFBb0JuUyxFQUFFMUUsRUFBU3VCLElBQzVFMEIsT0FBT0MsZUFBZWxELEVBQVN1QixFQUFLLENBQUV1QixZQUFZLEVBQU15RSxJQUFLNlAsRUFBVzdWLE1DSjNFc1YsRUFBb0JuUyxFQUFJLENBQUNwQixFQUFLK1QsSUFBU3BVLE9BQU9JLFVBQVVxTixlQUFlNUwsS0FBS3hCLEVBQUsrVCxHSEcxRVIsRUFBb0IsTSIsImZpbGUiOiJkaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwic291cmNlLW1hcC1zdXBwb3J0XCIpLCByZXF1aXJlKFwibm9kZS1mZXRjaFwiKSwgcmVxdWlyZShcImh0dHAtc3RhdHVzXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcInNvdXJjZS1tYXAtc3VwcG9ydFwiLCBcIm5vZGUtZmV0Y2hcIiwgXCJodHRwLXN0YXR1c1wiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJ3c3RyYWRlLWFwaVwiXSA9IGZhY3RvcnkocmVxdWlyZShcInNvdXJjZS1tYXAtc3VwcG9ydFwiKSwgcmVxdWlyZShcIm5vZGUtZmV0Y2hcIiksIHJlcXVpcmUoXCJodHRwLXN0YXR1c1wiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wid3N0cmFkZS1hcGlcIl0gPSBmYWN0b3J5KHJvb3RbXCJfXCJdLCByb290W1wiX1wiXSwgcm9vdFtcIl9cIl0pO1xufSkoZ2xvYmFsLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX185NDlfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNTQ1X18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzQ1N19fKSB7XG5yZXR1cm4gIiwiZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHtcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYXJyMltpXSA9IGFycltpXTtcbiAgfVxuXG4gIHJldHVybiBhcnIyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hcnJheUxpa2VUb0FycmF5OyIsImZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXJyYXlXaXRoSG9sZXM7IiwidmFyIGFycmF5TGlrZVRvQXJyYXkgPSByZXF1aXJlKFwiLi9hcnJheUxpa2VUb0FycmF5XCIpO1xuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnJheUxpa2VUb0FycmF5KGFycik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2FycmF5V2l0aG91dEhvbGVzOyIsImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcblxuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9hc3luY1RvR2VuZXJhdG9yOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NsYXNzQ2FsbENoZWNrOyIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY3JlYXRlQ2xhc3M7IiwiZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2RlZmluZVByb3BlcnR5OyIsImZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikge1xuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaXRlcmFibGVUb0FycmF5OyIsImZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwidW5kZWZpbmVkXCIgfHwgIShTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpKSByZXR1cm47XG4gIHZhciBfYXJyID0gW107XG4gIHZhciBfbiA9IHRydWU7XG4gIHZhciBfZCA9IGZhbHNlO1xuICB2YXIgX2UgPSB1bmRlZmluZWQ7XG5cbiAgdHJ5IHtcbiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XG4gICAgICBfYXJyLnB1c2goX3MudmFsdWUpO1xuXG4gICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBfZCA9IHRydWU7XG4gICAgX2UgPSBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgaWYgKF9kKSB0aHJvdyBfZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gX2Fycjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaXRlcmFibGVUb0FycmF5TGltaXQ7IiwiZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfbm9uSXRlcmFibGVSZXN0OyIsImZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX25vbkl0ZXJhYmxlU3ByZWFkOyIsInZhciBhcnJheVdpdGhIb2xlcyA9IHJlcXVpcmUoXCIuL2FycmF5V2l0aEhvbGVzXCIpO1xuXG52YXIgaXRlcmFibGVUb0FycmF5TGltaXQgPSByZXF1aXJlKFwiLi9pdGVyYWJsZVRvQXJyYXlMaW1pdFwiKTtcblxudmFyIHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5ID0gcmVxdWlyZShcIi4vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXlcIik7XG5cbnZhciBub25JdGVyYWJsZVJlc3QgPSByZXF1aXJlKFwiLi9ub25JdGVyYWJsZVJlc3RcIik7XG5cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkge1xuICByZXR1cm4gYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgbm9uSXRlcmFibGVSZXN0KCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3NsaWNlZFRvQXJyYXk7IiwidmFyIGFycmF5V2l0aG91dEhvbGVzID0gcmVxdWlyZShcIi4vYXJyYXlXaXRob3V0SG9sZXNcIik7XG5cbnZhciBpdGVyYWJsZVRvQXJyYXkgPSByZXF1aXJlKFwiLi9pdGVyYWJsZVRvQXJyYXlcIik7XG5cbnZhciB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSA9IHJlcXVpcmUoXCIuL3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5XCIpO1xuXG52YXIgbm9uSXRlcmFibGVTcHJlYWQgPSByZXF1aXJlKFwiLi9ub25JdGVyYWJsZVNwcmVhZFwiKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikge1xuICByZXR1cm4gYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IG5vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3RvQ29uc3VtYWJsZUFycmF5OyIsInZhciBhcnJheUxpa2VUb0FycmF5ID0gcmVxdWlyZShcIi4vYXJyYXlMaWtlVG9BcnJheVwiKTtcblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikge1xuICBpZiAoIW8pIHJldHVybjtcbiAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXk7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZVwiKTtcbiIsImltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi9hcGkvZW5kcG9pbnRzJztcbmltcG9ydCBoYW5kbGVSZXF1ZXN0IGZyb20gJy4vbmV0d29yay9odHRwcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICogUmV0cmlldmVzIGFsbCBhY2NvdW50IGlkcyBvcGVuIHVuZGVyIHRoaXMgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnQuXG4gICAqL1xuICBhbGw6IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkFDQ09VTlRfSURTLCB7fSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGZzYTogYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5zdGFydHNXaXRoKCd0ZnNhJykpLFxuICAgICAgcnJzcDogYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudC5zdGFydHNXaXRoKCdycnNwJykpLFxuICAgICAgY3J5cHRvOiBhY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXJ0c1dpdGgoJ25vbi1yZWdpc3RlcmVkLWNyeXB0bycpKSxcbiAgICAgIHBlcnNvbmFsOiBhY2NvdW50cy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnN0YXJ0c1dpdGgoJ25vbi1yZWdpc3RlcmVkJykgJiYgIWFjY291bnQuc3RhcnRzV2l0aCgnbm9uLXJlZ2lzdGVyZWQtY3J5cHRvJykpLFxuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIGRldGFpbHMgYWJvdXQgeW91ciBvcGVuIGFjY291bnRzLCBsaWtlIGFjY291bnQgdHlwZSwgYnV5aW5nIHBvd2VyLFxuICAgKiBjdXJyZW50IGJhbGFuY2UsIGFuZCBtb3JlLlxuICAgKi9cbiAgZGF0YTogYXN5bmMgKCkgPT4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTElTVF9BQ0NPVU5ULCB7fSksXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBzb21lIHN1cmZhY2UgaW5mb3JtYXRpb24gYWJvdXQgeW91IGxpa2UgeW91ciBuYW1lIGFuZCBlbWFpbCwgYWNjb3VudFxuICAgKiBzaWduYXR1cmVzLCBhbmQgb3RoZXIgbWV0YWRhdGEuXG4gICAqL1xuICBtZTogYXN5bmMgKCkgPT4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuTUUsIHt9KSxcblxuICAvKipcbiAgICogRGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgeW91IHRoYXQgeW91IHByb3ZpZGVkIG9uIHNpZ251cCwgbGlrZSByZXNpZGVudGlhbCBhbmRcbiAgICogbWFpbGluZyBhZGRyZXNzZXMsIGVtcGxveW1lbnQsIHBob25lIG51bWJlcnMsIGFuZCBzbyBvbi5cbiAgICovXG4gIHBlcnNvbjogYXN5bmMgKCkgPT4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUEVSU09OLCB7fSksXG5cbiAgLyoqXG4gICAqIFF1ZXJ5IHRoZSBoaXN0b3J5IG9mIHRoZSBhY2NvdW50IHdpdGhpbiBhIGNlcnRhaW4gdGltZSBpbnRlcnZhbC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBpbnRlcnZhbCBUaGUgdGltZSBpbnRlcnZhbCBmb3IgdGhlIGhpc3RvcnkgcXVlcnlcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gcXVlcnlcbiAgICovXG4gIGhpc3Rvcnk6IGFzeW5jIChpbnRlcnZhbCwgYWNjb3VudElkKSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5ISVNUT1JZX0FDQ09VTlQsIHtcbiAgICBpbnRlcnZhbCwgYWNjb3VudElkLFxuICB9KSxcblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSBtb3N0IHJlY2VudCAyMCBhY3Rpdml0aWVzIG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudC5cbiAgICovXG4gIGFjdGl2aXRpZXM6IGFzeW5jICgpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkFDVElWSVRJRVMsIHt9KSxcblxuICAvKipcbiAgICogUmV0cmlldmVzIGFsbCBiYW5rIGFjY291bnRzIGxpbmtlZCB0byB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnQuXG4gICAqL1xuICBnZXRCYW5rQWNjb3VudHM6IGFzeW5jICgpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkJBTktfQUNDT1VOVFMsIHt9KSxcblxuICAvKipcbiAgICogR3JhYiBhbGwgZGVwb3NpdCByZWNvcmRzIG9uIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudC5cbiAgICovXG4gIGRlcG9zaXRzOiBhc3luYyAoKSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5ERVBPU0lUUywge30pLFxuXG4gIC8qKlxuICAgKiBMaXN0cyBhbGwgcG9zaXRpb25zIGluIHRoZSBzcGVjaWZpZWQgdHJhZGluZyBhY2NvdW50IHVuZGVyIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqL1xuICBwb3NpdGlvbnM6IGFzeW5jIChhY2NvdW50SWQpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBPU0lUSU9OUywgeyBhY2NvdW50SWQgfSksXG59O1xuIiwiLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIG9yZGVycyByZXRyaWV2ZWQgYnkgdGhlIC9vcmRlcnMgQVBJLlxuZXhwb3J0IGNvbnN0IE9SREVSU19QRVJfUEFHRSA9IDIwO1xuXG5jb25zdCBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIgPSB7XG5cbiAgLy8gRGVmYXVsdCBmYWlsdXJlIG1ldGhvZCBmb3IgYWxsIGVuZHBvaW50IGNhbGxzXG4gIG9uRmFpbHVyZTogYXN5bmMgKHJlc3BvbnNlKSA9PiAoe1xuICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgIHJlYXNvbjogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICBib2R5OiBhd2FpdCByZXNwb25zZS5qc29uKCksXG4gIH0pLFxuXG4gIC8vIERlZmF1bHQgc3VjY2VzcyBtZXRob2QgZm9yIGFsbCBlbmRwb2ludCBjYWxsc1xuICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpLFxufTtcblxuY29uc3QgV2VhbHRoc2ltcGxlVHJhZGVFbmRwb2ludHMgPSB7XG5cbiAgLypcbiAgICogVGhlIExPR0lOIGVuZHBvaW50IGludGlhbGl6ZXMgYSBuZXcgc2Vzc2lvbiBmb3IgdGhlIGdpdmVuIGVtYWlsIGFuZFxuICAgKiBwYXNzd29yZCBzZXQuIElmIHRoZSBsb2dpbiBpcyBzdWNjZXNzZnVsLCBhY2Nlc3MgYW5kIHJlZnJlc2ggdG9rZW5zXG4gICAqIGFyZSByZXR1cm5lZCBpbiB0aGUgaGVhZGVycy4gVGhlIGFjY2VzcyB0b2tlbiBpcyB0aGUga2V5IGZvciBpbnZva2luZ1xuICAgKiBhbGwgb3RoZXIgZW5kIHBvaW50cy5cbiAgICovXG4gIExPR0lOOiB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYXV0aC9sb2dpbicsXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+ICh7XG4gICAgICB0b2tlbnM6IHtcbiAgICAgICAgYWNjZXNzOiByZXNwb25zZS5oZWFkZXJzLmdldCgneC1hY2Nlc3MtdG9rZW4nKSxcbiAgICAgICAgcmVmcmVzaDogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3gtcmVmcmVzaC10b2tlbicpLFxuICAgICAgICBleHBpcmVzOiBwYXJzZUludChyZXNwb25zZS5oZWFkZXJzLmdldCgneC1hY2Nlc3MtdG9rZW4tZXhwaXJlcycpLCAxMCksXG4gICAgICB9LFxuXG4gICAgICBhY2NvdW50SW5mbzogYXdhaXQgcmVzcG9uc2UuanNvbigpLFxuICAgIH0pLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHZW5lcmF0ZXMgYSBuZXcgc2V0IG9mIGFjY2VzcyBhbmQgcmVmcmVzaCB0b2tlbnMuXG4gICAqL1xuICBSRUZSRVNIOiB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYXV0aC9yZWZyZXNoJyxcbiAgICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4gKHtcbiAgICAgIHRva2Vuczoge1xuICAgICAgICBhY2Nlc3M6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LWFjY2Vzcy10b2tlbicpLFxuICAgICAgICByZWZyZXNoOiByZXNwb25zZS5oZWFkZXJzLmdldCgneC1yZWZyZXNoLXRva2VuJyksXG4gICAgICAgIGV4cGlyZXM6IHBhcnNlSW50KHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LWFjY2Vzcy10b2tlbi1leHBpcmVzJyksIDEwKSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEdyYWJzIGFsbCBhY2NvdW50IGlkcyBpbiB0aGlzIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgQUNDT1VOVF9JRFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvbGlzdCcsXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIENvbGxlY3QgYWxsIGFjY291bnQgaWRzIHJlZ2lzdGVyZWQgdW5kZXIgdGhpcyBXZWFsdGhzaW1wbGUgVHJhZGUgQWNjb3VudFxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cy5tYXAoKGFjY291bnQpID0+IGFjY291bnQuaWQpO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBMSVNUX0FDQ09VTlQgZW5kcG9pbnQgcmV0cmlldmVzIGdlbmVyYWwgbWV0YWRhdGEgb2YgdGhlXG4gICAqIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50LCBpbmNsdWRpbmcgYmFsYW5jZXMsIGFjY291bnQgaWQsIGFuZFxuICAgKiBtb3JlLlxuICAgKi9cbiAgTElTVF9BQ0NPVU5UOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2xpc3QnLFxuICAgIG9uU3VjY2VzczogYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cztcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBUaGUgTUUgZW5kcG9pbnQgcmV0cmlldmVzIHNvbWUgc3VyZmFjZSBpbmZvcm1hdGlvbiBhYm91dCB5b3UgbGlrZVxuICAgKiB5b3VyIG5hbWUgYW5kIGVtYWlsLlxuICAgKi9cbiAgTUU6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL21lJyxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFRoZSBQRVJTT04gZW5kcG9pbnQgcmV0cmlldmVzIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IHlvdSB0aGF0XG4gICAqIHlvdSBwcm92aWRlZCBvbiBzaWdudXAsIGxpa2UgcmVzaWRlbnRpYWwgYW5kIG1haWxpbmcgYWRkcmVzc2VzLFxuICAgKiBlbXBsb3ltZW50LCBwaG9uZSBudW1iZXJzLCBhbmQgc28gb24uXG4gICAqL1xuICBQRVJTT046IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL3BlcnNvbicsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBUaGUgSElTVE9SWV9BQ0NPVU5UIGVuZHBvaW50IHByb3ZpZGVzIGhpc3RvcmljYWwgc25hcHNob3RzIG9mIHRoZVxuICAgKiBXZWFsdGhzaW1wbGUgYWNjb3VudCBmb3IgYSBzcGVjaWZpZWQgdGltZWZyYW1lLlxuICAgKi9cbiAgSElTVE9SWV9BQ0NPVU5UOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9hY2NvdW50L2hpc3RvcnkvezB9P2FjY291bnRfaWQ9ezF9JyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnaW50ZXJ2YWwnLFxuICAgICAgMTogJ2FjY291bnRJZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIFByb3ZpZGVzIHRoZSBtb3N0IHJlY2VudCAyMCBhY3Rpdml0aWVzIChkZXBvc2l0cywgZGl2aWRlbmRzLCBvcmRlcnMsIGV0Yykgb24gdGhlIFdlYWx0aHNpbXBsZVxuICAgKiBUcmFkZSBhY2NvdW50LlxuICAgKi9cbiAgQUNUSVZJVElFUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYWNjb3VudC9hY3Rpdml0aWVzJyxcbiAgICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHM7XG4gICAgfSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogQWxsIGRlcG9zaXRzIHVuZGVyIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgREVQT1NJVFM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2RlcG9zaXRzJyxcbiAgICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHM7XG4gICAgfSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogQWxsIGxpbmtlZCBiYW5rIGFjY291bnRzIHVuZGVyIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICAgKi9cbiAgQkFOS19BQ0NPVU5UUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vYmFuay1hY2NvdW50cycsXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICByZXR1cm4gZGF0YS5yZXN1bHRzO1xuICAgIH0sXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIEN1cnJlbnQgV2VhbHRoc2ltcGxlIFRyYWRlIFVTRC9DQUQgZXhjaGFuZ2UgcmF0ZXNcbiAgICovXG4gIEVYQ0hBTkdFX1JBVEVTOiB7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICB1cmw6ICdodHRwczovL3RyYWRlLXNlcnZpY2Uud2VhbHRoc2ltcGxlLmNvbS9mb3JleCcsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHcmFicyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc2VjdXJpdHkgcmVzZW1ibGVkIGJ5IHRoZSB0aWNrZXIuXG4gICAqL1xuICBTRUNVUklUWToge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vc2VjdXJpdGllcz9xdWVyeT17MH0nLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICd0aWNrZXInLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBhc3luYyAocmVzcG9uc2UpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGlmIChkYXRhLnJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU2VjdXJpdHkgZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cztcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBGZXRjaGVzIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IGEgc2VjdXJpdHkgdXNpbmcgaXRzIHVuaXF1ZVxuICAgKiBzZWN1cml0eSBpZGVudGlmaWVyLiBNYXJrZXQgcXVvdGUsIGJpZCBhbmQgYXNrIHNpemUsIGFuZCBvdGhlciBpbmZvcm1hdGlvblxuICAgKiBhcmUgcmV0dXJuZWQuXG4gICAqL1xuICBFWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUzoge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vc2VjdXJpdGllcy97MH0nLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdpZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vblN1Y2Nlc3MsXG4gICAgb25GYWlsdXJlOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25GYWlsdXJlLFxuICB9LFxuXG4gIC8qXG4gICAqIExpc3RzIGFsbCBwb3NpdGlvbnMgdW5kZXIgYSB0cmFkaW5nIGFjY291bnQuXG4gICAqL1xuICBQT1NJVElPTlM6IHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL2FjY291bnQvcG9zaXRpb25zP2FjY291bnRfaWQ9ezB9JyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAwOiAnYWNjb3VudElkJyxcbiAgICB9LFxuICAgIG9uU3VjY2VzczogYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cztcbiAgICB9LFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBHcmFiIGEgcGFnZSBvZiBvcmRlcnMgKDIwIG9yZGVycykuXG4gICAqL1xuICBPUkRFUlNfQllfUEFHRToge1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vb3JkZXJzP29mZnNldD17MH0mYWNjb3VudF9pZD17MX0nLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIDA6ICdvZmZzZXQnLFxuICAgICAgMTogJ2FjY291bnRJZCcsXG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IGFzeW5jIChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsOiBkYXRhLnRvdGFsLFxuICAgICAgICBvcmRlcnM6IGRhdGEucmVzdWx0cyxcbiAgICAgIH07XG4gICAgfSxcbiAgICBvbkZhaWx1cmU6IGRlZmF1bHRFbmRwb2ludEJlaGF2aW91ci5vbkZhaWx1cmUsXG4gIH0sXG5cbiAgLypcbiAgICogQ2FuY2VscyBhIHNwZWNpZmljIG9yZGVyIGJ5IGl0cyBpZC5cbiAgICovXG4gIENBTkNFTF9PUkRFUjoge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgdXJsOiAnaHR0cHM6Ly90cmFkZS1zZXJ2aWNlLndlYWx0aHNpbXBsZS5jb20vb3JkZXJzL3swfScsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgMDogJ29yZGVySWQnLFxuICAgIH0sXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcblxuICAvKlxuICAgKiBQbGFjZXMgYW4gb3JkZXIgZm9yIGEgc2VjdXJpdHkuXG4gICAqL1xuICBQTEFDRV9PUkRFUjoge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogJ2h0dHBzOi8vdHJhZGUtc2VydmljZS53ZWFsdGhzaW1wbGUuY29tL29yZGVycycsXG4gICAgb25TdWNjZXNzOiBkZWZhdWx0RW5kcG9pbnRCZWhhdmlvdXIub25TdWNjZXNzLFxuICAgIG9uRmFpbHVyZTogZGVmYXVsdEVuZHBvaW50QmVoYXZpb3VyLm9uRmFpbHVyZSxcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFdlYWx0aHNpbXBsZVRyYWRlRW5kcG9pbnRzO1xuIiwiaW1wb3J0IGhhbmRsZVJlcXVlc3QgZnJvbSAnLi9uZXR3b3JrL2h0dHBzJztcbmltcG9ydCBlbmRwb2ludHMgZnJvbSAnLi9hcGkvZW5kcG9pbnRzJztcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8vIEF1dGhlbnRpY2F0aW9uIHRva2VucyB0byBhY2Nlc3MgcHJpdmlsZWdlZCBlbmRwb2ludHNcbiAgdG9rZW5zOiBudWxsLFxuXG4gIC8vIFRodW5rIGZvciByZXRyaWV2aW5nIHRoZSBvbmUtdGltZSBwYXNzd29yZC5cbiAgb3RwOiBudWxsLFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIHJ1biBvbiBhIGNlcnRhaW4gZXZlbnRcbiAgICogQHBhcmFtIHsqfSBldmVudCBUaGUgdHJpZ2dlciBmb3IgdGhlIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7Kn0gdGh1bmsgVGhlIGZ1bmN0aW9uIGJsb2NrIHRvIGV4ZWN1dGUgb24gZXZlbnQgdHJpZ2dlclxuICAgKi9cbiAgb24oZXZlbnQsIHRodW5rKSB7XG4gICAgdGhpc1tldmVudF0gPSB0aHVuaztcbiAgfSxcblxuICAvKipcbiAgICogQXR0ZW1wdHMgdG8gZXN0YWJsaXNoIGEgc2Vzc2lvbiBmb3IgdGhlIHByb3ZpZGVkIGVtYWlsIGFuZCBwYXNzd29yZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBlbWFpbCBlbWFpbGVkIHJlZ2lzdGVyZWQgYnkgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqIEBwYXJhbSB7Kn0gcGFzc3dvcmQgVGhlIHBhc3N3b3JkIG9mIHRoZSBhY2NvdW50XG4gICAqL1xuICBhc3luYyBsb2dpbihlbWFpbCwgcGFzc3dvcmQpIHtcbiAgICBsZXQgcmVzcG9uc2UgPSBudWxsO1xuXG4gICAgLypcbiAgICAgKiBJZiB3ZSBhcmUgZ2l2ZW4gYSBmdW5jdGlvbiBmb3Igb3RwLCB0aGVuIHdlIG11c3QgZmFpbCBhIGxvZyBpbiB0b1xuICAgICAqIHRyaWdnZXIgYW4gT1RQIGV2ZW50IHdpdGggV2VhbHRoc2ltcGxlIFRyYWRlLiBUaGlzIHdpbGwgYWxsb3cgdGhlIHVzZXJcbiAgICAgKiBvdHAgdGh1bmsgdG8gcmV0cmlldmUgdGhlIGNvZGUuXG4gICAgICpcbiAgICAgKiBJZiBhIGxpdGVyYWwgdmFsdWUgaXMgcHJvdmlkZWQgZm9yIG90cCwgaXQgbWVhbnMgdGhlIHVzZXIgaGFzIG1hbnVhbGx5XG4gICAgICogcHJvdmlkZWQgdXMgd2l0aCB0aGUgb3RwIGNvZGUuIFdlIGNhbiBza2lwIHRoaXMgbG9naW4gYXR0ZW1wdC5cbiAgICAgKi9cbiAgICBpZiAodHlwZW9mICh0aGlzLm90cCkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGF3YWl0IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkxPR0lOLCB7XG4gICAgICAgIGVtYWlsLFxuICAgICAgICBwYXNzd29yZCxcbiAgICAgIH0pLmNhdGNoKCgpID0+IHt9KTtcbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gbG9nIGluIGZvciByZWFsIHRoaXMgdGltZS5cbiAgICB0cnkge1xuICAgICAgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5MT0dJTiwge1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgIG90cDogdHlwZW9mICh0aGlzLm90cCkgPT09ICdmdW5jdGlvbicgPyBhd2FpdCB0aGlzLm90cCgpIDogdGhpcy5vdHAsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gd2UgbWlnaHQgaGF2ZSBmYWlsZWQgYmVjYXVzZSBPVFAgd2FzIG5vdCBwcm92aWRlZFxuICAgICAgaWYgKCF0aGlzLm90cCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09UUCBub3QgcHJvdmlkZWQhJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlZW1zIHRvIGJlIGluY29ycmVjdCBjcmVkZW50aWFscyBvciBPVFAuXG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICAvLyBDYXB0dXJlIHRoZSB0b2tlbnMgZm9yIGxhdGVyIHVzYWdlLlxuICAgIHRoaXMudG9rZW5zID0gcmVzcG9uc2UudG9rZW5zO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBuZXcgc2V0IG9mIGFjY2VzcyBhbmQgcmVmcmVzaCB0b2tlbnMuXG4gICAqL1xuICBhc3luYyByZWZyZXNoKCkge1xuICAgIC8vIERpc3Bvc2Ugb2YgdGhlIGV4aXN0aW5nIHRva2VuXG4gICAgdGhpcy50b2tlbnMuYWNjZXNzID0gbnVsbDtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuUkVGUkVTSCwge1xuICAgICAgcmVmcmVzaF90b2tlbjogdGhpcy50b2tlbnMucmVmcmVzaCxcbiAgICB9KTtcblxuICAgIHRoaXMudG9rZW5zID0gcmVzcG9uc2UudG9rZW5zO1xuICB9LFxufTtcbiIsIi8vIEhvbGRzIG9wdGlvbmFsIGZlYXR1cmVzIHRoYXQgaGF2ZSBiZWVuIGRpc2FibGVkLlxuY29uc3QgZGlzYWJsZWQgPSBbJ3NlY3VyaXRpZXNfY2FjaGUnXTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZ0VuYWJsZWQgPSAoZmVhdHVyZSkgPT4gIWRpc2FibGVkLmluY2x1ZGVzKGZlYXR1cmUpO1xuXG4vKipcbiAqIEVuYWJsZSBvciBkaXNhYmxlIGEgb3B0aW9uYWwgZmVhdHVyZSB3aXRoaW4gd3N0cmFkZS1hcGkuXG4gKlxuICogRXhhbXBsZXM6XG4gKiAtLS1cbiAqIGNvbmZpZygncGFuY2FrZXMnKVxuICogRW5hYmxlcyB0aGUgZmljdGl0aW91cyBwYW5jYWtlcyBmZWF0dXJlLlxuICpcbiAqIGNvbmZpZygnbm9fcGFuY2FrZXMnKVxuICogRGlzYWJsZXMgdGhlIGZpY3RpdGlvdXMgcGFuY2FrZXMgZmVhdHVyZS5cbiAqXG4gKiBAcGFyYW0geyp9IGZlYXR1cmUgVGhlIHN0cmluZyBpZGVudGlmaWVyIGZvciB0aGUgZmVhdHVyZSwgc3RhcnRpbmcgd2l0aCBcIm5vX1wiIGlmXG4gKiAgICAgICAgICAgICAgICAgICAgeW91IHdpc2ggdG8gZGlzYWJsZSBpdC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29uZmlnKGZlYXR1cmUpIHtcbiAgaWYgKGZlYXR1cmU/LnN0YXJ0c1dpdGgoJ25vXycpKSB7XG4gICAgY29uc3QgY3V0ID0gZmVhdHVyZS5zdWJzdHJpbmcoZmVhdHVyZS5pbmRleE9mKCdfJykgKyAxKTtcblxuICAgIC8vIFdlIHdpbGwgb25seSBhcHBlbmQgdGhpcyBpZiBpdCBpc24ndCBhbHJlYWR5IGluIHRoZXJlLlxuICAgIGlmIChjb25maWdFbmFibGVkKGN1dCkpIHtcbiAgICAgIGRpc2FibGVkLnB1c2goY3V0KTtcbiAgICB9XG5cbiAgLy8gT25seSBkZWxldGUgdGhlIGZlYXR1cmUgaWYgaXQncyBhbHJlYWR5IGRpc2FibGVkLlxuICB9IGVsc2UgaWYgKCFjb25maWdFbmFibGVkKGZlYXR1cmUpKSB7XG4gICAgZGlzYWJsZWQuc3BsaWNlKGRpc2FibGVkLmluZGV4T2YoZmVhdHVyZSksIDEpO1xuICB9XG59XG4iLCIvLyBFeGNoYW5nZXMgc3VwcG9ydGVkIGJ5IFdlYWx0aHNpbXBsZSBUcmFkZVxuLy8gJ0NDJyBpcyBub3QgYW4gZXhjaGFuZ2U7IGl0IHN0YW5kcyBmb3IgQ3J5cHRvIGN1cnJlbmN5IGFuZFxuLy8gaXQgYWxsb3dzIHVzIHRvIGRpc3Rpbmd1aXNoIGl0IGZyb20gY29udmVudGlvbmFsIHNlY3VyaXRpZXMuXG5jb25zdCBleGNoYW5nZXMgPSBbJ05BU0RBUScsICdOWVNFJywgJ1RTWCcsICdUU1gtVicsICdORU8nLCAnQ0MnXTtcblxuLyoqXG4gKiBUaWNrZXIgcHJvdmlkZXMgYSBsb2dpY2FsIGVuY2Fwc3VsYXRpb24gZm9yIHRoZSBhbGxvd2VkIGZvcm1zXG4gKiBvZiBhIHNlY3VyaXR5IHRpY2tlciB3aXRoaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAqXG4gKiBJdCBwcm92aWRlcyB2YWxpZGF0aW9uIG9mIHRoZSBmb3JtYXQgb2YgdGhlIHRpY2tlciwgYW5kIHRoZVxuICogdmFsdWUgb2YgdGhlIGV4Y2hhbmdlLCBpZiBwcm92aWRlZC5cbiAqXG4gKiBUaWNrZXJzIG1heSBiZSBzcGVjaWZpZWQgYXMgdHdvIGRhdGEgdHlwZXM6XG4gKlxuICogLSBzdHJpbmc6IFRoZSB0aWNrZXIgbWF5IGJlIGEgc2ltcGxlIHN0cmluZyBjb250YWluaW5nIHRoZSBzeW1ib2wsIG9yIGEgY29tYmluYXRpb24gb2ZcbiAqIHRoZSBzeW1ib2wgYW5kIGV4Y2hhbmdlIHNlcGFyYXRlZCBieSBhIGNvbG9uLlxuICogLSBvYmplY3Q6IFRoZSB0aWNrZXIgbWF5IGJlIGFuIG9iamVjdCB3aXRoIHN5bWJvbCwgZXhjaGFuZ2UsIG9yIGlkIHByb3BlcnRpZXMuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogXCJBQVBMXCJcbiAqIFwiVUJFUjpOWVNFXCJcbiAqIHsgc3ltYm9sOiBcIkFBUExcIiB9XG4gKiB7IHN5bWJvbDogXCJVQkVSXCIsIGV4Y2hhbmdlOiBcIk5ZU0VcIiB9XG4gKiB7IGlkOiBcInNlYy1zLTc2YTcxNTUyNDJlODQ3Nzg4MGNiYjQzMjY5MjM1Y2I2XCIgfVxuICovXG5jbGFzcyBUaWNrZXIge1xuICAvKipcbiAgICogQ29uc3RydWN0cyB0aGUgdGlja2VyIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgc2VjdXJpdHkgdGlja2VyIHZhbHVlLCBwcm92aWRlZCBhcyBhIHN0cmluZyBvciBhbiBvYmplY3Qgd2l0aCBzeW1ib2wsXG4gICAqIGV4Y2hhbmdlLCBvciBpZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgdGhpcy5zeW1ib2wgPSBudWxsO1xuICAgIHRoaXMuZXhjaGFuZ2UgPSBudWxsO1xuICAgIHRoaXMuaWQgPSBudWxsO1xuICAgIHRoaXMuY3J5cHRvID0gZmFsc2U7XG5cbiAgICBpZiAodHlwZW9mICh2YWx1ZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBFbXB0eSB0aWNrZXJzIGFyZSBub3QgYWxsb3dlZFxuICAgICAgaWYgKHZhbHVlID09PSAnJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VtcHR5IHRpY2tlcicpO1xuICAgICAgfVxuXG4gICAgICBbdGhpcy5zeW1ib2wsIHRoaXMuZXhjaGFuZ2VdID0gdmFsdWUuc3BsaXQoJzonKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gWW91IG5lZWQgYXQgbGVhc3QgYSBzeW1ib2wgb3IgaWQgdG8gZm9ybSBhIHRpY2tlci5cbiAgICAgIGlmICghdmFsdWUuc3ltYm9sICYmICF2YWx1ZS5pZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGlja2VyICcke3ZhbHVlfSdgKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zeW1ib2wgPSB2YWx1ZS5zeW1ib2wgfHwgbnVsbDtcbiAgICAgIHRoaXMuZXhjaGFuZ2UgPSB2YWx1ZS5leGNoYW5nZSB8fCBudWxsO1xuICAgICAgdGhpcy5pZCA9IHZhbHVlLmlkIHx8IG51bGw7XG4gICAgfVxuXG4gICAgLy8gR3VhcmFudGVlIHRoYXQgdGhlIGV4Y2hhbmdlIGlzIHZhbGlkIGlmIG5vdCBudWxsXG4gICAgaWYgKHRoaXMuZXhjaGFuZ2UgJiYgIWV4Y2hhbmdlcy5pbmNsdWRlcyh0aGlzLmV4Y2hhbmdlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGV4Y2hhbmdlICcke3RoaXMuZXhjaGFuZ2V9JyFgKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGNyeXB0byBwcm9wZXJ0eSB0byB0cnVlIHRvIHRyZWF0IHRoaXMgc2VjdXJpdHkgYXMgY3J5cHRvY3VycmVuY3lcbiAgICBpZiAodGhpcy5leGNoYW5nZSA9PT0gJ0NDJyB8fCB0aGlzLmlkPy5zdGFydHNXaXRoKCdzZWMteicpKSB7XG4gICAgICB0aGlzLmNyeXB0byA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gV2VhbHRoc2ltcGxlIFRyYWRlIGRvZXNuJ3QgaGF2ZSBhIHNob3J0IGV4Y2hhbmdlIGlkICgnTkVPJykgZm9yXG4gICAgLy8gQUVRVUlUQVMgTkVPIEVYQ0hBTkdFIGZvciBzb21lIHJlYXNvbi4uLlxuICAgIC8vIFdlIGhhdmUgdG8gbWFwIGl0IHRvIHRoZSBmdWxsIG5hbWUgZm9yIGNvbXBhcmlzb25zIHRvIHdvcmsuXG4gICAgaWYgKHRoaXMuZXhjaGFuZ2UgPT09ICdORU8nKSB7XG4gICAgICB0aGlzLmV4Y2hhbmdlID0gJ0FFUVVJVEFTIE5FTyBFWENIQU5HRSc7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZHVjZXMgdGhlIHRpY2tlciBvYmplY3QgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXG4gICAqL1xuICBmb3JtYXQoKSB7XG4gICAgaWYgKHRoaXMuaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmlkO1xuICAgIH1cblxuICAgIC8vIFdlIG11c3QgcmV0cmFuc2xhdGUgdGhlIGZ1bGwgbmFtZSBvZiB0aGUgTkVPIGV4Y2hhbmdlIGJhY2sgdG8gTkVPXG4gICAgaWYgKHRoaXMuZXhjaGFuZ2UgPT09ICdBRVFVSVRBUyBORU8gRVhDSEFOR0UnKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5zeW1ib2x9Ok5FT2A7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMuc3ltYm9sfSR7dGhpcy5leGNoYW5nZSA/IGA6JHt0aGlzLmV4Y2hhbmdlfWAgOiAnJ31gO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXBhcmVzIHN5bWJvbCBvciBpZCB3aXRoIGFub3RoZXIgdGlja2VyLiBUaGlzIGlzIHdlYWsgYmVjYXVzZVxuICAgKiBleGNoYW5nZSBpcyBub3QgY29tcGFyZWQgaGVyZSwgYWxsb3dpbmcgZm9yIGZhbHNlIHBvc2l0aXZlc1xuICAgKiBvZiBzeW1ib2xzIG9uIGRpZmZlcmVudCBleGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGlja2VyIHRvIGNvbXBhcmUgdXMgd2l0aFxuICAgKi9cbiAgd2Vha0VxdWFscyhvdGhlcikge1xuICAgIGlmICh0aGlzLmlkICYmIHRoaXMuaWQgPT09IG90aGVyLmlkKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zeW1ib2wgJiYgdGhpcy5zeW1ib2wgPT09IG90aGVyLnN5bWJvbCAmJiB0aGlzLmNyeXB0byA9PT0gb3RoZXIuY3J5cHRvKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlja2VyO1xuIiwiaW1wb3J0IEFQSUNhY2hlIGZyb20gJy4uL2NvcmUvY2FjaGUnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuLi9jb3JlL3RpY2tlcic7XG5cbmNvbnN0IGNhY2hlID0gbmV3IEFQSUNhY2hlKDEwKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICAgKiBRdWVyeSB0aGUgY2FjaGUgZm9yIHRoZSBzZWN1cml0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gc2VjdXJpdHlcbiAgICAgKi9cbiAgZ2V0KHNlY3VyaXR5KSB7XG4gICAgLy8gTXVzdCBkaWdlc3QgdGhlIHNlY3VyaXR5IGludG8gdGhlIHN0YW5kYXJkIGZvcm1hdFxuICAgIGNvbnN0IHJlc3VsdCA9IGNhY2hlLmdldChuZXcgVGlja2VyKHNlY3VyaXR5KS5mb3JtYXQoKSk7XG5cbiAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sXG5cbiAgLyoqXG4gICAgICogUmVtZW1iZXIgdGhlIHNlY3VyaXR5IGZvciBhIGZ1dHVyZSBxdWljayByZXRyaWV2YWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IGtleVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICAgKi9cbiAgaW5zZXJ0KGtleSwgdmFsdWUpIHtcbiAgICBjYWNoZS5pbnNlcnQobmV3IFRpY2tlcihrZXkpLmZvcm1hdCgpLCB2YWx1ZSk7XG4gIH0sXG59O1xuIiwiLypcbiAqIEFQSUNhY2hlIGlzIGFuIGludGVybmFsIGVmZm9ydCB0byBtaW5pbWl6ZSB1bm5lY2Vzc2FyeSBBUEkgY2FsbHMgd2hlcmVcbiAqIHBvc3NpYmxlLiBBIHNwZWNpZmljIHVzZWNhc2Ugd2hlcmUgYSBjYWNoZSBpcyB1c2VmdWwgaXMgZmlndXJpbmcgb3V0IHRoZVxuICogZXhjaGFuZ2UgYSBzZWN1cml0eSBiZWxvbmdzIHRvLiBBIGNhY2hlIHdvdWxkIGFsbG93IHVzIHRvIG1lbW9yaXplXG4gKiB0aGlzIHN0YXRpYyBkYXRhIGZvciBhIHBlcmlvZCBvZiB0aW1lIHRvIGF2b2lkIHVubmVjZXNzYXJ5IEFQSSBjYWxscy5cbiAqXG4gKiBUaGUgY2xhc3MgZW5jYXBzdWxhdGVzIHRoZSBmb2xsb3dpbmcgY2FjaGUgYmVoYXZpb3VyOlxuICogLSBBIG1heGltdW0gZW50cmllcyBwcm92aWRlZCBhcyBhIGNvbnN0cnVjdG9yIGFyZ3VtZW50XG4gKiAtIEZpcnN0IGluLCBGaXJzdCBvdXQgKEZJRk8pIG1vZGVsXG4gKlxuICogVGhlIGludGVybmVsIGRhdGEgc3RydWN0dXJlIGlzIGEgSGFzaFNldCwgc28gbG9va3VwIHRpbWUgY29zdCBpcyBmYWlybHlcbiAqIG1pbmltYWwuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFQSUNhY2hlIHtcbiAgY29uc3RydWN0b3Ioc2l6ZSkge1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIFN0b3JlIHRoZSBrZXktdmFsdWUgcGFpciBpbnRvIHRoaXMgY2FjaGUuIFRoZSBvbGRlc3QgZW50cnkgaXMgZXZpY3RlZCBpZlxuICAgICAqIHdlJ3JlIG91dCBvZiBzcGFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0ga2V5XG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqL1xuICBpbnNlcnQoa2V5LCB2YWx1ZSkge1xuICAgIGlmICh0aGlzLmNhY2hlLnNpemUgPj0gdGhpcy5zaXplKSB7XG4gICAgICB0aGlzLmNhY2hlLmRlbGV0ZSh0aGlzLmNhY2hlLmtleXMoKS5uZXh0KCkudmFsdWUpO1xuICAgIH1cblxuICAgIHRoaXMuY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAgICogUmV0cmlldmUgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCB0aGUga2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHsqfSBrZXlcbiAgICAgKi9cbiAgZ2V0KGtleSkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChrZXkpO1xuICB9XG59XG4iLCJpbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4vYXBpL2VuZHBvaW50cyc7XG5pbXBvcnQgaGFuZGxlUmVxdWVzdCBmcm9tICcuL25ldHdvcmsvaHR0cHMnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuL2NvcmUvdGlja2VyJztcbmltcG9ydCB7IGNvbmZpZ0VuYWJsZWQgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgY2FjaGUgZnJvbSAnLi9vcHRpb25hbC9zZWN1cml0aWVzLWNhY2hlJztcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8qKlxuICAgKiBBIHNuYXBzaG90IG9mIHRoZSBjdXJyZW50IFVTRC9DQUQgZXhjaGFuZ2UgcmF0ZXMgb24gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZVxuICAgKiBwbGF0Zm9ybS5cbiAgICovXG4gIGV4Y2hhbmdlUmF0ZXM6IGFzeW5jICgpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkVYQ0hBTkdFX1JBVEVTLCB7fSksXG5cbiAgLyoqXG4gICAqIEluZm9ybWF0aW9uIGFib3V0IGEgc2VjdXJpdHkgb24gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBQbGF0Zm9ybS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSB1c2VyVGlja2VyIFRoZSBzZWN1cml0eSBpZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGV4dGVuc2l2ZSBQdWxscyBhIG1vcmUgZGV0YWlsZWQgcmVwb3J0IG9mIHRoZSBzZWN1cml0eSB1c2luZyB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgL3NlY3VyaXRpZXMve2lkfSBBUElcbiAgICovXG4gIGdldFNlY3VyaXR5OiBhc3luYyAodXNlclRpY2tlciwgZXh0ZW5zaXZlKSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XG5cbiAgICAvLyBSdW4gc29tZSB2YWxpZGF0aW9uIG9uIHRoZSB0aWNrZXJcbiAgICBjb25zdCB0aWNrZXIgPSBuZXcgVGlja2VyKHVzZXJUaWNrZXIpO1xuXG4gICAgaWYgKCFleHRlbnNpdmUgJiYgY29uZmlnRW5hYmxlZCgnc2VjdXJpdGllc19jYWNoZScpKSB7XG4gICAgICByZXN1bHQgPSBjYWNoZS5nZXQodGlja2VyKTtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGlja2VyLmlkKSB7XG4gICAgICAvLyBXZSB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGV4dGVuc2l2ZSBkZXRhaWxzIEFQSSBzaW5jZSB3ZSBoYXZlIHRoZSB1bmlxdWUgaWQuXG4gICAgICByZXN1bHQgPSBhd2FpdCBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5FWFRFTlNJVkVfU0VDVVJJVFlfREVUQUlMUywgeyBpZDogdGlja2VyLmlkIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSBhd2FpdCBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5TRUNVUklUWSwgeyB0aWNrZXI6IHRpY2tlci5zeW1ib2wgfSk7XG4gICAgICByZXN1bHQgPSByZXN1bHQuZmlsdGVyKChzZWN1cml0eSkgPT4gc2VjdXJpdHkuc3RvY2suc3ltYm9sID09PSB0aWNrZXIuc3ltYm9sKTtcblxuICAgICAgaWYgKHRpY2tlci5jcnlwdG8pIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoc2VjdXJpdHkpID0+IHNlY3VyaXR5LnNlY3VyaXR5X3R5cGUgPT09ICdjcnlwdG9jdXJyZW5jeScpO1xuICAgICAgfSBlbHNlIGlmICh0aWNrZXIuZXhjaGFuZ2UpIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmZpbHRlcigoc2VjdXJpdHkpID0+IHNlY3VyaXR5LnN0b2NrLnByaW1hcnlfZXhjaGFuZ2UgPT09IHRpY2tlci5leGNoYW5nZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011bHRpcGxlIHNlY3VyaXRpZXMgbWF0Y2hlZCBxdWVyeS4nKTtcbiAgICAgIH0gaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzZWN1cml0aWVzIG1hdGNoZWQgcXVlcnkuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnQgcmVzdWx0IGZyb20gYSBzaW5nbGV0b24gbGlzdCB0byBpdHMgcmF3IGVudHJ5XG4gICAgICBbcmVzdWx0XSA9IHJlc3VsdDtcblxuICAgICAgaWYgKGV4dGVuc2l2ZSkge1xuICAgICAgICAvLyBUaGUgY2FsbGVyIGhhcyBvcHRlZCB0byByZWNlaXZlIHRoZSBleHRlbnNpdmUgZGV0YWlscyBhYm91dCB0aGUgc2VjdXJpdHkuXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkVYVEVOU0lWRV9TRUNVUklUWV9ERVRBSUxTLCB7IGlkOiByZXN1bHQuaWQgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZ0VuYWJsZWQoJ3NlY3VyaXRpZXNfY2FjaGUnKSAmJiBjYWNoZS5nZXQodGlja2VyKSA9PT0gbnVsbCkge1xuICAgICAgY2FjaGUuaW5zZXJ0KHRpY2tlciwgcmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxufTtcbiIsImltcG9ydCB7IEhlYWRlcnMgfSBmcm9tICdub2RlLWZldGNoJztcblxuY29uc3QgY3VzdG9tSGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvKipcbiAgICogQXBwZW5kcyBhIGhlYWRlciBuYW1lLXZhbHVlIHBhaXIgdG8gYWxsIHJlcXVlc3RzLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG5hbWUgSGVhZGVyIGtleVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIEhlYWRlciB2YWx1ZVxuICAgKi9cbiAgYWRkOiAobmFtZSwgdmFsdWUpID0+IGN1c3RvbUhlYWRlcnMuYXBwZW5kKG5hbWUsIHZhbHVlKSxcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGN1c3RvbSBoZWFkZXIgZnJvbSBhbGwgcmVxdWVzdHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbmFtZSBIZWFkZXIga2V5XG4gICAqL1xuICByZW1vdmU6IChuYW1lKSA9PiBjdXN0b21IZWFkZXJzLmRlbGV0ZShuYW1lKSxcblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBjdXN0b20gaGVhZGVycy5cbiAgICovXG4gIGNsZWFyOiAoKSA9PiBbLi4uY3VzdG9tSGVhZGVyc10uZm9yRWFjaCgoaGVhZGVyKSA9PiBjdXN0b21IZWFkZXJzLmRlbGV0ZShoZWFkZXJbMF0pKSxcblxuICAvKipcbiAgICogUHJvZHVjZXMgYSBsaXN0IG9mIGN1c3RvbSBoZWFkZXJzLlxuICAgKi9cbiAgdmFsdWVzOiAoKSA9PiBbLi4uY3VzdG9tSGVhZGVyc10sXG59O1xuIiwicmVxdWlyZSgnc291cmNlLW1hcC1zdXBwb3J0JykuaW5zdGFsbCgpO1xuXG5jb25zdCBhdXRoID0gcmVxdWlyZSgnLi9hdXRoJykuZGVmYXVsdDtcbmNvbnN0IGhlYWRlcnMgPSByZXF1aXJlKCcuL2hlYWRlcnMnKS5kZWZhdWx0O1xuY29uc3QgYWNjb3VudHMgPSByZXF1aXJlKCcuL2FjY291bnRzJykuZGVmYXVsdDtcbmNvbnN0IG9yZGVycyA9IHJlcXVpcmUoJy4vb3JkZXJzJykuZGVmYXVsdDtcbmNvbnN0IGRhdGEgPSByZXF1aXJlKCcuL2RhdGEnKS5kZWZhdWx0O1xuY29uc3QgcXVvdGVzID0gcmVxdWlyZSgnLi9xdW90ZXMnKS5kZWZhdWx0O1xuY29uc3QgY29uZmlnID0gcmVxdWlyZSgnLi9jb25maWcnKS5kZWZhdWx0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXV0aCxcbiAgaGVhZGVycyxcbiAgYWNjb3VudHMsXG4gIG9yZGVycyxcbiAgcXVvdGVzLFxuICBkYXRhLFxuICBjb25maWcsXG59O1xuIiwiLyoqXG4gKiBDb21wdXRlcyB0aGUgY3VycmVudCB0aW1lIGluIGVwb2NoIHNlY29uZHMuXG4gKi9cbmNvbnN0IGVwb2NoU2Vjb25kcyA9ICgpID0+IHBhcnNlSW50KERhdGUubm93KCkgLyAxMDAwLCAxMCk7XG5leHBvcnQgZGVmYXVsdCBlcG9jaFNlY29uZHM7XG4iLCJpbXBvcnQgZXBvY2hTZWNvbmRzIGZyb20gJy4uL2hlbHBlcnMvdGltZSc7XG5pbXBvcnQgYXV0aCBmcm9tICcuLi9hdXRoJztcblxuLypcbiAqIFZhbGlkYXRlIHRoZSBhdXRoIHRva2VuIGZvciBleHBpcnksIGF0dGVtcHRpbmcgdG8gcmVmcmVzaCBpdFxuICogaWYgd2UgaGF2ZSB0aGUgcmVmcmVzaCB0b2tlbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaW1wbGljaXRUb2tlblJlZnJlc2goKSB7XG4gIGlmIChlcG9jaFNlY29uZHMoKSA+PSBhdXRoLnRva2Vucz8uZXhwaXJlcykge1xuICAgIGlmIChhdXRoLnRva2Vucz8ucmVmcmVzaCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gTGV0J3MgaW1wbGljaXRseSByZWZyZXNoIHRoZSBhY2Nlc3MgdG9rZW4gdXNpbmcgdGhlIHJlZnJlc2ggdG9rZW4uXG4gICAgICAgIGF3YWl0IGF1dGgucmVmcmVzaCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gVGhlIHJlZnJlc2ggdG9rZW4gaXMgbm90IHZhbGlkLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byByZWZyZXNoIGV4cGlyZWQgdG9rZW46ICR7ZXJyb3J9YCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdlIGFyZSBmb3JjZWQgdG8gcmVqZWN0IGFzIG91ciBhY2Nlc3MgdG9rZW4gaGFzIGV4cGlyZWQgYW5kIHdlXG4gICAgICAvLyBkbyBub3QgaGF2ZSBhIHJlZnJlc2ggdG9rZW4uXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjY2VzcyB0b2tlbiBleHBpcmVkJyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgZmV0Y2gsIHsgSGVhZGVycyB9IGZyb20gJ25vZGUtZmV0Y2gnO1xuaW1wb3J0IHN0YXR1cyBmcm9tICdodHRwLXN0YXR1cyc7XG5pbXBvcnQgY3VzdG9tSGVhZGVycyBmcm9tICcuLi9oZWFkZXJzJztcbmltcG9ydCBhdXRoIGZyb20gJy4uL2F1dGgnO1xuaW1wb3J0IHsgY29uZmlnRW5hYmxlZCB9IGZyb20gJy4uL2NvbmZpZyc7XG5pbXBvcnQgaW1wbGljaXRUb2tlblJlZnJlc2ggZnJvbSAnLi4vb3B0aW9uYWwvaW1wbGljaXQtdG9rZW4tcmVmcmVzaCc7XG5cbi8qXG4gKiBDb21wbGV0ZSB0aGUgVVJMIGJ5IGZpbGxpbmcgdGhlIHBhcmFtZXRlciBwbGFjZWhvbGRlcnMgd2l0aCB0aGVcbiAqIGRhdGEgYXJndW1lbnRzLlxuICovXG5mdW5jdGlvbiBmaW5hbGl6ZVJlcXVlc3QoZW5kcG9pbnQsIGRhdGEpIHtcbiAgLy8gTWFrZSBhIGNvcHkgc28gd2UgZG9uJ3QgbW9kaWZ5IHRoZSBvcmlnaW5hbCBvbmUuXG4gIGNvbnN0IHBhcmFtcyA9IHsgLi4uZGF0YSB9O1xuICBsZXQgeyB1cmwgfSA9IGVuZHBvaW50O1xuXG4gIC8vIE5vIG5lZWQgdG8gZG8gYW55dGhpbmcgaWYgdGhlIFVSTCBpcyBzdGF0aWMgKG5vIHBhcmFtZXRlcnMpXG4gIGlmIChlbmRwb2ludC5wYXJhbWV0ZXJzKSB7XG4gICAgLy8gU3dhcCBhbGwgdGhlIHBhcmFtZXRlciBwbGFjZWhvbGRlcnMgd2l0aCB0aGUgYXJndW1lbnRzLlxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBPYmplY3Qua2V5cyhlbmRwb2ludC5wYXJhbWV0ZXJzKS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGNvbnN0IHBhcmFtZXRlck5hbWUgPSBlbmRwb2ludC5wYXJhbWV0ZXJzW2luZGV4XTtcblxuICAgICAgLy8gd2UgaGF2ZSB0byBleHBsaWNpdGx5IGNoZWNrIGZvciBudWxsIGFuZCB1bmRlZmluZWQgc2luY2UgcGFyYW1ldGVyXG4gICAgICAvLyB2YWx1ZXMgbWlnaHQgYmUgMC5cbiAgICAgIGlmIChwYXJhbXNbcGFyYW1ldGVyTmFtZV0gPT09IG51bGwgfHwgcGFyYW1zW3BhcmFtZXRlck5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVUkwgUGF0aCBwYXJhbWV0ZXIgJyR7cGFyYW1ldGVyTmFtZX0nIG1pc3NpbmchYCk7XG4gICAgICB9XG5cbiAgICAgIHVybCA9IHVybC5yZXBsYWNlKGB7JHtpbmRleH19YCwgcGFyYW1zW2VuZHBvaW50LnBhcmFtZXRlcnNbaW5kZXhdXSk7XG5cbiAgICAgIC8vIE11c3QgcmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIHBheWxvYWQgYXMgaXQgaGFzIGJlZW4gY29uc3VtZWQgYnkgdGhlIFVSTFxuICAgICAgZGVsZXRlIHBhcmFtc1tlbmRwb2ludC5wYXJhbWV0ZXJzW2luZGV4XV07XG4gICAgfVxuICB9XG5cbiAgLy8gTm8gcGF5bG9hZCBhdHRhY2hlZCB0byBHRVQvREVMRVRFIHJlcXVlc3RzXG4gIGlmIChbJ0dFVCcsICdIRUFEJ10uaW5jbHVkZXMoZW5kcG9pbnQubWV0aG9kKSkge1xuICAgIHJldHVybiB7IHVybCwgcGF5bG9hZDogdW5kZWZpbmVkIH07XG4gIH1cblxuICByZXR1cm4geyB1cmwsIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KHBhcmFtcykgfTtcbn1cblxuLypcbiAqIEltcGxlbWVudHMgdGhlIG5ldHdvcmsgbGV2ZWwgcHJvdG9jb2wgZm9yIHRhbGtpbmcgdG8gdGhlXG4gKiBXZWFsdGhzaW1wbGUgVHJhZGUgSFRUUFMgQVBJLlxuICovXG5hc3luYyBmdW5jdGlvbiB0YWxrKGVuZHBvaW50LCBkYXRhKSB7XG4gIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICBoZWFkZXJzLmFwcGVuZCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICBpZiAoYXV0aC50b2tlbnM/LmFjY2Vzcykge1xuICAgIC8vIFdlIHdvbid0IGF0dGVtcHQgdG8gaW1wbGljaXRseSByZWZyZXNoIGlmIHRoZSB1c2VyIGhhcyByZXF1ZXN0ZWRcbiAgICAvLyB0aGlzLlxuICAgIGlmIChjb25maWdFbmFibGVkKCdpbXBsaWNpdF90b2tlbl9yZWZyZXNoJykpIHtcbiAgICAgIGF3YWl0IGltcGxpY2l0VG9rZW5SZWZyZXNoKCk7XG4gICAgfVxuXG4gICAgaGVhZGVycy5hcHBlbmQoJ0F1dGhvcml6YXRpb24nLCBhdXRoLnRva2Vucy5hY2Nlc3MpO1xuICB9XG5cbiAgLy8gQXBwbHkgYWxsIGN1c3RvbSBoZWFkZXJzXG4gIGN1c3RvbUhlYWRlcnMudmFsdWVzKCkuZm9yRWFjaCgoaGVhZGVyKSA9PiBoZWFkZXJzLmFwcGVuZCguLi5oZWFkZXIpKTtcblxuICAvLyBmaWxsIHBhdGggYW5kIHF1ZXJ5IHBhcmFtZXRlcnMgaW4gdGhlIFVSTFxuICBjb25zdCB7IHVybCwgcGF5bG9hZCB9ID0gZmluYWxpemVSZXF1ZXN0KGVuZHBvaW50LCBkYXRhKTtcblxuICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgYm9keTogcGF5bG9hZCxcbiAgICBtZXRob2Q6IGVuZHBvaW50Lm1ldGhvZCxcbiAgICBoZWFkZXJzLFxuICB9KTtcbn1cblxuLypcbiAqIEZ1bGZpbGwgdGhlIGVuZHBvaW50IHJlcXVlc3QgZ2l2ZW4gdGhlIGVuZHBvaW50IGNvbmZpZ3VyYXRpb24sIG9wdGlvbmFsXG4gKiBkYXRhLlxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50LCBkYXRhKSB7XG4gIC8vIFN1Ym1pdCB0aGUgSFRUUCByZXF1ZXN0IHRvIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgU2VydmVyc1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRhbGsoZW5kcG9pbnQsIGRhdGEpO1xuXG4gIGlmIChbc3RhdHVzLk9LLCBzdGF0dXMuQ1JFQVRFRF0uaW5jbHVkZXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJldHVybiBlbmRwb2ludC5vblN1Y2Nlc3MocmVzcG9uc2UpO1xuICB9XG5cbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGF3YWl0IGVuZHBvaW50Lm9uRmFpbHVyZShyZXNwb25zZSkpO1xufVxuIiwiaW1wb3J0IGVuZHBvaW50cywgeyBPUkRFUlNfUEVSX1BBR0UgfSBmcm9tICcuLi9hcGkvZW5kcG9pbnRzJztcbmltcG9ydCBoYW5kbGVSZXF1ZXN0IGZyb20gJy4uL25ldHdvcmsvaHR0cHMnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuLi9jb3JlL3RpY2tlcic7XG5cbi8qKlxuICogQ29sbGVjdHMgb3JkZXJzIChmaWxsZWQsIHBlbmRpbmcsIGNhbmNlbGxlZCkgZm9yIHRoZSBwcm92aWRlZCBwYWdlIGFuZFxuICogYWNjb3VudCBpZC5cbiAqXG4gKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAqIEBwYXJhbSB7Kn0gcGFnZU51bSBUaGUgb3JkZXJzIHBhZ2UgaW5kZXggdG8gc2VlayB0b1xuICovXG5hc3luYyBmdW5jdGlvbiBwYWdlKGFjY291bnRJZCwgcGFnZU51bSkge1xuICByZXR1cm4gaGFuZGxlUmVxdWVzdChlbmRwb2ludHMuT1JERVJTX0JZX1BBR0UsIHtcbiAgICBvZmZzZXQ6IChwYWdlTnVtIC0gMSkgKiBPUkRFUlNfUEVSX1BBR0UsXG4gICAgYWNjb3VudElkLFxuICB9KTtcbn1cblxuLyoqXG4gKiBDb2xsZWN0cyBhbGwgb3JkZXJzIChmaWxsZWQsIHBlbmRpbmcsIGNhbmNlbGxlZCkgZm9yIHRoZSBzcGVjaWZpYyBhY2NvdW50LlxuICpcbiAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBzcGVjaWZpYyBhY2NvdW50IGluIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYWNjb3VudFxuICovXG5hc3luYyBmdW5jdGlvbiBhbGwoYWNjb3VudElkKSB7XG4gIC8vIFdlIHN0YXJ0IGJ5IGNhcHR1cmluZyB0aGUgZmlyc3QgcGFnZSBvZiBvcmRlcnMgaW4gb3JkZXIgdG9cbiAgLy8gZGV0ZXJtaW5lIHRoZSBudW1iZXIgb2YgcGFnZXMgYXZhaWxhYmxlXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBwYWdlKGFjY291bnRJZCwgMSk7XG4gIGNvbnN0IHBhZ2VzID0gTWF0aC5jZWlsKGRhdGEudG90YWwgLyBPUkRFUlNfUEVSX1BBR0UpO1xuXG4gIGlmIChwYWdlcyA+IDEpIHtcbiAgICBjb25zdCB0YXNrcyA9IFtdO1xuXG4gICAgLy8gQnVpbGQgdGhlIHRhc2sgcXVldWUgdGhhdCB3aWxsIHJldHJpZXZlIHRoZSByZW1haW5pbmcgcGFnZXMgb2Ygb3JkZXJzXG4gICAgZm9yIChsZXQgcGFnZU51bSA9IDI7IHBhZ2VOdW0gPD0gcGFnZXM7IHBhZ2VOdW0rKykge1xuICAgICAgdGFza3MucHVzaChwYWdlKGFjY291bnRJZCwgcGFnZU51bSkudGhlbigocmVzdWx0KSA9PiByZXN1bHQub3JkZXJzKSk7XG4gICAgfVxuXG4gICAgLy8gT3V0LW9mLW9yZGVyIGludm9jYXRpb24gaXMgZGVzaXJlZC4gV2hhdCBtYXR0ZXJzIGlzIHRoYXQgUHJvbWlzZS5hbGwgd2lsbFxuICAgIC8vIGd1YXJhbnRlZSB0aGF0IHRoZSBkYXRhIG9yZGVyIGlzIHByZXNlcnZlZC5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcyk7XG4gICAgcmVzdWx0LmZvckVhY2goKGxpc3QpID0+IGRhdGEub3JkZXJzLnB1c2goLi4ubGlzdCkpO1xuXG4gICAgLy8gVXBkYXRlIHRoZSB0b3RhbCBhdHRyaWJ1dGUgdG8gcmVmbGVjdCB0aGUgbmV3IHNpemVcbiAgICBkYXRhLnRvdGFsID0gZGF0YS5vcmRlcnMubGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8qXG4gKiBSZXRyaWV2ZSBmaWx0ZXJlZCBvcmRlcnMgYnkgdGlja2VyIGFuZCBzdGF0dXMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZpbHRlcmVkT3JkZXJzKGFjY291bnRJZCwgdGlja2VyLCBzdGF0dXMpIHtcbiAgLy8gRmV0Y2ggYWxsIG9yZGVyc1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbGwoYWNjb3VudElkKTtcblxuICBjb25zdCBvcmRlckZpbHRlciA9IChvcmRlcikgPT4ge1xuICAgIGlmICh0aWNrZXIpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBUaWNrZXIoeyBzeW1ib2w6IG9yZGVyLnN5bWJvbCwgaWQ6IG9yZGVyLnNlY3VyaXR5X2lkIH0pO1xuICAgICAgLy8gb3JkZXIgb2JqZWN0cyBkb24ndCBpbmNsdWRlIGV4Y2hhbmdlcywgc28gd2UgYXJlIHVuYWJsZSB0byBtYWtlXG4gICAgICAvLyBhIHN0cm9uZyBjb21wYXJpc29uIHdpdGhvdXQgcmVxdWlyaW5nIGEgbGluZWFyIGluY3JlYXNlIG9mXG4gICAgICAvLyBlbmRwb2ludCBjYWxscyAod2hpY2ggaXMgbm90IHJlYXNvbmFibGUpLlxuICAgICAgLy9cbiAgICAgIC8vIFRoZSB1c2VyIHNob3VsZCBwcm92aWRlIHRoZSBzZWN1cml0eSBpZCBmb3IgYSBzdHJvbmcgY29tcGFyaXNvbiBoZXJlLlxuICAgICAgaWYgKCFuZXcgVGlja2VyKHRpY2tlcikud2Vha0VxdWFscyh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3JkZXIuc3RhdHVzID09PSBzdGF0dXM7XG4gIH07XG5cbiAgLy8gQXBwbHkgZmlsdGVyIHRvIHRoZSByZXN1bHRcbiAgcmVzdWx0Lm9yZGVycyA9IHJlc3VsdC5vcmRlcnMuZmlsdGVyKG9yZGVyRmlsdGVyKTtcbiAgcmVzdWx0LnRvdGFsID0gcmVzdWx0Lm9yZGVycy5sZW5ndGg7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICBwYWdlLFxuICBhbGwsXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBwZW5kaW5nIG9yZGVycyBmb3IgdGhlIHNwZWNpZmllZCBzZWN1cml0eSBpbiB0aGUgYWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIChvcHRpb25hbCkgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKi9cbiAgcGVuZGluZzogYXN5bmMgKGFjY291bnRJZCwgdGlja2VyKSA9PiBmaWx0ZXJlZE9yZGVycyhhY2NvdW50SWQsIHRpY2tlciwgJ3N1Ym1pdHRlZCcpLFxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgZmlsbGVkIG9yZGVycyBmb3IgdGhlIHNwZWNpZmllZCBzZWN1cml0eSBpbiB0aGUgYWNjb3VudC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIHNwZWNpZmljIGFjY291bnQgaW4gdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhY2NvdW50XG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIChvcHRpb25hbCkgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKi9cbiAgZmlsbGVkOiBhc3luYyAoYWNjb3VudElkLCB0aWNrZXIpID0+IGZpbHRlcmVkT3JkZXJzKGFjY291bnRJZCwgdGlja2VyLCAncG9zdGVkJyksXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyBjYW5jZWxsZWQgb3JkZXJzIGZvciB0aGUgc3BlY2lmaWVkIHNlY3VyaXR5IGluIHRoZSBhY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgKG9wdGlvbmFsKSBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqL1xuICBjYW5jZWxsZWQ6IGFzeW5jIChhY2NvdW50SWQsIHRpY2tlcikgPT4gZmlsdGVyZWRPcmRlcnMoYWNjb3VudElkLCB0aWNrZXIsICdjYW5jZWxsZWQnKSxcbn07XG4iLCJpbXBvcnQgZW5kcG9pbnRzIGZyb20gJy4uL2FwaS9lbmRwb2ludHMnO1xuaW1wb3J0IGhhbmRsZVJlcXVlc3QgZnJvbSAnLi4vbmV0d29yay9odHRwcyc7XG5pbXBvcnQgaGlzdG9yeSBmcm9tICcuL2hpc3RvcnknO1xuaW1wb3J0IGRhdGEgZnJvbSAnLi4vZGF0YSc7XG5pbXBvcnQgcXVvdGVzIGZyb20gJy4uL3F1b3Rlcyc7XG5pbXBvcnQgVGlja2VyIGZyb20gJy4uL2NvcmUvdGlja2VyJztcblxuY29uc3QgaXNDYW5hZGlhblNlY3VyaXR5ID0gKGV4Y2hhbmdlKSA9PiBbJ1RTWCcsICdUU1gtViddLmluY2x1ZGVzKGV4Y2hhbmdlKTtcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8qKlxuICAgKiBDYW5jZWxzIHRoZSBwZW5kaW5nIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgb3JkZXIgaWQuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gb3JkZXJJZCBUaGUgcGVuZGluZyBvcmRlciB0byBjYW5jZWxcbiAgICovXG4gIGNhbmNlbDogYXN5bmMgKG9yZGVySWQpID0+ICh7XG4gICAgb3JkZXI6IG9yZGVySWQsXG4gICAgcmVzcG9uc2U6IGF3YWl0IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLkNBTkNFTF9PUkRFUiwgeyBvcmRlcklkIH0pLFxuICB9KSxcblxuICAvKipcbiAgICogQ2FuY2VscyBhbGwgcGVuZGluZyBvcmRlcnMgdW5kZXIgdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBBY2NvdW50LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgc3BlY2lmaWMgYWNjb3VudCBpbiB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFjY291bnRcbiAgICovXG4gIGFzeW5jIGNhbmNlbFBlbmRpbmcoYWNjb3VudElkKSB7XG4gICAgY29uc3QgcGVuZGluZyA9IGF3YWl0IGhpc3RvcnkucGVuZGluZyhhY2NvdW50SWQpO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChwZW5kaW5nLm9yZGVycy5tYXAoYXN5bmMgKG9yZGVyKSA9PiB0aGlzLmNhbmNlbChvcmRlci5vcmRlcl9pZCkpKTtcbiAgfSxcblxuICAvKipcbiAgICogTWFya2V0IGJ1eSBhIHNlY3VyaXR5IHRocm91Z2ggdGhlIFdlYWx0aHNpbXBsZSBUcmFkZSBhcHBsaWNhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBhY2NvdW50SWQgVGhlIGFjY291bnQgdG8gbWFrZSB0aGUgdHJhbnNhY3Rpb24gZnJvbVxuICAgKiBAcGFyYW0geyp9IHRpY2tlciBUaGUgc2VjdXJpdHkgc3ltYm9sXG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHB1cmNoYXNlXG4gICAqL1xuICBtYXJrZXRCdXk6IGFzeW5jIChhY2NvdW50SWQsIHRpY2tlciwgcXVhbnRpdHkpID0+IHtcbiAgICBjb25zdCBkZXRhaWxzID0gYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpO1xuXG4gICAgcmV0dXJuIGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgICBzZWN1cml0eV9pZDogZGV0YWlscy5pZCxcbiAgICAgIGxpbWl0X3ByaWNlOiAhKG5ldyBUaWNrZXIodGlja2VyKS5jcnlwdG8pID8gYXdhaXQgcXVvdGVzLmdldCh0aWNrZXIpIDogdW5kZWZpbmVkLFxuICAgICAgcXVhbnRpdHksXG4gICAgICBvcmRlcl90eXBlOiAnYnV5X3F1YW50aXR5JyxcbiAgICAgIG9yZGVyX3N1Yl90eXBlOiAnbWFya2V0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBMaW1pdCBidXkgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IGxpbWl0IFRoZSBtYXhpbXVtIHByaWNlIHRvIHB1cmNoYXNlIHRoZSBzZWN1cml0eSBhdFxuICAgKiBAcGFyYW0geyp9IHF1YW50aXR5IFRoZSBudW1iZXIgb2Ygc2VjdXJpdGllcyB0byBwdXJjaGFzZVxuICAgKi9cbiAgbGltaXRCdXk6IGFzeW5jIChhY2NvdW50SWQsIHRpY2tlciwgbGltaXQsIHF1YW50aXR5KSA9PiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgIHNlY3VyaXR5X2lkOiAoYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIpKS5pZCxcbiAgICBsaW1pdF9wcmljZTogbGltaXQsXG4gICAgcXVhbnRpdHksXG4gICAgb3JkZXJfdHlwZTogJ2J1eV9xdWFudGl0eScsXG4gICAgb3JkZXJfc3ViX3R5cGU6ICdsaW1pdCcsXG4gICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICB9KSxcblxuICAvKipcbiAgICogU3RvcCBsaW1pdCBidXkgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IHN0b3AgVGhlIHByaWNlIGF0IHdoaWNoIHRoZSBvcmRlciBjb252ZXJ0cyB0byBhIGxpbWl0IG9yZGVyXG4gICAqIEBwYXJhbSB7Kn0gbGltaXQgVGhlIG1heGltdW0gcHJpY2UgdG8gcHVyY2hhc2UgdGhlIHNlY3VyaXR5IGF0XG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHB1cmNoYXNlXG4gICAqL1xuICBzdG9wTGltaXRCdXk6IGFzeW5jIChhY2NvdW50SWQsIHRpY2tlciwgc3RvcCwgbGltaXQsIHF1YW50aXR5KSA9PiB7XG4gICAgY29uc3Qgc2VjdXJpdHkgPSBhd2FpdCBkYXRhLmdldFNlY3VyaXR5KHRpY2tlcik7XG5cbiAgICAvLyBUaGUgV2VhbHRoc2ltcGxlIFRyYWRlIGJhY2tlbmQgZG9lc24ndCBjaGVjayBmb3IgdGhpcywgZXZlbiB0aG91Z2ggdGhlIGFwcCBkb2VzLi5cbiAgICBpZiAoaXNDYW5hZGlhblNlY3VyaXR5KHNlY3VyaXR5LnN0b2NrLnByaW1hcnlfZXhjaGFuZ2UpICYmIHN0b3AgIT09IGxpbWl0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RTWC9UU1gtViBzZWN1cml0aWVzIG11c3QgaGF2ZSBhbiBlcXVpdmFsZW50IHN0b3AgYW5kIGxpbWl0IHByaWNlLicpO1xuICAgIH1cblxuICAgIHJldHVybiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IHNlY3VyaXR5LmlkLFxuICAgICAgc3RvcF9wcmljZTogc3RvcCxcbiAgICAgIGxpbWl0X3ByaWNlOiBsaW1pdCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ2J1eV9xdWFudGl0eScsXG4gICAgICBvcmRlcl9zdWJfdHlwZTogJ3N0b3BfbGltaXQnLFxuICAgICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1hcmtldCBzZWxsIGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBxdWFudGl0eSBUaGUgbnVtYmVyIG9mIHNlY3VyaXRpZXMgdG8gcHVyY2hhc2VcbiAgICovXG4gIG1hcmtldFNlbGw6IGFzeW5jIChhY2NvdW50SWQsIHRpY2tlciwgcXVhbnRpdHkpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgc2VjdXJpdHlfaWQ6IChhd2FpdCBkYXRhLmdldFNlY3VyaXR5KHRpY2tlcikpLmlkLFxuICAgIG1hcmtldF92YWx1ZTogIShuZXcgVGlja2VyKHRpY2tlcikuY3J5cHRvKSA/IGF3YWl0IHF1b3Rlcy5nZXQodGlja2VyKSA6IHVuZGVmaW5lZCxcbiAgICBxdWFudGl0eSxcbiAgICBvcmRlcl90eXBlOiAnc2VsbF9xdWFudGl0eScsXG4gICAgb3JkZXJfc3ViX3R5cGU6ICdtYXJrZXQnLFxuICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgIGFjY291bnRfaWQ6IGFjY291bnRJZCxcbiAgfSksXG5cbiAgLyoqXG4gICAqIExpbWl0IHNlbGwgYSBzZWN1cml0eSB0aHJvdWdoIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgYXBwbGljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYWNjb3VudElkIFRoZSBhY2NvdW50IHRvIG1ha2UgdGhlIHRyYW5zYWN0aW9uIGZyb21cbiAgICogQHBhcmFtIHsqfSB0aWNrZXIgVGhlIHNlY3VyaXR5IHN5bWJvbFxuICAgKiBAcGFyYW0geyp9IGxpbWl0IFRoZSBtaW5pbXVtIHByaWNlIHRvIHNlbGwgdGhlIHNlY3VyaXR5IGF0XG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHNlbGxcbiAgICovXG4gIGxpbWl0U2VsbDogYXN5bmMgKGFjY291bnRJZCwgdGlja2VyLCBsaW1pdCwgcXVhbnRpdHkpID0+IGhhbmRsZVJlcXVlc3QoZW5kcG9pbnRzLlBMQUNFX09SREVSLCB7XG4gICAgc2VjdXJpdHlfaWQ6IChhd2FpdCBkYXRhLmdldFNlY3VyaXR5KHRpY2tlcikpLmlkLFxuICAgIGxpbWl0X3ByaWNlOiBsaW1pdCxcbiAgICBxdWFudGl0eSxcbiAgICBvcmRlcl90eXBlOiAnc2VsbF9xdWFudGl0eScsXG4gICAgb3JkZXJfc3ViX3R5cGU6ICdsaW1pdCcsXG4gICAgdGltZV9pbl9mb3JjZTogJ2RheScsXG4gICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICB9KSxcblxuICAvKipcbiAgICogU3RvcCBsaW1pdCBzZWxsIGEgc2VjdXJpdHkgdGhyb3VnaCB0aGUgV2VhbHRoc2ltcGxlIFRyYWRlIGFwcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGFjY291bnRJZCBUaGUgYWNjb3VudCB0byBtYWtlIHRoZSB0cmFuc2FjdGlvbiBmcm9tXG4gICAqIEBwYXJhbSB7Kn0gdGlja2VyIFRoZSBzZWN1cml0eSBzeW1ib2xcbiAgICogQHBhcmFtIHsqfSBzdG9wIFRoZSBwcmljZSBhdCB3aGljaCB0aGUgb3JkZXIgY29udmVydHMgdG8gYSBsaW1pdCBvcmRlclxuICAgKiBAcGFyYW0geyp9IGxpbWl0IFRoZSBtaW5pbXVtIHByaWNlIHRvIHNlbGwgdGhlIHNlY3VyaXR5IGF0XG4gICAqIEBwYXJhbSB7Kn0gcXVhbnRpdHkgVGhlIG51bWJlciBvZiBzZWN1cml0aWVzIHRvIHNlbGxcbiAgICovXG4gIHN0b3BMaW1pdFNlbGw6IGFzeW5jIChhY2NvdW50SWQsIHRpY2tlciwgc3RvcCwgbGltaXQsIHF1YW50aXR5KSA9PiB7XG4gICAgY29uc3Qgc2VjdXJpdHkgPSBhd2FpdCBkYXRhLmdldFNlY3VyaXR5KHRpY2tlcik7XG5cbiAgICAvLyBUaGUgV2VhbHRoc2ltcGxlIFRyYWRlIGJhY2tlbmQgZG9lc24ndCBjaGVjayBmb3IgdGhpcywgZXZlbiB0aG91Z2ggdGhlIGFwcCBkb2VzLi5cbiAgICBpZiAoaXNDYW5hZGlhblNlY3VyaXR5KHNlY3VyaXR5LnN0b2NrLnByaW1hcnlfZXhjaGFuZ2UpICYmIHN0b3AgIT09IGxpbWl0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RTWC9UU1gtViBzZWN1cml0aWVzIG11c3QgaGF2ZSBhbiBlcXVpdmFsZW50IHN0b3AgYW5kIGxpbWl0IHByaWNlLicpO1xuICAgIH1cblxuICAgIHJldHVybiBoYW5kbGVSZXF1ZXN0KGVuZHBvaW50cy5QTEFDRV9PUkRFUiwge1xuICAgICAgc2VjdXJpdHlfaWQ6IHNlY3VyaXR5LmlkLFxuICAgICAgc3RvcF9wcmljZTogc3RvcCxcbiAgICAgIGxpbWl0X3ByaWNlOiBsaW1pdCxcbiAgICAgIHF1YW50aXR5LFxuICAgICAgb3JkZXJfdHlwZTogJ3NlbGxfcXVhbnRpdHknLFxuICAgICAgb3JkZXJfc3ViX3R5cGU6ICdzdG9wX2xpbWl0JyxcbiAgICAgIHRpbWVfaW5fZm9yY2U6ICdkYXknLFxuICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgIH0pO1xuICB9LFxufTtcbiIsImltcG9ydCBoaXN0b3J5IGZyb20gJy4vaGlzdG9yeSc7XG5pbXBvcnQgc3VibWl0IGZyb20gJy4vc3VibWl0JztcblxuZXhwb3J0IGRlZmF1bHQge1xuICAuLi5oaXN0b3J5LFxuICAuLi5zdWJtaXQsXG59O1xuIiwiLyoqXG4gKiBUaGUgZGVmYXVsdCBwcm92aWRlciBmb3IgcXVvdGVzIGlzIFdlYWx0aHNpbXBsZSBUcmFkZS5cbiAqL1xuXG5pbXBvcnQgZGF0YSBmcm9tICcuLi9kYXRhJztcblxuZXhwb3J0IGRlZmF1bHQge1xuXG4gIC8qKlxuICAgICAqIFF1b3RlIGZvciBhIHRpY2tlciBmcm9tIHRoZSBXZWFsdGhzaW1wbGUgVHJhZGUgZW5kcG9pbnQuXG4gICAgICpcbiAgICAgKiBSZW1lbWJlciB0aGF0IHRoaXMgcXVvdGUgaXMgTk9UIHJlYWwtdGltZSFcbiAgICAgKi9cbiAgcXVvdGU6IGFzeW5jICh0aWNrZXIpID0+IHtcbiAgICBjb25zdCBpbmZvID0gYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIsIHRydWUpO1xuICAgIHJldHVybiBpbmZvLnF1b3RlLmFtb3VudDtcbiAgfSxcbn07XG4iLCJpbXBvcnQgdHJhZGUgZnJvbSAnLi9kZWZhdWx0JztcbmltcG9ydCBkYXRhIGZyb20gJy4uL2RhdGEnO1xuaW1wb3J0IFRpY2tlciBmcm9tICcuLi9jb3JlL3RpY2tlcic7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAvLyBXZWFsdGhzaW1wbGUgVHJhZGUgaXMgb3VyIGRlZmF1bHQgc291cmNlIGZvciBxdW90ZXMsIGRlc3BpdGVcbiAgLy8gaGF2aW5nIGEgMTUgbWluIGRlbGF5XG4gIGRlZmF1bHRQcm92aWRlcjogdHJhZGUsXG5cbiAgLy8gTWFpbnRhaW5zIHF1b3RlIHByb3ZpZGVycyBvbiBhbiBleGNoYW5nZSBiYXNpc1xuICBwcm92aWRlcnM6IHt9LFxuXG4gIC8qKlxuICAgICAqIExvYWQgYSBjdXN0b20gcHJvdmlkZXIgZm9yIHRoZSBleGNoYW5nZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gZXhjaGFuZ2UgVGhlIGV4Y2hhbmdlIHRoYXQgdGhlIHByb3ZpZGVyIGZldGNoZXMgcXVvdGVzIGZvclxuICAgICAqIEBwYXJhbSB7Kn0gcHJvdmlkZXIgVGhlIHByb3ZpZGVyIG9iamVjdCBjb250YWluaW5nIHRoZSBxdW90ZSgpIGltcGxlbWVudGF0aW9uLlxuICAgICAqL1xuICB1c2UoZXhjaGFuZ2UsIHByb3ZpZGVyKSB7XG4gICAgaWYgKHR5cGVvZiAocHJvdmlkZXIucXVvdGUpICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBUaGUgcHJvdmlkZXIgbXVzdCBoYXZlIGEgcXVvdGUoKSBpbXBsZW1lbnRhdGlvbiB0aGF0IHdlIGNhbiBjYWxsIGxhdGVyIVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHF1b3RlIHByb3ZpZGVyIGZvciAke2V4Y2hhbmdlfSFgKTtcbiAgICB9XG5cbiAgICB0aGlzLnByb3ZpZGVyc1tleGNoYW5nZV0gPSBwcm92aWRlcjtcbiAgfSxcblxuICAvKipcbiAgICAgKiBPYnRhaW5zIGEgcXVvdGUgZm9yIHRoZSB0aWNrZXIuIFRoZSBzb3VyY2Ugb2YgdGhlIHF1b3RlIG1heSBiZSBhIGN1c3RvbVxuICAgICAqIHByb3ZpZGVyIGlmIGEgdmFsaWQgcHJvdmlkZXIgaXMgcmVnaXN0ZXJlZCBmb3IgdGhlIGV4Y2hhbmdlIHRoYXQgdGhlXG4gICAgICogdGlja2VyIHRyYWRlcyBvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gc2VjdXJpdHkgVGhlIHNlY3VyaXR5IHRvIGdldCBhIHF1b3RlIGZvci5cbiAgICAgKi9cbiAgYXN5bmMgZ2V0KHNlY3VyaXR5KSB7XG4gICAgbGV0IGV4Y2hhbmdlID0gbnVsbDtcbiAgICBjb25zdCB0aWNrZXIgPSBuZXcgVGlja2VyKHNlY3VyaXR5KTtcblxuICAgIGlmICh0aWNrZXIuZXhjaGFuZ2UpIHtcbiAgICAgIC8vIFdlIG5lZWQgdGhlIGV4Y2hhbmdlIGluIHRoZSBuZXh0IHN0ZXAgaWYgdGhlIHVzZXIgaGFzIHNwZWNpZmllZFxuICAgICAgLy8gYSBjdXN0b20gcHJvdmlkZXIgZm9yIGFuIGV4Y2hhbmdlLiBTbyBpZiB0aGUgdXNlciBoYXNuJ3QgcHJvdmlkZWRcbiAgICAgIC8vIGl0LCB3ZSB3aWxsIGhhdmUgdG8gcGluZyBXZWFsdGhzaW1wbGUgdHJhZGUgdG8gZ2V0IGl0LlxuICAgICAgZXhjaGFuZ2UgPSB0aWNrZXIuZXhjaGFuZ2U7XG4gICAgfSBlbHNlIGlmICh0aWNrZXIuY3J5cHRvICYmIHRpY2tlci5pZCkge1xuICAgICAgLy8gSWYgdGhlIGlkIGlzIG9ubHkgZ2l2ZW4gYnV0IHdlIGtub3cgaXQncyBhIGNyeXB0byBpZCxcbiAgICAgIC8vIHdlIHdpbGwgYXV0b21hdGljYWxseSBzZXQgZXhjaGFuZ2UgdG8gJ0NDJy5cbiAgICAgIGV4Y2hhbmdlID0gJ0NDJztcbiAgICB9IGVsc2UgaWYgKE9iamVjdC5rZXlzKHRoaXMucHJvdmlkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpbmZvID0gYXdhaXQgZGF0YS5nZXRTZWN1cml0eSh0aWNrZXIsIGZhbHNlKTtcbiAgICAgIGV4Y2hhbmdlID0gaW5mby5zdG9jay5wcmltYXJ5X2V4Y2hhbmdlO1xuICAgIH1cblxuICAgIC8vIEEgY3VzdG9tIHByb3ZpZGVyIHdpbGwgdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhlIGRlZmF1bHQgc291cmNlXG4gICAgaWYgKGV4Y2hhbmdlIGluIHRoaXMucHJvdmlkZXJzKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnNbZXhjaGFuZ2VdLnF1b3RlKHRpY2tlcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRlZmF1bHRQcm92aWRlci5xdW90ZSh0aWNrZXIpO1xuICB9LFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiB3cmFwKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gSWYgb3V0ZXJGbiBwcm92aWRlZCBhbmQgb3V0ZXJGbi5wcm90b3R5cGUgaXMgYSBHZW5lcmF0b3IsIHRoZW4gb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IuXG4gICAgdmFyIHByb3RvR2VuZXJhdG9yID0gb3V0ZXJGbiAmJiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvciA/IG91dGVyRm4gOiBHZW5lcmF0b3I7XG4gICAgdmFyIGdlbmVyYXRvciA9IE9iamVjdC5jcmVhdGUocHJvdG9HZW5lcmF0b3IucHJvdG90eXBlKTtcbiAgICB2YXIgY29udGV4dCA9IG5ldyBDb250ZXh0KHRyeUxvY3NMaXN0IHx8IFtdKTtcblxuICAgIC8vIFRoZSAuX2ludm9rZSBtZXRob2QgdW5pZmllcyB0aGUgaW1wbGVtZW50YXRpb25zIG9mIHRoZSAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMuXG4gICAgZ2VuZXJhdG9yLl9pbnZva2UgPSBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuXG4gICAgcmV0dXJuIGdlbmVyYXRvcjtcbiAgfVxuICBleHBvcnRzLndyYXAgPSB3cmFwO1xuXG4gIC8vIFRyeS9jYXRjaCBoZWxwZXIgdG8gbWluaW1pemUgZGVvcHRpbWl6YXRpb25zLiBSZXR1cm5zIGEgY29tcGxldGlvblxuICAvLyByZWNvcmQgbGlrZSBjb250ZXh0LnRyeUVudHJpZXNbaV0uY29tcGxldGlvbi4gVGhpcyBpbnRlcmZhY2UgY291bGRcbiAgLy8gaGF2ZSBiZWVuIChhbmQgd2FzIHByZXZpb3VzbHkpIGRlc2lnbmVkIHRvIHRha2UgYSBjbG9zdXJlIHRvIGJlXG4gIC8vIGludm9rZWQgd2l0aG91dCBhcmd1bWVudHMsIGJ1dCBpbiBhbGwgdGhlIGNhc2VzIHdlIGNhcmUgYWJvdXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGFuIGV4aXN0aW5nIG1ldGhvZCB3ZSB3YW50IHRvIGNhbGwsIHNvIHRoZXJlJ3Mgbm8gbmVlZFxuICAvLyB0byBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0LiBXZSBjYW4gZXZlbiBnZXQgYXdheSB3aXRoIGFzc3VtaW5nXG4gIC8vIHRoZSBtZXRob2QgdGFrZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIHNpbmNlIHRoYXQgaGFwcGVucyB0byBiZSB0cnVlXG4gIC8vIGluIGV2ZXJ5IGNhc2UsIHNvIHdlIGRvbid0IGhhdmUgdG8gdG91Y2ggdGhlIGFyZ3VtZW50cyBvYmplY3QuIFRoZVxuICAvLyBvbmx5IGFkZGl0aW9uYWwgYWxsb2NhdGlvbiByZXF1aXJlZCBpcyB0aGUgY29tcGxldGlvbiByZWNvcmQsIHdoaWNoXG4gIC8vIGhhcyBhIHN0YWJsZSBzaGFwZSBhbmQgc28gaG9wZWZ1bGx5IHNob3VsZCBiZSBjaGVhcCB0byBhbGxvY2F0ZS5cbiAgZnVuY3Rpb24gdHJ5Q2F0Y2goZm4sIG9iaiwgYXJnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwibm9ybWFsXCIsIGFyZzogZm4uY2FsbChvYmosIGFyZykgfTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiB7IHR5cGU6IFwidGhyb3dcIiwgYXJnOiBlcnIgfTtcbiAgICB9XG4gIH1cblxuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRTdGFydCA9IFwic3VzcGVuZGVkU3RhcnRcIjtcbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkWWllbGQgPSBcInN1c3BlbmRlZFlpZWxkXCI7XG4gIHZhciBHZW5TdGF0ZUV4ZWN1dGluZyA9IFwiZXhlY3V0aW5nXCI7XG4gIHZhciBHZW5TdGF0ZUNvbXBsZXRlZCA9IFwiY29tcGxldGVkXCI7XG5cbiAgLy8gUmV0dXJuaW5nIHRoaXMgb2JqZWN0IGZyb20gdGhlIGlubmVyRm4gaGFzIHRoZSBzYW1lIGVmZmVjdCBhc1xuICAvLyBicmVha2luZyBvdXQgb2YgdGhlIGRpc3BhdGNoIHN3aXRjaCBzdGF0ZW1lbnQuXG4gIHZhciBDb250aW51ZVNlbnRpbmVsID0ge307XG5cbiAgLy8gRHVtbXkgY29uc3RydWN0b3IgZnVuY3Rpb25zIHRoYXQgd2UgdXNlIGFzIHRoZSAuY29uc3RydWN0b3IgYW5kXG4gIC8vIC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgcHJvcGVydGllcyBmb3IgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIEdlbmVyYXRvclxuICAvLyBvYmplY3RzLiBGb3IgZnVsbCBzcGVjIGNvbXBsaWFuY2UsIHlvdSBtYXkgd2lzaCB0byBjb25maWd1cmUgeW91clxuICAvLyBtaW5pZmllciBub3QgdG8gbWFuZ2xlIHRoZSBuYW1lcyBvZiB0aGVzZSB0d28gZnVuY3Rpb25zLlxuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cblxuICAvLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yICVJdGVyYXRvclByb3RvdHlwZSUgZm9yIGVudmlyb25tZW50cyB0aGF0XG4gIC8vIGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQuXG4gIHZhciBJdGVyYXRvclByb3RvdHlwZSA9IHt9O1xuICBJdGVyYXRvclByb3RvdHlwZVtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHcC5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdlbmVyYXRvckZ1bmN0aW9uO1xuICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZVt0b1N0cmluZ1RhZ1N5bWJvbF0gPVxuICAgIEdlbmVyYXRvckZ1bmN0aW9uLmRpc3BsYXlOYW1lID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuXG4gIC8vIEhlbHBlciBmb3IgZGVmaW5pbmcgdGhlIC5uZXh0LCAudGhyb3csIGFuZCAucmV0dXJuIG1ldGhvZHMgb2YgdGhlXG4gIC8vIEl0ZXJhdG9yIGludGVyZmFjZSBpbiB0ZXJtcyBvZiBhIHNpbmdsZSAuX2ludm9rZSBtZXRob2QuXG4gIGZ1bmN0aW9uIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhwcm90b3R5cGUpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgIHByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UobWV0aG9kLCBhcmcpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgaWYgKCEodG9TdHJpbmdUYWdTeW1ib2wgaW4gZ2VuRnVuKSkge1xuICAgICAgICBnZW5GdW5bdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JGdW5jdGlvblwiO1xuICAgICAgfVxuICAgIH1cbiAgICBnZW5GdW4ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShHcCk7XG4gICAgcmV0dXJuIGdlbkZ1bjtcbiAgfTtcblxuICAvLyBXaXRoaW4gdGhlIGJvZHkgb2YgYW55IGFzeW5jIGZ1bmN0aW9uLCBgYXdhaXQgeGAgaXMgdHJhbnNmb3JtZWQgdG9cbiAgLy8gYHlpZWxkIHJlZ2VuZXJhdG9yUnVudGltZS5hd3JhcCh4KWAsIHNvIHRoYXQgdGhlIHJ1bnRpbWUgY2FuIHRlc3RcbiAgLy8gYGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIilgIHRvIGRldGVybWluZSBpZiB0aGUgeWllbGRlZCB2YWx1ZSBpc1xuICAvLyBtZWFudCB0byBiZSBhd2FpdGVkLlxuICBleHBvcnRzLmF3cmFwID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHsgX19hd2FpdDogYXJnIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gQXN5bmNJdGVyYXRvcihnZW5lcmF0b3IsIFByb21pc2VJbXBsKSB7XG4gICAgZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChnZW5lcmF0b3JbbWV0aG9kXSwgZ2VuZXJhdG9yLCBhcmcpO1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgcmVqZWN0KHJlY29yZC5hcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlY29yZC5hcmc7XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKHZhbHVlLCBcIl9fYXdhaXRcIikpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24odW53cmFwcGVkKSB7XG4gICAgICAgICAgLy8gV2hlbiBhIHlpZWxkZWQgUHJvbWlzZSBpcyByZXNvbHZlZCwgaXRzIGZpbmFsIHZhbHVlIGJlY29tZXNcbiAgICAgICAgICAvLyB0aGUgLnZhbHVlIG9mIHRoZSBQcm9taXNlPHt2YWx1ZSxkb25lfT4gcmVzdWx0IGZvciB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IGl0ZXJhdGlvbi5cbiAgICAgICAgICByZXN1bHQudmFsdWUgPSB1bndyYXBwZWQ7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIC8vIElmIGEgcmVqZWN0ZWQgUHJvbWlzZSB3YXMgeWllbGRlZCwgdGhyb3cgdGhlIHJlamVjdGlvbiBiYWNrXG4gICAgICAgICAgLy8gaW50byB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBoYW5kbGVkIHRoZXJlLlxuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCBlcnJvciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2VJbXBsKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcmV2aW91c1Byb21pc2UgPVxuICAgICAgICAvLyBJZiBlbnF1ZXVlIGhhcyBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gd2Ugd2FudCB0byB3YWl0IHVudGlsXG4gICAgICAgIC8vIGFsbCBwcmV2aW91cyBQcm9taXNlcyBoYXZlIGJlZW4gcmVzb2x2ZWQgYmVmb3JlIGNhbGxpbmcgaW52b2tlLFxuICAgICAgICAvLyBzbyB0aGF0IHJlc3VsdHMgYXJlIGFsd2F5cyBkZWxpdmVyZWQgaW4gdGhlIGNvcnJlY3Qgb3JkZXIuIElmXG4gICAgICAgIC8vIGVucXVldWUgaGFzIG5vdCBiZWVuIGNhbGxlZCBiZWZvcmUsIHRoZW4gaXQgaXMgaW1wb3J0YW50IHRvXG4gICAgICAgIC8vIGNhbGwgaW52b2tlIGltbWVkaWF0ZWx5LCB3aXRob3V0IHdhaXRpbmcgb24gYSBjYWxsYmFjayB0byBmaXJlLFxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gaGFzIHRoZSBvcHBvcnR1bml0eSB0byBkb1xuICAgICAgICAvLyBhbnkgbmVjZXNzYXJ5IHNldHVwIGluIGEgcHJlZGljdGFibGUgd2F5LiBUaGlzIHByZWRpY3RhYmlsaXR5XG4gICAgICAgIC8vIGlzIHdoeSB0aGUgUHJvbWlzZSBjb25zdHJ1Y3RvciBzeW5jaHJvbm91c2x5IGludm9rZXMgaXRzXG4gICAgICAgIC8vIGV4ZWN1dG9yIGNhbGxiYWNrLCBhbmQgd2h5IGFzeW5jIGZ1bmN0aW9ucyBzeW5jaHJvbm91c2x5XG4gICAgICAgIC8vIGV4ZWN1dGUgY29kZSBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0LiBTaW5jZSB3ZSBpbXBsZW1lbnQgc2ltcGxlXG4gICAgICAgIC8vIGFzeW5jIGZ1bmN0aW9ucyBpbiB0ZXJtcyBvZiBhc3luYyBnZW5lcmF0b3JzLCBpdCBpcyBlc3BlY2lhbGx5XG4gICAgICAgIC8vIGltcG9ydGFudCB0byBnZXQgdGhpcyByaWdodCwgZXZlbiB0aG91Z2ggaXQgcmVxdWlyZXMgY2FyZS5cbiAgICAgICAgcHJldmlvdXNQcm9taXNlID8gcHJldmlvdXNQcm9taXNlLnRoZW4oXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcsXG4gICAgICAgICAgLy8gQXZvaWQgcHJvcGFnYXRpbmcgZmFpbHVyZXMgdG8gUHJvbWlzZXMgcmV0dXJuZWQgYnkgbGF0ZXJcbiAgICAgICAgICAvLyBpbnZvY2F0aW9ucyBvZiB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmdcbiAgICAgICAgKSA6IGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCk7XG4gICAgfVxuXG4gICAgLy8gRGVmaW5lIHRoZSB1bmlmaWVkIGhlbHBlciBtZXRob2QgdGhhdCBpcyB1c2VkIHRvIGltcGxlbWVudCAubmV4dCxcbiAgICAvLyAudGhyb3csIGFuZCAucmV0dXJuIChzZWUgZGVmaW5lSXRlcmF0b3JNZXRob2RzKS5cbiAgICB0aGlzLl9pbnZva2UgPSBlbnF1ZXVlO1xuICB9XG5cbiAgZGVmaW5lSXRlcmF0b3JNZXRob2RzKEFzeW5jSXRlcmF0b3IucHJvdG90eXBlKTtcbiAgQXN5bmNJdGVyYXRvci5wcm90b3R5cGVbYXN5bmNJdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIEdwW3RvU3RyaW5nVGFnU3ltYm9sXSA9IFwiR2VuZXJhdG9yXCI7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBHcFtpdGVyYXRvclN5bWJvbF0gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBHcC50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHB1c2hUcnlFbnRyeShsb2NzKSB7XG4gICAgdmFyIGVudHJ5ID0geyB0cnlMb2M6IGxvY3NbMF0gfTtcblxuICAgIGlmICgxIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmNhdGNoTG9jID0gbG9jc1sxXTtcbiAgICB9XG5cbiAgICBpZiAoMiBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5maW5hbGx5TG9jID0gbG9jc1syXTtcbiAgICAgIGVudHJ5LmFmdGVyTG9jID0gbG9jc1szXTtcbiAgICB9XG5cbiAgICB0aGlzLnRyeUVudHJpZXMucHVzaChlbnRyeSk7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFRyeUVudHJ5KGVudHJ5KSB7XG4gICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb24gfHwge307XG4gICAgcmVjb3JkLnR5cGUgPSBcIm5vcm1hbFwiO1xuICAgIGRlbGV0ZSByZWNvcmQuYXJnO1xuICAgIGVudHJ5LmNvbXBsZXRpb24gPSByZWNvcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBDb250ZXh0KHRyeUxvY3NMaXN0KSB7XG4gICAgLy8gVGhlIHJvb3QgZW50cnkgb2JqZWN0IChlZmZlY3RpdmVseSBhIHRyeSBzdGF0ZW1lbnQgd2l0aG91dCBhIGNhdGNoXG4gICAgLy8gb3IgYSBmaW5hbGx5IGJsb2NrKSBnaXZlcyB1cyBhIHBsYWNlIHRvIHN0b3JlIHZhbHVlcyB0aHJvd24gZnJvbVxuICAgIC8vIGxvY2F0aW9ucyB3aGVyZSB0aGVyZSBpcyBubyBlbmNsb3NpbmcgdHJ5IHN0YXRlbWVudC5cbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbeyB0cnlMb2M6IFwicm9vdFwiIH1dO1xuICAgIHRyeUxvY3NMaXN0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKTtcbiAgICB0aGlzLnJlc2V0KHRydWUpO1xuICB9XG5cbiAgZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICB9XG4gICAga2V5cy5yZXZlcnNlKCk7XG5cbiAgICAvLyBSYXRoZXIgdGhhbiByZXR1cm5pbmcgYW4gb2JqZWN0IHdpdGggYSBuZXh0IG1ldGhvZCwgd2Uga2VlcFxuICAgIC8vIHRoaW5ncyBzaW1wbGUgYW5kIHJldHVybiB0aGUgbmV4dCBmdW5jdGlvbiBpdHNlbGYuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICB3aGlsZSAoa2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGtleSA9IGtleXMucG9wKCk7XG4gICAgICAgIGlmIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgbmV4dC52YWx1ZSA9IGtleTtcbiAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUbyBhdm9pZCBjcmVhdGluZyBhbiBhZGRpdGlvbmFsIG9iamVjdCwgd2UganVzdCBoYW5nIHRoZSAudmFsdWVcbiAgICAgIC8vIGFuZCAuZG9uZSBwcm9wZXJ0aWVzIG9mZiB0aGUgbmV4dCBmdW5jdGlvbiBvYmplY3QgaXRzZWxmLiBUaGlzXG4gICAgICAvLyBhbHNvIGVuc3VyZXMgdGhhdCB0aGUgbWluaWZpZXIgd2lsbCBub3QgYW5vbnltaXplIHRoZSBmdW5jdGlvbi5cbiAgICAgIG5leHQuZG9uZSA9IHRydWU7XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIHZhbHVlcyhpdGVyYWJsZSkge1xuICAgIGlmIChpdGVyYWJsZSkge1xuICAgICAgdmFyIGl0ZXJhdG9yTWV0aG9kID0gaXRlcmFibGVbaXRlcmF0b3JTeW1ib2xdO1xuICAgICAgaWYgKGl0ZXJhdG9yTWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvck1ldGhvZC5jYWxsKGl0ZXJhYmxlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBpdGVyYWJsZS5uZXh0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhYmxlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzTmFOKGl0ZXJhYmxlLmxlbmd0aCkpIHtcbiAgICAgICAgdmFyIGkgPSAtMSwgbmV4dCA9IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgd2hpbGUgKCsraSA8IGl0ZXJhYmxlLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGhhc093bi5jYWxsKGl0ZXJhYmxlLCBpKSkge1xuICAgICAgICAgICAgICBuZXh0LnZhbHVlID0gaXRlcmFibGVbaV07XG4gICAgICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBuZXh0LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG5leHQuZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gbmV4dC5uZXh0ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gYW4gaXRlcmF0b3Igd2l0aCBubyB2YWx1ZXMuXG4gICAgcmV0dXJuIHsgbmV4dDogZG9uZVJlc3VsdCB9O1xuICB9XG4gIGV4cG9ydHMudmFsdWVzID0gdmFsdWVzO1xuXG4gIGZ1bmN0aW9uIGRvbmVSZXN1bHQoKSB7XG4gICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICB9XG5cbiAgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG5cbiAgICByZXNldDogZnVuY3Rpb24oc2tpcFRlbXBSZXNldCkge1xuICAgICAgdGhpcy5wcmV2ID0gMDtcbiAgICAgIHRoaXMubmV4dCA9IDA7XG4gICAgICAvLyBSZXNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG5cbiAgICAgIHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKHJlc2V0VHJ5RW50cnkpO1xuXG4gICAgICBpZiAoIXNraXBUZW1wUmVzZXQpIHtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzKSB7XG4gICAgICAgICAgLy8gTm90IHN1cmUgYWJvdXQgdGhlIG9wdGltYWwgb3JkZXIgb2YgdGhlc2UgY29uZGl0aW9uczpcbiAgICAgICAgICBpZiAobmFtZS5jaGFyQXQoMCkgPT09IFwidFwiICYmXG4gICAgICAgICAgICAgIGhhc093bi5jYWxsKHRoaXMsIG5hbWUpICYmXG4gICAgICAgICAgICAgICFpc05hTigrbmFtZS5zbGljZSgxKSkpIHtcbiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcblxuICAgICAgdmFyIHJvb3RFbnRyeSA9IHRoaXMudHJ5RW50cmllc1swXTtcbiAgICAgIHZhciByb290UmVjb3JkID0gcm9vdEVudHJ5LmNvbXBsZXRpb247XG4gICAgICBpZiAocm9vdFJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcm9vdFJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnJ2YWw7XG4gICAgfSxcblxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbihleGNlcHRpb24pIHtcbiAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXM7XG4gICAgICBmdW5jdGlvbiBoYW5kbGUobG9jLCBjYXVnaHQpIHtcbiAgICAgICAgcmVjb3JkLnR5cGUgPSBcInRocm93XCI7XG4gICAgICAgIHJlY29yZC5hcmcgPSBleGNlcHRpb247XG4gICAgICAgIGNvbnRleHQubmV4dCA9IGxvYztcblxuICAgICAgICBpZiAoY2F1Z2h0KSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRpc3BhdGNoZWQgZXhjZXB0aW9uIHdhcyBjYXVnaHQgYnkgYSBjYXRjaCBibG9jayxcbiAgICAgICAgICAvLyB0aGVuIGxldCB0aGF0IGNhdGNoIGJsb2NrIGhhbmRsZSB0aGUgZXhjZXB0aW9uIG5vcm1hbGx5LlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gISEgY2F1Z2h0O1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gXCJyb290XCIpIHtcbiAgICAgICAgICAvLyBFeGNlcHRpb24gdGhyb3duIG91dHNpZGUgb2YgYW55IHRyeSBibG9jayB0aGF0IGNvdWxkIGhhbmRsZVxuICAgICAgICAgIC8vIGl0LCBzbyBzZXQgdGhlIGNvbXBsZXRpb24gdmFsdWUgb2YgdGhlIGVudGlyZSBmdW5jdGlvbiB0b1xuICAgICAgICAgIC8vIHRocm93IHRoZSBleGNlcHRpb24uXG4gICAgICAgICAgcmV0dXJuIGhhbmRsZShcImVuZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGhhc0NhdGNoID0gaGFzT3duLmNhbGwoZW50cnksIFwiY2F0Y2hMb2NcIik7XG4gICAgICAgICAgdmFyIGhhc0ZpbmFsbHkgPSBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpO1xuXG4gICAgICAgICAgaWYgKGhhc0NhdGNoICYmIGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNDYXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIGlmIChoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmZpbmFsbHlMb2MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeSBzdGF0ZW1lbnQgd2l0aG91dCBjYXRjaCBvciBmaW5hbGx5XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhYnJ1cHQ6IGZ1bmN0aW9uKHR5cGUsIGFyZykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPD0gdGhpcy5wcmV2ICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbChlbnRyeSwgXCJmaW5hbGx5TG9jXCIpICYmXG4gICAgICAgICAgICB0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgdmFyIGZpbmFsbHlFbnRyeSA9IGVudHJ5O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkgJiZcbiAgICAgICAgICAodHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgIHR5cGUgPT09IFwiY29udGludWVcIikgJiZcbiAgICAgICAgICBmaW5hbGx5RW50cnkudHJ5TG9jIDw9IGFyZyAmJlxuICAgICAgICAgIGFyZyA8PSBmaW5hbGx5RW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAvLyBJZ25vcmUgdGhlIGZpbmFsbHkgZW50cnkgaWYgY29udHJvbCBpcyBub3QganVtcGluZyB0byBhXG4gICAgICAgIC8vIGxvY2F0aW9uIG91dHNpZGUgdGhlIHRyeS9jYXRjaCBibG9jay5cbiAgICAgICAgZmluYWxseUVudHJ5ID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlY29yZCA9IGZpbmFsbHlFbnRyeSA/IGZpbmFsbHlFbnRyeS5jb21wbGV0aW9uIDoge307XG4gICAgICByZWNvcmQudHlwZSA9IHR5cGU7XG4gICAgICByZWNvcmQuYXJnID0gYXJnO1xuXG4gICAgICBpZiAoZmluYWxseUVudHJ5KSB7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICAgIHRoaXMubmV4dCA9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jO1xuICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUocmVjb3JkKTtcbiAgICB9LFxuXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlY29yZCwgYWZ0ZXJMb2MpIHtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJlY29yZC5hcmc7XG4gICAgICB9XG5cbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiIHx8XG4gICAgICAgICAgcmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xuICAgICAgICB0aGlzLm5leHQgPSByZWNvcmQuYXJnO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICB0aGlzLnJ2YWwgPSB0aGlzLmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gXCJlbmRcIjtcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIgJiYgYWZ0ZXJMb2MpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gYWZ0ZXJMb2M7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH0sXG5cbiAgICBmaW5pc2g6IGZ1bmN0aW9uKGZpbmFsbHlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkuZmluYWxseUxvYyA9PT0gZmluYWxseUxvYykge1xuICAgICAgICAgIHRoaXMuY29tcGxldGUoZW50cnkuY29tcGxldGlvbiwgZW50cnkuYWZ0ZXJMb2MpO1xuICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIFwiY2F0Y2hcIjogZnVuY3Rpb24odHJ5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA9PT0gdHJ5TG9jKSB7XG4gICAgICAgICAgdmFyIHJlY29yZCA9IGVudHJ5LmNvbXBsZXRpb247XG4gICAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIHZhciB0aHJvd24gPSByZWNvcmQuYXJnO1xuICAgICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0aHJvd247XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGNvbnRleHQuY2F0Y2ggbWV0aG9kIG11c3Qgb25seSBiZSBjYWxsZWQgd2l0aCBhIGxvY2F0aW9uXG4gICAgICAvLyBhcmd1bWVudCB0aGF0IGNvcnJlc3BvbmRzIHRvIGEga25vd24gY2F0Y2ggYmxvY2suXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIik7XG4gICAgfSxcblxuICAgIGRlbGVnYXRlWWllbGQ6IGZ1bmN0aW9uKGl0ZXJhYmxlLCByZXN1bHROYW1lLCBuZXh0TG9jKSB7XG4gICAgICB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGl0ZXJhYmxlKSxcbiAgICAgICAgcmVzdWx0TmFtZTogcmVzdWx0TmFtZSxcbiAgICAgICAgbmV4dExvYzogbmV4dExvY1xuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAvLyBEZWxpYmVyYXRlbHkgZm9yZ2V0IHRoZSBsYXN0IHNlbnQgdmFsdWUgc28gdGhhdCB3ZSBkb24ndFxuICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzcyBpdCBvbiB0byB0aGUgZGVsZWdhdGUuXG4gICAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZVxuICAvLyBvciBub3QsIHJldHVybiB0aGUgcnVudGltZSBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gZGVjbGFyZSB0aGUgdmFyaWFibGVcbiAgLy8gcmVnZW5lcmF0b3JSdW50aW1lIGluIHRoZSBvdXRlciBzY29wZSwgd2hpY2ggYWxsb3dzIHRoaXMgbW9kdWxlIHRvIGJlXG4gIC8vIGluamVjdGVkIGVhc2lseSBieSBgYmluL3JlZ2VuZXJhdG9yIC0taW5jbHVkZS1ydW50aW1lIHNjcmlwdC5qc2AuXG4gIHJldHVybiBleHBvcnRzO1xuXG59KFxuICAvLyBJZiB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGUsIHVzZSBtb2R1bGUuZXhwb3J0c1xuICAvLyBhcyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIG5hbWVzcGFjZS4gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBlbXB0eVxuICAvLyBvYmplY3QuIEVpdGhlciB3YXksIHRoZSByZXN1bHRpbmcgb2JqZWN0IHdpbGwgYmUgdXNlZCB0byBpbml0aWFsaXplXG4gIC8vIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgdmFyaWFibGUgYXQgdGhlIHRvcCBvZiB0aGlzIGZpbGUuXG4gIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgPyBtb2R1bGUuZXhwb3J0cyA6IHt9XG4pKTtcblxudHJ5IHtcbiAgcmVnZW5lcmF0b3JSdW50aW1lID0gcnVudGltZTtcbn0gY2F0Y2ggKGFjY2lkZW50YWxTdHJpY3RNb2RlKSB7XG4gIC8vIFRoaXMgbW9kdWxlIHNob3VsZCBub3QgYmUgcnVubmluZyBpbiBzdHJpY3QgbW9kZSwgc28gdGhlIGFib3ZlXG4gIC8vIGFzc2lnbm1lbnQgc2hvdWxkIGFsd2F5cyB3b3JrIHVubGVzcyBzb21ldGhpbmcgaXMgbWlzY29uZmlndXJlZC4gSnVzdFxuICAvLyBpbiBjYXNlIHJ1bnRpbWUuanMgYWNjaWRlbnRhbGx5IHJ1bnMgaW4gc3RyaWN0IG1vZGUsIHdlIGNhbiBlc2NhcGVcbiAgLy8gc3RyaWN0IG1vZGUgdXNpbmcgYSBnbG9iYWwgRnVuY3Rpb24gY2FsbC4gVGhpcyBjb3VsZCBjb25jZWl2YWJseSBmYWlsXG4gIC8vIGlmIGEgQ29udGVudCBTZWN1cml0eSBQb2xpY3kgZm9yYmlkcyB1c2luZyBGdW5jdGlvbiwgYnV0IGluIHRoYXQgY2FzZVxuICAvLyB0aGUgcHJvcGVyIHNvbHV0aW9uIGlzIHRvIGZpeCB0aGUgYWNjaWRlbnRhbCBzdHJpY3QgbW9kZSBwcm9ibGVtLiBJZlxuICAvLyB5b3UndmUgbWlzY29uZmlndXJlZCB5b3VyIGJ1bmRsZXIgdG8gZm9yY2Ugc3RyaWN0IG1vZGUgYW5kIGFwcGxpZWQgYVxuICAvLyBDU1AgdG8gZm9yYmlkIEZ1bmN0aW9uLCBhbmQgeW91J3JlIG5vdCB3aWxsaW5nIHRvIGZpeCBlaXRoZXIgb2YgdGhvc2VcbiAgLy8gcHJvYmxlbXMsIHBsZWFzZSBkZXRhaWwgeW91ciB1bmlxdWUgcHJlZGljYW1lbnQgaW4gYSBHaXRIdWIgaXNzdWUuXG4gIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzQ1N19fOyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNTQ1X187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX185NDlfXzsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHRpZihfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdKSB7XG5cdFx0cmV0dXJuIF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0uZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Mik7XG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiBtb2R1bGVbJ2RlZmF1bHQnXSA6XG5cdFx0KCkgPT4gbW9kdWxlO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkiXSwic291cmNlUm9vdCI6IiJ9